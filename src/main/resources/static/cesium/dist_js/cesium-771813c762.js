function Peer(e){var n=this;Object.keys(e).forEach(function(t){n[t]=e[t]}),n.endpoints=n.endpoints||[],n.statusTS=n.statusTS||0}function Block(e,n){"use strict";var t=this;n&&n.length?_.forEach(n,function(n){t[n]=e[n]}):["currency","issuer","medianTime","number","version","powMin","dividend","membersCount","hash","identities","joiners","actives","leavers","revoked","excluded","certifications","transactions","unitbase"].forEach(function(n){t[n]=e[n]}),t.identitiesCount=t.identities?t.identities.length:0,t.joinersCount=t.joiners?t.joiners.length:0,t.activesCount=t.actives?t.actives.length:0,t.leaversCount=t.leavers?t.leavers.length:0,t.revokedCount=t.revoked?t.revoked.length:0,t.excludedCount=t.excluded?t.excluded.length:0,t.certificationsCount=t.certifications?t.certifications.length:0,t.transactionsCount=t.transactions?t.transactions.length:0,t.empty=t.isEmpty()}function exact(e){return new RegExp("^"+e+"$")}function Ws2pMessage(e){var n=this,t=e.split(":");if(t.length<3||!t[0].startsWith("WS2P"))throw Error("Invalid format: "+e);if("HEAD"==t[1]){if(t.length<4)throw Error("Invalid format: "+e);if(4==t.length)n.pubkey=t[2],n.buid=t[3];else{var i=t[2];if(i>=1){var a=t[0];if(a.length>4){var o=this.regexp.WS2P_PREFIX.exec(a);if(!o)throw Error("Invalid format: "+e);var r=o[1];if(r){n["private"]={useTor:r.startsWith("T")};var s=r.substring(1);"A"==s?n["private"].mode="all":"M"==s?n["private"].mode="mixed":"S"==s&&(n["private"].mode="strict")}var l=o[2];l&&(n["public"]={useTor:l.startsWith("T"),mode:"all"})}n.pubkey=t[3],n.buid=t[4],n.ws2pid=t[5],n.sotfware=t[6],n.version=t[7],n.powPrefix=t[8]}}}}function PluginExtensionPointController(e,n){"ngInject";e.extensionPoint=n.extensions.points.current.get()}function AppController(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E,g,b){"ngInject";e.search={},e.login=p.isLogin(),e.auth=p.isAuth(),e.motion=u.motion["default"],e.showHome=function(){return r.nextViewOptions({historyRoot:!0}),t.go("app.home").then(u.loading.hide)},e.scanQrCodeAndGo=function(){m.barcode.enable&&m.barcode.scan().then(function(e){e&&d.uri.parse(e).then(function(e){e&&e.pubkey?t.go("app.wot_identity",{pubkey:e.pubkey,node:e.host?e.host:null}):u.alert.error(e,"ERROR.SCAN_UNKNOWN_FORMAT")})["catch"](u.onError("ERROR.SCAN_UNKNOWN_FORMAT"))})["catch"](u.onError("ERROR.SCAN_FAILED"))},e.createHelptipScope=function(t,i){if(t||!n.tour&&n.settings.helptip.enable&&!u.screen.isSmall()){var a=e.$new();return s(i||"HelpTipCtrl",{$scope:a}),a}},e.startHelpTour=function(t,i){if(n.tour=!0,!i)return r.clearHistory(),r.clearCache().then(function(){e.startHelpTour(t,!0)});var a=e.createHelptipScope(!0,t);return a.startHelpTour().then(function(){a.$destroy(),delete n.tour})["catch"](function(e){delete n.tour})},e.isLogin=function(){return e.login},e.showProfilePopover=function(n){return u.popover.show(n,{templateUrl:"templates/common/popover_profile.html",scope:e,autoremove:!0,afterShow:function(n){e.profilePopover=n,o(function(){u.ink({selector:"#profile-popover .ink, #profile-popover .ink-dark"})},100)}})},e.closeProfilePopover=function(){e.profilePopover&&e.profilePopover.isShown()&&o(function(){e.profilePopover.hide()})},e.loadWalletData=function(e){return p.loadData(e).then(function(e){if(e)return n.walletData=e,e;throw"CANCELLED"})},e.loadWallet=function(n){return c.isStarted()?(n=n||{},n.auth&&!p.isAuth()?p.auth(n).then(function(e){if(e)return e;throw"CANCELLED"}):p.isLogin()?p.isDataLoaded(n)?a.when(p.data):e.loadWalletData(n):p.login(n).then(function(e){if(e)return e;throw"CANCELLED"})):c.ready().then(function(){return e.loadWallet(n)})},e.loginAndGo=function(n,i){if(e.closeProfilePopover(),n=n||"app.view_wallet",p.isLogin())return t.go(n,i);if(g.httpsMode&&l.location&&"https:"!==l.location.protocol){var a=l.location.href,o=a.indexOf("#"),r=o!=-1?a.substr(0,o):a;if(r="https"+r.substr(4),a=r+t.href(n),!g.httpsModeDebug)return void(l.location.href=a);console.debug("[httpsMode] --- Should redirect to: "+a)}return p.login(i).then(function(){return t.go(n,i)}).then(u.loading.hide)},e.logout=function(n){return n=n||{},!n.force&&e.profilePopover?e.profilePopover.hide().then(function(){return n.force=!0,e.logout(n)}):n.askConfirm?u.alert.confirm("CONFIRM.LOGOUT").then(function(t){if(t)return n.askConfirm=!1,e.logout(n)}):(u.loading.show(),p.logout().then(function(){return i.isOpenLeft()&&i.toggleLeft(),r.clearHistory(),r.clearCache().then(function(){return e.showHome()})})["catch"](u.onError()))},e.doAuth=function(){return e.loadWallet({auth:!0}).then(function(){u.loading.hide()})},e.isUserPubkey=function(e){return p.isUserPubkey(e)},p.api.data.on.login(e,function(t,i){return e.login=!0,n.walletData=t||{},i?i.resolve():a.when()}),p.api.data.on.logout(e,function(){e.login=!1,n.walletData={}}),p.api.data.on.auth(e,function(n,t){return t=t||a.defer(),e.auth=!0,t.resolve(),t.promise}),p.api.data.on.unauth(e,function(){e.auth=!1}),e.showTransferModal=function(e){return E.showTransfer(e)},e.showAboutModal=function(){return E.showAbout()},e.showJoinModal=function(){return e.closeProfilePopover(),E.showJoin()},e.showSettings=function(){return e.closeProfilePopover(),t.go("app.settings")},e.showHelpModal=function(e){return E.showHelp(e)},e.showNodeListPopover=function(n){return u.popover.show(n,{templateUrl:"templates/network/popover_peer_info.html",autoremove:!0,scope:e.$new(!0)})},e.openLink=function(e,n,t){return t=t||{},t.onError=function(){return u.popover.copy(e,n)},e.stopPropagation(),b.uri.open(n,t)},e.showFab=function(e,n){u.motion.toggleOn({selector:"#"+e+".button-fab"},n)},e.hideFab=function(e,n){u.motion.toggleOff({selector:"#"+e+".button-fab"},n)},e.doMotion=function(n){return e.motion.show(n)}}function HomeController(e,n,t,i,a,o){"ngInject";e.loading=!0,e.enter=function(t,r){r&&r.stateParams&&r.stateParams.error?(e.error=r.stateParams.error,e.node=o.data.node,e.loading=!1,i.nextViewOptions({disableAnimate:!0,disableBack:!0,historyRoot:!0}),n.go("app.home",{error:void 0},{reload:!1,inherit:!0,notify:!1})):a.ready().then(function(){e.loading=!1})["catch"](function(n){e.node=o.data.node,e.loading=!1,e.error=n})},e.$on("$ionicView.enter",e.enter),e.reload=function(){e.loading=!0,delete e.error,t(e.enter,200)},e.doQuickFix=function(e){"settings"==e&&(i.nextViewOptions({historyRoot:!0}),n.go("app.settings"))}}function JoinController(e,n){"ngInject";e(function(){n.showJoin()},100)}function JoinChooseAccountTypeModalController(e,n,t,i,a){"ngInject";e.formData={},e.slides={slider:null,options:{loop:!1,effect:"slide",speed:500}},e.loading=!0,e.load=function(){if(e.loading)return a.get().then(function(n){n&&(e.currency=n,e.formData.currency=n.name,e.loading=!1)})["catch"](i.onError("ERROR.GET_CURRENCY_FAILED"))},e.$on("modal.shown",e.load),e.$on("$ionicSlides.sliderInitialized",function(e,n){n.slider.lockSwipes()}),e.slidePrev=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slidePrev(),e.slides.slider.lockSwipes()},e.slideNext=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slideNext(),e.slides.slider.lockSwipes()},e.selectAccountTypeAndClose=function(n){e.formData.accountType=n,e.closeModal(e.formData)},e.doQuickFix=function(t){"settings"==t&&(e.closeModal(),n.go("app.settings"))},e.showHelpModal=function(e){t.showHelp({anchor:e})}}function JoinModalController(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";e.formData={pseudo:""},e.slides={slider:null,options:{loop:!1,effect:"slide",speed:500}},e.slideBehavior={},e.loading=!0,e.isLicenseRead=a.isIOS(),e.showUsername=!1,e.showPassword=!1,e.formData.computing=!1,e.smallscreen=o.screen.isSmall(),e.userIdPattern=u.constants.regex.USER_ID,e.currency=d.currency,e.accountType=d.accountType||"member",e.load=function(){e.loading&&("member"==e.accountType&&(e.licenseFileUrl=s.getLicenseUrl(),e.licenseFileUrl&&(".txt"!=e.licenseFileUrl.substring(e.licenseFileUrl.length-3)&&(e.licenseFileUrl=e.licenseFileUrl+".html"),e.isLicenseRead||i(function(){e.isLicenseRead||(e.isLicenseRead=!0)},5e3))),e.slideBehavior=e.computeSlideBehavior(),e.loading=!1)},e.$on("modal.shown",e.load),e.$on("$ionicSlides.sliderInitialized",function(e,n){n.slider.lockSwipes()}),e.slidePrev=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slidePrev(),e.slides.slider.lockSwipes()},e.slideNext=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slideNext(),e.slides.slider.lockSwipes()},e.showAccountPubkey=function(){e.formData.computing=!0,r.scryptKeypair(e.formData.username,e.formData.password).then(function(n){e.formData.pubkey=r.util.encode_base58(n.signPk),e.formData.computing=!1,e.checkAccountAvailable()})["catch"](function(n){e.formData.computing=!1,e.formData.pubkey=void 0,o.onError("ERROR.CRYPTO_UNKNOWN_ERROR")(n)})},e.formDataChanged=function(){e.formData.computing=!1,e.formData.pubkey=null},e.getCurrentFormName=function(){var n=e.slides.slider.activeIndex;if("member"===e.accountType){if(n+=e.licenseFileUrl?0:1,0===n)return"licenseForm";if(1===n)return"pseudoForm";if(2===n)return"saltForm";if(3===n)return"passwordForm";if(4===n)return"confirmForm"}else{if(0===n)return"saltForm";if(1===n)return"passwordForm";if(2===n)return"confirmForm"}},e.computeSlideBehavior=function(){var n,t=e.getCurrentFormName();return n="licenseForm"==t?{hasPreviousButton:!1,hasNextButton:!1,hasAcceptButton:!0}:"pseudoForm"==t?{helpAnchor:"join-pseudo",hasPreviousButton:e.licenseFileUrl&&!0,hasNextButton:!0,focus:"pseudo"}:"saltForm"==t?{helpAnchor:"join-salt",hasPreviousButton:!0,hasNextButton:!0,focus:"salt"}:"passwordForm"==t?{helpAnchor:"join-password",hasPreviousButton:!0,hasNextButton:!0,focus:"password"}:"confirmForm"==t?{hasPreviousButton:!0,hasNextButton:!1,hasSendButton:!0,helpAnchor:"join-pubkey"}:{hasPreviousButton:!1,hasNextButton:!0}},e.doNext=function(){var n=e.getCurrentFormName();if(n&&e[n]){if(e[n].$submitted=!0,!e[n].$valid)return;if("pseudoForm"===n&&e.uiAlreadyUsed)return;"passwordForm"===n&&e.showAccountPubkey()}e.slideNext(),e.slideBehavior=e.computeSlideBehavior()},e.doNewAccount=function(t){if(!t){var a="member"===e.accountType?"ACCOUNT.NEW.CONFIRMATION_MEMBER_ACCOUNT":"ACCOUNT.NEW.CONFIRMATION_WALLET_ACCOUNT";return o.alert.confirm(a,void 0,{cssClass:"warning",okText:"member"==e.accountType?"COMMON.BTN_SEND":"COMMON.BTN_CONTINUE",okType:"button-assertive"}).then(function(n){n&&e.doNewAccount(!0)})}var r=function(e){return function(n){c.logout().then(function(){o.onError(e)(n)})}};return o.loading.show(),c.login({auth:!0,isNew:!0,method:"SCRYPT_DEFAULT",expectedPubkey:e.formData.pubkey,showMethods:!1}).then(function(){return"member"===e.accountType?(e.closeModal(),s.data.wallet=s.data.wallet||{},s.data.wallet.alertIfUnusedWallet=!1,c.self(e.formData.pseudo,!1).then(function(){c.membership.inside().then(function(){e.closeModal(),n.go("app.view_wallet").then(function(){return i(e.downloadRevocationRegistration,2e3)})})["catch"](function(e){e&&e.ucode!=u.errorCodes.MEMBERSHIP_ALREADY_SEND||r("ERROR.SEND_MEMBERSHIP_IN_FAILED")(e)})})["catch"](r("ERROR.SEND_IDENTITY_FAILED"))):(e.closeModal(),void n.go("app.view_wallet"))})["catch"](function(e){o.loading.hide(),console.error(">>>>>>>",e),o.alert.error("ERROR.CRYPTO_UNKNOWN_ERROR")})},e.downloadRevocationRegistration=function(){return o.alert.confirm("DOWNLOAD.POPUP_REVOKE_MESSAGE","DOWNLOAD.POPUP_TITLE",{cssClass:"warning",okText:"COMMON.BTN_DOWNLOAD",okType:"button-assertive",cancelText:"COMMON.BTN_LATER"}).then(function(e){if(e)return c.downloadRevocation()})},e.showHelpModal=function(e){l.showHelp({anchor:e})},e.startListenLicenseBottom=function(){var n=angular.element(document.querySelector(".modal #iframe-license"));return n=n&&n.length?n[0]:void 0,n&&n.contentWindow?void(e.licenseBottomInterval=t(function(){var t=n.contentWindow.document.body.scrollTop,i=n.contentWindow.document.body.scrollHeight,a=n.contentWindow.document.body.clientHeight,o=i-a===t;o&&(e.isLicenseRead=!0,e.stopListenLicenseBottom())},1e3)):(console.debug("[join] Waiting license frame to be load..."),i(e.startListenLicenseBottom,1e3))},e.stopListenLicenseBottom=function(){e.licenseBottomInterval&&(t.cancel(e.licenseBottomInterval),delete e.licenseBottomInterval)},e.$on("modal.hidden",e.stopListenLicenseBottom),e.checkUid=function(){if(!e.formData.pseudo||e.formData.pseudo.length<3)return e.formData.computing=!1,void delete e.uiAlreadyUsed;var n=e.formData.pseudo.toUpperCase();e.formData.computing=!0,u.wot.lookup({search:n}).then(function(t){e.uiAlreadyUsed=(t.results||[]).some(function(e){return(e.uids||[]).some(function(e){return e.uid.toUpperCase()===n})}),e.formData.computing=!1})["catch"](function(n){console.error(n),e.formData.computing=!1,e.uiAlreadyUsed=!1})},e.$watch("formData.pseudo",e.checkUid,!0),e.checkAccountAvailable=function(){delete e.accountAvailable,u.tx.sources({pubkey:e.formData.pubkey}).then(function(n){n.sources.length?(e.formData.computing=!1,e.accountAvailable=!1):(e.formData.computing=!1,e.accountAvailable=!0)})["catch"](function(n){console.error(n),e.formData.computing=!1,e.accountAvailable=!1})},e.identifierRecovery=function(){for(var n=0;n<2;n++)e.slidePrev()}}function LoginModalController(e,n,t,i,a,o,r,s,l,c,u){"ngInject";u=u||{},e.computing=!1,e.pubkey=null,e.formData={},e.showPubkey=!1,e.showComputePubkeyButton=!1,e.autoComputePubkey=!1,e.pubkeyPattern="^"+r.constants.regexp.PUBKEY+"$",e.isAuth=u.auth,e.showMethods=!angular.isDefined(u.showMethods)||u.showMethods,e.expectedPubkey=u.expectedPubkey,e.scryptParamsValues=_.keys(a.constants.SCRYPT_PARAMS).reduce(function(e,n){return e.concat({id:n,label:"LOGIN.SCRYPT."+n,params:a.constants.SCRYPT_PARAMS[n]})},[{id:"USER",label:"LOGIN.SCRYPT.USER",params:{}}]),e.init=function(){e.autoComputePubkey="a"===ionic.Platform.grade.toLowerCase()&&!o.screen.isSmall(),e.formData.rememberMe=l.data.rememberMe,e.formData.keepAuthIdle=l.data.keepAuthIdle,e.formData.keepAuth=e.formData.keepAuthIdle==l.constants.KEEP_AUTH_IDLE_SESSION;var n=u.method||l.data.login&&l.data.login.method||"SCRYPT_DEFAULT",t=l.data.login&&l.data.login.params;e.isAuth&&"PUBKEY"==n&&(n="SCRYPT_DEFAULT"),e.changeMethod(n,t)},e.enter=function(){o.loading.hide(),o.ink({selector:".modal-login .ink"})},e.$on("modal.shown",e.enter),e.leave=function(){e.formData={},e.computing=!1,e.pubkey=null,e.methods=[]},e.$on("modal.hide",e.leave),e.doLogin=function(){if(e.form.$valid){var i,r=e.formData.method,s=e.formData.keepAuthIdle;if("SCRYPT_DEFAULT"===r||"SCRYPT_ADVANCED"===r){if(!e.formData.username||!e.formData.password)return;var c=e.formData.scrypt&&e.formData.scrypt.params;o.loading.show(),i=a.scryptKeypair(e.formData.username,e.formData.password,c).then(function(n){if(!n)return o.loading.hide(10);var t=a.util.encode_base58(n.signPk);return u.expectedPubkey&&u.expectedPubkey!=t?(e.pubkey=t,e.showPubkey=!0,e.pubkeyError=!0,o.loading.hide(10)):(e.pubkeyError=!1,{pubkey:t,keypair:n,params:e.formData.scrypt&&"SCRYPT_DEFAULT"!=e.formData.scrypt.id?c:void 0})})["catch"](o.onError("ERROR.CRYPTO_UNKNOWN_ERROR"))}else if("FILE"===r){if(!e.formData.file||!e.formData.file.valid||!e.formData.file.pubkey)return;s=e.formData.keepAuth&&l.constants.KEEP_AUTH_IDLE_SESSION||s,o.loading.show(),i=a.readKeyFile(e.formData.file,e.isAuth||e.formData.keepAuth).then(function(n){if(!n)return o.loading.hide(10);var t=a.util.encode_base58(n.signPk);return u.expectedPubkey&&u.expectedPubkey!=t?(e.formData.file.valid=!1,o.loading.hide(10)):(e.pubkeyError=!1,{pubkey:t,keypair:n})})["catch"](o.onError("ERROR.AUTH_FILE_ERROR"))}else if("PUBKEY"===r){if(!e.formData.pubkey)return;i=t.when({pubkey:e.formData.pubkey})}return i?i.then(function(t){if(t){var i=!angular.equals(l.data.rememberMe,e.formData.rememberMe),a=!angular.equals(l.data.keepAuthIdle,s),c=!angular.equals(l.data.login&&l.data.login.method,r),d=!angular.equals(l.data.login&&l.data.login.params,t.params);return(i||a||c||d)&&(l.data.rememberMe=e.formData.rememberMe,l.data.keepAuthIdle=s,l.data.useLocalStorage=!!l.data.rememberMe||l.data.useLocalStorage,l.data.login=l.data.login||{},l.data.login.method=r,l.data.login.params=t.params,n(l.store,500)),u.success&&u.success(e.formData),u.silent&&o.loading.hide(),e.closeModal(t)}}):void console.warn("[login] unknown method: ",r)}},e.onScryptFormChanged=function(){e.computing||(e.pubkey=null,e.pubkeyError=!1,e.showPubkey=!!e.formData.username&&!!e.formData.password,e.autoComputePubkey&&e.showPubkey?(e.computePubkey(),e.showComputePubkeyButton=!1):e.showComputePubkeyButton=!e.autoComputePubkey&&e.showPubkey)},e.$watch("formData.username + formData.password",e.onScryptFormChanged,!0),e.computePubkey=function(){return e.showComputePubkeyButton=!1,e.computing=!0,e.pubkey=null,n(function(){var n=e.formData.username,t=e.formData.password,i=e.formData.scrypt&&e.formData.scrypt.params;return a.scryptSignPk(n,t,i).then(function(i){return n!==e.formData.username||t!==e.formData.password?e.computePubkey():(e.pubkey=a.util.encode_base58(i),e.expectedPubkey&&e.expectedPubkey!=e.pubkey&&(e.pubkeyError=!0),void(e.computing=!1))})["catch"](function(n){o.onError("ERROR.CRYPTO_UNKNOWN_ERROR")(n),e.computing=!1,e.onScryptFormChanged()})},100)},e.showJoinModal=function(){e.closeModal(),n(function(){s.showJoin()},300)},e.showAccountSecurityModal=function(){e.closeModal(),n(function(){s.showAccountSecurity()},300)},e.showHelpModal=function(e){return s.showHelp(e)},e.changeMethod=function(n,t){if(e.hideMethodsPopover(),n!=e.formData.method)if(console.debug("[login] method is: "+n),e.formData.method=n,e.form&&delete e.form.$submitted,"SCRYPT_DEFAULT"==n||"SCRYPT_ADVANCED"==n){var i;t?(i=_.find(e.scryptParamsValues,function(e){return e.params&&angular.equals(e.params,t)}),i||(i=_.findWhere(e.scryptParamsValues,{id:"USER"})||{},i.params=t)):i=_.findWhere(e.scryptParamsValues,{id:"DEFAULT"}),e.changeScrypt(i),e.autoComputePubkey=e.autoComputePubkey&&"SCRYPT_DEFAULT"==n}else e.formData.username=null,e.formData.password=null,e.formData.pubkey=null,e.formData.computing=!1},e.changeScrypt=function(n){e.formData.scrypt=angular.copy(n||{}),e.onScryptFormChanged()},e.fileChanged=function(t){return e.validatingFile=!0,e.formData.file=t&&t.target&&t.target.files&&t.target.files.length&&t.target.files[0],e.formData.file?void n(function(){return console.debug("[login] key file changed: ",e.formData.file),e.validatingFile=!0,a.readKeyFile(e.formData.file,!1).then(function(n){n&&n.signPk?(e.formData.file.pubkey=a.util.encode_base58(n.signPk),e.formData.file.valid=!e.expectedPubkey||e.expectedPubkey==e.formData.file.pubkey,e.validatingFile=!1):(e.formData.file.valid=!1,e.formData.file.pubkey=void 0)})["catch"](function(n){e.validatingFile=!1,e.formData.file.valid=!1,e.formData.file.pubkey=void 0,o.onError("ERROR.AUTH_FILE_ERROR")(n)})}):void(e.validatingFile=!1)},e.onKeyFileDrop=function(n){if(n&&n.fileData)return e.formData.file={name:n.fileData.name,size:n.fileData.size,content:n.fileContent},a.readKeyFile(e.formData.file,!1).then(function(n){n&&n.signPk?(e.formData.file.pubkey=a.util.encode_base58(n.signPk),e.formData.file.valid=!e.expectedPubkey||e.expectedPubkey==e.formData.file.pubkey,e.validatingFile=!1):(e.formData.file.valid=!1,e.formData.file.pubkey=void 0)})["catch"](function(n){e.validatingFile=!1,e.formData.file.valid=!1,e.formData.file.pubkey=void 0,o.onError("ERROR.AUTH_FILE_ERROR")(n)})},e.removeKeyFile=function(){e.formData.file=void 0},e.showWotLookupModal=function(){return s.showWotLookup().then(function(n){n&&n.pubkey&&(e.formData.pubkey=n.pubkey)})},e.showMethodsPopover=function(n){n.defaultPrevented||(e.methodsPopover?e.methodsPopover.show(n):i.fromTemplateUrl("templates/login/popover_methods.html",{scope:e}).then(function(t){e.methodsPopover=t,e.$on("$destroy",function(){e.methodsPopover.remove()}),e.methodsPopover.show(n).then(function(){o.ink({selector:".popover-login-methods .item"})})}))},e.hideMethodsPopover=function(){e.methodsPopover&&e.methodsPopover.hide()},e.init()}function AuthController(e,n){angular.extend(this,n("LoginModalCtrl",{$scope:e,parameters:{auth:!0}})),e.setForm=function(n){e.form=n}}function HelpController(e,n,t,i,a){"ngInject";e.$on("$ionicView.enter",function(o){e.locale=a.data.locale.id,n.stateParams&&n.stateParams.anchor&&(e.anchor=n.stateParams.anchor,t(function(){i(n.stateParams.anchor)},100))})}function HelpModalController(e,n,t,i,a){"ngInject";e.itemsClass={},e.locale=i.data.locale.id,a=a||{},a&&"string"==typeof a&&(a={anchor:a}),a.anchor&&(n(function(){t(a.anchor)},100),e.itemsClass={},e.itemsClass[a.anchor]="selected",e.listClass="selection")}function HelpTipController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){e.tour=!1,e["continue"]=!0,e.executeStep=function(n,t,i){if(i=angular.isDefined(i)?i:0,i>=t.length)return o.when(!0);var a=t[i];if("function"!=typeof a)throw new Error("[helptip] Invalid step at index {0} of '{1}' tour: step must be a function".format(i,n));var r=a();return"boolean"==typeof r&&(r=o.when(r)),r.then(function(a){return angular.isUndefined(a)?(e["continue"]=!1,i):a&&i!==t.length-1?e.executeStep(n,t,i+1):a?-1:i+1})["catch"](function(t){return t&&"transition prevented"==t.message?console.error("ERROR: in help tour [{0}], in step [{1}] -> use large if exists, to prevent [transition prevented] error".format(n,i)):console.error("ERROR: in help tour  [{0}], in step [{1}] : {2}".format(n,i,t)),e["continue"]=!1,i})},e.showHelpTip=function(n,t){return t=t||{},t.bindings=t.bindings||{},t.bindings.value=t.bindings.value||"",t.bindings.hasNext=!angular.isDefined(t.bindings.hasNext)||t.bindings.hasNext,t.timeout=t.timeout||(p.enable?900:500),t.autoremove=!0,t.bindings.tour=e.tour,t.backdropClickToClose=!e.tour,s.popover.helptip(n,t)},e.showHelpModal=function(e){Modals.showHelp({anchor:e})},e.startHelpTour=function(){return e.tour=!0,e["continue"]=!0,e.startCurrencyTour(0,!0).then(function(n){return!(!n||e.cancelled)&&(c.data.helptip.currency=n,c.store(),e["continue"])}).then(function(n){return!!n&&e.startNetworkTour(0,!0).then(function(n){return!(!n||e.cancelled)&&(c.data.helptip.network=n,c.store(),e["continue"])})}).then(function(n){return!!n&&e.startWotLookupTour(0,!0).then(function(n){return!(!n||e.cancelled)&&(c.data.helptip.wotLookup=n,c.store(),e["continue"])})}).then(function(n){return!!n&&e.startWotTour(0,!0).then(function(n){return!(!n||e.cancelled)&&(c.data.helptip.wot=n,c.store(),e["continue"])})}).then(function(n){return!!n&&e.startWotCertTour(0,!0).then(function(n){return!!n&&(c.data.helptip.wotCerts=n,c.store(),e["continue"])})}).then(function(n){return!!n&&e.startWalletNoLoginTour(0,!0)}).then(function(n){return!!n&&(!m.isLogin()||e.startWalletTour(0,!0).then(function(n){return!!n&&(c.data.helptip.wallet=n,c.store(),e["continue"])}))}).then(function(n){return!!n&&(!m.isLogin()||e.startWalletCertTour(0,!0).then(function(n){return!!n&&(c.data.helptip.walletCerts=n,c.store(),e["continue"])}))}).then(function(n){return!!n&&(!m.isLogin()||e.startTxTour(0,!0).then(function(n){return!!n&&(c.data.helptip.tx=n,c.store(),e["continue"])}))}).then(function(n){return!!n&&e.startHeaderTour(0,!0)}).then(function(n){return!!n&&e.startSettingsTour(0,!0)}).then(function(n){return!!n&&e.finishTour()})},e.startCurrencyTour=function(t,a){var o,l=function(){n.is("app.currency.tab_parameters")&&n.go("app.currency.tab_wot")},d=[function(){return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-currency",{bindings:{content:"HELP.TIP.MENU_BTN_CURRENCY",icon:{position:"left"}}})},function(){return i.isOpen()&&i.toggleLeft(!1),n.go(s.screen.isSmall()?"app.currency":"app.currency_lg").then(function(){return e.showHelpTip("helptip-currency-mass-member",{bindings:{content:"HELP.TIP.CURRENCY_MASS",icon:{position:"center"}}})})},function(){return!c.data.useRelative||e.showHelpTip("helptip-currency-mass-member-unit",{bindings:{content:"HELP.TIP.CURRENCY_UNIT_RELATIVE",contentParams:o,icon:{position:s.screen.isSmall()?"right":"center"}}})},function(){return r("helptip-currency-rules-anchor"),e.showHelpTip("helptip-currency-rules",{bindings:{content:"HELP.TIP.CURRENCY_RULES",icon:{position:"center",glyph:"ion-information-circled"}}})},function(){return l(),r("helptip-currency-newcomers-anchor"),e.showHelpTip("helptip-currency-newcomers",{bindings:{content:"HELP.TIP.CURRENCY_WOT",icon:{position:"center"},hasNext:a},timeout:1200})}];return u.get().then(function(n){return o=n.parameters,e.executeStep("currency",d,t)})},e.startNetworkTour=function(o,r){var d,p=function(){n.is("app.currency")&&a(function(){var e=t.document.querySelectorAll("ion-tabs .tabs a");e&&3==e.length&&angular.element(e[2]).triggerHandler("click")},100)},m=[function(){return!!s.screen.isSmall()||(i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-network",{bindings:{content:"HELP.TIP.MENU_BTN_NETWORK",icon:{position:"left"}}}))},function(){return i.isOpen()&&i.toggleLeft(!1),n.go(s.screen.isSmall()?"app.currency.tab_network":"app.network").then(function(){return p(),e.showHelpTip("helptip-network-peers",{bindings:{content:"HELP.TIP.NETWORK_BLOCKCHAIN",icon:{position:"center",glyph:"ion-information-circled"}},timeout:1200})})},function(){return p(),e.showHelpTip("helptip-network-peer-0",{bindings:{content:"HELP.TIP.NETWORK_PEERS",icon:{position:s.screen.isSmall()?void 0:"center"}},timeout:1e3,retry:20})},function(){return p(),e.showHelpTip("helptip-network-peer-0-block",{bindings:{content:"HELP.TIP.NETWORK_PEERS_BLOCK_NUMBER",icon:{position:s.screen.isSmall()?void 0:"center"}}})},function(){p();var n=c.data.locale.id;return e.showHelpTip("helptip-network-peers",{bindings:{content:"HELP.TIP.NETWORK_PEERS_PARTICIPATE",contentParams:{installDocUrl:l.helptip&&l.helptip.installDocUrl?l.helptip.installDocUrl[n]?l.helptip.installDocUrl[n]:l.helptip.installDocUrl:"http://duniter.org"},icon:{position:"center",glyph:"ion-information-circled"},hasNext:r}})}];return u.parameters().then(function(n){return d=n,e.executeStep("network",m,o)})},e.startWotLookupTour=function(o,r){var l=[function(){return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-wot",{bindings:{content:"HELP.TIP.MENU_BTN_WOT",icon:{position:"left"}},onError:"continue"})},function(){return i.isOpen()&&i.toggleLeft(!1),n.go(s.screen.isSmall()?"app.wot_lookup.tab_search":"app.wot_lookup_lg").then(function(){return e.showHelpTip("helptip-wot-search-text",{bindings:{content:s.screen.isSmall()?"HELP.TIP.WOT_SEARCH_TEXT_XS":"HELP.TIP.WOT_SEARCH_TEXT",icon:{position:"center"}}})})},function(){return e.showHelpTip("helptip-wot-search-result-0",{bindings:{content:"HELP.TIP.WOT_SEARCH_RESULT",icon:{position:"center"}},timeout:700,retry:15})},function(){var n=t.document.getElementById("helptip-wot-search-result-0");return!n||(a(function(){angular.element(n).triggerHandler("click")}),e.showHelpTip("helptip-wot-view-certifications",{bindings:{content:"HELP.TIP.WOT_VIEW_CERTIFICATIONS",hasNext:r},timeout:2500}))}];return e.executeStep("wotLookup",l,o)},e.startWotTour=function(n,t){var i,a=[function(){return e.showHelpTip("helptip-wot-view-certifications",{bindings:{content:"HELP.TIP.WOT_VIEW_CERTIFICATIONS_COUNT",contentParams:i,icon:{position:"center",glyph:"ion-information-circled"}}})},function(){return e.showHelpTip("helptip-wot-view-certifications-count",{bindings:{content:"HELP.TIP.WOT_VIEW_CERTIFICATIONS_CLICK",icon:{position:"center"},hasNext:t}})}];return u.get().then(function(t){return i=t.parameters,i.currentUD=t.currentUD,e.executeStep("wot",a,n)})},e.startWotCertTour=function(i,o){var r=[function(){if(n.is("app.wot_identity")){var i=t.document.getElementById("helptip-wot-view-certifications");if(!i)return!0;a(function(){angular.element(i).triggerHandler("click")})}return e.showHelpTip(s.screen.isSmall()?"fab-certify":"helptip-certs-certify",{bindings:{content:"HELP.TIP.WOT_VIEW_CERTIFY",icon:{position:s.screen.isSmall()?"bottom-right":"center"}},timeout:s.screen.isSmall()?2e3:1e3,retry:10})},function(){return e.showHelpTip(s.screen.isSmall()?"fab-certify":"helptip-certs-certify",{bindings:{content:"HELP.TIP.CERTIFY_RULES",icon:{position:"center",glyph:"ion-alert-circled"},hasNext:o}})}];return e.executeStep("certs",r,i)},e.startWalletNoLoginTour=function(n,t){if(m.isLogin())return o.when(!0);var a=[function(){return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-account",{bindings:{content:"HELP.TIP.MENU_BTN_ACCOUNT",icon:{position:"left"},hasNext:t}})}];return e.executeStep("wallet-no-login",a,n)},e.startWalletTour=function(t,a){if(!m.isLogin())return o.when(!0);var l,c=m.data.isMember||m.data.requirements&&m.data.requirements.pendingMembership,p=[function(){return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-account",{bindings:{content:m.data.isMember?"HELP.TIP.MENU_BTN_ACCOUNT_MEMBER":"HELP.TIP.MENU_BTN_ACCOUNT",icon:{position:"left"}}})},function(){return i.isOpen()&&i.toggleLeft(!1),n.go("app.view_wallet").then(function(){return e.showHelpTip(s.screen.isSmall()?"helptip-wallet-options-xs":"helptip-wallet-options",{bindings:{content:"HELP.TIP.WALLET_OPTIONS",icon:{position:s.screen.isSmall()?"right":"center"}}})})},function(){return r("helptip-wallet-pubkey"),e.showHelpTip("helptip-wallet-pubkey",{bindings:{content:"HELP.TIP.WALLET_PUBKEY",icon:{position:"center"},hasNext:!c&&a},timeout:s.screen.isSmall()?2e3:500,retry:10})},function(){return c?(r("helptip-wallet-certifications"),e.showHelpTip("helptip-wallet-certifications",{bindings:{content:s.screen.isSmall()?"HELP.TIP.WALLET_RECEIVED_CERTIFICATIONS":"HELP.TIP.WALLET_CERTIFICATIONS",icon:{position:"center"},hasNext:a},timeout:500,onError:"continue"})):a}];return p.length!=d.wallet.stepCount&&console.error("[help] Invalid value of 'csHelpConstants.wallet.stepCount'. Please update to {0}".format(p.length)),u.get().then(function(n){return l=n.parameters,l.currentUD=n.currentUD,e.executeStep("wallet",p,t)})},e.startWalletCertTour=function(i,r){if(!m.isLogin())return o.when(!0);var l,c=!1,d=[function(){if(n.is("app.view_wallet")){var i=t.document.getElementById("helptip-wallet-certifications");if(!i)return c=!0,!0;a(function(){angular.element(i).triggerHandler("click")})}return!s.screen.isSmall()||e.showHelpTip("helptip-received-certs",{bindings:{content:"HELP.TIP.WALLET_RECEIVED_CERTS"}})},function(){return!(!c&&s.screen.isSmall())||n.go("app.view_wallet").then(function(){return e.showHelpTip("helptip-wallet-given-certifications",{bindings:{content:"HELP.TIP.WALLET_GIVEN_CERTIFICATIONS",icon:{position:"center"}},timeout:500})})},function(){if(c)return!0;if(n.is("app.view_wallet")){var i=t.document.getElementById("helptip-wallet-given-certifications");if(!i)return c=!0,!0;a(function(){angular.element(i).triggerHandler("click")},500)}return e.showHelpTip(s.screen.isSmall()?"fab-select-certify":"helptip-certs-select-certify",{bindings:{content:"HELP.TIP.WALLET_CERTIFY",icon:{position:s.screen.isSmall()?"bottom-right":"center"}},timeout:s.screen.isSmall()?2e3:500,retry:10})},function(){return e.tour||c?r:e.showHelpTip("helptip-certs-stock",{bindings:{content:"HELP.TIP.CERTIFY_RULES",icon:{position:"center",glyph:"ion-alert-circled"},hasNext:r}})}];return u.parameters().then(function(n){return l=n,e.executeStep("certs",d,i)})},e.startTxTour=function(t,a){if(!m.isLogin())return o.when(!0);var r,s=[function(){return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-tx",{bindings:{content:m.data.isMember?"HELP.TIP.MENU_BTN_TX_MEMBER":"HELP.TIP.MENU_BTN_TX",icon:{position:"left"}}})},function(){return i.isOpen()&&i.toggleLeft(!1),n.go("app.view_wallet_tx").then(function(){return e.showHelpTip("helptip-wallet-balance",{bindings:{content:c.data.useRelative?"HELP.TIP.WALLET_BALANCE_RELATIVE":"HELP.TIP.WALLET_BALANCE",contentParams:r,icon:{position:"center"}},retry:20})})},function(){return e.showHelpTip("helptip-wallet-balance",{bindings:{content:"HELP.TIP.WALLET_BALANCE_CHANGE_UNIT",contentParams:r,icon:{position:"center",glyph:"ion-information-circled"}}})}];return u.get().then(function(n){return r=n.parameters,r.currentUD=n.currentUD,e.executeStep("tx",s,t)})},e.startHeaderTour=function(n,r){function l(){var e=t.document.querySelectorAll("#helptip-header-bar-btn-profile");return e&&e.length?_.find(e,function(e){
return e.offsetWidth>0}):null}if(s.screen.isSmall())return o.when(!0);var c=[function(){if(s.screen.isSmall())return!0;var n=l();return!n||e.showHelpTip(n,{bindings:{content:"HELP.TIP.HEADER_BAR_BTN_PROFILE",icon:{position:"right"}}})},function(){if(s.screen.isSmall())return i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-settings",{bindings:{content:"HELP.TIP.MENU_BTN_SETTINGS",icon:{position:"left"},hasNext:r},timeout:1e3});var n=l();return!n||(a(function(){angular.element(n).triggerHandler("click")}),e.showHelpTip("helptip-popover-profile-btn-settings",{bindings:{content:"HELP.TIP.MENU_BTN_SETTINGS",icon:{position:"center"},hasNext:r},timeout:1e3}).then(function(n){return e.closeProfilePopover(),n}))}];return e.executeStep("header",c,n)},e.startSettingsTour=function(t,a){var o,r=[function(){return!s.screen.isSmall()||(i.toggleLeft(!0),e.showHelpTip("helptip-menu-btn-settings",{bindings:{content:"HELP.TIP.MENU_BTN_SETTINGS",icon:{position:"left"}},timeout:1e3}))},function(){return i.isOpen()&&i.toggleLeft(!1),n.go("app.settings").then(function(){return e.showHelpTip("helptip-settings-btn-unit-relative",{bindings:{content:"HELP.TIP.SETTINGS_CHANGE_UNIT",contentParams:o,icon:{position:"right",style:"margin-right: 60px"},hasNext:a},timeout:1e3})})}];return u.parameters().then(function(n){return o=n,e.executeStep("settings",r,t)})},e.finishTour=function(){if(i.isOpen()&&i.toggleLeft(!1),m.isLogin())return n.go("app.view_wallet").then(function(){return e.showHelpTip("helptip-wallet-certifications",{bindings:{content:"HELP.TIP.END_LOGIN",hasNext:!1}})});var t;return o.all([e.showHome(),u.parameters().then(function(e){t=e})]).then(function(){return e.showHelpTip("helptip-home-logo",{bindings:{content:"HELP.TIP.END_NOT_LOGIN",contentParams:t,hasNext:!1}})})}}function HelpTourController(e){e.$on("$ionicView.enter",function(n,t){e.startHelpTour()})}function WalletController(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E){"ngInject";e.loading=!0,e.settings=p.data,e.qrcodeId="qrcode-wallet-"+e.$id,e.$on("$ionicView.enter",function(n,t){return e.loading=e.loading||t.stateParams&&t.stateParams.refresh,e.loading?e.load():(l.loading.hide(),void a(e.updateView,300))}),e.load=function(){return e.loadWallet().then(function(n){e.formData=n,e.loading=!1,e.updateView(),e.showQRCode(),e.showHelpTip(),l.loading.hide()})["catch"](function(n){"CANCELLED"==n&&e.showHome()})},e.updateView=function(){e.motion.show({selector:"#wallet .item"}),e.$broadcast("$$rebind::rebind")},e.$watchCollection("formData.events",function(n,t){!t||e.loading||angular.equals(n,t)||e.updateView()}),e.setRegisterForm=function(n){e.registerForm=n},e.onWalletLogout=function(){e.hideQRCode("qrcode"),delete e.formData,e.loading=!0},m.api.data.on.logout(e,e.onWalletLogout),e.showUidPopup=function(){return t(function(n,t){r(["ACCOUNT.NEW.TITLE","ACCOUNT.POPUP_REGISTER.TITLE","ACCOUNT.POPUP_REGISTER.HELP","COMMON.BTN_OK","COMMON.BTN_CANCEL"]).then(function(t){e.formData.newUid=e.formData.uid?""+e.formData.uid:"",i.show({templateUrl:"templates/wallet/popup_register.html",title:t["ACCOUNT.POPUP_REGISTER.TITLE"],subTitle:t["ACCOUNT.POPUP_REGISTER.HELP"],scope:e,buttons:[{text:t["COMMON.BTN_CANCEL"]},{text:t["COMMON.BTN_OK"],type:"button-positive",onTap:function(n){return e.registerForm.$submitted=!0,e.registerForm.$valid&&e.formData.newUid?e.formData.newUid:void n.preventDefault()}}]}).then(function(t){return t?void n(t):(delete e.formData.uid,void l.loading.hide())})})})},e.self=function(){return e.hideActionsPopover(),e.showUidPopup().then(function(n){return l.loading.show(),m.self(n).then(function(){e.updateView(),l.loading.hide()})["catch"](function(n){l.onError("ERROR.SEND_IDENTITY_FAILED")(n).then(function(){e.self()})})})},e.doMembershipIn=function(n){return m.membership.inside().then(function(){e.updateView(),l.loading.hide()})["catch"](function(t){if("CANCELLED"==t)throw t;if(!t||t.ucode==u.errorCodes.MEMBERSHIP_ALREADY_SEND){if(!n||n<=2)return a(function(){e.doMembershipIn(n?n+1:1)},1e3);throw t}})},e.membershipIn=function(n){return e.hideActionsPopover(),m.isMember()?l.alert.info("INFO.NOT_NEED_MEMBERSHIP"):(n&&e.formData.blockUid?t.when(e.formData.uid):e.showUidPopup()).then(function(e){return l.alert.confirm("CONFIRM.MEMBERSHIP").then(function(n){if(!n)throw"CANCELLED";return e})}).then(function(n){if(l.loading.show(),!e.formData.blockUid||n!=e.formData.uid)return e.formData.blockUid=null,e.formData.uid=n,m.self(n,!1)}).then(e.doMembershipIn)["catch"](function(e){"CANCELLED"!=e&&(m.data.uid?l.onError("ERROR.SEND_MEMBERSHIP_IN_FAILED")(e):l.onError("ERROR.SEND_IDENTITY_FAILED")(e))})},e.membershipOut=function(n,t){return e.hideActionsPopover(),n?t?(l.loading.show(),m.membership.out().then(function(){l.loading.hide(),l.toast.show("INFO.MEMBERSHIP_OUT_SENT")})["catch"](l.onError("ERROR.SEND_MEMBERSHIP_OUT_FAILED"))):l.alert.confirm("CONFIRM.MEMBERSHIP_OUT_2","CONFIRM.POPUP_TITLE",{cssClass:"warning",okText:"COMMON.BTN_YES",okType:"button-assertive"}).then(function(n){n&&e.membershipOut(!0,!0)}):l.alert.confirm("CONFIRM.MEMBERSHIP_OUT","CONFIRM.POPUP_WARNING_TITLE",{cssClass:"warning",okText:"COMMON.BTN_YES",okType:"button-assertive"}).then(function(n){n&&e.membershipOut(!0)})},e.doUpdate=function(n){return console.debug("[wallet] Refreshing data..."),(n?m.refreshData():l.loading.show().then(m.refreshData).then(l.loading.hide)).then(e.updateView)["catch"](l.onError("ERROR.REFRESH_WALLET_DATA"))},e.renewMembership=function(n){return e.formData.isMember||e.formData.requirements.wasMember?n||e.formData.requirements.needRenew?m.auth({minData:!0}).then(function(){return l.loading.hide(),l.alert.confirm("CONFIRM.RENEW_MEMBERSHIP")}).then(function(n){if(n)return l.loading.show(),e.doMembershipIn()})["catch"](function(e){"CANCELLED"!=e&&(l.loading.hide(),l.alert.error(e))}):r("CONFIRM.NOT_NEED_RENEW_MEMBERSHIP",{membershipExpiresIn:e.formData.requirements.membershipExpiresIn}).then(function(e){return l.alert.confirm(e)}).then(function(n){n&&e.renewMembership(!0)}):l.alert.error("ERROR.ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION")},e.fixIdentity=function(){if(e.formData.uid)return t.all([m.auth(),r("CONFIRM.FIX_IDENTITY",{uid:e.formData.uid})]).then(function(e){return l.alert.confirm(e[1])}).then(function(n){if(n)return l.loading.show(),e.formData.blockUid=null,e.formData.sigDate=null,m.self(e.formData.uid)}).then(e.doMembershipIn)["catch"](function(e){"CANCELLED"!=e&&(l.loading.hide(),l.alert.error(e))})},e.fixMembership=function(){if(e.formData.uid)return m.isMember()?l.alert.info("INFO.NOT_NEED_MEMBERSHIP"):m.auth().then(function(){l.alert.confirm("CONFIRM.FIX_MEMBERSHIP")}).then(function(n){if(n)return l.loading.show(),e.formData.blockUid=null,e.formData.sigDate=null,m.self(e.formData.uid,!1)}).then(e.doMembershipIn)["catch"](function(e){"CANCELLED"!=e&&(l.loading.hide(),l.alert.error(e))})},e.doQuickFix=function(n){"renew"==n?e.renewMembership():"membership"==n?e.membershipIn(!0):"fixMembership"==n?e.fixMembership():"fixIdentity"==n&&e.fixIdentity()},e.showTransferModal=function(){var n=!!e.formData.balance&&e.formData.balance>0;return n?void c.showTransfer().then(function(n){n&&(l.toast.show("INFO.TRANSFER_SENT"),e.$broadcast("$$rebind::balance"),e.motion.show({selector:".item-pending"}))}):void l.alert.info("INFO.NOT_ENOUGH_CREDIT")},e.startWalletTour=function(){return e.hideActionsPopover(),E.wallet.tour()},e.showHelpTip=function(){return E.wallet.helptip()},e.showQRCode=function(n){e.qrcode?(e.qrcode.clear(),e.qrcode.makeCode(e.formData.pubkey),l.motion.toggleOn({selector:"#"+e.qrcodeId},n||1100)):(e.qrcode=new QRCode(e.qrcodeId,{text:e.formData.pubkey,width:200,height:200,correctLevel:QRCode.CorrectLevel.L}),l.motion.toggleOn({selector:"#"+e.qrcodeId},n||1100))},e.hideQRCode=function(n){e.qrcode&&(e.qrcode.clear(),l.motion.toggleOff({selector:"#"+e.qrcodeId}))},e.showCertifications=function(){o.go(l.screen.isSmall()?"app.wallet_cert":"app.wallet_cert_lg",{pubkey:e.formData.pubkey,uid:e.formData.name||e.formData.uid,type:"received"})},e.showGivenCertifications=function(){o.go(l.screen.isSmall()?"app.wallet_cert":"app.wallet_cert_lg",{pubkey:e.formData.pubkey,uid:e.formData.name||e.formData.uid,type:"given"})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):s.fromTemplateUrl("templates/wallet/popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showSharePopover=function(t){e.hideActionsPopover();var i=e.formData.name||e.formData.uid||e.formData.pubkey,a=(d.shareBaseUrl||n.rootPath)+o.href("app.wot_identity",{pubkey:e.formData.pubkey,uid:e.formData.name||e.formData.uid});l.screen.isSmall()&&(t=angular.element(document.querySelector("#wallet-share-anchor"))||t),l.popover.share(t,{bindings:{url:a,titleKey:"WOT.VIEW.POPOVER_SHARE_TITLE",titleValues:{title:i},postMessage:i}})},e.showSecurityModal=function(){return e.hideActionsPopover(),c.showAccountSecurity().then(function(n){if(n)return"self"===n?e.self():"membershipIn"===n?e.membershipIn():void 0})},e.showSelectIdentitiesModal=function(){return e.hideActionsPopover(),c.showSelectPubkeyIdentity({identities:[e.formData.requirements].concat(e.formData.requirements.alternatives)}).then(function(n){if(n&&n.uid)return e.loading=!0,m.setSelf(n.uid,n.blockUid).then(function(){e.loading=!1,e.updateView(),l.loading.hide()})})}}function WalletTxController(e,n,t,i,a,o,r,s,l,c,u){"ngInject";e.loading=!0,e.settings=l.data,e.$on("$ionicView.enter",function(n,t){e.loading=e.loading||t.stateParams&&t.stateParams.refresh,e.loading?e.loadWallet().then(function(n){e.formData=n,e.loading=!1,e.updateView(),e.showFab("fab-transfer"),e.showHelpTip(),o.loading.hide(),t.stateParams&&t.stateParams.refresh&&a.search({}).replace()})["catch"](function(n){"CANCELLED"==n&&e.showHome()}):i(e.updateView,300)}),e.updateView=function(){e.formData&&!e.loading&&(e.$broadcast("$$rebind::balance"),e.$broadcast("$$rebind::rebind"),e.motion.show({selector:".view-wallet-tx .item",ink:!1}))},e.downloadHistoryFile=function(n){n=n||{},n.fromTime=n.fromTime||-1;var t=e.formData.pubkey;u.downloadHistoryFile(t,n)},e.doUpdate=function(n){return console.debug("[wallet] TX history reloading..."),(n?c.refreshData():o.loading.show().then(c.refreshData).then(o.loading.hide)).then(e.updateView)["catch"](o.onError("ERROR.REFRESH_WALLET_DATA"))},c.api.data.on.balanceChanged(e,e.updateView),e.$watch("settings.useRelative",e.updateView),e.$watch("settings.showUDHistory",function(){e.formData&&!e.loading&&e.doUpdate()},!0),e.showTransferModal=function(){var n=!!e.formData.balance&&e.formData.balance>0;return n?r.showTransfer():void o.alert.info("INFO.NOT_ENOUGH_CREDIT")},e.showHelpTip=function(e,n){},e.showMoreTx=function(n){return n=n||e.formData.tx.fromTime-l.data.walletHistoryTimeSecond||Math.trunc((new Date).getTime()/1e3)-2*l.data.walletHistoryTimeSecond,o.loading.show(),c.refreshData({tx:{enable:!0,fromTime:n}}).then(function(){e.updateView(),o.loading.hide()})["catch"](function(t){t.ucode==s.errorCodes.HTTP_LIMITATION?i(function(){return e.showMoreTx(n)},2e3):o.onError("ERROR.REFRESH_WALLET_DATA")(t)})};var d=10;e.toUnlockUIArray=function(n,t,i){return t=t||0,!n.children||"AND"!=n.type&&"OR"!=n.type?{style:{"padding-left":t+"px"},operator:i,type:n.type,value:n.value}:n.children.reduce(function(i,a,o){return a.children&&o>0?(i=i.concat({style:{"padding-left":t+"px","padding-top":"10px","padding-bottom":"10px"},operator:n.type}),i.concat(e.toUnlockUIArray(a,t+d))):i.concat(e.toUnlockUIArray(a,t+d,o&&n.type))},[])},e.showLockedOutputsPopover=function(t,i){t.lockedOutputs&&(e.popoverData=e.popoverData||{},e.popoverData.lockedOuputs=t.lockedOutputs.reduce(function(n,t){return n.concat({amount:t.amount,unlockFunctions:t.unlockFunctions,unlockConditions:e.toUnlockUIArray(t.unlockTree)})},[]),e.lockedOutputsPopover?e.lockedOutputsPopover.show(i):n.fromTemplateUrl("templates/wallet/tx_locked_outputs_popover.html",{scope:e}).then(function(n){e.lockedOutputsPopover=n,e.$on("$destroy",function(){e.lockedOutputsPopover.remove()}),e.lockedOutputsPopover.show(i)}))},e.hideLockedOutputsPopover=function(){e.lockedOutputsPopover&&(e.lockedOutputsPopover.hide(),e.popoverData&&delete e.popoverData.unlockConditions)},e.goState=function(n,i){e.hideLockedOutputsPopover(),t.go(n,i)}}function WalletTxErrorController(e,n,t){"ngInject";e.formData={},e.$on("$ionicView.enter",function(t){e.loadWallet().then(function(t){e.formData=t,e.doMotion(),e.showFab("fab-redo-transfer"),n.loading.hide()})}),e.doUpdate=function(i){return(i?t.refreshData():n.loading.show().then(t.refreshData).then(n.loading.hide)).then(e.doMotion)["catch"](n.onError("ERROR.REFRESH_WALLET_DATA"))},e.filterReceivedTx=function(e){return e.amount&&e.amount>0},e.filterSentTx=function(e){return e.amount&&e.amount<0}}function WalletSecurityModalController(e,n,t,i){e.slides={slider:null,options:{loop:!1,effect:"slide",speed:500}},e.isLastSlide=!1,e.smallscreen=n.screen.isSmall(),e.recover={},e.isValidFile=!1,e.isLogin=t.isLogin(),e.hasSelf=t.hasSelf(),e.needSelf=e.isLogin&&t.data.requirements.needSelf,e.needMembership=e.isLogin&&t.data.requirements.needMembership,e.option=e.isLogin?"saveID":"recoverID",e.formData={addQuestion:"",level:"4",questions:[]};for(var a=[],o=1;o<20;o++)a.push("ACCOUNT.SECURITY.QUESTION_"+o.toString());i(a).then(function(n){_.each(n,function(n){e.formData.questions.push({value:n,checked:!1})})}),e.slidePrev=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slidePrev(),e.slides.slider.lockSwipes(),e.isLastSlide=!1},e.slideNext=function(){e.slides.slider.unlockSwipes(),e.slides.slider.slideNext(),e.slides.slider.lockSwipes(),e.isLastSlide=3===e.slides.slider.activeIndex&&("saveID"==e.option||"recoverID"==e.option)||2===e.slides.slider.activeIndex&&"revocation"==e.option},e.doNext=function(t){if(t||(t=1===e.slides.slider.activeIndex&&"saveID"==e.option?"questionsForm":2===e.slides.slider.activeIndex&&"recoverID"===e.option?"recoverForm":2===e.slides.slider.activeIndex&&"saveID"===e.option?"answersForm":t,1===e.slides.slider.activeIndex&&"recoverID"===e.option&&(e.isValidFile?(e.slideNext(),e.hasContent=!1,e.fileData=""):n.alert.error("ERROR.NOT_VALID_SAVE_ID_FILE","ERROR.LOAD_FILE_FAILED"))),t){if(e[t].$submitted=!0,!e[t].$valid)return;"recoverForm"===t?e.recoverId():"answersForm"===t?e.downloadSaveIDFile():e.slideNext()}},e.selectOption=function(n){e.option=n,e.slideNext()},e.restore=function(){1===e.slides.slider.activeIndex&&"saveID"===e.option?(e.formData={addQuestion:"",level:"4",questions:[]},i(a).then(function(n){_.each(n,function(n){e.formData.questions.push({value:n,checked:!1})})})):2===e.slides.slider.activeIndex&&"saveID"===e.option?_.each(e.formData.questions,function(e){e.answer=void 0}):1===e.slides.slider.activeIndex&&"recoverID"===e.option?(e.hasContent=!1,e.recover={},e.fileData="",e.isValidFile=!1):2===e.slides.slider.activeIndex&&"recoverID"===e.option?_.each(e.recover.questions,function(e){e.answer=void 0}):2===e.slides.slider.activeIndex&&"revocation"===e.option&&(e.isValidFile=!1,e.hasContent=!1,e.revocation=void 0)},e.recoverContent=function(n){if(e.hasContent=angular.isDefined(n)&&""!==n,e.fileData=n.fileData?n.fileData:"",e.isValidFile=""!==e.fileData&&"text/plain"==e.fileData.type,e.isValidFile&&"recoverID"===e.option){e.content=n.fileContent.split("\n");var t=_.indexOf(e.content,"Questions: "),i=-1;_.each(e.content,function(n,t){/^Issuer:/.test(n)?i=t:/^Crypted-Nonce:/.test(n)?e.recover.cypherNonce=n.split(" ")[1]:/^Crypted-Pubkey:/.test(n)?e.recover.cypherPubkey=n.split(" ")[1]:/^Crypted-Salt:/.test(n)?e.recover.cypherSalt=n.split(" ")[1]:/^Crypted-Pwd:/.test(n)&&(e.recover.cypherPwd=n.split(" ")[1])}),e.recover.questions=[];for(var a=t+1;a<i;a++)e.recover.questions.push({value:e.content[a]})}else e.isValidFile&&"revocation"===e.option&&(e.revocation=n.fileContent)},e.recoverId=function(){if(e.recoverForm.$valid)return e.recover.answer="",_.each(e.recover.questions,function(n){e.recover.answer+=n.answer}),t.recoverId(e.recover).then(function(t){angular.isDefined(t)?(e.recover=t,e.slideNext()):n.alert.error("ERROR.RECOVER_ID_FAILED")})},e.addQuestion=function(){""!==e.formData.addQuestion&&(e.formData.questions.push({value:e.formData.addQuestion,checked:!0}),e.formData.addQuestion="")},e.downloadSaveIDFile=function(){var i;return t.auth({forceAuth:!0,expectedPubkey:e.pubkey,silent:!0,success:function(e){i=e}})["catch"](function(e){e&&"CANCELLED"==e||n.alert.error("ERROR.SALT_OR_PASSWORD_NOT_CONFIRMED","ERROR.LOGIN_FAILED")}).then(function(n){if(n){var a={file:_.filter(e.formData.questions,function(e){return e.checked})},o={salt:i.username,pwd:i.password,questions:"",answer:""};return _.each(a.file,function(e){o.questions+=e.value+"\n",o.answer+=e.answer}),t.getCryptedId(o).then(function(n){t.downloadSaveId(n),e.closeModal()})}})},e.isRequired=function(){var n=_.filter(e.formData.questions,function(e){return e.checked});return n.length<e.formData.level},e.revokeWithFile=function(){e.isValidFile?e.revokeIdentity():n.alert.error("ERROR.NOT_VALID_REVOCATION_FILE","ERROR.LOAD_FILE_FAILED")},e.downloadRevokeFile=function(){return t.auth({forceAuth:!0}).then(function(){return t.downloadRevocation()}).then(function(){n.loading.hide()})["catch"](function(e){e&&"CANCELLED"==e||n.onError("ERROR.DOWNLOAD_REVOCATION_FAILED")(e)})},e.revokeWalletIdentity=function(){return e.hasSelf?t.auth({forceAuth:!0}).then(function(t){if(n.loading.hide(),t)return e.revokeIdentity()})["catch"](function(e){"CANCELLED"!=e&&n.onError("ERROR.REVOCATION_FAILED")(e)}):n.alert.error("ERROR.ONLY_SELF_CAN_EXECUTE_THIS_ACTION")},e.revokeIdentity=function(i){return i?n.loading.show().then(function(){return e.revocation?t.revokeWithFile(e.revocation):t.revoke()}).then(function(){return n.toast.show("INFO.REVOCATION_SENT"),e.closeModal(),n.loading.hide()})["catch"](n.onError("ERROR.REVOCATION_FAILED")):n.alert.confirm("CONFIRM.REVOKE_IDENTITY","CONFIRM.POPUP_WARNING_TITLE",{cssClass:"warning",okText:"COMMON.BTN_YES",okType:"button-assertive"}).then(function(e){if(e)return n.alert.confirm("CONFIRM.REVOKE_IDENTITY_2","CONFIRM.POPUP_TITLE",{cssClass:"warning",okText:"COMMON.BTN_YES",okType:"button-assertive"})}).then(function(n){n&&e.revokeIdentity(!0,!0)})},e.self=function(){return e.closeModal("self")},e.membershipIn=function(){return e.closeModal("membershipIn")}}function WotLookupController(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E,g){"ngInject";var b=10;e.search={text:"",loading:!0,type:null,results:[]},e.entered=!1,e.wotSearchTextId="wotSearchText",e.enableFilter=!0,e.allowMultiple=!1,e.selection=[],e.showResultLabel=!0,e.parameters={},e.$on("$ionicView.enter",function(n,t){e.entered?(e.updateLocationHref(),e.search.results&&e.search.results.length&&e.motion.show({selector:".lookupForm .list .item",ink:!0})):(t.stateParams&&t.stateParams.q?(e.search.text=t.stateParams.q,i(function(){e.doSearch()},100)):t.stateParams&&t.stateParams.hash?(e.search.text="#"+t.stateParams.hash,i(function(){e.doSearch()},100)):i(function(){u.data.initPhase&&!t.stateParams.type?e.doGetPending(0,void 0,!0):"newcomers"==t.stateParams.type||!c.initPhase&&!t.stateParams.type?e.doGetNewcomers(0,void 0,!0):"pending"==t.stateParams.type&&e.doGetPending(0,void 0,!0)},100),a(e.wotSearchTextId),e.entered=!0,i(l.ink,100),e.showHelpTip())}),e.resetWotSearch=function(){e.search={text:null,loading:!1,type:"newcomers",results:[]}},e.updateLocationHref=function(){var n={q:void 0,hash:void 0,type:void 0};if("text"==e.search.type){var t=e.search.text.trim();t.match(/^#[\w]+$/)?n.hash=t.substr(1):n.q=t}else"last"!=e.search.type&&(n.type=e.search.type);o.search(n).replace()},e.doSearchText=function(){e.doSearch(),e.updateLocationHref()},e.doSearch=function(){e.search.loading=!0;var n=e.search.text.trim();return l.screen.isSmall()&&n.length<3||!n.length?(e.search.results=void 0,e.search.loading=!1,e.search.type="none",e.search.total=void 0,t.when()):(e.search.type="text",g.search(n).then(function(t){if("text"==e.search.type&&e.search.text.trim()===n)if(t&&t.length||!m.regexp.PUBKEY.test(n)){e.doDisplayResult(t);var i=_.countBy(t,function(e){return e.divider&&"divider"||"results"});e.search.total=i&&i.results||0}else e.doDisplayResult([{pubkey:n}])})["catch"](l.onError("ERROR.WOT_LOOKUP_FAILED")))},e.doGetNewcomers=function(n,t,i){return n=n||0,t=t||b,t<b&&(t=b),e.hideActionsPopover(),e.search.loading=0===n,e.search.type="newcomers",n||i||e.updateLocationHref(),g.newcomers(n,t).then(function(i){return"newcomers"==e.search.type&&(e.doDisplayResult(i&&i.hits,n,t,i&&i.total),!0)})["catch"](function(t){e.search.loading=!1,e.search.results=n>0?e.search.results:[],e.search.hasMore=!1,e.search.total=void 0,l.onError("ERROR.LOAD_NEWCOMERS_FAILED")(t)})},e.doGetPending=function(n,t,i){n=n||0,t=t||b,t<b&&(t=b),e.hideActionsPopover(),e.search.loading=0===n,e.search.type="pending";var a=u.data.initPhase?g.all:g.pending;return n||i||e.updateLocationHref(),a(n,t).then(function(i){return"pending"==e.search.type&&(e.doDisplayResult(i&&i.hits,n,t,i&&i.total),e.search.hasMore=!u.data.initPhase&&e.search.hasMore,!0)})["catch"](function(t){e.search.loading=!1,e.search.results=n>0?e.search.results:[],e.search.total=void 0,e.search.hasMore=!1,l.onError("ERROR.LOAD_PENDING_FAILED")(t)})},e.showMore=function(){var n=e.search.results?e.search.results.length:0;e.search.loadingMore=!0;var t="newcomers"==e.search.type?e.doGetNewcomers:e.doGetPending;return t(n).then(function(n){n&&(e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete"))})["catch"](function(n){console.error(n),e.search.loadingMore=!1,e.search.hasMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.select=function(e){var t=e.state;!t&&e.pubkey&&(t=E.isUserPubkey(e.pubkey)?"app.view_wallet":"app.wot_identity"),t&&(s.nextViewOptions({historyRoot:!1,disableAnimate:!1,expire:300}),n.go(t,e.stateParams||e))},e.next=function(){console.warn("Selected identities (should be override):",e.selection)},e.toggleCheck=function(n,t){var i=e.search.results[n];i.checked?e.addToSelection(i):e.removeSelection(i,t)},e.toggleSelect=function(e){e.selected=!e.selected},e.addToSelection=function(n){var t=angular.copy(n);t.name&&(t.name=t.name.replace("<em>","").replace("</em>","")),e.selection.push(t)},e.removeSelection=function(n,t){var i=_.findWhere(e.selection,{id:n.id});if(i&&e.selection.splice(e.selection.indexOf(i),1),!e.search.loading){var a=_.findWhere(e.search.results,{id:n.id});a&&a.checked&&(a.checked=!1)}},e.scanQrCode=function(){p.barcode.enable&&p.barcode.scan().then(function(n){n&&m.uri.parse(n).then(function(t){t.pubkey?e.search.text=t.pubkey:n.uid?e.search.text=t.uid:e.search.text=n,e.doSearch()})})["catch"](l.onError("ERROR.SCAN_FAILED"))},e.showHelpTip=function(n){if(e.isLogin()&&(n=angular.isDefined(n)?n:d.data.helptip.wotLookup,!(n<0))){0===n&&(n=1);var t=e.createHelptipScope();if(t)return t.startWotLookupTour(n,!1).then(function(e){t.$destroy(),d.data.helptip.wotLookup=e,d.store()})}},e.doDisplayResult=function(n,t,i,a){n=n||[],e.allowMultiple&&n.length&&e.selection.length&&_.forEach(e.selection,function(e){var t=_.findWhere(n,{id:e.id});t&&(t.checked=!0)}),t?e.search.results=e.search.results.concat(n):e.search.results=n||[],e.search.total=angular.isDefined(a)?a:void 0,e.search.loading=!1,e.search.hasMore=e.search.results.length>=t+i,e.smallscreen=l.screen.isSmall(),e.search.results.length&&n.length>0&&e.motion&&e.motion.show({selector:".lookupForm .list .item",ink:!0})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):r.fromTemplateUrl("templates/wot/lookup_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()}}function WotLookupModalController(e,n,t,i){"ngInject";angular.extend(this,n("WotLookupCtrl",{$scope:e})),i=i||{},e.search.loading=!1,e.enableFilter=!!angular.isDefined(i.enableFilter)&&i.enableFilter,e.allowMultiple=!!angular.isDefined(i.allowMultiple)&&i.allowMultiple,e.parameters=i,e.showResultLabel=!1,e.wotSearchTextId="wotSearchTextModal",e.allowMultiple&&i.selection&&(e.selection=i.selection),e.cancel=function(){e.closeModal()},e.select=function(n){e.closeModal({pubkey:n.pubkey,uid:n.uid})},e.next=function(){e.closeModal(e.selection)},e.updateLocationHref=function(){},e.showHelpTip=function(){},t(e.wotSearchTextId)}function WotIdentityAbstractController(e,n,t,i,a,o,r,s,l,c,u){"ngInject";e.formData={hasSelf:!0},e.disableCertifyButton=!0,e.loading=!0,e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!o.screen.isSmall()||n.enableBack}),e.load=function(n,t,i){return c.load(n,t,i).then(function(t){return t?(e.formData=t,e.revoked=t.requirements&&(t.requirements.revoked||t.requirements.pendingRevocation),e.canCertify=t.hasSelf&&(!u.isLogin()||!u.isUserPubkey(n))&&!e.revoked,e.canSelectAndCertify=t.hasSelf&&u.isUserPubkey(n),e.alreadyCertified=!(!e.canCertify||!u.isLogin())&&(!!_.findWhere(t.received_cert,{pubkey:u.data.pubkey,valid:!0})||!!_.findWhere(t.received_cert_pending,{pubkey:u.data.pubkey,valid:!0})),e.disableCertifyButton=e.alreadyCertified||e.revoked,void(e.loading=!1)):o.onError("ERROR.IDENTITY_NOT_FOUND")().then(e.showHome)})["catch"](function(n){e.loading=!1,o.onError("ERROR.LOAD_IDENTITY_FAILED")(n)})},e.doUpdate=function(n){return n||(e.loading=!0,o.loading.show()),e.load(e.formData.pubkey,!1,e.formData.uid).then(o.loading.hide)},e.certify=function(){return u.auth({minData:!0}).then(function(n){if(o.loading.hide(),!l.data.initPhase&&!n.isMember)return void o.alert.error(n.requirements.needSelf?"ERROR.NEED_MEMBER_ACCOUNT_TO_CERTIFY":"ERROR.NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF");if(!l.data.initPhase&&!e.formData.hasSelf)return void o.alert.error("ERROR.IDENTITY_TO_CERTIFY_HAS_NO_SELF");if(e.formData.requirements.expired)return void o.alert.error("ERROR.IDENTITY_EXPIRED");var t=_.findWhere(e.formData.received_cert,{pubkey:n.pubkey,valid:!0});return t?void i("ERROR.IDENTITY_ALREADY_CERTIFY",t).then(function(e){o.alert.error(e,"ERROR.UNABLE_TO_CERTIFY_TITLE")}):(t=_.findWhere(e.formData.received_cert_pending,{pubkey:n.pubkey,valid:!0}))?void i("ERROR.IDENTITY_ALREADY_CERTIFY_PENDING",t).then(function(e){o.alert.error(e,"ERROR.UNABLE_TO_CERTIFY_TITLE")}):void o.alert.confirm("CONFIRM.CERTIFY_RULES","CONFIRM.POPUP_SECURITY_WARNING_TITLE",{cssClass:"warning",okText:"WOT.BTN_YES_CERTIFY",okType:"button-assertive"}).then(function(n){n&&(o.loading.show(),u.certify(e.formData.uid,e.formData.pubkey,e.formData.timestamp,e.formData.sig,e.formData.isMember,e.formData.wasMember).then(function(n){o.loading.hide(),n&&(e.prepareNewCert(n),e.alreadyCertified=!0,o.alert.info("INFO.CERTIFICATION_DONE"),e.formData.received_cert_pending.unshift(n),e.formData.requirements.pendingCertificationCount++,e.doMotion())})["catch"](o.onError("ERROR.SEND_CERTIFICATION_FAILED")))})})["catch"](function(e){"CANCELLED"!=e&&o.onError("ERROR.LOGIN_FAILED")(e)})},e.selectAndCertify=function(){return u.auth({minData:!0}).then(function(e){return l.data.initPhase||e.isMember?(o.loading.hide(),r.showWotLookup()):void o.alert.error(e.requirements.needSelf||e.requirements.needMembership?"ERROR.NEED_MEMBER_ACCOUNT_TO_CERTIFY":"ERROR.NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF")}).then(function(e){if(e&&e.pubkey)return e.uid?(o.loading.show(),c.load(e.pubkey,!1)):void o.alert.error("ERROR.IDENTITY_TO_CERTIFY_HAS_NO_SELF")}).then(function(n){if(n){if(o.loading.hide(),!n||!n.hasSelf)return void o.alert.error("ERROR.IDENTITY_TO_CERTIFY_HAS_NO_SELF");if(n.requirements.expired)return void o.alert.error("ERROR.IDENTITY_EXPIRED");var t=_.findWhere(n.received_cert,{pubkey:u.data.pubkey,valid:!0});return t?void i("ERROR.IDENTITY_ALREADY_CERTIFY",t).then(function(e){o.alert.error(e,"ERROR.UNABLE_TO_CERTIFY_TITLE")}):(t=_.findWhere(n.received_cert_pending,{pubkey:u.data.pubkey,valid:!0}))?void i("ERROR.IDENTITY_ALREADY_CERTIFY_PENDING",t).then(function(e){o.alert.error(e,"ERROR.UNABLE_TO_CERTIFY_TITLE")}):void i("CONFIRM.CERTIFY_RULES_TITLE_UID",{uid:n.uid}).then(function(e){return o.alert.confirm("CONFIRM.CERTIFY_RULES",e)}).then(function(t){t&&(o.loading.show(),u.certify(n.uid,n.pubkey,n.timestamp,n.sig,n.isMember,n.wasMember).then(function(n){if(o.loading.hide(),n)return c.extendAll([n],"pubkey").then(function(){o.toast.show("INFO.CERTIFICATION_DONE"),e.formData.given_cert_pending.unshift(n),e.doMotion()})})["catch"](o.onError("ERROR.SEND_CERTIFICATION_FAILED")))})}})["catch"](function(e){"CANCELLED"!=e&&o.onError("ERROR.LOAD_IDENTITY_FAILED")(e)})},e.prepareNewCert=function(e){e.uid=u.data.uid,e.pubkey=u.data.pubkey,e.isMember=u.data.isMember,e.avatar=u.data.avatar,e.name=u.data.name},e.removeActionParamInLocationHref=function(e){if(e&&e.stateParams&&e.stateParams.action){var n=angular.copy(e.stateParams);n.action=null,a.nextViewOptions({disableAnimate:!0,disableBack:!1,historyRoot:!1}),t.go(e.stateName,n,{reload:!1,inherit:!0,notify:!1})}},e.doAction=function(n,t){return"certify"==n?e.certify():void("transfer"==n&&e.showTransferModal(t))},e.showCertifications=function(){o.screen.isSmall()?t.go("app.wot_cert",{pubkey:e.formData.pubkey,uid:e.formData.uid,type:"received"}):t.go("app.wot_cert_lg",{pubkey:e.formData.pubkey,uid:e.formData.uid})},e.showGivenCertifications=function(){o.screen.isSmall()?t.go("app.wot_cert",{pubkey:e.formData.pubkey,uid:e.formData.uid,type:"given"}):t.go("app.wot_cert_lg",{pubkey:e.formData.pubkey,uid:e.formData.uid})},e.showSharePopover=function(i){var a=e.formData.name||e.formData.uid||e.formData.pubkey,r=(s.shareBaseUrl||n.rootPath)+t.href("app.wot_identity",{pubkey:e.formData.pubkey,uid:e.formData.uid});o.screen.isSmall()&&(i=angular.element(document.querySelector("#wot-share-anchor-"+e.formData.pubkey))||i),o.popover.share(i,{bindings:{url:r,titleKey:"WOT.VIEW.POPOVER_SHARE_TITLE",titleValues:{title:a},postMessage:a}})}}function WotIdentityViewController(e,n,t,i,a,o){"ngInject";angular.extend(this,t("WotIdentityAbstractCtrl",{$scope:e})),e.motion=a.motion.fadeSlideInRight,e.$on("$ionicView.enter",function(n,t){var a=function(){e.doMotion(),t.stateParams&&t.stateParams.action&&(i(function(){e.doAction(t.stateParams.action.trim())},100),e.removeActionParamInLocationHref(t))};if(t.stateParams&&t.stateParams.pubkey&&t.stateParams.pubkey.trim().length>0){if(e.loading)return e.load(t.stateParams.pubkey.trim(),!0,t.stateParams.uid).then(a)}else if(t.stateParams&&t.stateParams.uid&&t.stateParams.uid.trim().length>0){if(e.loading)return e.load(null,!0,t.stateParams.uid).then(a)}else if(o.isLogin()){if(e.loading)return e.load(o.data.pubkey,!0,o.data.uid).then(a)}else e.showHome()}),e.doMotion=function(){e.motion.show({selector:".view-identity .list .item"}),e.showFab("fab-transfer"),(e.canCertify&&!e.alreadyCertified||n.tour)&&e.showFab("fab-certify-"+e.formData.uid)}}function WotIdentityTxViewController(e,n,t,i,a,o,r,s){"ngInject";e.formData={},e.loading=!0,e.motion=s.motion.fadeSlideInRight,e.$on("$ionicView.enter",function(n,t){e.loading?(e.pubkey=t.stateParams.pubkey,e.uid=t.stateParams.uid,e.load()):e.updateView()}),e.load=function(n){return t.all([o.extend({pubkey:e.pubkey}),r.load(e.pubkey,n)]).then(function(n){e.formData=angular.merge(n[0],n[1]),e.loading=!1,e.updateView()})},e.doUpdate=function(n){return console.debug("[wot] TX history reloading..."),e.formData={},(n?e.load():s.loading.show().then(e.load).then(s.loading.hide)).then(e.updateView)["catch"](s.onError("ERROR.IDENTITY_TX_FAILED"))},e.updateView=function(){e.$broadcast("$$rebind::balance"),e.$broadcast("$$rebind::rebind"),e.motion.show()},e.downloadHistoryFile=function(n){n=n||{},n.fromTime=n.fromTime||-1,r.downloadHistoryFile(e.pubkey,n)},e.showMoreTx=function(t){return t=t||e.formData.tx.fromTime-a.data.walletHistoryTimeSecond||Math.trunc((new Date).getTime()/1e3)-2*a.data.walletHistoryTimeSecond,
s.loading.show(),r.load(e.pubkey,t).then(function(n){angular.merge(e.formData,n),e.updateView(),s.loading.hide()})["catch"](function(a){a.ucode==i.errorCodes.HTTP_LIMITATION?n(function(){return e.showMoreTx(t)},2e3):s.onError("ERROR.IDENTITY_TX_FAILED")(a)})}}function WotCertificationsViewController(e,n,t,i,a,o){"ngInject";angular.extend(this,t("WotIdentityAbstractCtrl",{$scope:e})),e.motions={receivedCertifications:angular.copy(o.motion.fadeSlideIn),givenCertifications:angular.copy(o.motion.fadeSlideInRight),avatar:angular.copy(o.motion.fadeIn)},e.motions.receivedCertifications.enable=!0,e.motions.givenCertifications.enable=!0,e.motions.avatar.enable=!0,e.$on("$ionicView.enter",function(n,t){if(t.stateParams&&t.stateParams.type&&(e.motions.receivedCertifications.enable="given"!=t.stateParams.type,e.motions.givenCertifications.enable="given"==t.stateParams.type,e.motions.avatar.enable=!1),t.stateParams&&t.stateParams.pubkey&&t.stateParams.pubkey.trim().length>0){if(e.loading)return e.load(t.stateParams.pubkey.trim(),!0,t.stateParams.uid).then(function(){e.doMotion(),e.showHelpTip()});e.doMotion()}else if(a.isLogin()){if(e.loading)return e.load(a.data.pubkey,!0,a.data.uid).then(function(){e.doMotion(),e.showHelpTip()});e.doMotion()}else e.showHome()}),e.$on("$ionicView.leave",function(){e.loading=!0}),e.doUpdate=function(){return e.load(e.formData.pubkey,!1,e.formData.uid).then(function(){e.doMotion(),e.showHelpTip()})},e.doMotion=function(n){e.doMotionReceivedCertifications(0,n),e.motions.avatar.enable&&e.motions.avatar.show({selector:".col-avatar ."+e.motions.avatar.ionListClass}),e.doMotionGivenCertifications(e.motions.receivedCertifications.enable?100:10,n)},e.doMotionReceivedCertifications=function(t,i){e.motions.receivedCertifications.enable?(i||e.motions.receivedCertifications.show({selector:".list.certifications .item",timeout:t}),(e.canCertify&&!e.alreadyCertified||n.tour)&&e.showFab("fab-certify",t)):(e.canCertify||n.tour)&&e.hideFab("fab-certify",0)},e.doMotionGivenCertifications=function(t,i){e.motions.givenCertifications.enable?(i||e.motions.givenCertifications.show({selector:".list.given-certifications .item",timeout:t}),(e.canSelectAndCertify||n.tour)&&e.showFab("fab-select-certify")):(e.canSelectAndCertify||n.tour)&&e.hideFab("fab-select-certify",0)},e.showHelpTip=function(){if(e.isLogin()&&i.data.helptip.enable){var n=e.createHelptipScope();if(n){var t=a.isUserPubkey(e.formData.pubkey),o=t?i.data.helptip.walletCerts:i.data.helptip.wotCerts;if(!(o<0)){var r=t?n.startWalletCertTour(o,!1):n.startWotCertTour(o,!1);return r.then(function(e){n.$destroy(),t?i.data.helptip.walletCerts=e:i.data.helptip.wotCerts=e,i.store()})}}}}}function WotSelectPubkeyIdentityModalController(e,n,t,i){e.loading=!0,e.load=function(){return i&&i.identities?(e.identities=i.identities,e.pubkey=e.identities[0].pubkey,e.loading=!1,n.when()):(e.pubkey=i&&i.pubkey,pubkey?t.loadRequirements({pubkey:pubkey,uid:uid}).then(function(n){n&&n.requirements&&(e.identities=n.requirements,n.requirements.alternatives?e.identities=[n.requirements].concat(n.requirements.alternatives):e.identities=[n.requirements]),e.loading=!1}):n.reject("Missing parameters: [pubkey] or [identities]"))},e.$on("modal.shown",e.load)}function NetworkLookupController(e,n,t,i,a,o,r,s,l,c,u,d,p){"ngInject";e.networkStarted=!1,e.ionItemClass="",e.expertMode=c.data.expertMode&&!s.screen.isSmall(),e.isHttps="https:"===a.location.protocol,e.search={text:"",loading:!0,type:void 0,results:[],endpointFilter:null,sort:void 0,asc:!0},e.helptipPrefix="helptip-network",e.eanbleLocationHref=!0,e.enter=function(n,t){e.networkStarted||(e.networkStarted=!0,e.search.loading=!0,u.get().then(function(n){n&&(e.node=r.node.same(n.node.host,n.node.port)?r:r.instance(n.node.host,n.node.port),t&&t.stateParams&&(t.stateParams.type&&["mirror","member","offline"].indexOf(t.stateParams.type)!=-1&&(e.search.type=t.stateParams.type),t.stateParams.expert&&(e.expertMode="true"==t.stateParams.expert)),e.load())})["catch"](function(n){s.onError("ERROR.GET_CURRENCY_FAILED")(n),e.networkStarted=!1}))},e.$on("$ionicParentView.enter",e.enter),e.leave=function(){e.networkStarted&&(d.close(),e.networkStarted=!1,e.search.loading=!0)},e.$on("$ionicView.beforeLeave",e.leave),e.$on("$ionicParentView.beforeLeave",e.leave),e.$on("$destroy",e.leave),e.computeOptions=function(){var n={filter:{member:!e.search.type||"member"===e.search.type,mirror:!e.search.type||"mirror"===e.search.type,endpointFilter:angular.isDefined(e.search.endpointFilter)?e.search.endpointFilter:null,online:!(e.search.type&&"offline"===e.search.type)},sort:{type:e.search.sort,asc:e.search.asc},expertMode:e.expertMode,timeout:l.timeout&&(e.expertMode?l.timeout/10:l.timeout/100)};return n},e.load=function(){e.search.loading&&(d.start(e.node,e.computeOptions()),e.refreshing=!1,d.api.data.on.changed(e,function(n){e.refreshing||(e.refreshing=!0,p.extendAll(n.peers).then(function(){e.networkStarted&&e.updateView(n),e.refreshing=!1}))})),e.showHelpTip()},e.updateView=function(n){console.debug("[peers] Updating UI"),e.$broadcast("$$rebind::rebind"),e.search.results=n.peers,e.search.memberPeersCount=n.memberPeersCount,e.search.loading=!e.networkStarted||d.isBusy(),e.motion&&e.search.results&&e.search.results.length>0&&e.motion.show({selector:".item-peer"}),e.loading||e.$broadcast("$$rebind::rebind")},e.refresh=function(){e.search.loading=!0,d.loadPeers()},e.sort=function(){e.search.loading=!0,e.refreshing=!0,d.sort(e.computeOptions()),e.updateView(d.data)},e.toggleSearchType=function(n){e.hideActionsPopover(),e.search.type===n||"none"===n?e.search.type=void 0:e.search.type=n,d.close(),e.search.loading=!0,e.load(),e.eanbleLocationHref&&t.search({type:e.search.type}).replace()},e.toggleSearchEndpoint=function(n){e.hideActionsPopover(),e.search.endpointFilter===n||null===n?e.search.endpointFilter=null:e.search.endpointFilter=n,e.sort()},e.toggleSort=function(n){e.search.sort!==n||e.search.asc?(e.search.asc=e.search.sort!==n||!e.search.asc,e.search.sort=n):(e.search.asc=void 0,e.search.sort=void 0),e.sort()},e.selectPeer=function(e){if(e.online&&!e.isWs2p()){var t={server:e.getServer()};e.isSsl()&&(t.ssl=!0),e.isTor()&&(t.tor=!0),n.go("app.view_peer",t)}},e.$on("csView.action.refresh",function(n,t){"peers"==t&&e.refresh()}),e.$on("csView.action.showActionsPopover",function(n,t){e.showActionsPopover(t)}),e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):i.fromTemplateUrl("templates/network/lookup_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showEndpointsPopover=function(e,n,t){var i=n.getEndpoints(t);i=(i||[]).reduce(function(e,t){var i=r.node.parseEndPoint(t);return e.concat({label:"NETWORK.VIEW.NODE_ADDRESS",value:n.getServer()+(i.path||"")})},[]),i.length&&(s.popover.show(e,{templateUrl:"templates/network/popover_endpoints.html",bindings:{titleKey:"NETWORK.VIEW.ENDPOINTS."+t,items:i}}),e.stopPropagation())},e.showWs2pPopover=function(e,n){return e.stopPropagation(),o("NETWORK.VIEW.PRIVATE_ACCESS").then(function(t){s.popover.show(e,{templateUrl:"templates/network/popover_endpoints.html",bindings:{titleKey:"NETWORK.VIEW.ENDPOINTS.WS2P",valueKey:"NETWORK.VIEW.NODE_ADDRESS",items:[{label:"NETWORK.VIEW.NODE_ADDRESS",value:n.bma["private"]?t:n.getServer()+(n.bma.path||"")},{label:"NETWORK.VIEW.WS2PID",value:n.bma.ws2pid},{label:"NETWORK.VIEW.POW_PREFIX",value:n.powPrefix}]}})})},e.showHelpTip=function(n,t){if(n=angular.isDefined(n)?n:c.data.helptip.network,t=!!angular.isDefined(t)&&t,!(n<0)){var i=e.createHelptipScope();if(i)return i.tour=t,i.startNetworkTour(n,!1).then(function(e){i.$destroy(),t||(c.data.helptip.network=e,c.store())})}}}function NetworkLookupModalController(e,n,t){"ngInject";angular.extend(this,n("NetworkLookupCtrl",{$scope:e})),t=t||{},e.enableFilter=!angular.isDefined(t.enableFilter)||t.enableFilter,e.search.type=angular.isDefined(t.type)?t.type:e.search.type,e.search.endpointFilter=angular.isDefined(t.endpointFilter)?t.endpointFilter:e.search.endpointFilter,e.expertMode=angular.isDefined(t.expertMode)?t.expertMode:e.expertMode,e.ionItemClass=t.ionItemClass||"item-border-large",e.eanbleLocationHref=!1,e.helptipPrefix="",e.selectPeer=function(n){e.closeModal(n)},e.$on("modal.hidden",function(){e.leave()}),e.showHelpTip=function(){},e.enter()}function NetworkLookupPopoverController(e,n){"ngInject";angular.extend(this,n("NetworkLookupCtrl",{$scope:e}));var t=t||{};e.enableFilter=!angular.isDefined(t.enableFilter)||t.enableFilter,e.search.type=angular.isDefined(t.type)?t.type:e.search.type,e.search.endpointFilter=angular.isDefined(t.endpointFilter)?t.endpointFilter:e.search.endpointFilter,e.expertMode=angular.isDefined(t.expertMode)?t.expertMode:e.expertMode,e.ionItemClass=t.ionItemClass||"item-border-large",e.helptipPrefix="",e.selectPeer=function(n){e.closePopover(n)},e.$on("popover.hidden",function(){e.leave()}),e.showHelpTip=function(){},e.enter()}function PeerInfoPopoverController(e,n,t,i,a,o){"ngInject";e.loading=!0,e.formData={},e.load=function(){return e.loading=!0,e.formData={},n.all([i.blockchain.current().then(function(n){e.formData.number=n.number,e.formData.medianTime=n.medianTime,e.formData.powMin=n.powMin,e.formData.useSsl=o.useSsl})["catch"](function(){delete e.formData.number,delete e.formData.medianTime,delete e.formData.powMin,delete e.formData.useSsl}),o.node.summary().then(function(n){console.log(n),e.formData.version=n&&n.duniter&&n.duniter.version,e.formData.software=n&&n.duniter&&n.duniter.software})["catch"](function(){delete e.formData.version,delete e.formData.software}),o.version.latest().then(function(n){e.formData.latestRelease=n})["catch"](function(){delete e.formData.latestRelease})]).then(function(){if(e.formData.latestRelease&&"duniter"==e.formData.software){var n=a.version.compare(e.formData.version,e.formData.latestRelease.version);e.formData.isPreRelease=n>0,e.formData.hasNewRelease=n<0}else e.formData.isPreRelease=!1,e.formData.hasNewRelease=!1;e.loading=!1,e.$broadcast("$$rebind::rebind")})},i.api.data.on.newBlock(e,function(n){e.loading||(console.debug("[peer info] Received new block. Reload content"),e.load())}),t.api.data.on.changed(e,function(n){e.loading||(console.debug("[peer info] Peer settings changed. Reload content"),e.load())}),e.load()}function PeerViewController(e,n,t,i,a,o,r){"ngInject";e.node={},e.loading=!0,e.isHttps="https:"===t.location.protocol,e.isReachable=!0,e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!a.screen.isSmall()||n.enableBack}),e.$on("$ionicView.enter",function(n,t){var i=!t.stateParams||!t.stateParams.server,a=t.stateParams&&t.stateParams.server||r.server,o=t.stateParams&&"true"==t.stateParams.ssl||!!i&&r.useSsl,s="true"==t.stateParams.tor||!!i&&r.useTor;return e.load(a,o,s).then(function(){return e.$broadcast("$csExtension.enter",n,t)}).then(function(){e.loading=!1})}),e.load=function(t,i,s){var l={server:t,host:t,useSsl:i,useTor:s},c=t.split(":");return 2==c.length&&(l.host=c[0],l.port=c[1]),angular.merge(e.node,s?r.lightInstance(l.host+".to",443,!0,6e4):r.lightInstance(l.host,l.port,l.useSsl),l),e.isReachable=!e.isHttps||i,e.isReachable?n.all([e.node.network.peering.self().then(function(n){e.node.pubkey=n.pubkey,e.node.currency=n.currency}),e.node.network.peers().then(function(n){var t=n.peers.map(function(e){var n=new Peer(e);return n.online="UP"==e.status,n.blockNumber=n.block.replace(/-.+$/,""),n.dns=n.getDns(),n.id=n.keyID(),n.server=n.getServer(),n});return o.extendAll([e.node].concat(t)).then(function(){e.peers=_.sortBy(t,function(e){var n=1;return n+=1e4*(e.online?1:0),n+=1e3*(e.hasMainConsensusBlock?1:0),n+=100*(e.uid?1:0),-n}),e.motion.show({selector:".item-peer"})})}),e.node.blockchain.current().then(function(n){e.current=n})])["catch"](a.onError(s?"PEER.VIEW.ERROR.LOADING_TOR_NODE_ERROR":"PEER.VIEW.ERROR.LOADING_NODE_ERROR")):r.network.peers().then(function(n){var t=(n&&n.peers||[]).reduce(function(e,n){var t=new Peer(n);return(t.getEndpoints("BASIC_MERKLED_API")||[]).reduce(function(e,n){var i=r.node.parseEndPoint(n);return i.dns!=l.host&&i.ipv4!=l.host&&i.ipv6!=l.host||i.port!=l.port?e:(t.bma=i,e.concat(t))},e)},[]),i=t.length&&t[0];return i?(e.node.pubkey=i.pubkey,e.node.currency=i.currency,o.extend(e.node)):void console.warn("Could not get peer from /network/peers")})},e.selectPeer=function(e){if(e.online&&!e.isWs2p()){var n={server:e.getServer()};e.isSsl()&&(n.ssl=!0),e.isTor()&&(n.tor=!0),i.go("app.view_peer",n)}},e.openRawPeering=function(n){return e.openLink(n,e.node.url+"/network/peering")},e.openRawCurrentBlock=function(n){return e.openLink(n,e.node.url+"/blockchain/current")}}function CurrencyViewController(e,n,t,i,a,o,r,s,l,c,u){e.formData={useRelative:s.data.useRelative,currency:"",M:0,MoverN:0,UD:0,cactual:0,c:0,dt:0,sigQty:0,sigStock:0,msWindow:0,msValidity:0,sigWindow:0,sigValidity:0,sigPeriod:0,medianTime:0,difficulty:0,Nprev:0,stepMax:0,sentries:0,xpercent:0,durationFromLastUD:0,blockUid:null,dtReeval:0,udReevalTime0:0,allRules:angular.isDefined(s.data.currency&&s.data.currency.allRules)?s.data.currency.allRules:s.data.expertMode,allWotRules:angular.isDefined(s.data.currency&&s.data.currency.allWotRules)?s.data.currency.allWotRules:s.data.expertMode,licenseUrl:s.getLicenseUrl()},e.loading=!0,e.screen=r.screen,e.enter=function(n,i){e.loading&&(l.get().then(e.load).then(function(){e.isLogin()&&e.showHelpTip()})["catch"](r.onError("ERROR.GET_CURRENCY_FAILED")),c.api.data.on.mainBlockChanged(e,function(n){e.loading||e.formData.blockUid!==n.buid&&(console.debug("[currency] Updating parameters UI (new main block detected)"),t(e.load,1e3))})),e.$broadcast("$csExtension.enter",i)},e.$on("$ionicView.enter",e.enter),e.load=function(){var t,i,a={},s=(new Date).getTime();return n.all([o.blockchain.parameters().then(function(e){a.currency=e.currency,a.c=e.c,a.dt=e.dt,a.sigQty=e.sigQty,a.sigStock=e.sigStock,a.msWindow=e.msWindow,a.msValidity=e.msValidity,a.sigWindow=e.sigWindow,a.sigValidity=e.sigValidity,a.sigPeriod=e.sigPeriod,a.stepMax=e.stepMax,a.xpercent=e.xpercent,a.avgGenTime=e.avgGenTime,a.dtReeval=e.dtReeval,a.udTime0=e.udTime0,a.udReevalTime0=e.udReevalTime0,a.dtReeval||(a.dtReeval=a.dt)}),o.blockchain.current().then(function(e){t=e.monetaryMass,a.N=e.membersCount,a.medianTime=e.medianTime,a.difficulty=e.powMin,a.blockUid=[e.number,e.hash].join("-")})["catch"](function(e){if(e&&e.ucode==o.errorCodes.NO_CURRENT_BLOCK)return t=0,a.N=0,a.medianTime=Math.trunc((new Date).getTime()/1e3),a.difficulty=0,void(a.blockUid=null);throw e}),o.blockchain.stats.ud().then(function(e){if(e.result.blocks.length){var n=e.result.blocks[e.result.blocks.length-1];return o.blockchain.block({block:n}).then(function(e){a.currentUD=e.unitbase>0?e.dividend*Math.pow(10,e.unitbase):e.dividend,i=e.medianTime,a.Nprev=e.membersCount})}return i=0,a.Nprev=0,o.blockchain.parameters().then(function(e){a.currentUD=e.ud0})})]).then(function(){var n=t-a.currentUD*a.Nprev,o=a.Nprev?n/a.Nprev:0;return a.cactual=o?100*a.currentUD/o:0,a.M=t,a.MoverN=a.Nprev?(n?n:t)/a.Nprev:0,a.UD=a.currentUD,a.durationFromLastUD=i?a.medianTime-i:0,a.sentries=Math.ceil(Math.pow(a.N,1/a.stepMax)),angular.extend(e.formData,a),console.debug("[currency] Parameters loaded in "+((new Date).getTime()-s)+"ms"),e.loading=!1,e.$broadcast("$$rebind::rebind"),r.ink(),r.loading.hide()})["catch"](function(n){e.loading=!1,r.onError("ERROR.LOAD_PEER_DATA_FAILED")(n)})},e.refresh=function(){if(!e.loading)return e.loading=!0,r.loading.show(),e.load().then(function(){e.$broadcast("csView.action.refresh","currency")})},e.refreshPeers=function(){return e.$broadcast("csView.action.refresh","peers"),n.when()},e.showExtendActionsPopover=function(n){e.$broadcast("csView.action.showActionsPopover",n)},e.onAllRulesChange=function(){s.data.currency=s.data.currency||{},s.data.currency.allRules!==e.formData.allRules&&(s.data.currency.allRules=e.formData.allRules,s.store())},e.$watch("formData.allRules",e.onAllRulesChange,!0),e.onAllWotRulesChange=function(){s.data.currency=s.data.currency||{},s.data.currency.allWotRules!==e.formData.allWotRules&&(s.data.currency.allWotRules=e.formData.allWotRules,s.store())},e.$watch("formData.allWotRules",e.onAllWotRulesChange,!0),e.startCurrencyTour=function(){return e.hideActionsPopover(),e.showHelpTip(0,!0)},e.showHelpTip=function(n,t){if(n=angular.isDefined(n)?n:s.data.helptip.currency,t=!!angular.isDefined(t)&&t,!(n<0)){var i=e.createHelptipScope(t);if(i)return i.tour=t,i.startCurrencyTour(n,!1).then(function(e){i.$destroy(),s.data.helptip.currency=e,s.store()})}},e.showLicenseModal=function(){return u.show("templates/currency/modal_license.html","CurrencyLicenseModalCtrl")},e.showHelpModal=function(e){a.showHelp({anchor:e})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):i.fromTemplateUrl("templates/currency/popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()}}function CurrencyLicenseModalController(e,n,t,i,a){"ngInject";e.loading=!0,e.load=function(){e.loading&&(e.licenseUrl=i.getLicenseUrl(),e.licenseUrl&&".txt"!=e.licenseUrl.substring(e.licenseUrl.length-3)&&(e.licenseUrlHtml=e.licenseUrl+".html",e.licenseUrl=e.licenseUrl+".txt"),e.loading=!1)},e.$on("modal.shown",e.load),e.downloadFile=function(){if(e.licenseUrl)return n.get(e.licenseUrl).success(function(e){var n=new Blob([e],{type:"text/plain; charset=utf-8"});a.saveAs(n,"license.txt")}).error(function(){t.onError("ERROR.GET_LICENSE_FILE_FAILED")()})}}function TransferController(e,n,t,i,a,o){"ngInject";angular.extend(this,n("TransferModalCtrl",{$scope:e,parameters:{}})),e.enter=function(n,t){var r={};t&&t.stateParams&&(t.stateParams.pubkey&&(r.pubkey=t.stateParams.pubkey),t.stateParams.amount?(r.useRelative=!1,r.amount=t.stateParams.amount):t.stateParams.udAmount&&(r.useRelative=!0,r.udAmount=t.stateParams.udAmount),t.stateParams.comment&&(r.comment=t.stateParams.comment)),o.login({sources:!0}).then(function(n){if(e.walletData=n,r.pubkey)return a.extend({pubkey:r.pubkey}).then(function(e){e&&e.uid&&(r.uid=e.name||e.uid)})}).then(function(){e.setParameters(r),e.onUseRelativeChanged(),i.loading.hide(),e.loading=!1,i.ink({selector:".modal-transfer .ink"})})},e.$on("$ionicView.enter",e.enter),e.setForm=function(n){e.form=n},e.closeModal=function(){return e.showHome()}}function TransferModalController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";var E=.01;e.convertedBalance=0,e.formData={destPub:null,amount:null,comment:null,useRelative:p.data.useRelative,useComment:!1},e.udAmount=null,e.minAmount=E,e.commentPattern=s.regexp.COMMENT,e.currency=d.data.name,e.loading=!0,e.commentInputId="transferComment-"+e.$id,e.smallscreen=angular.isDefined(e.smallscreen)?e.smallscreen:c.screen.isSmall(),(e.smallscreen||r.enable)&&(e.digitKeyboardSettings=e.digitKeyboardSettings||r.keyboard.digit.settings.bindModel(e,"formData.amount",{decimal:!0,decimalSeparator:".",resizeContent:!0}),e.digitKeyboardVisible=!1),e.setParameters=function(n){n&&(n.pubkey&&(e.formData.destPub=n.pubkey),n.uid?(e.destUid=n.uid,e.destPub=""):(e.destUid="",e.destPub=n.pubkey),n.amount?(e.formData.amount=n.amount,e.formData.useRelative=!1):n.udAmount&&(e.formData.amount=n.udAmount,e.formData.useRelative=!0),n.comment&&(e.formData.useComment=!0,e.formData.comment=n.comment))},e.setParameters(m),e.enter=function(){return l.login({sources:!0,silent:!0}).then(function(n){e.walletData=n,e.onUseRelativeChanged(),e.loading=!1,c.ink({selector:".modal-transfer .ink"})})["catch"](function(n){return"CANCELLED"==n?e.cancel():void c.onError("ERROR.LOGIN_FAILED")(n)})},e.$on("modal.shown",e.enter),e.cancel=function(){e.closeModal()},e.onUseRelativeChanged=function(){e.currency=d.data.name,e.formData.useRelative?(e.convertedBalance=l.data.balance/d.data.currentUD,e.minAmount=E/(d.data.currentUD/100)):(e.convertedBalance=l.data.balance/100,e.minAmount=E),e.form&&(e.form.$valid=void 0)},e.$watch("formData.useRelative",e.onUseRelativeChanged,!0),e.$watch("walletData.balance",e.onUseRelativeChanged,!0),e.doTransfer=function(){if(e.form.$submitted=!0,e.form.$valid&&e.formData.destPub&&e.formData.amount){var t=e.formData.amount;if("string"==typeof t&&(t=parseFloat(t.replace(new RegExp("[.,]"),"."))),t<e.minAmount)return e.form.$valid=!1,e.form.amount.$invalid=!0,e.form.amount.$error=e.form.amount.$error||{},void(e.form.amount.$error.min=!0);if(e.form.amount.$error&&e.form.amount.$error.min&&(e.form.amount.$invalid=!1,delete e.form.amount.$error.min),!e.sending){e.sending=!0;var a;return n.all([l.auth({silent:!0}),d.currentUD().then(function(e){a=e}),e.hideDigitKeyboard(300)]).then(e.askTransferConfirm).then(function(n){return n?c.loading.show().then(function(){t=e.formData.useRelative?a*t:100*t.toFixed(2);var n=e.formData.comment&&e.formData.comment.trim();return n&&!n.length&&(n=null),l.transfer(e.formData.destPub,t,n,e.formData.useRelative)}).then(function(){return e.sending=!1,c.loading.hide(),e.closeModal(!0)}).then(function(e){return i(function(){c.toast.show("INFO.TRANSFER_SENT")},500),e})["catch"](function(n){e.sending=!1,c.onError("ERROR.SEND_TX_FAILED")(n)}):void(e.sending=!1)})}}},e.askTransferConfirm=function(){return t(["COMMON.UD","COMMON.EMPTY_PARENTHESIS"]).then(function(n){return t("CONFIRM.TRANSFER",{from:l.data.isMember?l.data.uid:a("formatPubkey")(l.data.pubkey),to:e.destUid?e.destUid:e.destPub,amount:e.formData.amount,unit:e.formData.useRelative?n["COMMON.UD"]:a("abbreviate")(e.currency),comment:e.formData.comment&&0!==e.formData.comment.trim().length?e.formData.comment:n["COMMON.EMPTY_PARENTHESIS"]})}).then(c.alert.confirm)},e.addComment=function(){e.formData.useComment=!0,e.commentInputId&&i(function(){o(e.commentInputId)},200)},e.showWotLookupModal=function(){return e.hideDigitKeyboard(0),u.showWotLookup().then(function(n){n&&(n.uid?(e.destUid=n.uid,e.destPub=""):(e.destUid="",e.destPub=n.pubkey),e.formData.destPub=n.pubkey)})},e.showUnitPopover=function(n){c.popover.show(n,{templateUrl:"templates/wallet/popover_unit.html",scope:e}).then(function(n){e.formData.useRelative=n})},e.showDigitKeyboard=function(){if(e.digitKeyboardSettings&&!e.digitKeyboardVisible)return r.enable?(r.keyboard.close(),i(function(){e.digitKeyboardVisible=!0},200)):(e.digitKeyboardVisible=!0,n.when())},e.hideDigitKeyboard=function(t){return e.digitKeyboardVisible?(e.digitKeyboardVisible=!1,i(function(){},t||200)):n.when()}}function SettingsController(e,n,t,i,a,o,r,s,l,c,u,d,p){"ngInject";e.formData=angular.copy(c.data),e.popupData={},e.loading=!0,e.nodePopup={},e.bma=l,e.keepAuthIdleLabels={10:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.SECONDS",labelParams:{value:10}},30:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.SECONDS",labelParams:{value:30}},60:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.MINUTE",labelParams:{value:1}},600:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.MINUTES",labelParams:{value:10}},3600:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.HOUR",labelParams:{value:1}},9999:{labelKey:"SETTINGS.KEEP_AUTH_OPTION.ALWAYS"}},e.keepAuthIdles=_.keys(e.keepAuthIdleLabels),e.$on("$ionicView.enter",function(){c.ready().then(e.load)}),e.setPopupForm=function(n){e.popupForm=n},e.load=function(){e.loading=!0,e.locales=angular.copy(c.locales),angular.merge(e.formData,c.data),e.formData.locale=c.data.locale&&c.data.locale.id&&_.findWhere(e.locales,{id:c.data.locale.id})||_.findWhere(e.locales,{id:c.defaultSettings.locale.id}),e.loading=!1,a(function(){s.ink({selector:".item"}),e.showHelpTip()},100)},e.reset=function(){e.actionsPopover&&e.actionsPopover.hide(),e.pendingSaving=!0,c.reset().then(u.restart).then(function(){e.load(),e.pendingSaving=!1})},e.changeLanguage=function(e){o.use(e)},e.changeNode=function(n){n=n||{host:e.formData.node.host,port:e.formData.node.port&&80!=e.formData.node.port&&443!=e.formData.node.port?e.formData.node.port:void 0,useSsl:angular.isDefined(e.formData.node.useSsl)?e.formData.node.useSsl:443==e.formData.node.port},e.showNodePopup(n).then(function(n){if(n.host!==e.formData.node.host||n.port!==e.formData.node.port||n.useSsl!==e.formData.node.useSsl){s.loading.show();var i=l.instance(n.host,n.port,n.useSsl,!0);i.isAlive().then(function(a){return a?(s.loading.hide(),e.formData.node=n,delete e.formData.temporary,l.copy(i),e.bma=l,u.restart(),t.clearCache()):(s.loading.hide(),s.alert.error("ERROR.INVALID_NODE_SUMMARY").then(function(){e.changeNode(n)}))})}})},e.showNodeList=function(){return i._popupStack[0].responseDeferred.promise.close(),p.showNetworkLookup({enableFilter:!0,type:"member"}).then(function(e){if(e){var n=e.getBMA();return{host:n.dns?n.dns:e.hasValid4(n)?n.ipv4:n.ipv6,port:n.port||80,useSsl:n.useSsl}}}).then(function(n){e.changeNode(n)})},e.showNodePopup=function(t){return n(function(n,a){e.popupData.newNode=t.port?[t.host,t.port].join(":"):t.host,e.popupData.useSsl=t.useSsl,e.popupForm&&e.popupForm.$setPristine(),o(["SETTINGS.POPUP_PEER.TITLE","COMMON.BTN_OK","COMMON.BTN_CANCEL"]).then(function(t){i.show({templateUrl:"templates/settings/popup_node.html",title:t["SETTINGS.POPUP_PEER.TITLE"],scope:e,buttons:[{text:t["COMMON.BTN_CANCEL"]},{text:t["COMMON.BTN_OK"],type:"button-positive",onTap:function(n){return e.popupForm.$submitted=!0,e.popupForm.$valid&&e.popupForm.newNode?{server:e.popupData.newNode,useSsl:e.popupData.useSsl}:void n.preventDefault()}}]}).then(function(e){if(!e)return void s.loading.hide();var t=e.server.split(":");t[1]=t[1]?t[1]:80,n({host:t[0],port:t[1],useSsl:e.useSsl})})})})},e.save=function(){return e.loading||e.pendingSaving?n.when():e.saving?(e.pendingSaving=!0,a(function(){return e.pendingSaving=!1,e.save()},500)):(e.saving=!0,void a(function(){e.cleanupHelpTip(),angular.merge(c.data,e.formData),e.formData.temporary||delete c.data.node.temporary,c.store(),e.saving=!1},100))},e.onDataChanged=function(t,i,o){if(e.loading||e.pendingSaving)return n.when();if(e.saving)return e.pendingSaving=!0,a(function(){return e.pendingSaving=!1,e.onDataChanged(t,i,o)},500);var r=!angular.equals(t,i);r&&e.save()},e.$watch("formData",e.onDataChanged,!0),e.getServer=function(){return e.formData.node&&e.formData.node.host?r.getServer(e.formData.node.host,e.formData.node.port):""},e.cleanupHelpTip=function(){var n=e.formData.helptip.enable!==c.data.helptip.enable;if(n){var t=e.formData.helptip.enable;e.formData.helptip=angular.merge({},c.defaultSettings.helptip),e.formData.helptip.enable=t}},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):d.fromTemplateUrl("templates/settings/popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.startSettingsTour=function(){return e.hideActionsPopover(),e.showHelpTip(0,!0)},e.showHelpTip=function(n,t){if((e.isLogin()||t)&&(n=angular.isDefined(n)?n:c.data.helptip.settings,!(n<0))){0===n&&(n=1);var i=e.createHelptipScope(t);if(i)return i.startSettingsTour(n,!1).then(function(e){i.$destroy(),c.data.helptip.settings=e,c.store()})}}}function BlockLookupController(e,n,t,i,a,o,r,s,l,c,u){"ngInject";e.search={result:[],total:0,loading:!0,loadingMore:!1,hasMore:!1,type:"last"},e.node={},e.currency=!1,e.entered=!1,e.searchTextId=null,e.ionItemClass="item-border-large",e.defaultSizeLimit=r.screen.isSmall()?50:100,e.helptipPrefix="helptip-network",e.enter=function(i,a){if(e.entered)e.startListenBlock();else{if(a&&a.stateParams&&a.stateParams.q&&(e.search.text=a.stateParams.q,e.search.text&&e.search.text.trim().length&&(e.search.type="text")),a&&a.stateParams&&a.stateParams.server){var o="true"==a.stateParams.ssl,c="true"==a.stateParams.tor,d={server:a.stateParams.server,host:a.stateParams.server,useSsl:o,useTor:c},p=a.stateParams.server.split(":");if(2==p.length&&(d.host=p[0],d.port=p[1]),!s.node.same(d.host,d.port))return e.node=c?s.instance(d.host+".to",443,!0,6e5):s.instance(d.host,d.port,d.useSsl),e.node.blockchain.parameters().then(function(n){e.currency=n.currency,e.enter()});e.node=s}if(!e.currency)return l.get().then(function(n){return e.currency=n?n.name:null,e.node=n.node?n.node:s,e.currency?void e.enter():void r.alert.error("ERROR.GET_CURRENCY_FAILED")})["catch"](r.onError("ERROR.GET_CURRENCY_FAILED"));e.compactMode=!angular.isDefined(e.compactMode)||e.compactMode,e.expertMode=angular.isDefined(e.expertMode)?e.expertMode:!r.screen.isSmall()&&u.data.expertMode,e.doSearch(),e.searchTextId&&n(function(){t(e.searchTextId)},100),e.startListenBlock(),e.entered=!0,e.showHelpTip()}},e.$on("$ionicParentView.enter",e.enter),e.leave=function(){e.wsBlock&&(console.debug("[block] Stopping websocket [/ws/block]"),e.wsBlock.close(),delete e.wsBlock)},e.$on("$ionicParentView.leave",e.leave),e.$on("$destroy",e.leave),e.doSearchLast=function(){return e.search.type="last",e.doSearch()},e.doSearch=function(n){n=angular.isDefined(n)?n:0,e.search.loading=0===n,e.search.hasMore=!1;var t;if(0===n)t=e.node.blockchain.current().then(function(n){var t=n.number<e.defaultSizeLimit?n.number:e.defaultSizeLimit;return e.node.blockchain.blocksSlice({count:t,from:n.number-t}).then(function(e){return e.splice(0,0,n),e})})["catch"](function(e){if(e&&e.ucode==s.errorCodes.NO_CURRENT_BLOCK)return[];throw e});else{var i=e.search.results[e.search.results.length-1].number,a=i<e.defaultSizeLimit?i:e.defaultSizeLimit;t=e.node.blockchain.blocksSlice({count:a,from:i-a})}return t.then(function(t){if(!t||!t.length)return e.doDisplayResult([],n,0),void(e.search.loading=!1);t=t.reduce(function(e,n){var t=new Block(n);return t.cleanData(),e.concat(t)},[]),t=_.sortBy(t,function(e){return-1*e.number});var i=(0===n?t[0].number:e.search.results[0].number)+1;return e.doPrepareResult(t,n).then(function(){e.doDisplayResult(t,n,i),e.search.loading=!1})})["catch"](function(n){r.onError("BLOCKCHAIN.ERROR.SEARCH_BLOCKS_FAILED")(n),e.search.loading=!1})};var d=i("formatDateShort");e.doPrepareResult=function(n,t){if(t=angular.isDefined(t)?t:0,"last"==e.search.type){var i;if(t>0&&e.search.results.length){var a=e.search.results[e.search.results.length-1];i=a.empty?a.day:void 0}_.forEach(n,function(e,n){if(e.empty){var a=d(e.medianTime),o=0!==n||0!==t,r=!i||i==a;e.compacted=o&&r,i=a}else i=void 0})}return c.extendAll(n,"issuer")},e.doDisplayResult=function(n,t,i){t?e.search.results=e.search.results.concat(n):e.search.results=n||[],e.search.hasMore=i&&e.search.results.length<i,e.search.total=i||e.search.total,e.smallscreen=r.screen.isSmall(),n&&n.length&&e.motion.show({selector:".list-blocks .item-block"}),e.$broadcast("$$rebind::rebind")},e.showMore=function(){var n=e.search.results?e.search.results.length:0;return e.search.loadingMore=!0,e.doSearch(n).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})["catch"](function(n){console.error(n),e.search.loadingMore=!1,e.search.hasMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.startListenBlock=function(){e.wsBlock||(e.node==s?l.api.data.on.newBlock(e,e.onBlock):(console.debug("[block] Listening on websocket [/ws/block]"),e.wsBlock=e.node.websocket.block(),e.wsBlock.on(function(n){if(e.wsBlock&&n){var t=new Block(n);t.cleanData(),e.onBlock(t)}})))},e.onBlock=function(n){if(!(e.search.loading||"last"!=e.search.type||e.search.sort&&"desc"!=e.search.sort))if(e.search.results=e.search.results||[],e.search.results.length){var t=_.findWhere(e.search.results,{number:n.number});t?t.hash!=n.hash&&(console.debug("[ES] [blockchain] block #{0} updated (by websocket)".format(n.number)),angular.copy(n,t),e.doPrepareResult([n,e.search.results[1]]).then(function(){return e.showBlock(t)})):(console.debug("[ES] [blockchain] new block #{0} received (by websocket)".format(n.number)),e.search.total++,e.search.results.splice(0,0,n),
e.doPrepareResult([n,e.search.results[1]]).then(function(){return e.showBlock(n)}))}else console.debug("[ES] [blockchain] new block #{0} received (by websocket)".format(n.number)),e.search.total++,e.search.results.push(n),e.doPrepareResult([n]).then(function(){return e.showBlock(n)})},e.showBlock=function(n){e.$broadcast("$$rebind::rebind"),e.motion.show({selector:"#block-"+n.number})},e.selectBlock=function(t){t.compacted&&e.compactMode?(e.toggleCompactMode(),n(function(){o("block-"+t.number)},900)):s.node.same(e.node.host,e.node.port)?a.go("app.view_block_hash",{number:t.number,hash:t.hash}):a.go("app.view_server_block_hash",{server:e.node.server,ssl:e.node.useSsl,number:t.number,hash:t.hash})},e.toggleCompactMode=function(){if(e.compactMode=!e.compactMode,e.doDisplayResult(e.search.results,0,e.search.total),!e.search.hasMore&&e.search.results.length&&"last"==e.search.type){var t=e.search.results[e.search.results.length-1];t&&t.number>0&&n(function(){e.search.hasMore=!0},500)}},e.toggleSort=function(n){e.search.sort!==n||e.search.asc?(e.search.asc=e.search.sort!==n||!e.search.asc,e.search.sort=n):(e.search.asc=void 0,e.search.sort=void 0),e.doSearch()},e.showHelpTip=function(){}}function BlockViewController(e,n,t,i,a,o,r){"ngInject";e.loading=!0,e.formData={},e.compactMode=!0,e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!i.screen.isSmall()||n.enableBack}),e.enter=function(n,t){if(e.loading){if(t&&(e.number=t.stateParams&&angular.isDefined(t.stateParams.number)?t.stateParams.number:"current",e.hash=t.stateParams&&t.stateParams.hash?t.stateParams.hash:void 0,t.stateParams&&t.stateParams.server)){var r="true"==t.stateParams.ssl,s="true"==t.stateParams.tor,l={server:t.stateParams.server,host:t.stateParams.server,useSsl:r,useTor:s},c=t.stateParams.server.split(":");if(2==c.length&&(l.host=c[0],l.port=c[1]),!a.node.same(l.host,l.port))return e.node=s?a.instance(l.host+".to",443,!0,6e5):a.instance(l.host,l.port,l.useSsl),e.node.blockchain.parameters().then(function(n){e.currency=n.currency,e.enter()});e.node=a}e.currency&&e.node?e.load():o.get().then(function(n){n&&(e.currency=n.name,e.node=n.node,e.load())})["catch"](i.onError("ERROR.GET_CURRENCY_FAILED"))}},e.$on("$ionicView.enter",e.enter),e.leave=function(){},e.$on("$ionicParentView.beforeLeave",e.leave),e.load=function(){if(e.number){var n="current"==e.number?e.node.blockchain.current():e.node.blockchain.block({block:e.number});return n.then(function(n){var t=new Block(n);if(t.parseData(),!t||!angular.isDefined(t.number)||!t.hash)return e.loading=!1,void i.alert.error("ERROR.GET_BLOCK_FAILED");if(e.hash&&t.hash!=e.hash)return e.loading=!1,void i.alert.error("ERROR.INVALID_BLOCK_HASH");var o=[];t.joiners.length&&(o=o.concat(t.joiners)),t.certifications.length&&(o=t.certifications.reduce(function(e,n){return n.to={pubkey:n.to},n.from={pubkey:n.from},e.concat(n.to,n.from)},o),t.certifications=_.groupBy(t.certifications,function(e){return e.to.pubkey})),t.transactions.length&&(o=t.transactions.reduce(function(e,n){return n.issuers=n.issuers.reduce(function(e,n){return e.concat({pubkey:n})},[]),_.forEach(n.outputs||[],function(e){e.unlockCondition&&angular.merge(e,a.tx.parseUnlockCondition(e.unlockCondition))}),e.concat(n.issuers.concat(n.outputs||[]))},o));var s={pubkey:t.issuer};return o.push(s),r.extendAll(o).then(function(){e.updateView({block:t,issuer:s})})})["catch"](function(n){e.loading=!1,i.onError("ERROR.GET_BLOCK_FAILED")(n)})}},e.updateView=function(n){e.formData=n.block,e.issuer=n.issuer,e.loading=!1},e.toggleCompactMode=function(){e.compactMode=!e.compactMode};var s=10;e.toUnlockUIArray=function(n,t,i){return t=t||s,!n.children||"AND"!=n.type&&"OR"!=n.type?{style:{"padding-left":t+"px"},operator:i,type:n.type,value:n.value}:n.children.reduce(function(i,a,o){return a.children&&o>0?(i=i.concat({style:{"padding-left":t+"px","padding-top":"10px","padding-bottom":"10px"},operator:n.type}),i.concat(e.toUnlockUIArray(a,t+s))):i.concat(e.toUnlockUIArray(a,t+s,o&&n.type))},[])},e.showUnlockConditionPopover=function(t,i){t.unlockTree&&(e.popoverData=e.popoverData||{},e.popoverData.unlockConditions=e.toUnlockUIArray(t.unlockTree),e.unlockConditionPopover?e.unlockConditionPopover.show(i):n.fromTemplateUrl("templates/blockchain/unlock_condition_popover.html",{scope:e}).then(function(n){e.unlockConditionPopover=n,e.$on("$destroy",function(){e.unlockConditionPopover.remove()}),e.unlockConditionPopover.show(i)}))},e.hideUnlockConditionsPopover=function(){e.unlockConditionPopover&&(e.unlockConditionPopover.hide(),e.popoverData&&delete e.popoverData.unlockConditions)},e.goState=function(n,i){e.hideUnlockConditionsPopover(),t.go(n,i)},e.openRawBlock=function(n){return e.openLink(n,e.node.url+"/blockchain/block/"+e.formData.number)},e.showHelpTip=function(e){}}function Notification(e,n){function t(e){return e?e.substr(0,4)+e.substr(e.length-4):""}var i={registry:"EVENT.REGISTRY."},a=this;e=e||{},a.type=e.type&&e.type.toLowerCase(),a.time=e.time,a.hash=e.hash,a.read=!!e.read_signature,a.message=e.reference&&i[e.reference.index]?i[e.reference.index]+e.code:"EVENT."+e.code,a.params=e.params,n&&"function"==typeof n&&(a.markAsReadCallback=n),a.markAsRead=function(){a.markAsReadCallback&&a.markAsReadCallback(a)};var o;e.code=e.code||"",e.code.startsWith("MEMBER_")?(a.avatarIcon="ion-person",a.icon="ion-information-circled positive"):e.code.startsWith("TX_")?(a.avatarIcon="ion-card",a.icon="TX_SENT"==e.code?"ion-paper-airplane dark":"ion-archive balanced",o=e.params.length>0?e.params[0]:null,o&&o.indexOf(",")==-1&&(a.pubkey=o),a.state="app.view_wallet_tx",a.stateParams={refresh:!0}):e.code.startsWith("CERT_")?(a.avatarIcon="CERT_RECEIVED"==e.code?"ion-ribbon-b":"ion-ribbon-a",a.icon="CERT_RECEIVED"==e.code?"ion-ribbon-b balanced":"ion-ribbon-a gray",a.pubkey=e.params.length>0?e.params[0]:null,a.state="app.wallet_cert",a.stateParams={type:"CERT_RECEIVED"==e.code?"received":"given"}):e.code.startsWith("MESSAGE_")?(a.avatarIcon="ion-email",a.icon="ion-email dark",o=e.params.length>0?e.params[0]:null,o&&o.indexOf(",")==-1&&(a.pubkey=o),a.id=e.reference.id):e.reference&&"page"==e.reference.index?(a.avatarIcon="ion-ios-book",e.reference.anchor?(a.icon="ion-ios-chatbubble-outline dark",a.state="app.view_page_anchor",a.stateParams={id:e.reference.id,title:e.params[1],anchor:t(e.reference.anchor)}):(a.icon="ion-ios-book dark",a.state="app.view_page",a.stateParams={id:e.reference.id,title:e.params[1]})):"INFO"==e.type?(a.avatarIcon="ion-information",a.icon="ion-information-circled positive"):"WARN"==e.type?(a.avatarIcon="ion-alert-circled",a.icon="ion-alert-circled energized"):"ERROR"==e.type&&(a.avatarIcon="ion-close",a.icon="ion-close-circled assertive")}function Comment(e,n){var t=this;t.id=e,t.message=null,t.html=null,t.issuer=null,t.time=null,t.creationTime=null,t.reply_to=null,t.replyCount=0,t.parent=null,t.replies=[],t.onRemoveListeners=[],t.copy=function(e){t.message=e.message,t.html=e.html,t.issuer=e.issuer,t.time=e.time,t.creationTime=e.creationTime||t.time,t.id=e.id||t.id,t.reply_to=e.reply_to||t.reply_to,t.uid=e.uid||t.uid,t.name=e.name||t.name,t.avatarStyle=e.avatarStyle||t.avatarStyle,e.parent&&(t.parent=e.parent),e.replies&&t.setReplies(e.replies)},t.copyFromJson=function(e){t.message=e.message,t.issuer=e.issuer,t.time=e.time,t.creationTime=e.creationTime||t.time,t.reply_to=e.reply_to},t.addOnRemoveListener=function(e){e&&"function"==typeof e&&t.onRemoveListeners.push(e)},t.cleanAllListeners=function(){t.onRemoveListeners=[]},t.setReplies=function(e){t.removeAllReplies(),t.addReplies(e)},t.addReplies=function(e){e&&e.length&&(e=e.sort(function(e,n){return e.time-n.time}),_.forEach(e,function(e){e.parent=t,t.replies.push(e)}),t.replyCount+=e.length)},t.containsReply=function(e){return t.replies.indexOf(e)!=-1},t.addReply=function(e){t.replyCount+=1,t.replies.push(e),t.replies=t.replies.sort(function(e,n){return e.time-n.time}),e.parent=t},t.removeAllReplies=function(){if(t.replyCount){var e=t.replies.splice(0,t.replies.length);t.replyCount=0,_.forEach(e,function(e){e.remove()})}},t.removeReply=function(e){var n=_.findIndex(t.replies,{id:e});if(n!=-1){t.replyCount--;var i=t.replies.splice(n,1)[0];delete i.parent}},t.remove=function(){t.parent&&(t.parent.removeReply(t.id),delete t.parent),t.onRemoveListeners.length&&(_.forEach(t.onRemoveListeners,function(e){e(t)}),t.issuer=null,t.message=null,t.cleanAllListeners())},n&&"object"==typeof n&&t.copyFromJson(n)}function Invitation(e){var n=this;if(e=e||{},n.type=e.type&&e.type.toLowerCase(),n.time=e.time,n.id=e.id,"certification"==n.type){if(n.comment=e.comment,n.icon="ion-ribbon-a",n.okText="WOT.BTN_CERTIFY",!e.content||e.content.indexOf("-")==-1)return console.error("[invitation] Empty content for invitation [{0}]".format(n.id)),n.message="INVITATION.ERROR.BAD_INVITATION_FORMAT",void(n.pubkey=e.issuer);var t=e.content.lastIndexOf("-");if(t==-1)return console.error("[invitation] Bad content format for invitation [{0}]: {1}".format(n.id,e.content)),n.message="INVITATION.ERROR.BAD_INVITATION_FORMAT",void(n.pubkey=e.issuer);var i={uid:e.content.substr(0,t),pubkey:e.content.substr(t+1)};n.state="app.wot_identity",n.stateParams={pubkey:i.pubkey,uid:i.uid,action:"certify"},i.pubkey==e.issuer?(n.pubkey=e.issuer,n.uid=i.uid,n.message="INVITATION.ASK_CERTIFICATION"):(n.issuer={pubkey:e.issuer},n.message="INVITATION.SUGGESTION_CERTIFICATION",n.pubkey=i.pubkey,n.uid=i.uid)}}function ESPicturesEditController(e,n,t,i){"ngInject";e.selectNewPicture=function(n){if(i.enable)e.openPicturePopup();else{var t=angular.element(document.querySelector(n||"#pictureFile"));t&&t.length>0&&t[0].click()}},e.openPicturePopup=function(){i.camera.getPicture().then(function(n){e.pictures.push({src:"data:image/png;base64,"+n,isnew:!0})})["catch"](n.onError("ERROR.TAKE_PICTURE_FAILED"))},e.fileChanged=function(i){return n.loading.show(),t(function(t,a){var o=i.target.files[0];n.image.resizeFile(o).then(function(i){e.pictures.push({src:i,isnew:!0}),n.loading.hide(100),t()})})},e.removePicture=function(n){e.pictures.splice(n,1)},e.favoritePicture=function(n){if(n>0){var t=e.pictures[n];e.pictures.splice(n,1),e.pictures.splice(0,0,t)}},e.rotatePicture=function(t){var i=e.pictures[t];n.image.rotateSrc(i.src).then(function(e){i.src=e})}}function ESCategoryModalController(e,n,t,i){"ngInject";e.loading=!0,e.allCategories=[],e.categories=[],this.searchText="",this.title=i&&i.title,e.afterLoad=function(i){e.categories=i,e.allCategories=i,e.loading=!1,t(function(){n.ink()},10)},this.doSearch=function(){var n=this.searchText.toLowerCase().trim();n.length>1?(e.loading=!0,e.categories=e.allCategories.reduce(function(e,t){return t.parent&&t.name.toLowerCase().search(n)!=-1?e.concat(t):e},[]),e.loading=!1):e.categories=e.allCategories},i&&i.categories?e.afterLoad(i.categories):i&&i.load&&i.load().then(function(n){e.afterLoad(n)})}function ESCommentsController(e,n,t,i,a){"ngInject";e.loading=!0,e.defaultCommentSize=5,e.formData={},e.comments={},e.$on("$recordView.enter",function(n,t){!e.loading&&e.id&&e.load(e.id,{animate:!1})}),e.$on("$recordView.load",function(n,t,i){e.id=t||e.id,e.service=i||e.service,console.debug("[ES] [comment] Initialized service with: "+i.id),e.id&&e.load(e.id)}),e.load=function(n,t){return t=t||{},t.from=t.from||0,t.size=t.size||e.defaultCommentSize,t.animate=!angular.isDefined(t.animate)||t.animate,t.loadAvatarAllParent=!angular.isDefined(t.loadAvatarAllParent)||t.loadAvatarAllParent,e.loading=!0,e.service.load(n,t).then(function(i){!t.animate&&i.result.length&&_.forEach(i.result,function(e){e.isnew=!0}),e.comments=i,e.comments.hasMore=i.total>i.result.length,e.loading=!1,e.service.changes.start(n,i,e),e.motion.show({selector:".comments .item",ink:!1})})},e.$on("$recordView.beforeLeave",function(){if(e.comments){if(!e.service)return void console.error("[comment] Comment controller has no service ! Unable to listen changes...");e.service.changes.stop(e.comments)}}),e.showMore=function(){var n=0,t=-1;e.load(e.id,{from:n,size:t,loadAvatarAllParent:!1}).then(function(){e.motion.show({selector:".card-avatar"})})},e.save=function(){e.formData.message&&e.formData.message.length&&e.loadWallet({minData:!0,auth:!0}).then(function(){a.loading.hide();var n=e.formData;return e.formData={},e.focusNewComment(),e.service.save(e.id,e.comments,n)}).then(function(){e.comments.total++})["catch"](a.onError("COMMENTS.ERROR.FAILED_SAVE_COMMENT"))},e.share=function(i,o){var r,s=angular.copy(t.params);s.anchor?(s.anchor=n("formatHash")(o.id),r=t.href(t.current.name,s,{absolute:!0})):r=t.href(t.current.name,s,{absolute:!0})+"/"+n("formatHash")(o.id);var l=_.findIndex(e.comments.result,{id:o.id}),c=r+"?u="+(o.uid||n("formatPubkey")(o.issuer));a.popover.show(i,{templateUrl:"templates/common/popover_share.html",scope:e,bindings:{titleKey:"COMMENTS.POPOVER_SHARE_TITLE",titleValues:{number:l?l+1:1},date:o.creationTime,value:c,postUrl:r,postMessage:o.message},autoselect:".popover-share input"})},e.edit=function(n){var t=new Comment;t.copy(n),e.formData=t},e.remove=function(n){n&&(n.remove(),e.comments.total--)},e.reply=function(n){n&&n.id&&(e.formData={parent:n},e.focusNewComment(!0))},e.cancel=function(){e.formData={},e.focusNewComment()},e.focusNewComment=function(e){a.screen.isSmall()?e&&i("comment-form-input"):i("comment-form-textarea")},e.removeParentLink=function(){delete e.formData.parent,delete e.formData.reply_to,e.focusNewComment()},e.toggleExpandedReplies=function(e,n){e.expandedReplies=e.expandedReplies||{},e.expandedReplies[n]=!e.expandedReplies[n]},e.toggleExpandedParent=function(e,n){e.expandedParent=e.expandedParent||{},e.expandedParent[n]=!e.expandedParent[n]}}function ESSocialsEditController(e,n,t,i,a){"ngInject";e.socialData={url:null,reorder:!1},e.addSocialNetwork=function(){if(e.socialData.url&&0!==e.socialData.url.trim().length){e.formData.socials=e.formData.socials||[];var o=e.socialData.url.trim(),r=_.findWhere(e.formData.socials,{url:o});if(r)return void(e.socialData.url="");var s=a.get(o);if(!s)return i.alert.error("PROFILE.ERROR.INVALID_SOCIAL_NETWORK_FORMAT"),void n("socialUrl");e.formData.socials.push(s),e.socialData.url="",e.motion.show({selector:"#social-"+t("formatSlug")(s.url),startVelocity:1e4})}},e.editSocialNetwork=function(t){var i=e.formData.socials[t];e.formData.socials.splice(t,1),e.socialData.url=i.url,n("socialUrl")},e.reorderSocialNetwork=function(n,t,i){n&&t!=i&&(e.formData.socials.splice(t,1),e.formData.socials.splice(i,0,n))},e.filterFn=function(e){return!e.recipient||e.valid}}function ESSocialsViewController(e){"ngInject";e.openSocial=function(n,t){return n.stopPropagation(),e.openLink(n,t.url,{type:t.type})},e.filterFn=function(e){return!e.recipient||e.valid}}function ESAvatarModalController(e){e.formData={initCrop:!1,imageCropStep:0,imgSrc:void 0,result:void 0,resultBlob:void 0},e.openFileSelector=function(){var e=angular.element(document.querySelector(".modal-avatar #fileInput"));e&&e.length>0&&e[0].click()},e.fileChanged=function(n){var t=n.target.files,i=new FileReader;i.readAsDataURL(t[0]),i.onload=function(n){var t=this.result;e.$applyAsync(function(){e.formData.imgSrc=t})}},e.doNext=function(){2==e.formData.imageCropStep?e.doCrop():3==e.formData.imageCropStep&&e.closeModal(e.formData.result)},e.doCrop=function(){e.formData.initCrop=!0},e.clear=function(){e.formData={initCrop:!1,imageCropStep:1,imgSrc:void 0,result:void 0,resultBlob:void 0}}}function ESPositionEditController(e,n,t,i){"ngInject";var a=n.plugins&&n.plugins.es&&n.plugins.es.defaultCountry,o=!1;e.formPosition={loading:!1,enable:void 0},e.tryToLocalize=function(){if(!e.formPosition.loading&&!o){var n=e.getAddressToSearch();return n?(e.formPosition.loading=!0,t.point.searchByAddress(n).then(function(t){return t&&1==t.length?e.updateGeoPoint(t[0]):e.openSearchLocationModal({text:n,results:t||[],forceFallback:!t||!t.length})}).then(function(){e.formPosition.loading=!1})["catch"](function(n){console.error(n),e.formPosition.loading=!1})):(o=!0,t.point.current().then(e.updateGeoPoint).then(function(){o=!1})["catch"](function(e){console.error(e),o=!1}))}},e.onCityChanged=function(){if(!e.loading)return e.form&&(e.form.$valid=void 0),e.formPosition.enable?e.tryToLocalize():void 0},e.onUseGeopointChanged=function(){e.loading||(e.formPosition.enable?e.tryToLocalize():e.formData.geoPoint&&(e.formData.geoPoint=null,e.dirty=!0))},e.onGeopointChanged=function(){e.loading&&(e.formPosition.enable=e.formData.geoPoint&&!!e.formData.geoPoint.lat&&!!e.formData.geoPoint.lon)},e.$watch("formData.geoPoint",e.onGeopointChanged),e.getAddressToSearch=function(){return e.formData.address&&e.formData.city?[e.formData.address.trim(),e.formData.city.trim()].join(", "):e.formData.city||e.formData.address||e.formData.location},e.updateGeoPoint=function(n){if(n&&n.lat&&n.lon&&(e.dirty=!0,e.formData.geoPoint=e.formData.geoPoint||{},e.formData.geoPoint.lat=parseFloat(n.lat),e.formData.geoPoint.lon=parseFloat(n.lon),n.address&&n.address.city)){var t=[n.address.city];n.address.postcode&&t.push(n.address.postcode),n.address.country!=a&&t.push(n.address.country),e.formData.city=t.join(", ")}},e.openSearchLocationModal=function(n){n=n||{};var t={text:n.text||e.getAddressToSearch(),results:n.results,fallbackText:n.fallbackText||e.formData.city,forceFallback:angular.isDefined(n.forceFallback)?n.forceFallback:void 0};return i.show("plugins/es/templates/common/modal_location.html","ESSearchPositionModalCtrl",t,{focusFirstInput:!0}).then(e.updateGeoPoint)}}function ESLookupPositionController(e,n,t,i,a){"ngInject";var o=t.plugins&&t.plugins.es&&t.plugins.es.defaultCountry,r=!1;e.geoDistanceLabels=[5,10,20,50,100,250,500].reduce(function(e,n){return e[n]={labelKey:"LOCATION.DISTANCE_OPTION",labelParams:{value:n}},e},{}),e.geoDistances=_.keys(e.geoDistanceLabels),e.searchPosition=function(t){if(r)return n.when();r=!0;var a=t?i.point.searchByAddress(t).then(function(n){return n&&1==n.length?(n[0].exact=!0,n[0]):e.openSearchLocationModal({text:t,results:n||[],forceFallback:!n||!n.length}).then(function(e){if(e&&e.address&&e.address.city){var n=[e.address.city];e.address.postcode&&n.push(e.address.postcode),e.address.country!=o&&n.push(e.address.country),e.shortName=n.join(", ")}return e})}):i.point.current();return a.then(function(e){if(r=!1,e&&e.lat&&e.lon)return{lat:parseFloat(e.lat),lon:parseFloat(e.lon),name:e.shortName,exact:e.exact}})["catch"](function(e){console.error(e),r=!1}),a},e.openSearchLocationModal=function(n){n=n||{};var t={text:n.text||e.getAddressToSearch(),results:n.results,fallbackText:n.fallbackText||e.search.location,forceFallback:angular.isDefined(n.forceFallback)?n.forceFallback:void 0};return a.show("plugins/es/templates/common/modal_location.html","ESSearchPositionModalCtrl",t,{focusFirstInput:!0})}}function ESSearchPositionItemController(e,n,t,i,a,o){"ngInject";var r=a.plugins&&a.plugins.es&&a.plugins.es.defaultCountry,s=!1,l=3;e.locations=void 0,e.selectLocationIndex=-1,e.onKeydown=function(n){switch(n.keyCode){case 27:e.hideDropdown();break;case 13:e.locations&&e.locations.length&&e.onEnter();break;case 38:e.onArrowUpOrDown(-1),n.preventDefault();break;case 40:e.onArrowUpOrDown(1),n.preventDefault();break;case 8:case 45:case 46:break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:e.showDropdown()}},e.onEnter=function(){e.selectLocationIndex>-1?e.selectLocation(e.locations[e.selectLocationIndex]):e.selectLocation(e.locations[0])},e.onArrowUpOrDown=function(n){e.locations&&(e.selectLocationIndex+=n,e.selectLocationIndex>=e.locations.length&&(e.selectLocationIndex=0),e.selectLocationIndex<0&&(e.selectLocationIndex=e.locations.length-1),_.forEach(e.locations||[],function(n,t){n.selected=t==e.selectLocationIndex}))},e.onLocationChanged=function(){s||e.search.loading||(e.search.geoPoint=void 0,e.showDropdown())},e.showDropdown=function(){var t=e.search.location&&e.search.location.trim();return!t||t.length<l?(e.locations=void 0,n.when()):(s=!0,o.point.searchByAddress(t).then(function(n){s=!1,e.locations=n||[],e.license=n&&n.length&&n[0].license})["catch"](function(n){throw e.hideDropdown(),n}))},e.hideDropdown=function(n){return n?(e.locations=void 0,e.selectLocationIndex=-1,e.license=void 0,void(s=!1)):t(function(){s||(e.locations=void 0,e.license=void 0,s=!1)},500)},e.selectLocation=function(n,t){if(s=!0,n)if(e.search.geoPoint=e.search.geoPoint||{},e.search.geoPoint.lat=parseFloat(n.lat),e.search.geoPoint.lon=parseFloat(n.lon),t)e.search.geoPoint.exact=!0;else if(n&&n.address&&n.address.city){var i=[n.address.city];n.address.postcode&&i.push(n.address.postcode),n.address.country!=r&&i.push(n.address.country),e.search.location=i.join(", ")}e.hideDropdown(!0)},e.openSearchLocationModal=function(n){n=n||{text:e.search.location};var t={text:n.text||e.search.location};return i.show("plugins/es/templates/common/modal_location.html","ESSearchPositionModalCtrl",t,{focusFirstInput:!0}).then(e.selectLocation)}}function ESSearchPositionModalController(e,n,t,i,a){"ngInject";e.search={text:a.text||"",fallbackText:a.fallbackText||void 0,forceFallback:!!angular.isDefined(a.forceFallback)&&a.forceFallback,loading:!1,results:a.results||void 0},e.$on("modal.shown",function(){e.doSearch(!0)}),e.doSearch=function(a){var o=e.search.text&&e.search.text.trim();if(!o)return n.when();e.search.loading=!0;var r=a&&e.search.fallbackText&&e.search.fallbackText.trim();return r=r&&r!=o?r:void 0,(a&&e.search.forceFallback&&e.search.results?n.when(e.search.results):i.point.searchByAddress(o)).then(function(e){return e&&e.length||!r?e:n.all([t("LOCATION.MODAL.ALTERNATIVE_RESULT_DIVIDER",{address:r}),i.point.searchByAddress(r)]).then(function(e){var n=e[0];return e=e[1],e&&e.length?[{name:n}].concat(e):e})}).then(function(n){e.search.loading=!1,e.search.results=n||[],e.license=n&&n.length&&n[0].license})["catch"](function(n){throw e.search.loading=!1,e.search.results=[],e.license=void 0,n})}}function ESExtensionController(e,n,t){"ngInject";e.extensionPoint=t.extensions.points.current.get(),e.enable=n.isEnable(),n.api.state.on.changed(e,function(n){e.enable=n})}function ESMenuExtendController(e,n,t,i,a,o){"ngInject";e.extensionPoint=t.extensions.points.current.get(),e.enable=i.isEnable(),e.showRegistryLookupView=function(){n.go(a.screen.isSmall()?"app.registry_lookup":"app.registry_lookup_lg")},e.showNotificationsPopover=function(n){return a.popover.show(n,{templateUrl:"plugins/es/templates/notification/popover_notification.html",scope:e,autoremove:!1})},e.showMessagesPopover=function(n){return o.isAuth()?a.popover.show(n,{templateUrl:"plugins/es/templates/message/popover_message.html",scope:e,autoremove:!1}):o.auth({minData:!0}).then(function(){return a.loading.hide(),e.showMessagesPopover(n)})},e.showInvitationsPopover=function(n){return o.isAuth()?a.popover.show(n,{templateUrl:"plugins/es/templates/invitation/popover_invitation.html",scope:e,autoremove:!1,afterShow:function(e){o.api.data.on.unauth(e.scope,function(){e.scope.closePopover()})}}):o.auth().then(function(){return a.loading.hide(),e.showInvitationsPopover(n)})},i.api.state.on.changed(e,function(n){e.enable=n})}function ESProfilePopoverExtendController(e,n,t,i,a){"ngInject";e.updateView=function(){e.enable=a.isLogin()&&i.isEnable()},e.showEditUserProfile=function(){e.closeProfilePopover(),t.go("app.user_edit_profile")},i.api.state.on.changed(e,e.updateView),a.api.data.on.login(e,function(t,a){return e.enable=i.isEnable(),a&&a.resolve()||n.when()}),a.api.data.on.logout(e,function(){e.enable=!1}),e.updateView()}function ESExtendSettingsController(e,n){"ngInject";e.extensionPoint=n.extensions.points.current.get()}function ESPluginSettingsController(e,n,t,i,a,o,r,s,l,c){"ngInject";e.formData={},e.popupData={},e.loading=!0,e.enter=function(n,t){e.load()},e.$on("$ionicView.enter",e.enter),e.load=function(n){e.loading=!0;var t=e.formData.enable;e.formData=s.data.plugins&&s.data.plugins.es?angular.copy(s.data.plugins.es):{enable:!1,host:void 0,port:void 0},n&&t&&(e.formData.enable=t),e.isFallbackNode=e.formData.enable&&l.node.isFallback(),e.server=e.getServer(l),e.loading=!1},c.api.state.on.changed(e,function(n){e.load(!0)}),e.setPopupForm=function(n){e.popupForm=n},e.changeEsNode=function(n){n=n||{host:e.formData.host,port:e.formData.port&&80!=e.formData.port&&443!=e.formData.port?e.formData.port:void 0,wsPort:e.formData.wsPort&&e.formData.wsPort!=e.formData.port?e.formData.wsPort:void 0,useSsl:angular.isDefined(e.formData.useSsl)?e.formData.useSsl:443==e.formData.port},e.showNodePopup(n).then(function(n){if(n.host==e.formData.host&&n.port==e.formData.port&&n.wsPort==e.formData.wsPort&&n.useSsl==e.formData.useSsl)return void a.loading.hide();a.loading.show();var t=l.instance(n.host,n.port,n.wsPort,n.useSsl);return t.isAlive().then(function(i){return i?(e.formData.host=t.host,e.formData.port=t.port,e.formData.wsPort=t.wsPort,e.formData.useSsl=t.useSsl,l.copy(t)):(a.loading.hide(),a.alert.error("ERROR.INVALID_NODE_SUMMARY").then(function(){e.changeEsNode(n)}))}).then(function(){e.server=e.getServer(l),e.isFallbackNode=!1,a.loading.hide()})})},e.showNodePopup=function(o){return n(function(n,r){var s=[o.host];o.wsPort&&o.wsPort!=(o.port||80)?(s.push(o.port||80),s.push(o.wsPort)):o.port&&80!=o.port&&s.push(o.port),e.popupData.newNode=s.join(":"),e.popupData.useSsl=angular.isDefined(o.useSsl)?o.useSsl:443==o.port,e.popupForm&&e.popupForm.$setPristine(),t(["ES_SETTINGS.POPUP_PEER.TITLE","ES_SETTINGS.POPUP_PEER.HELP","COMMON.BTN_OK","COMMON.BTN_CANCEL"]).then(function(t){i.show({templateUrl:"templates/settings/popup_node.html",title:t["ES_SETTINGS.POPUP_PEER.TITLE"],subTitle:t["ES_SETTINGS.POPUP_PEER.HELP"],scope:e,buttons:[{text:t["COMMON.BTN_CANCEL"]},{text:t["COMMON.BTN_OK"],type:"button-positive",onTap:function(n){return e.popupForm.$submitted=!0,e.popupForm.$valid&&e.popupForm.newNode?e.popupData.newNode:void n.preventDefault()}}]}).then(function(t){if(!t)return void a.loading.hide();var i=t.split(":"),o=e.popupData.useSsl||443==i[1];n({host:i[0],port:i[1]||(o?443:80),wsPort:i[2]||i[1]||(o?443:80),useSsl:o})})})})},e.showNodeList=function(){return i._popupStack[0].responseDeferred.promise.close(),o.showNetworkLookup({enableFilter:!0,endpointFilter:l.constants.ES_USER_API_ENDPOINT}).then(function(e){if(e){var n=e.getEndpoints().reduce(function(e,n){var t=l.node.parseEndPoint(n);return t?e.concat(t):e},[]);if(n.length){var t=n[0];return{host:t.dns?t.dns:e.hasValid4(t)?t.ipv4:t.ipv6,port:t.port||80}}}}).then(function(n){return n?void e.changeEsNode(n):void a.alert.error("ERROR.INVALID_NODE_SUMMARY")})},e.onFormChanged=function(){e.loading||(e.loading=!0,s.data.plugins=s.data.plugins||{},s.data.plugins.es=s.data.plugins.es?angular.merge(s.data.plugins.es,e.formData):e.formData,delete s.data.plugins.es.newNode,s.store().then(function(){e.loading=!1}))},e.$watch("formData",e.onFormChanged,!0),e.getServer=function(n){if(n=n||e.formData,n.host){var t=r.getServer(n.host,n.port);return t+(n.wsPort&&n.wsPort!=n.port?":"+n.wsPort:"")}}}function ESWalletController(e,n,t){"ngInject";angular.extend(this,n("ESWotIdentityViewCtrl",{$scope:e})),e.showProfileHelp=!1,e.showNewPageModal=function(){return t.showNewPage()}}function ESWotLookupExtendController(e,n,t){"ngInject";angular.extend(this,n("ESExtensionCtrl",{$scope:e})),e.openRegistryLookup=function(){var n=e.search.text&&e.search.text.trim()||"",i=e.search.location&&e.search.location.trim()||"",a={q:n.length?n:void 0,location:i.length?i:void 0};t.go("app.registry_lookup",a)}}function ESWotIdentityViewController(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";e.extensionPoint=r.extensions.points.current.get(),e.enable=o.isEnable(),o.api.state.on.changed(e,function(n){e.enable=n}),e.showNewMessageModal=function(n){return e.loadWallet({minData:!0}).then(function(){return i.loading.hide(),!(!n&&!e.formData.profile)||i.alert.confirm("MESSAGE.CONFIRM.USER_HAS_NO_PROFILE").then(function(e){if(e)return!0})}).then(function(n){return!!n&&l.showMessageCompose({destPub:e.formData.pubkey,destUid:e.formData.name||e.formData.uid}).then(function(e){e&&i.toast.show("MESSAGE.INFO.MESSAGE_SENT")})})},e.showSuggestCertificationModal=function(){e.hideCertificationActionsPopover();var n;return s.auth({minData:!0}).then(function(o){return i.loading.hide(),o.isMember?a.showWotLookup({allowMultiple:!0,enableFilter:!0,title:"WOT.SUGGEST_CERTIFICATIONS_MODAL.TITLE",help:"WOT.SUGGEST_CERTIFICATIONS_MODAL.HELP",okText:"COMMON.BTN_NEXT",okType:"button-positive"}).then(function(a){if(a&&a.length)return n=a,t.all([u.box.getKeypair(o.keypair),i.alert.confirm("WOT.CONFIRM.SUGGEST_CERTIFICATIONS",void 0,{okText:"COMMON.BTN_SEND"})]).then(function(i){if(i){var a=i[0],r=i[1];if(r){var s=c.date.now();return t.all(n.reduce(function(n,t){return n.concat(d.send({issuer:o.pubkey,recipient:e.formData.pubkey,time:s,content:[t.uid,t.pubkey].join("-")},a,"certification"))},[]))}}}).then(function(){i.toast.show("INVITATION.INFO.INVITATION_SENT")})["catch"](i.onError("INVITATION.ERROR.SEND_INVITATION_FAILED"))}):i.alert.error("ERROR.ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION")})},e.showAskCertificationModal=function(){e.hideCertificationActionsPopover();var n;return s.auth({minData:!0}).then(function(e){return i.loading.hide(),e.isMember?a.showWotLookup({allowMultiple:!0,enableFilter:!1,title:"WOT.ASK_CERTIFICATIONS_MODAL.TITLE",help:"WOT.ASK_CERTIFICATIONS_MODAL.HELP",okText:"COMMON.BTN_NEXT",okType:"button-positive"}).then(function(a){if(a&&a.length)return n=a,t.all([u.box.getKeypair(e.keypair),i.alert.confirm("WOT.CONFIRM.ASK_CERTIFICATIONS",void 0,{okText:"COMMON.BTN_SEND"})]).then(function(a){if(a){var o=a[0],r=a[1];if(r){var s=c.date.now();return t.all(n.reduce(function(n,t){return n.concat(d.send({issuer:e.pubkey,recipient:t.pubkey,time:s,content:[e.uid,e.pubkey].join("-")},o,"certification"))},[])).then(function(){i.toast.show("INVITATION.INFO.INVITATION_SENT")})["catch"](i.onError("INVITATION.ERROR.SEND_INVITATION_FAILED"))}}})}):i.alert.error("ERROR.ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION")})},e.askCertification=function(){return e.hideCertificationActionsPopover(),s.auth({minData:!0}).then(function(n){return i.loading.hide(),n.isMember?i.alert.confirm("WOT.CONFIRM.ASK_CERTIFICATION",void 0,{okText:"COMMON.BTN_SEND"}).then(function(t){if(t)return d.send({issuer:n.pubkey,recipient:e.formData.pubkey,content:[n.uid,n.pubkey].join("-")},void 0,"certification")["catch"](i.onError("INVITATION.ERROR.SEND_INVITATION_FAILED"))}):i.alert.error("ERROR.ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION")})},e.showCertificationActionsPopover=function(t){e.certificationActionsPopover?e.certificationActionsPopover.show(t):n.fromTemplateUrl("plugins/es/templates/wot/popover_certification_actions.html",{scope:e}).then(function(n){e.certificationActionsPopover=n,e.$on("$destroy",function(){e.certificationActionsPopover.remove()}),e.certificationActionsPopover.show(t)})},e.hideCertificationActionsPopover=function(){e.certificationActionsPopover&&e.certificationActionsPopover.hide()}}function ESRegistryLookupController(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E,g,b){"ngInject";angular.extend(this,a("ESLookupPositionCtrl",{$scope:e}));var h=10;e.search={text:"",results:[],loading:!0,lastRecords:!0,type:null,category:null,location:null,advanced:null,issuer:null,geoDistance:isNaN(p.data.plugins.es.geoDistance)?20:p.data.plugins.es.geoDistance},e.searchTextId="registrySearchText",e.enableFilter=!0,e.smallscreen=angular.isDefined(e.smallscreen)?e.smallscreen:c.screen.isSmall(),e.options=angular.merge(e.options||{},{location:{show:!0,help:"REGISTRY.SEARCH.LOCATION_HELP"}}),e.enter=function(t,i){if(!e.entered||!e.search.results||0===e.search.results.length){if(!e.geoUnit)return r("LOCATION.DISTANCE_UNIT").then(function(n){return e.geoUnit=n,e.enter(t,i)});var a=function(){e.searchTextId&&n(e.searchTextId),e.entered=!0,e.doSearch()};if(i.stateParams&&i.stateParams.q&&"string"==typeof i.stateParams.q&&(e.search.text=i.stateParams.q),i.stateParams&&i.stateParams.hash&&(e.search.text="#"+i.stateParams.hash),
i.stateParams&&i.stateParams.location)e.search.location=i.stateParams.location,i.stateParams.lat&&i.stateParams.lon&&(e.search.geoPoint={lat:parseFloat(i.stateParams.lat),lon:parseFloat(i.stateParams.lon)}),i.stateParams.d&&(e.search.geoDistance=i.stateParams.d);else{var o=p.data.plugins.es.registry&&p.data.plugins.es.registry.defaultSearch;if(o&&(o.location?angular.merge(e.search,p.data.plugins.es.registry.defaultSearch):o=void 0),!o&&m.isLogin()&&m.data.profile){if(!m.isDataLoaded())return c.loading.show(),m.loadData().then(function(){return c.loading.hide(),e.enter(t,i)});e.search.geoPoint=m.data.profile.geoPoint,e.search.location=m.data.profile.city||(m.data.profile.geoPoint?"profile position":void 0)}}i.stateParams&&(i.stateParams.type||i.stateParams.last)?i.stateParams.last||"last"==i.stateParams.type?(e.search.lastRecords=!0,e.search.type=void 0):e.search.type=i.stateParams.type:e.search.lastRecords=!1,i.stateParams&&i.stateParams.issuer&&(e.search.issuer=i.stateParams.issuer),i.stateParams&&i.stateParams.category?g.category.get({id:i.stateParams.category}).then(function(n){e.search.category=n,a()})["catch"](c.onError("REGISTRY.ERROR.LOAD_CATEGORY_FAILED")):a()}e.showFab("fab-add-registry-record")},e.$on("$ionicView.enter",function(n,t){return e.enter(n,t)}),e.leave=function(){var n=!1;p.data.plugins.es.registry=p.data.plugins.es.registry||{},p.data.plugins.es.registry.defaultSearch=p.data.plugins.es.registry.defaultSearch||{};var i=e.search.location&&e.search.location.trim(),a=p.data.plugins.es.registry.defaultSearch.location;a&&a===i||(p.data.plugins.es.registry.defaultSearch={location:i,geoPoint:i&&e.search.geoPoint?angular.copy(e.search.geoPoint):void 0},n=!0);var o=p.data.plugins.es.geoDistance;o&&o===e.search.geoDistance||(p.data.plugins.es.geoDistance=e.search.geoDistance,n=!0),n&&t(function(){p.store()})},e.$on("$ionicView.leave",function(){return e.leave()}),e.onGeoPointChanged=function(){e.search.loading||e.search.geoPoint&&e.search.geoPoint.lat&&e.search.geoPoint.lon&&!e.search.geoPoint.exact&&(e.doSearch(),e.updateLocationHref())},e.$watch("search.geoPoint",e.onGeoPointChanged,!0),e.resolveLocationPosition=function(){if(!e.search.loadingPosition)return e.search.loadingPosition=!0,e.searchPosition(e.search.location).then(function(n){if(!n)throw e.search.loading=!1,e.search.results=void 0,e.search.total=0,e.search.loadingPosition=!1,e.search.geoPoint=void 0,"CANCELLED";e.search.geoPoint=n,n.shortName&&!n.exact&&(e.search.location=n.shortName),e.search.loadingPosition=!1})},e.doGetLastRecords=function(n){return e.hidePopovers(),e.search.text=void 0,e.doSearch(n)},e.doSearchText=function(){e.doSearch(),l.keyboard.close()},e.doSearch=function(n){if(e.search.loading=!n,e.search.location&&e.search.location.length>=3&&!e.search.geoPoint)return e.resolveLocationPosition().then(function(){return e.doSearch(n)});var t=e.search.text&&e.search.text.trim()||"";e.search.lastRecords=!t||!t.length;var i=[],a=[];if(t&&t.length)if(d.regexp.PUBKEY.test(t))a.push({term:{pubkey:t}});else{t=t.toLowerCase();var o=t?b.util.parseTags(t):void 0,r=["title","description","city","address"];i.push({multi_match:{query:t,fields:r,type:"phrase_prefix"}}),i.push({match:{title:{query:t,boost:2}}}),i.push({prefix:{title:t}}),i.push({match:{description:t}}),i.push({nested:{path:"category",query:{bool:{filter:{match:{"category.name":t}}}}}}),o&&o.length&&a.push({terms:{tags:o}})}else e.search.issuer&&a.push({term:{issuer:e.search.issuer}});e.search.type&&a.push({term:{type:e.search.type}}),e.search.category&&a.push({nested:{path:"category",query:{bool:{filter:{term:{"category.id":e.search.category.id}}}}}});var s=e.search.location&&e.search.location.trim().toLowerCase();if(e.search.geoPoint&&e.search.geoPoint.lat&&e.search.geoPoint.lon)if(s&&s.length){var l=s.split(",")[0];a.push({or:[{and:[{not:{exists:{field:"geoPoint"}}},{match_phrase:{city:l}}]},{geo_distance:{distance:e.search.geoDistance+e.geoUnit,geoPoint:{lat:e.search.geoPoint.lat,lon:e.search.geoPoint.lon}}}]})}else a.push({geo_distance:{distance:e.search.geoDistance+e.geoUnit,geoPoint:{lat:e.search.geoPoint.lat,lon:e.search.geoPoint.lon}}});var c={highlight:{fields:{title:{},description:{},tags:{}}},from:n};return i.length>0&&(c.query=c.query||{bool:{}},c.query.bool.should=i,c.query.bool.minimum_should_match=1),a.length>0&&(c.query=c.query||{bool:{}},c.query.bool.filter=a),e.search.lastRecords&&(c.sort={creationTime:"desc"}),e.updateLocationHref(),e.doRequest(c)},e.doRequest=function(n){n=n||{},n.from=n.from||0,n.size=n.size||h,n.size<h&&(n.size=h),e.search.loading=0===n.from;var t=e.requestId&&e.requestId+1||1;return e.requestId=t,g.record.search(n).then(function(a){if(e.requestId==t){if(!a||!a.hits||!a.hits.length)return e.search.results=n.from>0?e.search.results:[],e.search.total=n.from>0?e.search.total:0,e.search.loading=!1,void(e.search.hasMore=!1);var o=i("formatSlug");_.forEach(a.hits,function(e){e.urlTitle=o(e.title)}),n.from?e.search.results=e.search.results.concat(a.hits):(e.search.results=a.hits,e.search.total=a.total),e.search.hasMore=e.search.results.length<a.total,e.search.loading=!1,e.motion.show({selector:".list .item",ink:!0})}})["catch"](function(t){e.search.loading=!1,e.search.results=n.from>0?e.search.results:[],e.search.total=n.from>0?e.search.total:0,e.search.hasMore=!1,c.onError("REGISTRY.ERROR.LOOKUP_RECORDS_FAILED")(t)})},e.showMore=function(){var n=e.search.results?e.search.results.length:0;e.search.loadingMore=!0;var t=e.search.lastRecords?e.doGetLastRecords:e.doSearch;return t(n).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})["catch"](function(n){console.error(n),e.search.loadingMore=!1,e.search.hasMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.removeType=function(){e.search.type=null,e.doSearch(),e.updateLocationHref()},e.removeCategory=function(){e.search.category=null,e.category=null,e.doSearch(),e.updateLocationHref()},e.removeLocation=function(){e.search.location=null,e.search.geoPoint=null,e.doSearch(),e.updateLocationHref()},e.updateLocationHref=function(n){n||t(function(){var n=e.search.text&&e.search.text.trim(),t=e.search.location&&e.search.location.trim(),i={location:t&&t.length?t:void 0,category:e.search.category?e.search.category.id:void 0,last:!!e.search.lastRecords||void 0,type:e.search.type?e.search.type:void 0,lat:e.search.geoPoint&&e.search.geoPoint.lat||void 0,lon:e.search.geoPoint&&e.search.geoPoint.lon||void 0,d:e.search.geoPoint&&e.search.geoDistance||void 0};n&&n.match(/^#\w+$/)?i.hash=n.substr(1):n&&n.length&&(i.q=n),o.search(i).replace()})},e.onToggleAdvanced=function(){e.search.entered&&!e.search.lastRecords&&(e.doSearch(),e.updateLocationHref())},e.$watch("search.advanced",e.onToggleAdvanced,!0),e.toggleAdvanced=function(){e.search.advanced=!e.search.advanced,t(e.hidePopovers,200)},e.showRecordTypeModal=function(n){e.hidePopovers(),t(function(){n.isDefaultPrevented()||u.show("plugins/es/templates/registry/modal_record_type.html").then(function(n){n&&(e.search.type=n,e.doSearch(),e.updateLocationHref())})},350)},e.showCategoryModal=function(n){t(function(){n.isDefaultPrevented()||g.category.all().then(function(e){return u.show("plugins/es/templates/common/modal_category.html","ESCategoryModalCtrl as ctrl",{categories:e},{focusFirstInput:!0})}).then(function(n){n&&n.parent&&(e.search.category=n,e.doSearch(),e.updateLocationHref())})},350)},e.showNewPageModal=function(){return e.hidePopovers(),E.showNewPage()},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):s.fromTemplateUrl("plugins/es/templates/registry/lookup_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showFiltersPopover=function(n){e.filtersPopover?e.filtersPopover.show(n):s.fromTemplateUrl("plugins/es/templates/registry/lookup_popover_filters.html",{scope:e}).then(function(t){e.filtersPopover=t,e.$on("$destroy",function(){e.filtersPopover.remove()}),e.filtersPopover.show(n)})},e.hideFiltersPopover=function(){e.filtersPopover&&e.filtersPopover.hide()},e.hidePopovers=function(){e.hideActionsPopover(),e.hideFiltersPopover()}}function ESWalletPagesController(e,n,t,i,a){"ngInject";angular.extend(this,n("ESRegistryLookupCtrl",{$scope:e})),e.searchTextId=void 0,e.enter=function(n,o){return e.entered?o.stateParams&&o.stateParams.refresh?t(e.doSearch,2e3):void 0:a.login({minData:!0}).then(function(n){i.loading.hide(),e.search.issuer=n.pubkey,e.search.advanced=!0,t(e.doSearch,100)})},e.doUpdate=function(){if(a.isLogin())return e.search.issuer=a.data.pubkey,e.search.advanced=!0,e.doSearch()}}function ESRegistryRecordViewController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";e.formData={},e.id=null,e.category={},e.pictures=[],e.canEdit=!1,e.loading=!0,e.motion=p.motion.fadeSlideIn,e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!p.screen.isSmall()||n.enableBack}),e.$on("$ionicView.enter",function(n,i){i.stateParams&&i.stateParams.id?((e.loading||i.stateParams.refresh)&&e.load(i.stateParams.id,i.stateParams.anchor),e.$broadcast("$recordView.enter",i)):t.go("app.registry_lookup")}),e.$on("$ionicView.beforeLeave",function(n,t){e.$broadcast("$recordView.beforeLeave",t)}),e.load=function(n,o){return n=n||e.id,e.loading=!0,i.all([d.record.load(n).then(function(n){e.id=n.id,e.formData=n.record,e.canEdit=u.isUserPubkey(e.formData.issuer),e.issuer=n.issuer,e.avatar=e.formData.avatar,e.avatarStyle=e.formData.avatar&&{"background-image":'url("'+e.avatar.src+'")'},p.loading.hide(),e.loading=!1,e.motion.show({selector:".list > .item, .list > ng-if > .item"})})["catch"](function(a){e.secondTry?(e.loading=!1,a&&404===a.ucode?(p.toast.show("REGISTRY.ERROR.RECORD_NOT_EXISTS"),t.go("app.registry_lookup")):p.onError("REGISTRY.ERROR.LOAD_RECORD_FAILED")(a)):(e.secondTry=!0,i(function(){e.load(n)},100))}),d.record.picture.all({id:n}).then(function(n){e.pictures=n._source.pictures&&n._source.pictures.reduce(function(e,n){return e.concat(m.image.fromAttachment(n.file))},[]),e.pictures.length>0&&e.motion.show({selector:".lazy-load .item.card-gallery",startVelocity:3e3})})["catch"](function(){e.pictures=[]}),a(function(){return e.$broadcast("$recordView.load",n,d.record.comment)})]).then(function(){e.motion.show({selector:".lazy-load .item",startVelocity:3e3}),o&&a(function(){l(o)},1e3)})},e.edit=function(){p.loading.show(),t.go("app.registry_edit_record",{id:e.id})},e["delete"]=function(){e.hideActionsPopover();var n;s(["REGISTRY.VIEW.REMOVE_CONFIRMATION","REGISTRY.INFO.RECORD_REMOVED"]).then(function(e){return n=e,p.alert.confirm(e["REGISTRY.VIEW.REMOVE_CONFIRMATION"])}).then(function(i){i&&d.record.remove(e.id).then(function(){u.data.pages&&u.data.pages.count&&u.data.pages.count--,r.nextViewOptions({historyRoot:!0}),t.go("app.wallet_pages",{refresh:!0}),p.toast.show(n["REGISTRY.INFO.RECORD_REMOVED"])})["catch"](p.onError("REGISTRY.ERROR.REMOVE_RECORD_FAILED"))})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):o.fromTemplateUrl("plugins/es/templates/registry/view_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showSharePopover=function(i){e.hideActionsPopover();var a=e.formData.title,o=(c.shareBaseUrl||n.rootPath)+t.href("app.view_page",{title:a,id:e.id});p.screen.isSmall()&&(i=angular.element(document.querySelector("#registry-share-anchor-"+e.id))||i),p.popover.share(i,{bindings:{url:o,titleKey:"REGISTRY.VIEW.POPOVER_SHARE_TITLE",titleValues:{title:a},time:e.formData.time,postMessage:a}})}}function ESRegistryRecordEditController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";angular.extend(this,s("ESPositionEditCtrl",{$scope:e})),e.formData={title:null,description:null,socials:[],geoPoint:null},e.loading=!0,e.dirty=!1,e.walletData=null,e.id=null,e.avatar=null,e.pictures=[],e.setForm=function(n){e.form=n},e.$on("$ionicView.enter",function(n,t){e.loadWallet({minData:!0}).then(function(n){e.walletData=n,t.stateParams&&t.stateParams.id?e.load(t.stateParams.id):t.stateParams&&t.stateParams.type&&e.updateView({record:{type:t.stateParams.type}}),o("registry-record-title")})}),e.$on("$stateChangeStart",function(n,i,o,r){if(e.dirty&&!e.saving&&(n.preventDefault(),!e.loading))return e.loading=!0,c.alert.confirm("CONFIRM.SAVE_BEFORE_LEAVE","CONFIRM.SAVE_BEFORE_LEAVE_TITLE",{cancelText:"COMMON.BTN_NO",okText:"COMMON.BTN_YES_SAVE"}).then(function(n){return e.loading=!1,n?(e.form.$submitted=!0,e.save(!1,!0).then(function(n){return n&&(e.dirty=!1),n})):(e.dirty=!1,!0)}).then(function(e){e&&(a.nextViewOptions({historyRoot:!0}),t.go(i.name,o))})["catch"](function(e){})}),e.load=function(n){e.loading=!0,m.record.load(n,{raw:!0}).then(function(n){n&&n.record?e.updateView(n):e.updateView({record:{}})})["catch"](function(n){c.loading.hide(10),e.loading=!1,c.onError("REGISTRY.ERROR.LOAD_RECORD_FAILED")(n)})},e.updateView=function(t){e.formData=t.record||{},e.id=t.id,e.avatar=e.formData.avatar,e.avatar?(e.avatarStyle=e.avatar&&{"background-image":'url("'+e.avatar.src+'")'},e.avatarClass={}):(e.avatarStyle=void 0,e.avatarClass={},e.avatarClass["cion-page-"+e.formData.type]=!e.avatar),e.pictures=t.record&&t.record.pictures||[],delete t.record.pictures,e.motion.show({selector:".animate-ripple .item, .card-gallery",startVelocity:3e3}),c.loading.hide(),n(function(){e.loading=!1},1e3)},e.onFormDataChanged=function(){e.loading||(e.dirty=!0)},e.$watch("formData",e.onFormDataChanged,!0),e.needCategory=function(){return e.formData.type&&("company"==e.formData.type||"shop"==e.formData.type)},e.save=function(o,s){if(e.form.$submitted=!0,e.saving||!e.form.$valid||("shop"===e.formData.type||"company"===e.formData.type)&&(!e.formData.category||!e.formData.category.id))return i.reject();if(!s)return console.debug("[ES] [page] Waiting debounce end, before saving..."),n(function(){return e.save(o,!0)},650);e.saving=!0,console.debug("[ES] [page] Saving record...");var l=function(){if(!o)return c.loading.hide(),r("REGISTRY.INFO.RECORD_SAVED").then(function(e){c.toast.show(e)})},u=i.when();return o||(u=c.loading.show()),u.then(function(){var n=e.formData;return e.needCategory()||delete n.category,n.time=p.date.now(),n.geoPoint&&n.geoPoint.lat&&n.geoPoint.lon?(n.geoPoint.lat=parseFloat(n.geoPoint.lat),n.geoPoint.lon=parseFloat(n.geoPoint.lon)):n.geoPoint=null,n.socials&&n.socials.length&&(n.socials=_.uniq(n.socials,!1,function(e){return e.url})),n.picturesCount=e.pictures.length,n.picturesCount>0?n.pictures=e.pictures.reduce(function(e,n){return e.concat({file:p.image.toAttachment(n)})},[]):n.pictures=[],e.avatar&&e.avatar.src?c.image.resizeSrc(e.avatar.src,!0).then(function(e){return n.avatar=p.image.toAttachment({src:e}),n}):(n.avatar={_content:"",_content_type:""},n)}).then(function(n){return e.id?m.record.update(n,{id:e.id}):m.record.add(n)}).then(function(n){return console.info("[ES] [page] Record successfully saved."),!e.id&&d.data.pages&&d.data.pages.count&&d.data.pages.count++,e.id=e.id||n,e.saving=!1,e.dirty=!1,l(),a.clearCache(a.currentView().stateId),a.nextViewOptions({historyRoot:!0}),t.go("app.view_page",{id:e.id,refresh:!0})})["catch"](function(n){e.saving=!1,c.onError("REGISTRY.ERROR.SAVE_RECORD_FAILED")(n)})},e.openPicturePopup=function(){l.camera.getPicture().then(function(n){n&&e.pictures.push({src:"data:image/png;base64,"+n})})["catch"](c.onError("ERROR.TAKE_PICTURE_FAILED"))},e.rotateAvatar=function(){if(e.avatar&&e.avatar.src&&!e.rotating)return e.rotating=!0,c.image.rotateSrc(e.avatar.src).then(function(n){e.avatar.src=n,e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0,e.rotating=!1})["catch"](function(n){console.error(n),e.rotating=!1})},e.fileChanged=function(n){return c.loading.show(),i(function(t,i){var a=n.target.files[0];c.image.resizeFile(a).then(function(n){e.pictures.push({src:n}),c.loading.hide(),t()})})},e.removePicture=function(n){e.pictures.splice(n,1)},e.favoritePicture=function(n){if(n>0){var t=e.pictures[n];e.pictures.splice(n,1),e.pictures.splice(0,0,t)}},e.cancel=function(){a.goBack()},e.showAvatarModal=function(){return l.camera.enable?l.camera.getPicture().then(function(n){n&&(e.avatar={src:"data:image/png;base64,"+n},e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0,e.avatarClass={})})["catch"](c.onError("ERROR.TAKE_PICTURE_FAILED")):u.show("plugins/es/templates/common/modal_edit_avatar.html","ESAvatarModalCtrl",{}).then(function(n){n&&(e.avatar={src:n},e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0,e.avatarClass={})})},e.showRecordTypeModal=function(){u.show("plugins/es/templates/registry/modal_record_type.html").then(function(n){n&&(e.formData.type=n,e.avatar||(e.avatarClass["cion-page-"+n]=!0),e.doSearch(),e.updateLocationHref())})},e.showCategoryModal=function(n){m.category.all().then(function(e){return u.show("plugins/es/templates/common/modal_category.html","ESCategoryModalCtrl as ctrl",{categories:e},{focusFirstInput:!0})}).then(function(n){n&&n.parent&&(e.formData.category=n,e.doSearch(),e.updateLocationHref())})}}function ESViewEditProfileController(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E,g){"ngInject";angular.extend(this,s("ESPositionEditCtrl",{$scope:e})),e.formData={title:null,description:null,socials:[],geoPoint:null},e.loading=!0,e.dirty=!1,e.walletData=null,e.avatar=null,e.existing=!1,e.socialData={url:null},e.socialReorder=!0,e.$on("$ionicView.enter",function(n){e.loadWallet().then(function(n){return e.load(n)})["catch"](function(n){return"CANCELLED"==n?e.close().then(u.loading.hide):void u.onError("PROFILE.ERROR.LOAD_PROFILE_FAILED")(n)})}),e.$on("$stateChangeStart",function(n,t,i,o){if(e.dirty&&!e.saving&&(n.preventDefault(),!e.loading))return e.loading=!0,u.alert.confirm("CONFIRM.SAVE_BEFORE_LEAVE","CONFIRM.SAVE_BEFORE_LEAVE_TITLE",{cancelText:"COMMON.BTN_NO",okText:"COMMON.BTN_YES_SAVE"}).then(function(n){return e.loading=!1,n?(e.form.$submitted=!0,e.save(!1,!0).then(function(n){return n&&(e.dirty=!1),n})):(e.dirty=!1,!0)}).then(function(e){e&&(l.nextViewOptions({historyRoot:!0}),a.go(t.name,i))})["catch"](function(e){})}),e.load=function(n){return e.loading=!0,m.get(n.pubkey,{raw:!0}).then(function(t){t?(e.avatar=p.image.fromAttachment(t.source.avatar),e.existing=!0,e.updateView(n,t.source)):(e.avatar=void 0,e.existing=!1,e.updateView(n,{})),o("profile-name")})["catch"](function(e){u.loading.hide(10),u.onError("PROFILE.ERROR.LOAD_PROFILE_FAILED")(e)})},e.setForm=function(n){e.form=n},e.updateView=function(n,t){e.walletData=n,e.formData=t,t.avatar&&(e.avatarStyle={"background-image":'url("'+e.avatar.src+'")'}),e.motion.show(),u.loading.hide(),i(function(){e.loading=!1},1e3)},e.onFormDataChanged=function(){e.loading||(e.dirty=!0)},e.$watch("formData",e.onFormDataChanged,!0),e.save=function(a,o){if(e.form.$invalid||!n.walletData||e.saving&&!o)return t.reject();if(!o)return e.saving=!0,i(function(){return e.save(a,!0)},650);console.debug("[ES] [profile] Saving user profile..."),a||u.loading.show();var s=function(n){return function(t){e.saving=!1,u.onError(n)(t)}},l=function(n){n&&(e.walletData.name=n.title,e.avatar?e.walletData.avatar=e.avatar:delete e.walletData.avatar,e.walletData.profile=angular.copy(n),e.walletData.profile.description=p.util.parseAsHtml(n.description))},c=function(){if(!a)return u.loading.hide(),r("PROFILE.INFO.PROFILE_SAVED").then(function(e){u.toast.show(e)})},d=function(t){return t.socials&&t.socials.length&&(t.socials=_.uniq(t.socials,!1,function(e){return e.url})),t.position&&(t.position=null),t.geoPoint&&t.geoPoint.lat&&t.geoPoint.lon?(t.geoPoint.lat=parseFloat(t.geoPoint.lat),t.geoPoint.lon=parseFloat(t.geoPoint.lon)):t.geoPoint=null,e.existing?m.update(t,{id:n.walletData.pubkey}).then(function(){return console.info("[ES] Profile successfully updated."),e.saving=!1,e.dirty=!1,l(t),c(),!0})["catch"](s("PROFILE.ERROR.SAVE_PROFILE_FAILED")):m.add(t).then(function(){return console.info("[ES] [profile] Successfully created."),e.existing=!0,e.saving=!1,e.dirty=!1,l(t),c(),!0})["catch"](s("PROFILE.ERROR.SAVE_PROFILE_FAILED"))};return e.avatar&&e.avatar.src?u.image.resizeSrc(e.avatar.src,!0).then(function(n){return e.formData.avatar=p.image.toAttachment({src:n}),d(e.formData)}):(delete e.formData.avatar,d(e.formData))},e.saveAndClose=function(){return e.save().then(function(n){n&&e.close()})},e.submitAndSaveAndClose=function(){e.form.$submitted=!0,e.saveAndClose()},e.cancel=function(){e.dirty=!1,e.close()},e.close=function(){return a.go("app.view_wallet",{refresh:!0})},e.showAvatarModal=function(){return g.camera.enable?g.camera.getPicture().then(function(n){n&&(e.avatar={src:"data:image/png;base64,"+n},e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0)})["catch"](u.onError("ERROR.TAKE_PICTURE_FAILED")):E.show("plugins/es/templates/common/modal_edit_avatar.html","ESAvatarModalCtrl",{}).then(function(n){n&&(e.avatar={src:n},e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0)})},e.rotateAvatar=function(){if(e.avatar&&e.avatar.src&&!e.rotating)return e.rotating=!0,u.image.rotateSrc(e.avatar.src).then(function(n){e.avatar.src=n,e.avatarStyle={"background-image":'url("'+n+'")'},e.dirty=!0,e.rotating=!1})["catch"](function(n){console.error(n),e.rotating=!1})},e.removeProfile=function(){return e.hideActionsPopover(),e.existing&&d.auth({minData:!0}).then(function(n){u.loading.hide(),u.alert.confirm("PROFILE.CONFIRM.DELETE",void 0,{okText:"COMMON.BTN_DELETE"}).then(function(t){if(t)return console.debug("[ES] [profile] Deleting user profile..."),u.loading.show(),m.remove(n.pubkey).then(function(){return n.name=null,n.profile=null,n.avatar=null,console.debug("[ES] [profile] Successfully deleted"),e.dirty=!1,e.close()}).then(function(){return i(function(){u.toast.show("PROFILE.INFO.PROFILE_REMOVED")},750)})["catch"](u.onError("PROFILE.ERROR.REMOVE_PROFILE_FAILED"))})})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):c.fromTemplateUrl("plugins/es/templates/user/edit_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()}}function ESMessageAbstractListController(e,n,t,i,a,o,r,s,l,c,u){"ngInject";var d=40;e.search={loading:!0,results:[],hasMore:!1,loadingMore:!1,limit:d,type:"last",text:null,options:{}},e.fabButtonNewMessageId=void 0,e.$on("$ionicView.enter",function(t,a){e.loadWallet({minData:!0}).then(function(){e.entered||(e.entered=!0,e.type=e.type||a.stateParams&&a.stateParams.type||"inbox",e.load()),e.fabButtonNewMessageId&&e.showFab(e.fabButtonNewMessageId)})["catch"](function(e){"CANCELLED"===e&&(i.nextViewOptions({historyRoot:!0}),n.go("app.home"))})}),e.refresh=function(n){return e.load(void 0,void 0,n)},e.load=function(n,t,i){var a=angular.copy(e.search.options);return a.from=a.from||n||0,a.size=a.size||t||d,a.type=e.type,a.summary=!1,a.filter="text"==e.search.type&&e.search.text&&e.search.text.trim().length>0?e.search.text:void 0,e.search.loading=!i,u.load(a).then(function(n){a.from?n&&(e.search.results=e.search.results.concat(n)):e.search.results=n||[],c.loading.hide(),e.search.loading=!1,e.search.hasMore=e.search.results&&e.search.results.length>=e.search.limit,e.updateView()})["catch"](function(n){e.search.loading=!1,a.from||(e.search.results=[]),e.search.hasMore=!1,c.onError("MESSAGE.ERROR.LOAD_MESSAGES_FAILED")(n)})},e.setType=function(n){e.type=n,e.load()},e.updateView=function(){e.motion&&e.motion.ionListClass&&e.search.results.length&&e.motion.show({selector:".view-messages .list .item"})},e.showMore=function(){e.search.limit=e.search.limit||d,e.search.limit+=d,e.search.limit<d&&(e.search.limit=d),e.search.loadingMore=!0,e.load(e.search.results.length,e.search.limit,!0).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.markAllAsRead=function(){e.hideActionsPopover(),e.search.results&&e.search.results.length&&c.alert.confirm("MESSAGE.CONFIRM.MARK_ALL_AS_READ").then(function(n){n&&u.markAllAsRead().then(function(){_.forEach(e.search.results,function(e){e.read=!0})})["catch"](c.onError("MESSAGE.ERROR.MARK_ALL_AS_READ_FAILED"))})},e["delete"]=function(n){var t=e.search.results[n];t&&c.alert.confirm("MESSAGE.CONFIRM.REMOVE").then(function(i){i&&u.remove(t.id,e.type).then(function(){e.search.results.splice(n,1),c.toast.show("MESSAGE.INFO.MESSAGE_REMOVED")})["catch"](c.onError("MESSAGE.ERROR.REMOVE_MESSAGE_FAILED"))})},e.deleteAll=function(){e.hideActionsPopover(),e.search.results&&e.search.results.length&&c.alert.confirm("MESSAGE.CONFIRM.REMOVE_ALL").then(function(n){n&&u.removeAll(e.type).then(function(){e.search.results.splice(0,e.search.results.length),c.toast.show("MESSAGE.INFO.All_MESSAGE_REMOVED")})["catch"](c.onError("MESSAGE.ERROR.REMOVE_All_MESSAGES_FAILED"))})},e.doSearchLast=function(){return e.search.type="last",e.search.loadingMore=!1,e.search.limit=d,e.load()},e.doSearch=function(){if(e.search.text&&!(e.search.text.length<3))return e.search.type="text",e.search.loadingMore=!1,e.search.results=[],e.search.limit=d,console.debug("[message] [{0}] Searching for: {1}".format(e.type,e.search.text)),e.load()},e.showNewMessageModal=function(n){return e.loadWallet({minData:!0}).then(function(){return c.loading.hide(),l.showMessageCompose(n).then(function(e){e&&c.toast.show("MESSAGE.INFO.MESSAGE_SENT")})})},e.showReplyModal=function(n){var i=e.search.results[n];i&&t("MESSAGE.REPLY_TITLE_PREFIX").then(function(e){var n=i.content?i.content.replace(/^/g," > "):null;return n=n?n.replace(/\n/g,"\n > "):null,n=n?n+"\n":null,l.showMessageCompose({destPub:i.issuer,destUid:i.name||i.uid,title:e+i.title,content:n,isReply:!0})}).then(function(e){e&&c.toast.show("MESSAGE.INFO.MESSAGE_SENT")})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):a.fromTemplateUrl("plugins/es/templates/message/lookup_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.onMessageDelete=function(n){var t=_.findIndex(e.search.results,function(e){return e.id==n});t&&e.search.results.splice(t,1)},u.api.data.on["delete"](e,e.onMessageDelete),e.onNewOutboxMessage=function(n){if("outbox"==e.type)return e.loading=!0,o(function(){return u.get(n,{type:e.type,summary:!0})},500).then(function(n){e.search.results.splice(0,0,n),e.loading=!1,e.motion.show({selector:".view-messages .list .item"})})["catch"](function(){e.loading=!1})},u.api.data.on.sent(e,e.onNewOutboxMessage),e.onNewInboxMessage=function(n){if("inbox"==e.type&&e.entered)return e.loading=!0,u.get(n.id,{type:e.type,summary:!0}).then(function(n){e.search.results.splice(0,0,n),e.search.loading=!1,e.motion.show({selector:".view-messages .list .item"})})["catch"](function(){e.search.loading=!1})},u.api.data.on["new"](e,e.onNewInboxMessage),e.onUnauth=function(){e.search.results=void 0,e.search.loading=!1,e.entered=!1},s.api.data.on.unauth(e,e.onUnauth)}function ESMessageInboxListController(e,n){"ngInject";angular.extend(this,n("ESMessageAbstractListCtrl",{$scope:e})),e.type="inbox",e.fabButtonNewMessageId="fab-add-message-record-inbox"}function ESMessageOutboxListController(e,n){"ngInject";angular.extend(this,n("ESMessageAbstractListCtrl",{$scope:e})),e.type="outbox",e.fabButtonNewMessageId="fab-add-message-record-outbox"}function ESMessageComposeController(e,n,t){"ngInject";angular.extend(this,n("ESMessageComposeModalCtrl",{$scope:e,parameters:{}})),e.$on("$ionicView.enter",function(n,i){i.stateParams&&(i.stateParams.pubkey&&(e.formData.destPub=i.stateParams.pubkey,i.stateParams.uid?(e.destUid=i.stateParams.uid,e.destPub=""):(e.destUid="",e.destPub=e.formData.destPub)),i.stateParams.title&&(e.formData.title=i.stateParams.title),i.stateParams.content&&(e.formData.content=i.stateParams.content)),e.loadWallet({minData:!0}).then(function(){t.loading.hide()})["catch"](function(n){"CANCELLED"===n&&e.showHome()})}),e.cancel=function(){e.showHome()},e.setForm=function(n){e.form=n},e.closeModal=function(){e.showHome()}}function ESMessageComposeModalController(e,n,t,i,a,o,r){"ngInject";e.formData={title:r?r.title:null,content:r?r.content:null,destPub:r?r.destPub:null},e.destUid=r?r.destUid:null,e.destPub=r&&!r.destUid?r.destPub:null,e.isResponse=!!r&&r.isResponse,e.doSend=function(n){if(e.form.$submitted=!0,e.form.$valid){if(!(n||e.formData.content&&e.formData.content.trim().length))return t.alert.confirm("MESSAGE.COMPOSE.CONTENT_CONFIRMATION").then(function(n){n&&e.doSend(!0)});t.loading.show();var r={issuer:i.data.pubkey,recipient:e.formData.destPub,title:e.formData.title,content:e.formData.content,time:a.date.now()};o.send(r).then(function(n){e.id=n,t.loading.hide(),e.closeModal(n)})["catch"](t.onError("MESSAGE.ERROR.SEND_MSG_FAILED"))}},e.showWotLookupModal=function(){n.showWotLookup().then(function(n){n&&(n.uid?(e.destUid=n.uid,e.destPub=""):(e.destUid="",e.destPub=n.pubkey),e.formData.destPub=n.pubkey)})},e.cancel=function(){e.closeModal()}}function ESMessageViewController(e,n,t,i,a,o,r,s,l){"ngInject";e.formData={},e.id=null,e.loading=!0,e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!r.screen.isSmall()||n.enableBack}),e.$on("$ionicView.enter",function(i,a){a.stateParams&&a.stateParams.id?(e.loading&&(e.type=a.stateParams.type||"inbox",e.load(a.stateParams.id,e.type).then(function(n){e.loading=!1,r.loading.hide(),n&&(e.id=n.id,e.formData=n,e.canDelete=!0,e.motion.show({selector:".view-message .list .item"}),n.read||t(function(){e.id===n.id&&l.markAsRead(n,e.type).then(function(){console.debug("[message] marked as read")})["catch"](r.onError("MESSAGE.ERROR.MARK_AS_READ_FAILED"))},2e3))})),e.showFab("fab-view-message-reply")):n.go("app.user_message")}),e.load=function(t,i){return i=i||"inbox",e.loadWallet({minData:!0}).then(function(){return l.get(t,{type:i})})["catch"](r.onError("MESSAGE.ERROR.LOAD_MESSAGE_FAILED")).then(function(t){return t.valid?t:r.alert.error(e.isUserPubkey(t.recipient)?"MESSAGE.ERROR.NOT_AUTHENTICATED_MESSAGE":"MESSAGE.ERROR.USER_NOT_RECIPIENT","MESSAGE.ERROR.MESSAGE_NOT_READABLE").then(function(){n.go("app.user_message",{type:i})})})},e["delete"]=function(){e.actionsPopover&&e.actionsPopover.hide(),r.alert.confirm("MESSAGE.CONFIRM.REMOVE").then(function(t){if(t)return l.remove(e.id,e.type).then(function(){a.nextViewOptions({historyRoot:!0}),n.go("inbox"==e.type?"app.user_message.tab_inbox":"app.user_message.tab_outbox",{type:e.type}),r.toast.show("MESSAGE.INFO.MESSAGE_REMOVED")})["catch"](r.onError("MESSAGE.ERROR.REMOVE_MESSAGE_FAILED"))})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):o.fromTemplateUrl("plugins/es/templates/message/view_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showReplyModal=function(){var n="inbox"==e.type?"issuer":"recipient";i("MESSAGE.REPLY_TITLE_PREFIX").then(function(t){var i=e.formData.content?e.formData.content.replace(/^/g," > "):null;return i=i?i.replace(/\n/g,"\n > "):null,i=i?i+"\n":null,s.showMessageCompose({destPub:e.formData[n],destUid:e.formData.name||e.formData.uid,title:t+e.formData.title,content:i,isReply:!0})}).then(function(e){e&&r.toast.show("MESSAGE.INFO.MESSAGE_SENT").then(function(){a.goBack()})})}}function PopoverMessageController(e,n,t,i,a,o,r){"ngInject";var s=40;e.search={loading:!0,results:null,hasMore:!1,loadingMore:!1,limit:s},e.$on("popover.shown",function(){e.search.loading&&e.load()}),e.load=function(t,i){var a={};return a.from=t||0,a.size=i||s,o.notifications.load(a).then(function(n){
t?e.search.results=e.search.results.concat(n):e.search.results=n,e.search.loading=!1,e.search.hasMore=e.search.results&&e.search.results.length>=e.search.limit,e.updateView()})["catch"](function(i){e.search.loading=!1,t||(e.search.results=[]),e.search.hasMore=!1,n.onError("MESSAGE.ERROR.LOAD_NOTIFICATIONS_FAILED")(i)})},e.updateView=function(){e.motion&&e.search.results&&e.search.results.length&&e.motion.show({selector:".popover-notification .item"})},e.showMore=function(){e.search.limit=e.search.limit||s,e.search.limit=2*e.search.limit,e.search.limit<s&&(e.search.limit=s),e.search.loadingMore=!0,e.load(e.search.results.length,e.search.limit).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.onNewMessageNotification=function(n){e.search.loading||e.search.loadingMore||(e.search.results.splice(0,0,n),e.updateView())},e.select=function(n){n.read||(n.read=!0),t.go("app.user_view_message",{id:n.id}),e.closePopover(n)},e.resetData=function(){e.search.loading||(console.debug("[ES] [messages] Resetting data (settings or account may have changed)"),e.search.hasMore=!1,e.search.results=[],e.search.loading=!0,delete e.search.limit)},e.showNewMessageModal=function(t){return e.closePopover(),r.showMessageCompose(t).then(function(e){e&&n.toast.show("MESSAGE.INFO.MESSAGE_SENT")})},i.api.data.on.logout(e,e.resetData),a.api.node.on.stop(e,e.resetData),a.api.node.on.start(e,e.load),o.api.data.on["new"](e,e.onNewMessageNotification)}function NotificationsController(e,n,t,i,a,o,r,s,l,c){"ngInject";var u=40;e.search={loading:!0,results:null,hasMore:!1,loadingMore:!1,limit:u,options:{codes:{excludes:c.constants.EXCLUDED_CODES}}},e.$on("$ionicView.enter",function(){e.search.loading&&e.loadWallet({minData:!0}).then(function(){return e.load(),o.loading.hide(),a(function(){e.resetUnreadCount()},1e3)})}),e.refresh=function(n){return e.load(void 0,void 0,n)},e.load=function(n,t,i){if(!l.data.pubkey)return void(e.search.loading=!0);var a=angular.copy(e.search.options);return a.from=a.from||n||0,a.size=a.size||t||u,e.search.loading=!i,c.load(l.data.pubkey,a).then(function(n){a.from?n&&(e.search.results=e.search.results.concat(n)):e.search.results=n||[],e.search.loading=!1,e.search.hasMore=e.search.results.length>=e.search.limit,e.updateView()})["catch"](function(n){e.search.loading=!1,a.from||(e.search.results=[]),e.search.hasMore=!1,o.onError("COMMON.NOTIFICATIONS.LOAD_NOTIFICATIONS_FAILED")(n)})},e.updateView=function(){e.motion&&e.motion.ionListClass&&e.search.results.length&&e.motion.show({selector:".view-notification .item"})},e.markAllAsRead=function(){return l.isAuth()?(e.hideActionsPopover(),void(e.search.results.length&&o.loading.show().then(function(){n.walletData.notifications.unreadCount=0;var t=e.search.results[0];return n.walletData.notifications.readTime=t?t.time:0,_.forEach(e.search.results,function(e){e.markAsRead&&"function"==typeof e.markAsRead&&e.markAsRead()}),o.loading.hide()}))):l.auth().then(function(){return o.loading.hide(),e.markAllAsRead()})},e.resetUnreadCount=function(){if(l.data.notifications.unreadCount&&e.search.results&&e.search.results.length){l.data.notifications.unreadCount=0;var n=e.search.results[0],t=n.time?n.time:0;!t||s.data.wallet&&s.data.wallet.notificationReadTime==t||(s.data.wallet=s.data.wallet||{},s.data.wallet.notificationReadTime=t,s.store())}},e.select=function(e){e.markAsRead&&"function"==typeof e.markAsRead&&a(e.markAsRead),e.state&&i.go(e.state,e.stateParams)},e.showMore=function(){e.search.limit=e.search.limit||u,e.search.limit+=u,e.search.limit<u&&(e.search.limit=u),e.search.loadingMore=!0,e.load(e.search.results.length,e.search.limit).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.onNewNotification=function(n){if(!e.search.loading&&!e.search.loadingMore){var t=_.findIndex(e.search.results,function(e){return n.time>e.time});t<0&&(t=0),e.search.results.splice(t,0,n),e.updateView()}},e.resetData=function(){e.search.loading||(console.debug("[ES] [notifications] Resetting data (settings or account may have changed)"),e.search.hasMore=!1,e.search.results=[],e.search.loading=!0,delete e.search.limit)},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):t.fromTemplateUrl("plugins/es/templates/notification/popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},l.api.data.on.logout(e,e.resetData),r.api.node.on.stop(e,e.resetData),r.api.node.on.start(e,e.load),c.api.data.on["new"](e,e.onNewNotification)}function PopoverNotificationsController(e,n,t,i,a){"ngInject";angular.extend(this,t("NotificationsCtrl",{$scope:e})),e.motion=null,e.$on("popover.shown",function(){e.search.loading&&e.load()}),e.updateView=function(){e.search.results.length&&n(function(){i.ink({selector:".popover-notification .item.ink"})},100)},e.$on("popover.hidden",e.resetUnreadCount),e.select=function(n){n&&(n.markAsRead&&"function"==typeof n.markAsRead&&n.markAsRead(),n.state&&a.go(n.state,n.stateParams),e.closePopover(n))}}function ESBlockLookupController(e,n,t,i,a,o){"ngInject";angular.extend(this,n("BlockLookupCtrl",{$scope:e})),e.search.text=null,e.search.type="last",e.search.sort=void 0,e.search.asc=!0,e.searchTextId="blockchainSearchText",e.compactMode=!0,e.enableFilter=!0,e.doSearchText=function(){return e.search.text&&e.search.text.trim().length||e.search.filters&&e.search.filters.length?(e.search.type="text",e.doSearch(),void i.search({q:e.search.query}).replace()):e.doSearchLast()},e.doSearchLast=function(){e.hideActionsPopover(),e.search.type="last",e.search.sort=void 0,e.doSearch(),i.search({q:void 0}).replace()},e.doSearch=function(n){if(!e.search.error){n=angular.isDefined(n)?n:0;var t,i={};if(e.search.loading=0===n,i.size=e.defaultSizeLimit,"last"==e.search.type)i.from=0===n?0:n+1,e.search.sort?(i.sort={},i.sort[e.search.sort]=e.search.asc?"asc":"desc"):i.sort={number:"desc"},i.excludeCurrent=0===n,t=o.block.search(e.currency,i);else if("text"==e.search.type){var r=o.block.parseSearchText(e.search.text,e.search.filters);e.search.filters=r.filters;var s=e.search.filters.reduce(function(e,n){return e+" AND "+n.text},"");r.text.length&&(s+=" AND "+r.text),e.search.query=s.substr(5),e.search.text=r.text,i.from=n,e.search.sort?i.sort=e.search.sort+":"+(e.search.asc?"asc":"desc"):i.sort="number:desc",i.excludeCurrent=!0,t=o.block.searchText(e.currency,e.search.query,i)}var l=(new Date).getTime();return t.then(function(n){return e.doPrepareResult(n.hits).then(function(){return n})}).then(function(t){e.showPubkey="issuer"==e.search.sort,e.search.took=0===n?(new Date).getTime()-l:e.search.took;var i=0===n?t.total:e.search.total;e.doDisplayResult(t.hits,n,i),e.search.loading=!1})["catch"](function(n){e.search.error=!0,e.search.loading=!1,a.onError("BLOCKCHAIN.ERROR.SEARCH_BLOCKS_FAILED")(n).then(function(){e.search.error=!1})})}},e.toggleSort=function(n){e.search.sort!==n||e.search.asc?(e.search.asc=e.search.sort!==n||!e.search.asc,e.search.sort=n):(e.search.asc=void 0,e.search.sort=void 0),e.doSearch()},e.showHelpTip=function(){},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):t.fromTemplateUrl("plugins/es/templates/blockchain/lookup_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.itemRemove=function(n){e.search.filters.splice(n,1),e.doSearchText()},e.toggleShowQuery=function(){e.showQuery=!e.showQuery}}function ESNetworkViewExtendController(e,n,t){"ngInject";e.extensionPoint=n.extensions.points.current.get(),e.enable=t.isEnable(),t.api.state.on.changed(e,function(n){e.enable=n})}function ESGroupListController(e,n,t,i,a,o){"ngInject";var r=40;e.search={loading:!0,results:null,type:"last",hasMore:!1,loadingMore:!1,limit:r},e.enableFilter=!n.screen.isSmall(),e.ionItemClass="item-border-large",e.$on("$ionicView.enter",function(){e.search.loading&&e.doSearch()}),e.doSearchText=function(){var n=e.search.text&&e.search.text.trim();return n&&n.length?(e.search.type="text",e.doSearch()):e.doSearchLast()},e.doSearchLast=function(){return e.search.type="last",e.doSearch()},e.doSearch=function(t,i){var o={};return o.from=t||0,o.size=i||r,o.text="text"==e.search.type&&e.search.text&&e.search.text.trim(),e.search.loading=!0,a.record.search(o).then(function(n){t?n&&(e.search.results=e.search.results.concat(n)):e.search.results=n||[],e.search.loading=!1,e.search.hasMore=e.search.results.length>=e.search.limit,e.updateView()})["catch"](function(i){e.search.loading=!1,t||(e.search.results=[]),e.search.hasMore=!1,n.onError("GROUP.ERROR.SEARCH_GROUPS_FAILED")(i)})},e.updateView=function(){e.$broadcast("$$rebind::rebind"),e.motion.show({selector:".list.{0} .item".format(e.motion.ionListClass)})},e.select=function(e){e&&e.id&&t.go("app.view_group",{id:e.id})},e.showMore=function(){e.search.limit=e.search.limit||r,e.search.limit+=r,e.search.limit<r&&(e.search.limit=r),e.search.loadingMore=!0,e.load(e.search.results.length,e.search.limit).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.resetData=function(){e.search.loading||(console.debug("[ES] [group] Resetting data (settings or account may have changed)"),e.search.hasMore=!1,e.search.results=[],e.search.loading=!0,delete e.search.limit)},i.api.data.on.logout(e,e.resetData),e.showNewRecordModal=function(){e.loadWallet({minData:!0}).then(function(i){n.loading.hide(),e.walletData=i,o.show("plugins/es/templates/group/modal_record_type.html").then(function(e){e&&t.go("app.add_group",{type:e})})})}}function ESGroupViewController(e,n,t,i,a,o,r,s,l){"ngInject";e.formData={},e.id=null,e.pictures=[],e.loading=!0,e.$on("$ionicView.enter",function(t,i){i.stateParams&&i.stateParams.id?((e.loading||i.stateParams.refresh)&&e.load(i.stateParams.id,i.stateParams.anchor),o.loading.hide(),e.$broadcast("$recordView.enter",i)):n.go("app.groups")}),e.load=function(n){s.record.load(n,{fetchPictures:!0}).then(function(t){e.id=t.id,e.formData=t.record,e.issuer=t.issuer,e.canEdit=l.isUserPubkey(e.formData.issuer),e.pictures=t.record.pictures||[],delete t.record.pictures,e.$broadcast("$recordView.load",n,s.record.comment),e.loading=!1,o.loading.hide(),e.updateView()})["catch"](o.onError("GROUP.ERROR.LOAD_RECORD_FAILED"))},e.updateView=function(){e.motion.show()},e.edit=function(){o.loading.show(),n.go("app.edit_group",{id:e.id})},e["delete"]=function(){e.hideActionsPopover();var t;a(["GROUP.VIEW.REMOVE_CONFIRMATION","GROUP.INFO.RECORD_REMOVED"]).then(function(e){return t=e,o.alert.confirm(e["GROUP.VIEW.REMOVE_CONFIRMATION"])}).then(function(a){a&&s.record.remove(e.id).then(function(){i.nextViewOptions({historyRoot:!0}),n.go("app.groups"),o.toast.show(t["GROUP.INFO.RECORD_REMOVED"])})["catch"](o.onError("GROUP.ERROR.REMOVE_RECORD_FAILED"))})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):t.fromTemplateUrl("plugins/es/templates/group/view_popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.showSharePopover=function(t){e.hideActionsPopover();var i=e.formData.title,a=(r.shareBaseUrl||$rootScope.rootPath)+n.href("app.view_group",{id:e.id});o.screen.isSmall()&&(t=angular.element(document.querySelector("#group-share-anchor-"+e.id))||t),o.popover.share(t,{bindings:{url:a,titleKey:"GROUP.VIEW.POPOVER_SHARE_TITLE",titleValues:{title:i},time:e.formData.time,postMessage:i}})}}function ESGroupEditController(e,n,t,i,a,o,r,s,l,c){"ngInject";e.walletData={},e.formData={},e.id=null,e.pictures=[],e.loading=!0,e.setForm=function(n){e.form=n},e.$on("$ionicView.enter",function(n,i){e.loadWallet({minData:!0}).then(function(n){e.walletData=n,i.stateParams&&i.stateParams.id?e.load(i.stateParams.id):(i.stateParams&&i.stateParams.type&&(e.formData.type=i.stateParams.type),e.loading=!1,t.loading.hide(),e.updateView()),l("group-record-title")})}),e.load=function(i){n.record.load(i,{fetchPictures:!0,html:!1}).then(function(n){e.formData=n.record,e.issuer=n.issuer,e.id=n.id,e.pictures=n.record.pictures||[],delete n.record.pictures,e.loading=!1,t.loading.hide(),e.updateView()})["catch"](t.onError("GROUP.ERROR.LOAD_RECORD_FAILED"))},e.updateView=function(){e.motion.show({selector:".list.{0} .item, .card-gallery".format(e.motion.ionListClass)})},e.save=function(){if(e.form.$submitted=!0,!e.saving&&e.form.$valid&&("managed"===e.formData.type||"open"===e.formData.type))return e.saving=!0,t.loading.show().then(function(){var n=e.formData;return n.time=c.date.now(),n.picturesCount=e.pictures.length,n.picturesCount>0?(n.pictures=e.pictures.reduce(function(e,n){return e.concat({file:c.image.toAttachment(n)})},[]),t.image.resizeSrc(e.pictures[0].src,!0).then(function(e){return n.avatar=c.image.toAttachment({src:e}),n})):(n.avatar&&(n.avatar={_content:"",_content_type:""}),n.pictures=[],n)}).then(function(t){return e.id?n.record.update(t,{id:e.id}):(t.creationTime=c.date.now(),n.record.add(t))}).then(function(n){return e.id=e.id||n,e.saving=!1,r.clearCache(r.currentView().stateId),r.nextViewOptions({historyRoot:!0}),i.go("app.view_group",{id:e.id,refresh:!0})})["catch"](function(n){e.saving=!1,t.onError("GROUP.ERROR.SAVE_RECORD_FAILED")(n)})},e.openPicturePopup=function(){o.camera.getPicture().then(function(n){e.pictures.push({src:"data:image/png;base64,"+n})})["catch"](t.onError("ERROR.TAKE_PICTURE_FAILED"))},e.fileChanged=function(n){return t.loading.show(),a(function(i,a){var o=n.target.files[0];t.image.resizeFile(o).then(function(n){e.pictures.push({src:n}),t.loading.hide(),i()})})},e.removePicture=function(n){e.pictures.splice(n,1)},e.favoritePicture=function(n){if(n>0){var t=e.pictures[n];e.pictures.splice(n,1),e.pictures.splice(0,0,t)}},e.cancel=function(){r.goBack()},e.showRecordTypeModal=function(){s.show("plugins/es/templates/group/modal_record_type.html").then(function(n){n&&(e.formData.type=n)})}}function InvitationsController(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";var p=d.constants.DEFAULT_LOAD_SIZE;e.search={loading:!0,results:null,hasMore:!1,loadingMore:!1,limit:p,options:{codes:{includes:u.constants.INVITATION_CODES}}},e.$on("$ionicView.enter",function(){e.search.loading&&(l.isAlive()&&(e.load(),e.resetUnreadCount()),e.showFab("fab-new-invitation"))}),e.load=function(n,t){var i=angular.copy(e.search.options);return i.from=i.from||n||0,i.size=i.size||t||p,d.load(i).then(function(n){e.search.results=n,e.search.loading=!1,e.search.hasMore=e.search.results&&e.search.results.length>=e.search.limit,e.updateView(),o.loading.hide()})["catch"](function(t){return"CANCELLED"==t?e.cancel():(e.search.loading=!1,n||(e.search.results=[]),e.search.hasMore=!1,void o.onError("INVITATION.ERROR.LOAD_INVITATIONS_FAILED")(t))})},e.cancel=function(){},e.updateView=function(){e.motion&&e.search.results&&e.search.results.length&&e.motion.show({selector:".view-invitation .item"})},e.$watchCollection("search.results",e.updateView),e.showMore=function(){e.search.limit=e.search.limit||p,e.search.limit=2*e.search.limit,e.search.limit<p&&(e.search.limit=p),e.search.loadingMore=!0,e.load(e.search.results.length,e.search.limit).then(function(){e.search.loadingMore=!1,e.$broadcast("scroll.infiniteScrollComplete")})},e.onNewInvitation=function(n){e.search.loading||e.search.loadingMore||e.search.results[0]&&e.search.results[0]===n||e.search.results.splice(0,0,n)},e.resetData=function(){e.search.loading||(console.debug("[ES] [invitation] Resetting data (settings or account may have changed)"),e.search.hasMore=!1,e.search.results=[],e.search.loading=!0,delete e.search.limit)},e.resetUnreadCount=function(){if(e.search.loading||!s.data.invitations)return a(e.resetUnreadCount,2e3);if(s.data.invitations.unreadCount&&(console.debug("[ES] [invitation] Resetting unread count"),s.data.invitations.unreadCount=0,e.search.results&&e.search.results.length)){var n=e.search.results[0],t=n.time?n.time:0;!t||r.data.plugins.es.invitations&&r.data.plugins.es.invitations.readTime==t||(r.data.plugins.es.invitations=r.data.plugins.es.invitations||{},r.data.plugins.es.invitations.readTime=t,r.store())}},e.deleteAll=function(t){if(e.hideActionsPopover(),e.search.results.length)return t?n.all([o.loading.show(),d.deleteAll(s.data.pubkey)]).then(function(){return e.search.results.splice(0,e.search.results.length),o.loading.hide()})["catch"](o.onError("INVITATION.ERROR.REMOVE_ALL_INVITATIONS_FAILED")):o.alert.confirm("INVITATION.CONFIRM.DELETE_ALL_CONFIRMATION").then(function(n){if(n)return e.deleteAll(n)})},e["delete"]=function(n){var t=e.search.results[n];if(t)return d["delete"](t).then(function(){e.search.results[n]&&e.search.results[n]===t&&e.search.results.splice(n,1)})["catch"](o.onError("INVITATION.ERROR.REMOVE_INVITATION_FAILED"))},e.accept=function(n){e.hideActionsPopover(),n.state&&i.go(n.state,n.stateParams||{})},e.showNewInvitationModal=function(){return e.hideActionsPopover(),c.showNewInvitation({})},e.showActionsPopover=function(n){e.actionsPopover?e.actionsPopover.show(n):t.fromTemplateUrl("plugins/es/templates/invitation/popover_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},s.api.data.on.logout(e,e.resetData),l.api.node.on.stop(e,e.resetData),l.api.node.on.start(e,e.load),d.api.data.on["new"](e,e.onNewInvitation)}function PopoverInvitationController(e,n){"ngInject";angular.extend(this,n("InvitationsCtrl",{$scope:e})),e.motion=null,e.$on("popover.shown",function(){e.search.loading&&e.load()}),e.updateView=function(){},e.$on("popover.hidden",e.resetUnreadCount),e.hideActionsPopover=function(){e.closePopover()},e.cancel=function(){e.closePopover()}}function NewInvitationModalController(e,n,t,i,a,o,r,s){"ngInject";e.recipients=[],e.suggestions=[],e.formData={useComment:!1},e.onUseCommentChanged=function(){e.formData.useComment||(e.formData.comment=null)},e.$watch("formData.useComment",e.onUseCommentChanged,!0),e.removeRecipient=function(n,t){e.recipients.splice(n,1),t.preventDefault()},e.removeSuggestion=function(n,t){e.suggestions.splice(n,1),t.preventDefault()},e.cancel=function(){e.closeModal()},e.doSend=function(){if(e.form.$submitted=!0,e.form.$valid&&e.recipients.length&&e.suggestions.length)return a.isLogin()?n.all([r.box.getKeypair(a.data.keypair),i.alert.confirm("INVITATION.CONFIRM.SEND_INVITATIONS_TO_CERTIFY",void 0,{okText:"COMMON.BTN_SEND"})]).then(function(t){if(t){var r=t[0],l=t[1];if(l){i.loading.show();var c=o.date.now(),u=e.formData.useComment&&e.formData.comment&&e.formData.comment.trim();return n.all(e.recipients.reduce(function(n,t){return n.concat(e.suggestions.reduce(function(e,n){if(!n.uid||!n.pubkey)return console.error("Unable to send suggestion for this identity (no uid or pubkey)",n),e;var i={issuer:a.data.pubkey,recipient:t.pubkey,time:c,content:[n.uid,n.pubkey].join("-"),comment:u};return e.concat(s.send(i,r,"certification"))},[]))},[])).then(function(){return e.closeModal(),i.loading.hide()}).then(function(){i.toast.show("INVITATION.INFO.INVITATION_SENT")})["catch"](i.onError("INVITATION.ERROR.SUGGEST_CERTIFICATIONS_FAILED"))}}}):e.closeModal()},e.showSelectRecipientModal=function(n){if(!n.isDefaultPrevented())return t.showWotLookup({allowMultiple:!0,enableFilter:!0,title:"INVITATION.NEW.RECIPIENTS_MODAL_TITLE",help:"INVITATION.NEW.RECIPIENTS_MODAL_HELP",okText:"COMMON.BTN_OK",okType:"button-positive",selection:angular.copy(e.recipients)}).then(function(n){n&&(e.recipients=n)})},e.showSelectSuggestionModal=function(n){if(!n.isDefaultPrevented())return t.showWotLookup({allowMultiple:!0,enableFilter:!0,title:"INVITATION.NEW.SUGGESTION_IDENTITIES_MODAL_TITLE",help:"INVITATION.NEW.SUGGESTION_IDENTITIES_MODAL_HELP",okText:"COMMON.BTN_OK",okType:"button-positive",selection:angular.copy(e.suggestions)}).then(function(n){n&&(e.suggestions=n)})}}function ViewSubscriptionsController(e,n,t,i,a,o,r){"ngInject";e.popupData={},e.search={results:[],loading:!0},e.emailFrequencies=[{id:"daily",label:"daily"},{id:"weekly",label:"weekly"}],e.onEnter=function(){e.loading=!0,e.loadWallet({minData:!0}).then(function(){return a.loading.hide(),e.load()})["catch"](function(e){return"CANCELLED"==e?a.loading.hide():void a.onError("SUBSCRIPTION.ERROR.LOAD_SUBSCRIPTIONS_FAILED")(e)})},e.$on("$ionicView.enter",e.onEnter),e.load=function(){return e.loading=!0,r.record.load(n.walletData.pubkey,n.walletData.keypair).then(function(e){var n=_.groupBy(e||[],function(e){return[e.type,e.recipient].join("|")});return _.keys(n).reduce(function(e,t){var i=t.split("|");return e.concat({type:i[0],recipient:i[1],items:n[t]})},[])}).then(function(e){return i.extendAll(e,"recipient")}).then(function(n){e.updateView(n)})["catch"](function(n){a.loading.hide(10),n&&404==n.ucode?(e.updateView([]),e.existing=!1):a.onError("PROFILE.ERROR.LOAD_PROFILE_FAILED")(n)})},e.updateView=function(n){n&&(e.search.results=n),e.search.results&&e.search.results.length&&e.motion.show(),e.search.loading=!1},e.addSubscription=function(){var t;e.showCategoryModal().then(function(n){if(n)return t=n.id,"email"==t?e.showEmailModal():void a.alert.notImplemented()}).then(function(t){t&&(a.loading.show(),r.record.add(t).then(e.addToUI).then(function(){n.walletData.subscriptions=n.walletData.subscriptions||{count:0},n.walletData.subscriptions.count++,a.loading.hide(),e.updateView()})["catch"](a.onError("SUBSCRIPTION.ERROR.ADD_SUBSCRIPTION_FAILED")))})},e.editSubscription=function(n){var t,i=angular.copy(n);if("email"==n.type&&(t=e.showEmailModal(n)),t)return t.then(function(){if(n)return a.loading.show(),n.id=i.id,r.record.update(n).then(function(){if(i.type!=n.type||i.recipient!=n.recipient)return e.removeFromUI(i),e.addToUI(n)}).then(function(){a.loading.hide(),e.updateView()})["catch"](a.onError("SUBSCRIPTION.ERROR.UPDATE_SUBSCRIPTION_FAILED"))})},e.deleteSubscription=function(t,i){if(t&&t.id){if(!i)return a.alert.confirm("SUBSCRIPTION.CONFIRM.DELETE_SUBSCRIPTION").then(function(n){if(n)return e.deleteSubscription(t,n)});a.loading.show(),r.record.remove(t.id).then(function(){n.walletData.subscriptions=n.walletData.subscriptions||{count:1},n.walletData.subscriptions.count--,e.removeFromUI(t),a.loading.hide()})["catch"](a.onError("SUBSCRIPTION.ERROR.DELETE_SUBSCRIPTION_FAILED"))}},e.removeFromUI=function(n){var t=_.findWhere(e.search.results,{type:n.type,recipient:n.recipient}),i=_.findIndex(t.items,n);i>=0&&t.items.splice(i,1),t.items.length||(i=_.findIndex(e.search.results,t),e.search.results.splice(i,1))},e.addToUI=function(n){e.search.results=e.search.results||[];var a=_.findWhere(e.search.results,{type:n.type,recipient:n.recipient});return a?(a.items.push(n),t.when(n)):(a={type:n.type,recipient:n.recipient,items:[]},i.extendAll([a],"recipient").then(function(){return a.items.push(n),e.search.results.push(a),n}))},e.showCategoryModal=function(){return r.category.all().then(function(e){return o.show("plugins/es/templates/common/modal_category.html","ESCategoryModalCtrl as ctrl",{categories:e},{focusFirstInput:!0})}).then(function(e){if(e&&e.parent)return e})},e.showEmailModal=function(e){return o.show("plugins/es/templates/subscription/modal_email.html","ModalEmailSubscriptionsCtrl",e,{focusFirstInput:!0})}}function ModalEmailSubscriptionsController(e,n,t,i,a,o){"ngInject";e.frequencies=[{id:"daily",label:"daily"},{id:"weekly",label:"weekly"}],e.formData=o||{},e.formData.content=e.formData.content||{},e.formData.content.frequency=e.formData.content.frequency||e.frequencies[0].id,e.recipient={},e.$on("modal.shown",function(){if(e.formData.recipient)return e.recipient={pubkey:e.formData.recipient},a.extendAll([e.recipient])}),e.doSubmit=function(){if(e.form.$submitted=!0,e.form.$valid&&e.formData.content.email&&e.formData.content.frequency){var n={type:"email",recipient:e.formData.recipient,content:{email:e.formData.content.email,locale:t.data.locale.id,frequency:e.formData.content.frequency}};e.closeModal(n)}},e.cancel=function(){e.closeModal()},e.subscriptionForm&&e.subscriptionForm.$setPristine(),e.showNetworkLookup=function(){return n.showNetworkLookup({enableFilter:!0,endpointFilter:i.constants.ES_USER_API_ENDPOINT}).then(function(n){n&&(e.recipient=n,e.formData.recipient=n.pubkey)})}}function ESDocumentLookupController(e,n,t,i,a,o,r,s,l){"ngInject";e.search={loading:!0,hasMore:!0,text:void 0,index:"invitation",type:"certification",results:void 0,sort:"time",asc:!1},e.entered=!1,e.searchTextId="documentSearchText",e.ionItemClass="item-border-large",e.defaultSizeLimit=r.screen.isSmall()?50:100,e.helptipPrefix="helptip-document",e.$on("$ionicView.enter",function(n,t){e.entered||(e.entered=!0,e.search.index=t.stateParams&&t.stateParams.index||e.search.index,e.search.type=t.stateParams&&t.stateParams.type||e.search.type,e.search.text=t.stateParams&&t.stateParams.q||e.search.text,e.search.last=!e.search.text,e.load()),e.expertMode=angular.isDefined(e.expertMode)?e.expertMode:!r.screen.isSmall()&&a.data.expertMode}),e.load=function(n,t){if(!e.search.error){var i={index:e.search.index,type:e.search.type,from:t||0,size:n||e.defaultSizeLimit};e.search.sort?(i.sort={},i.sort[e.search.sort]=e.search.asc?"asc":"desc"):i.sort={time:"desc"},e.search.loading=!0;var a=e.search.last?l.search(i):l.searchText(e.search.text||"",i);return a.then(function(n){e.search.results=n.hits,e.search.total=n.total,e.search.took=n.took,r.loading.hide(),e.search.loading=!1,n.hits&&n.hits.length>0?(e.motion.show({selector:".list .item.item-document"}),e.search.hasMore=n.total>e.search.results.length):e.search.hasMore=!1,e.$broadcast("$$rebind::rebind")})["catch"](function(n){e.search.results=[],e.search.loading=!1,e.search.error=!0,r.onError("DOCUMENT.ERROR.LOAD_DOCUMENTS_FAILED")(n).then(function(){e.search.error=!1})})}},e.doSearchText=function(){return e.search.last=!e.search.text,e.load().then(function(){t.search({q:e.search.text}).replace()})},e.doSearchLast=function(){return e.search.last=!0,e.search.text=void 0,e.load()},e.removeAll=function(){if(e.hideActionsPopover(),e.search.results&&e.search.results.length)return r.alert.confirm("DOCUMENT.CONFIRM.REMOVE_ALL").then(function(n){if(n)return r.loading.show(),l.removeAll(e.search.results).then(function(){return e.search.loading=!1,i(function(){return r.toast.show("DOCUMENT.INFO.REMOVED"),e.load()},1e3)})["catch"](r.onError("DOCUMENT.ERROR.REMOVE_ALL_FAILED"))})},e.remove=function(n){var t=e.search.results[n];t&&r.alert.confirm("DOCUMENT.CONFIRM.REMOVE").then(function(i){if(i)return l.remove(t).then(function(){e.search.results.splice(n,1),e.$broadcast("$$rebind::rebind"),r.toast.show("DOCUMENT.INFO.REMOVED")})["catch"](r.onError("MESSAGE.ERROR.REMOVE_FAILED"))})},e.selectDocument=function(n,t){console.debug("Selected document: ",t,s);var i=s.getUrl("/{0}/{1}/_search?pretty&q=_id:{2}".format(t.index,t.type,t.id));return e.openLink(n,i)},e.toggleSort=function(n){e.search.sort!==n||e.search.asc?(e.search.asc=e.search.sort!==n||!e.search.asc,e.search.sort=n):(e.search.asc=void 0,e.search.sort=void 0),e.load()},e.showActionsPopover=function(t){e.actionsPopover?e.actionsPopover.show(t):n.fromTemplateUrl("plugins/es/templates/document/lookup_popover_actions.html",{scope:e}).then(function(n){e.actionsPopover=n,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(t)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()},e.onUnauth=function(){e.search.results=void 0,e.search.loading=!1,e.entered=!1},o.api.data.on.unauth(e,e.onUnauth)}function GpCurrencyAbstractController(e,n,t,i,a,o,r,s){"ngInject";function l(n){return moment.unix(n).utc().startOf(e.formData.rangeDuration).unix()}e.loading=!0,e.formData=e.formData||{useRelative:o.data.useRelative,timePct:100,rangeDuration:"day",firstBlockTime:0,scale:"linear",hide:[]},e.formData.useRelative=!1,e.scale="linear",e.height=void 0,e.width=void 0,e.maintainAspectRatio=!0,e.times=[],e.enter=function(n,t){if(e.loading){if(t&&t.stateParams&&(e.stateName=t&&t.stateName,e.stateParams=angular.copy(t&&t.stateParams||{}),!e.formData.currency&&t&&t.stateParams&&t.stateParams.currency&&(e.formData.currency=t.stateParams.currency),t.stateParams.t?e.formData.timePct=t.stateParams.t:t.stateParams.timePct&&(e.formData.timePct=t.stateParams.timePct),t.stateParams.stepUnit&&(e.formData.rangeDuration=t.stateParams.stepUnit),t.stateParams.scale&&(e.formData.scale=t.stateParams.scale),t.stateParams.hide&&(e.formData.hide=t.stateParams.hide.split(",").reduce(function(e,n){return e.concat(parseInt(n))},[]))),e.init(n,t),!e.formData.currency)return r.get().then(function(i){return e.formData.currency=i?i.name:null,e.formData.firstBlockTime=i?l(i.firstBlockTime):0,e.formData.firstBlockTime||console.warn("[graph] currency.firstBlockTime not loaded ! Should have been loaded by currrency service!"),e.formData.currencyAge=l(s.date.now())-e.formData.firstBlockTime,e.enter(n,t)});e.load().then(function(){e.setScale(e.formData.scale),e.updateHiddenDataset(),e.loading=!1})}},e.$on("$csExtension.enter",e.enter),e.$on("$ionicParentView.enter",e.enter),e.updateLocation=function(){i.nextViewOptions({disableAnimate:!0,disableBack:!0,historyRoot:!0}),e.stateParams=e.stateParams||{},e.stateParams.t=e.formData.timePct>=0&&e.formData.timePct<100?e.formData.timePct:void 0,e.stateParams.stepUnit="day"!=e.formData.rangeDuration?e.formData.rangeDuration:void 0,e.stateParams.hide=e.formData.hide&&e.formData.hide.length?e.formData.hide.join(","):void 0,e.stateParams.scale="linear"!=e.formData.scale?e.formData.scale:void 0,a.go(e.stateName,e.stateParams,{reload:!1,inherit:!0,notify:!1})},e.setSize=function(n,t,i){e.height=n,e.width=t,e.maintainAspectRatio=angular.isDefined(i)?i:e.maintainAspectRatio},e.$on("csView.action.refresh",function(n,t){if(!t||"currency"==t)return e.load()}),e.init=function(e,n){},e.load=function(){},e.toggleScale=function(){e.setScale("linear"===e.formData.scale?"logarithmic":"linear"),e.updateLocation()},e.setScale=function(t){if(e.hideActionsPopover(),e.formData.scale=t,e.options&&e.options.scales&&e.options.scales.yAxes){var i=n("formatInteger");_.forEach(e.options.scales.yAxes,function(e,n){e.type=t,e.ticks=e.ticks||{},"linear"==t?(e.ticks.beginAtZero=!0,delete e.ticks.min,e.ticks.callback=function(e){return i(e)}):(delete e.ticks.beginAtZero,delete e.ticks.callback,e.ticks.callback=function(e,n){if(e)return Math.log10(e)%1===0||Math.log10(e/3)%1===0?i(e):""})})}},e.setRangeDuration=function(n){e.hideActionsPopover(),e.formData&&n==e.formData.rangeDuration||(e.formData.rangeDuration=n,delete e.formData.startTime,delete e.formData.endTime,delete e.formData.rangeDurationSec,e.load(),e.updateLocation())},e.updateHiddenDataset=function(n){n=n||e.datasetOverride||{},_.forEach(e.formData.hide||[],function(t){if(n[t]){n[t].hidden=!0;var i=n[t].yAxisID,a=i&&e.options&&e.options.scales&&_.findWhere(e.options.scales.yAxes||[],{id:i});if(i&&a){var o=_.filter(n,function(e){return e.yAxisID===i}).length;1==o&&(a.display=!1)}}})},e.onLegendClick=function(n,t){var i=t.datasetIndex,a=this.chart,o=a.getDatasetMeta(i);if(o.hidden=null===o.hidden?!a.data.datasets[i].hidden:null,a.config&&a.config.data&&a.config.data.datasets){var r=_.filter(a.config.data.datasets,function(e){return e.yAxisID&&e.yAxisID===o.yAxisID}).length;1===r&&(a.scales[o.yAxisID].options.display=!(o.hidden===!0))}a.update(),e.formData.hide=e.formData.hide||[],e.formData.hide=o.hidden?_.union(e.formData.hide,[i]):_.difference(e.formData.hide,[i]),e.updateLocation()},e.goPreviousRange=function(){e.loadingRange||(e.loadingRange=!0,e.formData.startTime-=e.times.length*e.formData.rangeDurationSec,
e.formData.startTime<e.formData.firstBlockTime&&(e.formData.startTime=e.formData.firstBlockTime),e.formData.endTime=e.formData.startTime+e.times.length*e.formData.rangeDurationSec,e.load().then(function(){e.updateLocation(),e.loadingRange=!1}))},e.goNextRange=function(){e.loadingRange||(e.loadingRange=!0,e.formData.startTime+=e.times.length*e.formData.rangeDurationSec,e.formData.startTime>e.formData.firstBlockTime+e.formData.currencyAge-e.formData.timeWindow&&(e.formData.startTime=e.formData.firstBlockTime+e.formData.currencyAge-e.formData.timeWindow),e.formData.endTime=e.formData.startTime+e.times.length*e.formData.rangeDurationSec,e.load().then(function(){e.updateLocation(),e.loadingRange=!1}))},e.onRangeChanged=function(){e.loadingRange||(e.loadingRange=!0,e.formData.startTime=e.formData.firstBlockTime+parseFloat(e.formData.timePct)/100*(e.formData.currencyAge-e.formData.timeWindow),e.formData.endTime=e.formData.startTime+e.times.length*e.formData.rangeDurationSec,e.load().then(function(){e.updateLocation(),e.loadingRange=!1}))},e.updateRange=function(n,t,i){i=!angular.isDefined(i)||i,e.formData.startTime=n,e.formData.endTime=t,e.formData.timeWindow=e.formData.timeWindow||e.formData.endTime-e.formData.startTime,e.formData.rangeDurationSec=e.formData.rangeDurationSec||e.formData.timeWindow/(e.times.length-1),i&&(e.formData.timePct=Math.ceil(100*(e.formData.startTime-e.formData.firstBlockTime)/(e.formData.currencyAge-e.formData.timeWindow)))},e.showActionsPopover=function(n){e.hideActionsPopover(),t.fromTemplateUrl("plugins/graph/templates/common/popover_range_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()}}function GpBlockchainTxCountController(e,n,t,i,a,o,r,s){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.displayRightAxis=!0,e.init=function(n,t){t&&t.stateParams&&!e.formData.issuer&&t&&t.stateParams&&t.stateParams.pubkey&&(e.formData.issuer=t.stateParams.pubkey)},e.load=function(n){var i=e.formData;return t.all([o(e.formData.issuer?"GRAPH.BLOCKCHAIN.TX_AMOUNT_PUBKEY_TITLE":"GRAPH.BLOCKCHAIN.TX_AMOUNT_TITLE",i),o(["GRAPH.BLOCKCHAIN.TX_AMOUNT_LABEL","GRAPH.BLOCKCHAIN.TX_COUNT_LABEL","GRAPH.BLOCKCHAIN.TX_AVG_BY_BLOCK","COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.DATE_MONTH_YEAR_PATTERN"]),r.blockchain.txCount(e.formData.currency,i)]).then(function(t){var i=t[0],o=t[1],r={hour:o["COMMON.DATE_PATTERN"],day:o["COMMON.DATE_SHORT_PATTERN"],month:o["COMMON.DATE_MONTH_YEAR_PATTERN"]};if(t=t[2],t&&t.times){e.times=t.times;var l=(a("formatInteger"),a("formatDecimal"));e.currencySymbol=a("currencySymbolNoHtml")(e.formData.currency,e.formData.useRelative),"hour"!=e.formData.rangeDuration?e.data=[t.amount,t.count]:e.data=[t.amount,t.count];var c=r[e.formData.rangeDuration];e.labels=t.times.reduce(function(e,n){return e.concat(moment.unix(n).local().format(c))},[]),e.colors=s.scale.fix(t.times.length),e.updateRange(t.times[0],t.times[t.times.length-1],n),e.options={responsive:!0,maintainAspectRatio:!0,title:{display:!0,text:i},scales:{yAxes:[{id:"y-axis-amount",position:"left"},{id:"y-axis-count",display:e.displayRightAxis,position:"right",gridLines:{drawOnChartArea:!1}}]},legend:{display:e.displayRightAxis,onClick:e.onLegendClick},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(n,t){return 0===n.datasetIndex?t.datasets[n.datasetIndex].label+": "+l(n.yLabel)+" "+e.currencySymbol:t.datasets[n.datasetIndex].label+": "+n.yLabel}}}},e.datasetOverride=[{yAxisID:"y-axis-amount",type:"bar",label:o["GRAPH.BLOCKCHAIN.TX_AMOUNT_LABEL"],hoverBackgroundColor:s.rgba.calm(.6)},{yAxisID:"y-axis-count",type:"line",label:o["GRAPH.BLOCKCHAIN.TX_COUNT_LABEL"],fill:!1,borderColor:s.rgba.gray(.5),borderWidth:2,backgroundColor:s.rgba.gray(.5),pointBackgroundColor:s.rgba.gray(.5),pointBorderColor:s.rgba.white(),pointHoverBackgroundColor:s.rgba.gray(1),pointHoverBorderColor:s.rgba.translucent(),pointRadius:3}]}})},e.onChartClick=function(n,t,a){if(a){var o=e.times[a._index],r=moment.unix(o).utc().add(1,e.formData.rangeDuration).unix(),s="_exists_:transactions AND medianTime:>={0} AND medianTime:<{1}".format(o,r);e.formData.issuer&&(s+=" AND issuer:"+e.formData.issuer),i.go("app.blockchain_search",{q:s})}}}function GpBlockchainIssuersController(e,n,t,i,a,o,r){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.load=function(){return t.all([a(["GRAPH.BLOCKCHAIN.BLOCKS_ISSUERS_TITLE","GRAPH.BLOCKCHAIN.BLOCKS_ISSUERS_LABEL"]),r.blockchain.countByIssuer(e.formData.currency)]).then(function(n){var t=n[0];n=n[1],n&&n.data&&(e.data=n.data,e.labels=n.labels,e.blockCount=n.blockCount,e.issuers=n.issuers,e.barOptions={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0,text:t["GRAPH.BLOCKCHAIN.BLOCKS_ISSUERS_TITLE"]},scales:{yAxes:[{type:"linear",ticks:{beginAtZero:!0}}]}},e.colors=o.scale.custom(n.data.length))})},e.onChartClick=function(n,t,a){if(a){var o=e.issuers[a._index];i.go("app.wot_identity",o)}}}function GpNetworkViewExtendController(e,n,t){"ngInject";e.extensionPoint=n.extensions.points.current.get(),e.enable=t.isEnable(),t.api.state.on.changed(e,function(n){e.enable=n})}function GpPeerViewExtendController(e,n,t,i,a,o){"ngInject";e.extensionPoint=t.extensions.points.current.get(),e.enable=i.isEnable(),e.loading=!0,e.node=e.node||{},i.api.state.on.changed(e,function(n){e.enable=n}),e.enter=function(t,i){return!e.node.currency&&i&&i.stateParams&&i.stateParams.currency&&(e.node.currency=i.stateParams.currency),e.node.currency?e.node.pubkey?e.load():n(function(){return e.enter(t,i)},500):a.get().then(function(n){return e.node.currency=n?n.name:null,e.enter(t,i)})},e.$on("$csExtension.enter",e.enter),e.load=function(){if(e.node.currency||e.node.pubkey)return console.info("[Graph] [peer] Loading blocks count for [{0}]".format(e.node.pubkey.substr(0,8))),o.node.blockCount(e.node.currency,e.node.pubkey).then(function(n){e.blockCount=n,e.loading=!1})}}function GpCurrencyViewExtendController(e,n,t,i){"ngInject";e.extensionPoint=n.extensions.points.current.get(),e.enable=i.isEnable(),e.smallscreen=t.screen.isSmall(),i.api.state.on.changed(e,function(n){e.enable=n})}function GpCurrencyMonetaryMassController(e,n,t,i,a,o,r,s,l,c){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.formData.useRelative=angular.isDefined(e.formData.useRelative)?e.formData.useRelative:c.data.useRelative,e.displayShareAxis=!0,e.hiddenDatasets=[],e.init=function(e,n){},e.onUseRelativeChanged=function(){e.loading||e.load()},e.$watch("formData.useRelative",e.onUseRelativeChanged);var u=function(e){return Math.trunc(100*e)/100};e.load=function(n,i){return n=n||0,i=i||1e4,t.all([a(["GRAPH.CURRENCY.MONETARY_MASS_TITLE","GRAPH.CURRENCY.MONETARY_MASS_LABEL","GRAPH.CURRENCY.MONETARY_MASS_SHARE_LABEL"]),s.blockchain.withDividend(e.formData.currency,{from:n,size:i})]).then(function(n){var t=n[0];if(n=n[1],n&&n.times){e.times=n.times;var i,a=n.times[n.times.length-1]-n.times[0];i=l(a<31557600?"formatDateShort":"formatDateMonth");var o=l("formatDecimal");e.currencySymbol=l("currencySymbolNoHtml")(e.formData.currency,e.formData.useRelative);var s=[];e.formData.useRelative?(s.push(n.blocks.reduce(function(e,n){return e.concat(u(n.monetaryMass/n.dividend))},[])),s.push(n.blocks.reduce(function(e,n){return e.concat(u(n.monetaryMass/n.dividend/n.membersCount))},[]))):(s.push(n.blocks.reduce(function(e,n){return e.concat(n.monetaryMass/100)},[])),s.push(n.blocks.reduce(function(e,n){return e.concat(u(n.monetaryMass/n.membersCount/100))},[]))),e.data=s,e.labels=n.times.reduce(function(e,n){return e.concat(i(n))},[]),e.colors=r.scale.fix(n.times.length),e.options={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0,text:t["GRAPH.CURRENCY.MONETARY_MASS_TITLE"]},legend:{display:e.displayShareAxis,onClick:e.onLegendClick},scales:{yAxes:[{id:"y-axis-mass"},{id:"y-axis-mn",display:e.displayShareAxis,position:"right",gridLines:{drawOnChartArea:!1}}]},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(n,t){return t.datasets[n.datasetIndex].label+": "+o(n.yLabel)+" "+e.currencySymbol}}}},e.datasetOverride=[{yAxisID:"y-axis-mass",type:"line",label:t["GRAPH.CURRENCY.MONETARY_MASS_LABEL"],borderWidth:2,pointRadius:0,pointHitRadius:4,pointHoverRadius:3},{yAxisID:"y-axis-mn",type:"line",label:t["GRAPH.CURRENCY.MONETARY_MASS_SHARE_LABEL"],fill:!1,showLine:!0,borderColor:r.rgba.energized(),borderWidth:1,backgroundColor:r.rgba.energized(),pointBackgroundColor:r.rgba.energized(),pointBorderColor:r.rgba.energized(),pointHoverBackgroundColor:r.rgba.energized(),pointHoverBorderColor:r.rgba.energized(),pointRadius:0,pointHitRadius:4,pointHoverRadius:3}],e.setScale(e.scale),e.blocks=n.blocks.reduce(function(e,n){return e.concat(n.number)},[])}})},e.onChartClick=function(n,t,a){if(a){var o=e.blocks[a._index];i.go("app.view_block",{number:o})}},e.showActionsPopover=function(n){e.hideActionsPopover(),o.fromTemplateUrl("plugins/graph/templates/currency/popover_monetary_mass_actions.html",{scope:e}).then(function(t){e.actionsPopover=t,e.$on("$destroy",function(){e.actionsPopover.remove()}),e.actionsPopover.show(n)})},e.hideActionsPopover=function(){e.actionsPopover&&e.actionsPopover.hide()}}function GpCurrencyDUController(e,n,t,i,a,o,r){"ngInject";angular.extend(this,t("GpCurrencyMonetaryMassCtrl",{$scope:e})),e.load=function(t,s){return t=t||0,s=s||1e4,n.all([i(["GRAPH.CURRENCY.UD_TITLE","COMMON.UNIVERSAL_DIVIDEND"]),o.blockchain.withDividend(e.formData.currency,{from:t,size:s})]).then(function(n){var t=n[0];if(n=n[1],n&&n.times){e.times=n.times;var i,o=n.times[n.times.length-1]-n.times[0];i=r(o<31557600?"formatDateShort":"formatDateMonth");var s=r("formatDecimal");e.currencySymbol=r("currencySymbolNoHtml")(e.formData.currency,!1),e.data=[n.blocks.reduce(function(e,n){return e.concat(n.dividend/100)},[])],e.labels=n.times.reduce(function(e,n){return e.concat(i(n))},[]),e.colors=n.blocks.reduce(function(e){return e.concat(a.rgba.calm(.5))},[]),e.options={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0,text:t["GRAPH.CURRENCY.UD_TITLE"]},scales:{yAxes:[{id:"y-axis-ud",ticks:{beginAtZero:!1}}]},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(n,t){return t.datasets[n.datasetIndex].label+": "+s(n.yLabel)+" "+e.currencySymbol}}}},e.setScale(e.scale),e.datasetOverride=[{yAxisID:"y-axis-ud",type:"line",label:t["COMMON.UNIVERSAL_DIVIDEND"],borderWidth:2,pointRadius:0,pointHitRadius:4,pointHoverRadius:3}],e.blocks=n.blocks.reduce(function(e,n){return e.concat(n.number)},[])}})}}function GpCurrencyMembersCountController(e,n,t,i,a,o,r,s){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.load=function(n,i){return n=n||0,i=i||1e4,t.all([a(["GRAPH.CURRENCY.MEMBERS_COUNT_TITLE","GRAPH.CURRENCY.MEMBERS_COUNT_LABEL"]),r.blockchain.withDividend(e.formData.currency,{from:n,size:i,withCurrent:!0})]).then(function(n){var t=n[0];if(n=n[1],n&&n.times){e.times=n.times;var i,a=n.times[n.blocks.length-1]-n.times[0];i=s(a<31557600?"formatDateShort":"formatDateMonth"),e.labels=n.times.reduce(function(e,n){return e.concat(i(n))},[]),e.options={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0,text:t["GRAPH.CURRENCY.MEMBERS_COUNT_TITLE"]},scales:{xAxes:[{position:"bottom"}],yAxes:[{id:"y-axis-1",ticks:{beginAtZero:!1}}]}},e.datasetOverride=[{yAxisID:"y-axis-1",type:"line",label:t["GRAPH.CURRENCY.MEMBERS_COUNT_LABEL"],borderWidth:2,pointRadius:0,pointHitRadius:4,pointHoverRadius:3}],e.data=[n.blocks.reduce(function(e,n){return e.concat(n.membersCount)},[])],e.colors=o.scale.fix(n.blocks.length)}})},e.onChartClick=function(n,t,a){if(a){if(!a._index)return void i.go("app.view_block",{number:0});var o=e.times[a._index-1],r=moment.unix(o).utc().add(1,"day").unix();i.go("app.blockchain_search",{q:"(_exists_:joiners OR _exists_:leavers OR _exists_:revoked OR _exists_:excluded) AND medianTime:>{0} AND medianTime:<={1}".format(o,r)})}}}function GpExtendController(e,n,t,i,a){"ngInject";e.extensionPoint=n.extensions.points.current.get(),e.enable=t.isEnable(),t.api.state.on.changed(e,function(n){e.enable=n}),e.showIdentityStats=function(){e.formData&&e.formData.pubkey&&i.go("app.wot_identity_stats",{pubkey:e.formData.pubkey})},e.showWalletStats=function(){a.isLogin()&&i.go("app.wot_identity_stats",{pubkey:a.data.pubkey})}}function GpAccountBalanceController(e,n,t,i,a,o,r,s,l,c){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.init=function(n,t){t&&t.stateParams&&t.stateParams.pubkey?e.formData.pubkey=t.stateParams.pubkey:c.isLogin()&&(e.formData.pubkey=c.data.pubkey)};var u=e.setScale;e.setScale=function(n){"linear"===n?e.data[e.data.length-2]=_.map(e.data[e.data.length-2],function(e){return-1*Math.abs(e)}):e.data[e.data.length-2]=_.map(e.data[e.data.length-2],function(e){return Math.abs(e)}),u(n)},e.load=function(n){n=!angular.isDefined(n)||n;var i=!0;return r.load(e.formData.pubkey).then(function(n){return e.identity=n,i=e.identity.isMember||e.identity.wasMember,t.all([o("GRAPH.ACCOUNT.BALANCE_TITLE",e.formData),o(["GRAPH.ACCOUNT.UD_LABEL","GRAPH.ACCOUNT.TX_RECEIVED_LABEL","GRAPH.ACCOUNT.TX_SENT_LABEL","GRAPH.ACCOUNT.UD_ACCUMULATION_LABEL","GRAPH.ACCOUNT.TX_ACCUMULATION_LABEL","GRAPH.ACCOUNT.BALANCE_LABEL","COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.DATE_MONTH_YEAR_PATTERN"]),s.blockchain.movement(e.formData.currency,angular.copy(e.formData))])}).then(function(t){var o=t[0],r=t[1];if(t=t[2],t&&t.times){e.times=t.times;var s=(a("formatInteger"),a("formatDecimal"));e.currencySymbol=a("currencySymbolNoHtml")(e.formData.currency,e.formData.useRelative),e.data=[t.ud,t.received,t.sent,t.balance];var c={hour:r["COMMON.DATE_PATTERN"],day:r["COMMON.DATE_SHORT_PATTERN"],month:r["COMMON.DATE_MONTH_YEAR_PATTERN"]},u=c[e.formData.rangeDuration];e.labels=t.times.reduce(function(e,n){return e.concat(moment.unix(n).local().format(u))},[]),e.colors=l.scale.fix(t.times.length),e.updateRange(t.times[0],t.times[t.times.length-1],n),e.options={responsive:!0,maintainAspectRatio:!0,title:{display:!0,text:o},scales:{xAxes:[{stacked:!0}],yAxes:[{id:"y-axis-left",type:"linear",position:"left",stacked:!0}]},legend:{display:!0,onClick:e.onLegendClick},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(n,t){return t.datasets[n.datasetIndex].label+": "+(n.yLabel?s(n.yLabel)+" "+e.currencySymbol:"0")}}}},e.datasetOverride=[{yAxisID:"y-axis-left",type:"bar",label:r["GRAPH.ACCOUNT.UD_LABEL"],backgroundColor:l.rgba.energized(.3),hoverBackgroundColor:l.rgba.energized(.5),borderWidth:1},{yAxisID:"y-axis-left",type:"bar",label:r["GRAPH.ACCOUNT.TX_RECEIVED_LABEL"],backgroundColor:l.rgba.positive(.4),hoverBackgroundColor:l.rgba.positive(.6),borderWidth:1},{yAxisID:"y-axis-left",type:"bar",label:r["GRAPH.ACCOUNT.TX_SENT_LABEL"],backgroundColor:l.rgba.assertive(.4),hoverBackgroundColor:l.rgba.assertive(.6),borderWidth:1},{yAxisID:"y-axis-left",type:"line",label:r["GRAPH.ACCOUNT.BALANCE_LABEL"],fill:"origin",borderColor:l.rgba.calm(.5),borderWidth:2,pointBackgroundColor:l.rgba.calm(.5),pointBorderColor:l.rgba.white(),pointHoverBackgroundColor:l.rgba.calm(1),pointHoverBorderColor:"rgba(0,0,0,0)",pointRadius:3,lineTension:.1}],i||(e.data.splice(0,1),e.datasetOverride.splice(0,1))}})},e.onChartClick=function(n,t,a){if(a){var o=e.times[a._index],r=moment.unix(o).utc().add(1,e.formData.rangeDuration).unix(),s="medianTime:>={0} AND medianTime:<{1}".format(o,r);e.formData.pubkey&&(s+=" AND (transactions.issuers:"+e.formData.pubkey+" OR transactions.outputs:*"+e.formData.pubkey+")"),i.go("app.blockchain_search",{q:s})}}}function GpAccountSumTxController(e,n,t,i,a,o){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.init=function(n,t){e.pubkey=t&&t.stateParams&&t.stateParams.pubkey},e.load=function(n,i){if(e.pubkey){t("formatDecimal");return a.load(e.pubkey,-1).then(function(n){n&&n.tx&&n.tx.history&&(e.inputChart=e.computeChartData(_.filter(n.tx.history,function(e){return e.amount>0})),e.outputChart=e.computeChartData(_.filter(n.tx.history,function(e){return e.amount<0})))})}},e.computeChartData=function(e){var n=t("formatPubkey"),i={};_.forEach(e,function(e){i[e.pubkey]=i[e.pubkey]||{label:e.name||e.uid||n(e.pubkey),pubkey:e.pubkey,sum:0},i[e.pubkey].sum+=Math.abs(e.amount/100)});var a=_.sortBy(_.values(i),"sum").reverse();return{data:_.pluck(a,"sum"),labels:_.pluck(a,"label"),pubkeys:_.pluck(a,"pubkey"),colors:o.scale.custom(Math.max(10,a.length))}},e.onInputChartClick=function(n,t,a){if(a){var o=e.inputChart.pubkeys[a._index];i.go("app.wot_identity",{pubkey:o})}},e.onOutputChartClick=function(n,t,a){if(a){var o=e.outputChart.pubkeys[a._index];i.go("app.wot_identity",{pubkey:o})}}}function GpAccountCertificationController(e,n,t,i,a,o,r,s,l){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.init=function(n,t){t&&t.stateParams&&t.stateParams.pubkey?e.formData.pubkey=t.stateParams.pubkey:l.isLogin()&&(e.formData.pubkey=l.data.pubkey)},e.load=function(n){var i=e.formData;return t.all([o("GRAPH.ACCOUNT.CERTIFICATION_TITLE",i),o(["GRAPH.ACCOUNT.GIVEN_CERT_LABEL","GRAPH.ACCOUNT.RECEIVED_CERT_LABEL","GRAPH.ACCOUNT.GIVEN_CERT_DELTA_LABEL","GRAPH.ACCOUNT.RECEIVED_CERT_DELTA_LABEL","COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.DATE_MONTH_YEAR_PATTERN"]),r.wot.certifications(i)]).then(function(t){var i=t[0],o=t[1];if(t=t[2],t&&t.times){e.times=t.times;var r=a("formatInteger");e.data=[t.deltaReceived,t.received,t.deltaGiven,t.given],e.labels=t.labels;var l={hour:o["COMMON.DATE_PATTERN"],day:o["COMMON.DATE_SHORT_PATTERN"],month:o["COMMON.DATE_MONTH_YEAR_PATTERN"]},c=l[e.formData.rangeDuration];e.labels=t.times.reduce(function(e,n){return e.concat(moment.unix(n).local().format(c))},[]),e.colors=s.scale.fix(t.times.length),e.updateRange(t.times[0],t.times[t.times.length-1],n),e.options={responsive:!0,maintainAspectRatio:!0,title:{display:!0,text:i},scales:{yAxes:[{id:"y-axis-left",type:"linear",position:"left"},{id:"y-axis-hide",type:"linear",display:!1,position:"right"}]},legend:{display:!0},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(e,n){var t=(0===e.datasetIndex||2===e.datasetIndex)&&e.yLabel>0;return n.datasets[e.datasetIndex].label+": "+(t?"+":"")+!e.yLabel?"0":r(e.yLabel)}}}},e.datasetOverride=[{yAxisID:"y-axis-left",type:"bar",label:o["GRAPH.ACCOUNT.RECEIVED_CERT_DELTA_LABEL"],borderColor:s.rgba.positive(.6),borderWidth:1,backgroundColor:s.rgba.positive(.4),hoverBackgroundColor:s.rgba.positive(.6)},{yAxisID:"y-axis-left",type:"line",label:o["GRAPH.ACCOUNT.RECEIVED_CERT_LABEL"],fill:!1,borderColor:s.rgba.positive(.5),borderWidth:2,backgroundColor:s.rgba.positive(1),pointBackgroundColor:s.rgba.positive(.5),pointBorderColor:s.rgba.white(),pointHoverBackgroundColor:s.rgba.positive(1),pointHoverBorderColor:"rgba(0,0,0,0)",pointRadius:3},{yAxisID:"y-axis-left",type:"bar",label:o["GRAPH.ACCOUNT.GIVEN_CERT_DELTA_LABEL"],borderColor:s.rgba.assertive(.6),borderWidth:1,backgroundColor:s.rgba.assertive(.4),hoverBackgroundColor:s.rgba.assertive(.6)},{yAxisID:"y-axis-left",type:"line",label:o["GRAPH.ACCOUNT.GIVEN_CERT_LABEL"],fill:!1,borderColor:s.rgba.assertive(.4),borderWidth:2,backgroundColor:s.rgba.assertive(1),pointBackgroundColor:s.rgba.assertive(.4),pointBorderColor:s.rgba.white(),pointHoverBackgroundColor:s.rgba.assertive(1),pointHoverBorderColor:"rgba(0,0,0,0)",pointRadius:3,lineTension:.1}]}})},e.onChartClick=function(n,t,a){if(a){var o=e.times[a._index],r=moment.unix(o).utc().add(1,e.formData.rangeDuration).unix(),s="_exists_:transactions AND medianTime:>={0} AND medianTime:<{1}".format(o,r);e.formData.pubkey&&(s+=" AND (transactions.issuers:"+e.formData.pubkey+" OR transactions.outputs:*"+e.formData.pubkey+")"),i.go("app.blockchain_search",{q:s})}}}function GpDocStatsController(e,n,t,i,a,o,r,s){"ngInject";angular.extend(this,t("GpCurrencyAbstractCtrl",{$scope:e})),e.hiddenDatasets=[],e.chartIdPrefix="docstats-chart-",e.charts=[{id:"user",title:"GRAPH.DOC_STATS.USER.TITLE",series:[{key:"user_profile",label:"GRAPH.DOC_STATS.USER.USER_PROFILE",color:o.rgba.royal(),pointHoverBackgroundColor:o.rgba.royal(),clickState:{name:"app.document_search",params:{index:"user",type:"profile"}}},{key:"user_settings",label:"GRAPH.DOC_STATS.USER.USER_SETTINGS",color:o.rgba.gray(.5),pointHoverBackgroundColor:o.rgba.gray(),clickState:{name:"app.document_search",params:{index:"user",type:"settings"}}}]},{id:"message",title:"GRAPH.DOC_STATS.MESSAGE.TITLE",series:[{key:"message_inbox",label:"GRAPH.DOC_STATS.MESSAGE.MESSAGE_INBOX",color:o.rgba.royal(),pointHoverBackgroundColor:o.rgba.royal(),clickState:{name:"app.document_search",params:{index:"message",type:"inbox"}}},{key:"message_outbox",label:"GRAPH.DOC_STATS.MESSAGE.MESSAGE_OUTBOX",color:o.rgba.calm(),pointHoverBackgroundColor:o.rgba.calm(),clickState:{name:"app.document_search",params:{index:"message",type:"outbox"}}},{key:"invitation_certification",label:"GRAPH.DOC_STATS.MESSAGE.INVITATION_CERTIFICATION",color:o.rgba.gray(.5),pointHoverBackgroundColor:o.rgba.gray(),clickState:{name:"app.document_search",params:{index:"invitation",type:"certification"}}}]},{id:"social",title:"GRAPH.DOC_STATS.SOCIAL.TITLE",series:[{key:"page_record",label:"GRAPH.DOC_STATS.SOCIAL.PAGE_RECORD",color:o.rgba.royal(),pointHoverBackgroundColor:o.rgba.royal(),clickState:{name:"app.document_search",params:{index:"page",type:"record"}}},{key:"group_record",label:"GRAPH.DOC_STATS.SOCIAL.GROUP_RECORD",color:o.rgba.calm(),pointHoverBackgroundColor:o.rgba.calm(),clickState:{name:"app.document_search",params:{index:"group",type:"record"}}},{key:"page_comment",label:"GRAPH.DOC_STATS.SOCIAL.PAGE_COMMENT",color:o.rgba.gray(.5),pointHoverBackgroundColor:o.rgba.gray(),clickState:{name:"app.document_search",params:{index:"page",type:"comment"}}}]},{id:"other",title:"GRAPH.DOC_STATS.OTHER.TITLE",series:[{key:"history_delete",label:"GRAPH.DOC_STATS.OTHER.HISTORY_DELETE",color:o.rgba.gray(.5),pointHoverBackgroundColor:o.rgba.gray(),clickState:{name:"app.document_search",params:{index:"history",type:"delete"}}}]}];var l=s("formatInteger");e.defaultChartOptions={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0},legend:{display:!0,onClick:e.onLegendClick},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,id:"y-axis"}]},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(e,n){return n.datasets[e.datasetIndex].label+": "+l(e.yLabel)}}}},e.init=function(e,n){n&&n.stateParams},e.load=function(n){return i.all([a(e.charts.reduce(function(e,n){return e.concat(n.series.reduce(function(e,n){return e.concat(n.label)},[n.title]))},["COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.DATE_MONTH_YEAR_PATTERN"])),r.docstat.get(e.formData)]).then(function(t){var i=t[0],a={hour:i["COMMON.DATE_PATTERN"],day:i["COMMON.DATE_SHORT_PATTERN"],month:i["COMMON.DATE_MONTH_YEAR_PATTERN"]};if(t=t[1],t&&t.times){e.times=t.times;var r=a[e.formData.rangeDuration];e.labels=t.times.reduce(function(e,n){return e.concat(moment.unix(n).local().format(r))},[]),e.updateRange(t.times[0],t.times[t.times.length-1],n),e.setScale(e.scale),_.forEach(e.charts,function(n){n.data=[],_.forEach(n.series,function(e){n.data.push(t[e.key]||[])}),n.options=angular.copy(e.defaultChartOptions),n.options.title.text=i[n.title],n.datasetOverride=n.series.reduce(function(e,n){return e.concat({yAxisID:"y-axis",type:n.type||"line",label:i[n.label],fill:!0,borderWidth:2,pointRadius:0,pointHitRadius:4,pointHoverRadius:3,borderColor:n.color,backgroundColor:n.color,pointBackgroundColor:n.color,pointBorderColor:n.color,pointHoverBackgroundColor:n.pointHoverBackgroundColor||n.color,pointHoverBorderColor:n.pointHoverBorderColor||o.rgba.white()})},[])})}})},e.onChartClick=function(t,i,a){if(a){var o=_.find(e.charts,function(n){return e.chartIdPrefix+n.id==a._chart.canvas.id}),r=o.series[a._datasetIndex];if(r&&r.clickState&&r.clickState.name){var s=r.clickState.params?angular.copy(r.clickState.params):{},l=e.times[a._index],c=moment.unix(l).utc().add(1,e.formData.rangeDuration).unix();return s.q="time:>={0} AND time:<{1}".format(l,c),n.go(r.clickState.name,s)}console.debug("Click on item index={0} on range [{1},{2}]".format(a._index,l,c))}}}function GpSynchroController(e,n,t,i,a,o,r){"ngInject";angular.extend(this,n("GpCurrencyAbstractCtrl",{$scope:e})),e.hiddenDatasets=[],e.charts=[{id:"count",title:"GRAPH.SYNCHRO.COUNT.TITLE",series:[{key:"inserts",type:"bar",label:"GRAPH.SYNCHRO.COUNT.INSERTS",color:a.rgba.royal(),pointHoverBackgroundColor:a.rgba.royal()},{key:"updates",type:"bar",label:"GRAPH.SYNCHRO.COUNT.UPDATES",color:a.rgba.calm(),pointHoverBackgroundColor:a.rgba.calm()},{key:"deletes",type:"bar",label:"GRAPH.SYNCHRO.COUNT.DELETES",color:a.rgba.assertive(.5),pointHoverBackgroundColor:a.rgba.assertive()}]},{id:"peer",title:"GRAPH.SYNCHRO.PEER.TITLE",series:[{key:"ES_USER_API",label:"GRAPH.SYNCHRO.PEER.ES_USER_API",color:a.rgba.royal(),pointHoverBackgroundColor:a.rgba.royal()},{key:"ES_SUBSCRIPTION_API",label:"GRAPH.SYNCHRO.PEER.ES_SUBSCRIPTION_API",color:a.rgba.gray(.5),pointHoverBackgroundColor:a.rgba.gray()}]},{id:"performance",title:"GRAPH.SYNCHRO.PERFORMANCE.TITLE",series:[{key:"duration",type:"bar",label:"GRAPH.SYNCHRO.PERFORMANCE.DURATION",color:a.rgba.gray(.5),pointHoverBackgroundColor:a.rgba.gray()}]}];var s=r("formatInteger");e.defaultChartOptions={responsive:!0,maintainAspectRatio:e.maintainAspectRatio,title:{display:!0},legend:{display:!0,onClick:e.onLegendClick},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,id:"y-axis"}]},tooltips:{enabled:!0,mode:"index",callbacks:{label:function(e,n){return n.datasets[e.datasetIndex].label+": "+s(e.yLabel)}}}},e.init=function(e,n){n&&n.stateParams},e.load=function(n){return t.all([i(e.charts.reduce(function(e,n){return e.concat(n.series.reduce(function(e,n){return e.concat(n.label)},[n.title]))},["COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.DATE_MONTH_YEAR_PATTERN"])),o.synchro.execution.get(e.formData)]).then(function(t){var i=t[0],o={hour:i["COMMON.DATE_PATTERN"],day:i["COMMON.DATE_SHORT_PATTERN"],month:i["COMMON.DATE_MONTH_YEAR_PATTERN"]};if(t=t[1],t&&t.times){e.times=t.times;var r=o[e.formData.rangeDuration];e.labels=t.times.reduce(function(e,n){return e.concat(moment.unix(n).local().format(r))},[]),e.updateRange(t.times[0],t.times[t.times.length-1],n),e.setScale(e.scale),_.forEach(e.charts,function(n){n.data=[],_.forEach(n.series,function(e){n.data.push(t[e.key]||[])}),n.options=angular.copy(e.defaultChartOptions),n.options.title.text=i[n.title],n.datasetOverride=n.series.reduce(function(e,n){return e.concat({yAxisID:"y-axis",type:n.type||"line",label:i[n.label],fill:!0,borderWidth:2,pointRadius:0,pointHitRadius:4,pointHoverRadius:3,borderColor:n.color,backgroundColor:n.color,pointBackgroundColor:n.color,pointBorderColor:n.color,pointHoverBackgroundColor:n.pointHoverBackgroundColor||n.color,pointHoverBorderColor:n.pointHoverBorderColor||a.rgba.white()})},[])})}})}}function MapWotViewController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";var E,g={member:{type:"awesomeMarker",icon:"person",markerColor:"blue"},pending:{type:"awesomeMarker",icon:"clock",markerColor:"lightgreen",iconColor:"gray"},wallet:{type:"awesomeMarker",icon:"key",markerColor:"lightgray"}};e.loading=!0,e.mapId="map-wot-"+e.$id,e.map=p.map({cache:"map-wot",layers:{overlays:{member:{type:"featureGroup",name:"MAP.WOT.VIEW.LAYER.MEMBER",visible:!0},pending:{type:"featureGroup",name:"MAP.WOT.VIEW.LAYER.PENDING",visible:!0},wallet:{type:"featureGroup",name:"MAP.WOT.VIEW.LAYER.WALLET",visible:!0}}},bounds:{},markers:{},loading:!0},e.mapId),e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!c.screen.isSmall()||n.enableBack}),e.enter=function(n,t){if(e.loading){if(t.stateParams&&t.stateParams.c){var i=t.stateParams.c.split(":");e.map.center.lat=parseFloat(i[0]),e.map.center.lng=parseFloat(i[1]),e.map.center.zoom=parseInt(i[2])}e.$watch("map.center",function(){if(!e.loading)return a(function(){e.updateLocationHref()},300)},!0),e.loadMap().then(function(){return d.isLogin()&&e.showHelpTip(),e.load()})}else e.updateLocationHref(),d.isLogin()&&e.showHelpTip()},e.$on("$ionicView.enter",e.enter),e.loadMap=function(){return s.all([r(["COMMON.BTN_HELP_TOUR_SCREEN","COMMON.BTN_REFRESH","MAP.COMMON.BTN_LOCALIZE_ME"]),l.getMap(e.mapId)]).then(function(n){var o=n[0],r=n[1];if(!e.map.loading)return r;c.screen.isSmall()||(L.easyButton({position:"topright",type:"replace",leafletClasses:!0,states:[{stateName:"show-help-tour",onClick:e.startHelpTour,title:o["COMMON.BTN_HELP_TOUR_SCREEN"],icon:"icon ion-easel"}]}).addTo(r),L.easyButton({position:"topright",type:"replace",leafletClasses:!0,states:[{stateName:"refresh",onClick:function(n,t){return e.load(t)},title:o["COMMON.BTN_REFRESH"],icon:"icon ion-refresh"}]}).addTo(r)),L.Control.loading({position:"topright",separate:!0}).addTo(r),p.control.localizeMe({title:o["MAP.COMMON.BTN_LOCALIZE_ME"]}).addTo(r),E=L.layerGroup({visible:!1});var s=i(t.get("plugins/map/templates/wot/item_search_tooltip.html"));p.control.search({layer:E,propertyName:"title",buildTip:function(e,n){return s(n.layer.options)},moveToLocation:function(e,n,t){this.options.zoom?this._map.setView(e,this.options.zoom):this._map.panTo(e);var i=e.layer&&e.layer.options&&e.layer.options.popupMarkerId;a(function(){var e=i&&_.find(t._layers,function(e){return e.options&&e.options.id===i});e&&e.openPopup()},400)},firstTipSubmit:!0,tooltipLimit:50}).addTo(r);var l=function(e){return e.options&&e.options.layer},u=L.markerClusterGroup({disableClusteringAtZoom:p.constants.LOCALIZE_ZOOM,maxClusterRadius:65,showCoverageOnHover:!1,iconCreateFunction:function(e){var n=_.countBy(e.getAllChildMarkers(),l),t=n.member?"blue":n.pending?"lightgreen":"lightgray",i=e.getChildCount(),a="marker-cluster "+t+" marker-cluster-";return a+=i<10?"small":i<100?"medium":"large",L.divIcon({html:"<div><span>"+i+"</span></div>",className:a,iconSize:new L.Point(40,40)})}});return r.eachLayer(function(e){e.addLayer&&angular.extend(e,L.featureGroup.subGroup(u))}),u.addTo(r),e.map.loading=!1,r})},e.load=function(i){if(!i)return l.getMap(e.mapId).then(e.load);e.loading=!0,i.fire("dataloading");var a={fields:{description:!c.screen.isSmall()}};return m.load(a).then(function(a){var o={};if(E.clearLayers(),a&&a.length){var r=n("formatPubkey"),s=t.get("plugins/map/templates/wot/popup_marker.html"),l=t.get("plugins/map/templates/wot/popup_page_marker.html");_.forEach(a,function(n){var t=n.pending?"pending":n.uid?"member":"wallet",i=r(n.pubkey),a=n.index+"_"+(n.id||(n.uid?n.uid+":"+n.pubkey:n.pubkey)).replace(/-/g,"_"),c={layer:t,icon:g[t],opacity:n.uid||n.type?1:.7,title:n.name+" | "+i,lat:n.geoPoint.lat,lng:n.geoPoint.lon,getMessageScope:function(){var t=e.$new();return t.hit=n,t},focus:!1,message:n.type?l:s,id:a};o[a]=c;var u=n.name+(n.uid&&n.uid!=n.name?" | "+n.uid:"")+" | "+i,d=angular.merge({type:t,opacity:0,icon:L.divIcon({className:t+" ng-hide",iconSize:L.point(0,0)})},{title:u,pubkey:n.pubkey,uid:n.uid,name:n.name,pending:n.pending,popupMarkerId:a});E.addLayer(new L.Marker({lat:n.geoPoint.lat,lng:n.geoPoint.lon},d))})}e.map.markers=o,e.loading=!1,i.fire("dataload")})["catch"](function(n){e.map.markers={},e.loading=!1,c.onError("MAP.WOT.ERROR.LOAD_POSITION_FAILED")(n)})},e.updateLocationHref=function(n){var t=o.search()||{};t.c&&p.center.isDefault(e.map.center)||(n=n||"{0}:{1}:{2}".format(e.map.center.lat.toFixed(4),e.map.center.lng.toFixed(4),e.map.center.zoom),o.search({c:n}).replace())},e.$on("centerUrlHash",function(n,t){if(!e.loading)return a(function(){e.updateLocationHref(t)},300)}),e.startHelpTour=function(){return e.showHelpTip(0,!0)},e.showHelpTip=function(n,t){if(n=angular.isDefined(n)?n:angular.isNumber(u.data.helptip.mapwot)?u.data.helptip.mapwot:0,t=!!angular.isDefined(t)&&t,!(n<0||n>2)){var i=e.createHelptipScope(t,"MapHelpTipCtrl");
if(i)return i.tour=t,i.mapId=e.mapId,i.startMapWotTour(n,!1).then(function(e){i.$destroy(),u.data.helptip.mapwot=angular.isNumber(u.data.helptip.mapwot)?Math.max(e,u.data.helptip.mapwot):e,u.store()})}}}function MapRegistryViewController(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";var E,g={shop:{type:"awesomeMarker",icon:"page-shop",markerColor:"blue"},company:{type:"awesomeMarker",icon:"page-company",markerColor:"blue"},association:{type:"awesomeMarker",icon:"page-association",markerColor:"lightgreen",iconColor:"gray"},institution:{type:"awesomeMarker",icon:"page-institution",markerColor:"lightgray"}};e.loading=!0,e.mapId="map-wot-"+e.$id,e.map=p.map({cache:"map-registry",layers:{overlays:{shop:{type:"featureGroup",name:"MAP.REGISTRY.VIEW.LAYER.SHOP",visible:!0},company:{type:"featureGroup",name:"MAP.REGISTRY.VIEW.LAYER.COMPANY",visible:!0},association:{type:"featureGroup",name:"MAP.REGISTRY.VIEW.LAYER.ASSOCIATION",visible:!0},institution:{type:"featureGroup",name:"MAP.REGISTRY.VIEW.LAYER.INSTITUTION",visible:!0}}},bounds:{},markers:{},loading:!0},e.mapId),e.$on("$ionicView.beforeEnter",function(e,n){n.enableBack=!!c.screen.isSmall()||n.enableBack}),e.enter=function(n,t){if(e.loading){if(t.stateParams&&t.stateParams.c){var i=t.stateParams.c.split(":");e.map.center.lat=parseFloat(i[0]),e.map.center.lng=parseFloat(i[1]),e.map.center.zoom=parseInt(i[2])}e.$watch("map.center",function(){if(!e.loading)return a(function(){e.updateLocationHref()},300)},!0),e.loadMap().then(function(){return d.isLogin()&&e.showHelpTip(),e.load()})}else e.updateLocationHref(),d.isLogin()&&e.showHelpTip()},e.$on("$ionicView.enter",e.enter),e.loadMap=function(){return s.all([r(["COMMON.BTN_HELP_TOUR_SCREEN","COMMON.BTN_REFRESH","MAP.COMMON.BTN_LOCALIZE_ME"]),l.getMap(e.mapId)]).then(function(n){var o=n[0],r=n[1];if(!e.map.loading)return r;c.screen.isSmall()||L.easyButton({position:"topright",type:"replace",leafletClasses:!0,states:[{stateName:"refresh",onClick:function(n,t){return e.load(t)},title:o["COMMON.BTN_REFRESH"],icon:"icon ion-refresh"}]}).addTo(r),L.Control.loading({position:"topright",separate:!0}).addTo(r),p.control.localizeMe({title:o["MAP.COMMON.BTN_LOCALIZE_ME"]}).addTo(r),E=L.layerGroup({visible:!1});var s=i(t.get("plugins/map/templates/registry/item_search_tooltip.html"));p.control.search({layer:E,propertyName:"title",buildTip:function(e,n){return s(n.layer.options)},moveToLocation:function(e,n,t){this.options.zoom?this._map.setView(e,this.options.zoom):this._map.panTo(e);var i=e.layer&&e.layer.options&&e.layer.options.popupMarkerId;a(function(){var e=i&&_.find(t._layers,function(e){return e.options&&e.options.id===i});e&&e.openPopup()},400)},firstTipSubmit:!0,tooltipLimit:50}).addTo(r);var l=function(e){return e.options&&e.options.layer},u=L.markerClusterGroup({disableClusteringAtZoom:p.constants.LOCALIZE_ZOOM,maxClusterRadius:65,showCoverageOnHover:!1,iconCreateFunction:function(e){var n=_.countBy(e.getAllChildMarkers(),l),t=n.shop||n.company?"blue":n.association?"lightgreen":"lightgray",i=e.getChildCount(),a="marker-cluster "+t+" marker-cluster-";return a+=i<10?"small":i<100?"medium":"large",L.divIcon({html:"<div><span>"+i+"</span></div>",className:a,iconSize:new L.Point(40,40)})}});return r.eachLayer(function(e){e.addLayer&&angular.extend(e,L.featureGroup.subGroup(u))}),u.addTo(r),e.map.loading=!1,r})},e.load=function(i){if(!i)return l.getMap(e.mapId).then(e.load);e.loading=!0,i.fire("dataloading");var a={fields:{description:!c.screen.isSmall()}};return m.load(a).then(function(a){var o={};if(E.clearLayers(),a&&a.length){var r=n("formatPubkey"),s=t.get("plugins/map/templates/wot/popup_marker.html"),l=t.get("plugins/map/templates/wot/popup_page_marker.html");_.forEach(a,function(n){var t=n.type||(n.pending?"pending":n.uid?"member":"wallet"),i=r(n.pubkey),a=n.index+"_"+(n.id||(n.uid?n.uid+":"+n.pubkey:n.pubkey)).replace(/-/g,"_"),c={layer:t,icon:g[t],opacity:n.uid||n.type?1:.7,title:n.name+" | "+i,lat:n.geoPoint.lat,lng:n.geoPoint.lon,getMessageScope:function(){var t=e.$new();return t.hit=n,t},focus:!1,message:n.type?l:s,id:a};o[a]=c;var u=n.name+(n.uid&&n.uid!=n.name?" | "+n.uid:"")+" | "+i,d=angular.merge({type:t,opacity:0,icon:L.divIcon({className:t+" ng-hide",iconSize:L.point(0,0)})},{title:u,pubkey:n.pubkey,uid:n.uid,name:n.name,pending:n.pending,popupMarkerId:a});E.addLayer(new L.Marker({lat:n.geoPoint.lat,lng:n.geoPoint.lon},d))})}e.map.markers=o,e.loading=!1,i.fire("dataload")})["catch"](function(n){e.map.markers={},e.loading=!1,c.onError("MAP.WOT.ERROR.LOAD_POSITION_FAILED")(n)})},e.updateLocationHref=function(n){var t=o.search()||{};t.c&&p.center.isDefault(e.map.center)||(n=n||"{0}:{1}:{2}".format(e.map.center.lat.toFixed(4),e.map.center.lng.toFixed(4),e.map.center.zoom),o.search({c:n}).replace())},e.$on("centerUrlHash",function(n,t){if(!e.loading)return a(function(){e.updateLocationHref(t)},300)}),e.startHelpTour=function(){return e.showHelpTip(0,!0)},e.showHelpTip=function(n,t){if(n=angular.isDefined(n)?n:angular.isNumber(u.data.helptip.mapwot)?u.data.helptip.mapwot:0,t=!!angular.isDefined(t)&&t,!(n<0||n>2)){var i=e.createHelptipScope(t,"MapHelpTipCtrl");if(i)return i.tour=t,i.mapId=e.mapId,i.startMapWotTour(n,!1).then(function(e){i.$destroy(),u.data.helptip.mapwot=angular.isNumber(u.data.helptip.mapwot)?Math.max(e,u.data.helptip.mapwot):e,u.store()})}}}function MapHelpTipController(e,n){angular.extend(this,n("HelpTipCtrl",{$scope:e})),e.mapId=void 0,e.startMapWotTour=function(n,t){var i=[function(){return e.showHelpTip("helptip-map-wot",{bindings:{content:"MAP.HELP.TIP.WOT",icon:{position:"center",glyph:"ion-information-circled"}}})},function(){return e.showHelpTip(null,{selector:"#{0} .leaflet-control-search".format(e.mapId),bindings:{content:"MAP.HELP.TIP.WOT_BTN_SEARCH",icon:{position:"center"}}})},function(){return e.showHelpTip(null,{selector:"#{0} .leaflet-control-layers".format(e.mapId),bindings:{content:"MAP.HELP.TIP.WOT_BTN_LAYERS",icon:{position:"right"},hasNext:t}})}];return e.executeStep("mapwot",i,n)}}angular.module("cesium.settings.services",["ngApi","cesium.config"]).factory("csSettings",["$rootScope","$q","Api","localStorage","$translate","csConfig",function(e,n,t,i,a,o){"ngInject";function r(e){if(!e)return d;if(_.findWhere(u,{id:e}))return e;var n=e.split("-");if(n.length>1)return r(n[0]);var t=_.find(u,function(n){return String.prototype.startsWith.call(n.id,e)});return t?t.id:d}function s(e){var n=r(e);return e!=n&&console.debug("[settings] Fix locale [{0}] -> [{1}]".format(e,n)),n}var l,c,u=[{id:"en",label:"English"},{id:"en-GB",label:"English (UK)"},{id:"fr-FR",label:"Franais"},{id:"nl-NL",label:"Nederlands"},{id:"es-ES",label:"Spanish"}],d=o.fallbackLanguage?r(o.fallbackLanguage):"en",p={STORAGE_KEY:"CESIUM_SETTINGS",KEEP_AUTH_IDLE_SESSION:9999},m=angular.merge({timeout:4e3,cacheTimeMs:6e4,useRelative:!1,timeWarningExpireMembership:5184e3,timeWarningExpire:7776e3,useLocalStorage:!0,walletHistoryTimeSecond:2592e3,walletHistorySliceSecond:432e3,rememberMe:!0,keepAuthIdle:600,showUDHistory:!0,httpsMode:!1,expertMode:!1,decimalCount:4,uiEffects:!0,minVersion:"1.1.0",newIssueUrl:"https://git.duniter.org/clients/cesium/cesium/issues/new",userForumUrl:"https://forum.monnaie-libre.fr",latestReleaseUrl:"https://api.github.com/repos/duniter/cesium/releases/latest",duniterLatestReleaseUrl:"https://api.github.com/repos/duniter/duniter/releases/latest",helptip:{enable:!0,installDocUrl:"https://duniter.org/en/wiki/duniter/install/",currency:0,network:0,wotLookup:0,wot:0,wotCerts:0,wallet:0,walletCerts:0,header:0,settings:0},currency:{allRules:!1,allWotRules:!1},wallet:{showPubkey:!0,alertIfUnusedWallet:!0,notificationReadTime:0},locale:{id:s(o.defaultLanguage||a.use())}},o),E={},g=!1,b=new t(this,"csSettings"),h=function(){return _.keys(E).forEach(function(e){delete E[e]}),I(m),b.data.raisePromise.reset(E).then(v)},f=function(e,n){var t=E;return _.each(e.split("."),function(e){if(t=t[e],angular.isUndefined(t))return void(t=n)}),t},T=function(){var e=l&&!angular.equals(l,E);l=angular.copy(E),e&&b.data.raise.changed(E)},v=function(){if(!g)return console.debug("[setting] Waiting start finished..."),(c||A()).then(v);var e;return e=E.useLocalStorage?E.node.temporary===!0?i.getObject(p.STORAGE_KEY).then(function(e){var n=angular.copy(E);return n.node=e&&e.node||{},delete n.temporary,i.setObject(p.STORAGE_KEY,n)}):i.setObject(p.STORAGE_KEY,E):i.setObject(p.STORAGE_KEY,null),e.then(function(){return E.useLocalStorage&&console.debug("[setting] Saved locally"),b.data.raisePromise.store(E)}).then(T)},I=function(e){var n=!1;e.locale&&e.locale.id&&(e.locale.id=r(e.locale.id),n=!E.locale||e.locale.id!==E.locale.id||e.locale.id!==a.use()),angular.merge(E,e),E.timeWarningExpire=m.timeWarningExpire,E.timeWarningExpireMembership=m.timeWarningExpireMembership,E.cacheTimeMs=m.cacheTimeMs,E.timeout=m.timeout,E.minVersion=m.minVersion,E.latestReleaseUrl=m.latestReleaseUrl,E.duniterLatestReleaseUrl=m.duniterLatestReleaseUrl,E.newIssueUrl=m.newIssueUrl,E.userForumUrl=m.userForumUrl,n&&a.use(r(E.locale.id))},O=function(){var e=(new Date).getTime();return i.getObject(p.STORAGE_KEY).then(function(n){return n?(n.rememberMe||n.login&&n.login.method||(n.rememberMe=!0),I(n),console.debug("[settings] Loaded from local storage in "+((new Date).getTime()-e)+"ms"),void T()):(console.debug("[settings] No settings in local storage. Using defaults."),I(m),void T())})},N=function(){var e=E.locale&&E.locale.id||o.defaultLanguage||"en";return o.license?o.license[e]?o.license[e]:o.license[o.defaultLanguage||"en"]||o.license:void 0},R=function(){var e=a.use();console.debug("[settings] Locale ["+e+"]");try{moment.locale(e.substr(0,2))}catch(n){moment.locale("en"),console.warn("[settings] Unknown local for moment lib. Using default [en]")}try{numeral.language(e.substr(0,2))}catch(n){numeral.language("en"),console.warn("[settings] Unknown local for numeral lib. Using default [en]")}b.locale.raise.changed(e)},C=function(){return g?n.when():c||A()},A=function(){return console.debug("[settings] Starting..."),c=i.ready().then(O).then(function(){console.debug("[settings] Started"),g=!0,c=null,b.data.raise.ready(E)})};return e.$on("$translateChangeSuccess",R),b.registerEvent("data","reset"),b.registerEvent("data","changed"),b.registerEvent("data","store"),b.registerEvent("data","ready"),b.registerEvent("locale","changed"),I(m),{ready:C,start:A,data:E,getByPath:f,reset:h,store:v,restore:O,getLicenseUrl:N,defaultSettings:m,api:b,locales:u,constants:p}}]),angular.module("cesium.network.services",["ngApi","cesium.bma.services","cesium.http.services"]).factory("csNetwork",["$rootScope","$q","$interval","$timeout","$window","csConfig","BMA","csHttp","Api",function(e,n,t,i,a,o,r,s,l){"ngInject";factory=function(e){var s,c={UNKNOWN_BUID:-1},u="https:"===a.location.protocol,d=new l(this,"csNetwork-"+e),p={bma:null,websockets:[],loading:!0,peers:[],filter:{member:!0,mirror:!0,endpointFilter:null,online:!1,ssl:void 0,tor:void 0},sort:{type:null,asc:!0},expertMode:!1,knownBlocks:[],mainBlock:null,uidsByPubkeys:null,searchingPeersOnNetwork:!1,difficulties:null,ws2pHeads:null,timeout:o.timeout},m=function(e){return e&&[e.number,e.hash].join("-")},E=function(){p.bma=null,p.websockets=[],p.peers.splice(0),p.filter={member:!0,mirror:!0,endpointFilter:null,online:!0},p.sort={type:null,asc:!0},p.expertMode=!1,p.memberPeersCount=0,p.knownBlocks=[],p.mainBlock=null,p.uidsByPubkeys={},p.loading=!0,p.searchingPeersOnNetwork=!1,p.difficulties=null,p.ws2pHeads=null,p.timeout=o.timeout},g=function(){return p.peers&&p.peers.length>0},b=function(){return p.peers},h=function(){return p.loading},f=function(){return p.knownBlocks},T=function(){return p.bma.network.ws2p.heads().then(function(e){p.ws2pHeads=e.heads?e.heads.reduce(function(e,n){if(n.message&&n.sig)try{var t=new Ws2pMessage(n.message);e[[t.pubkey,t.ws2pid].join("-")]=t}catch(i){console.error("[network] Ignoring WS2P head.",i&&i.message||i)}return e},{}):{}})["catch"](function(e){return e&&e.ucode==r.errorCodes.HTTP_LIMITATION?i(function(){return T()},3e3):(console.error(e),void(p.ws2pHeads={}))})},v=function(){return p.bma.blockchain.stats.difficulties().then(function(e){p.difficulties=e.levels?e.levels.reduce(function(e,n){return n.uid&&n.level&&(e[n.uid]=n.level),e},{}):{}})["catch"](function(e){return e&&e.ucode==r.errorCodes.HTTP_LIMITATION?i(function(){return v()},3e3):(console.error(e),void(p.difficulties={}))})},I=function(){p.peers=[],p.searchingPeersOnNetwork=!0,p.loading=!0,p.bma=p.bma||r;var e=[];s&&t.cancel(s),s=t(function(){e.length?A(e):p.loading&&!p.searchingPeersOnNetwork&&(p.loading=!1,t.cancel(s),y(!0),console.debug("[network] Finish: {0} peers found.".format(p.peers.length)))},1e3);var i=[p.bma.wot.member.uids().then(function(e){p.uidsByPubkeys=e})["catch"](function(e){p.uidsByPubkeys={}}),T()];return p.expertMode&&i.push(v()),n.all(i).then(function(){return p.filter.online?p.bma.network.peers().then(function(t){var i=[];_.forEach(t.peers,function(n){"UP"==n.status&&(i.push(N(n,e)),_.forEach(n.endpoints||[],function(e){if(e.startsWith("WS2P")){var t=n.pubkey+"-"+e.split(" ")[1];p.ws2pHeads[t]&&(p.ws2pHeads[t].hasEndpoint=!0)}}))});var a=_.values(p.ws2pHeads);if(a&&a.length){var o=0;_.forEach(a,function(n){if(!n.hasEndPoint){var t=new Peer({buid:n.buid,currentNumber:n.buid&&n.buid.split("-")[0],pubkey:n.pubkey,version:n.version,powPrefix:n.powPrefix,online:!0,uid:p.uidsByPubkeys[n.pubkey],bma:{useWs2p:!0,"private":!0,ws2pid:n.ws2pid},endpoints:["WS2P "+n.ws2pid]});t.id=t.keyID(),t.uid&&p.expertMode&&p.difficulties&&(t.difficulty=p.difficulties[t.uid]),O(t)&&(e.push(t),o++)}}),o&&console.debug("[http] Found {0} WS2P endpoints without endpoint (private ?)".format(o))}if(i.length)return n.all(i)})["catch"](function(e){console.error(e)}):p.bma.network.peers().then(function(t){var i=[];if(_.forEach(t.peers,function(n){"UP"!==n.status&&i.push(N(n,e))}),i.length)return n.all(i)})}).then(function(){p.searchingPeersOnNetwork=!1})["catch"](function(e){console.error(e),p.searchingPeersOnNetwork=!1})},O=function(e){return!p.filter||!(p.filter.member&&!p.filter.mirror&&!e.uid||p.filter.mirror&&!p.filter.member&&e.uid)&&(!(p.filter.endpointFilter&&!e.hasEndpoint(p.filter.endpointFilter))&&(!(!p.filter.online&&"UP"==e.status)&&((!angular.isDefined(p.filter.ssl)||e.isSsl()==p.filter.ssl)&&(!angular.isDefined(p.filter.tor)||e.isTor()==p.filter.tor))))},N=function(e,t){t=t||p.newPeers;var i=R(e),a=!1,o=i.reduce(function(e,n){var i=_.findWhere(p.peers,{id:n.id}),o=i?i.buid:null,r=!!i&&i.online;return e.concat(C(n).then(function(e){i?!e||e.online!==p.filter.online&&"all"!==p.filter.online?(console.debug("[network] Peer [{0}] removed (cause: {1})".format(n.server,e?e.online?"UP":"DOWN":"filtered")),p.peers.splice(p.peers.indexOf(i),1),a=!0):e.buid!==o?(console.debug("[network] {0} endpoint [{1}] new current block".format(e.bma.useBma?"BMA":"WS2P",e.server)),a=!0):r!==e.online?(console.debug("[network] {0} endpoint [{1}] is now {2}".format(e.bma.useBma?"BMA":"WS2P",e.server,e.online?"UP":"DOWN")),a=!0):console.debug("[network] {0} endpoint [{1}] unchanged".format(e.bma.useBma?"BMA":"WS2P",e.server)):!e||e.online!==p.filter.online&&"all"!==p.filter.online||(console.debug("[network] {0} endpoint [{1}] is {2}".format(e.bma.useBma?"BMA":"WS2P",e.server,e.online?"UP":"DOWN")),t.push(e),a=!0)}))},[]);return(1===o.length?o[0]:n.all(o)).then(function(){return a})},R=function(e,n){if(!e)return[];var t=new Peer(e);if(!n){var i=t.getEndpoints();if(!i)return[];var a=i.reduce(function(e,n){var t=r.node.parseEndPoint(n);return t?e.concat(t):e},[]);if(a.length>1)return a.reduce(function(n,t){return n.concat(R(e,t))},[]);n=a[0]}return t.bma=n,t.server=t.getServer(),t.dns=t.getDns(),t.blockNumber=t.block.replace(/-.+$/,""),t.uid=p.uidsByPubkeys[t.pubkey],t.id=t.keyID(),[t]},C=function(e){if(!O(e))return n.when();if(!p.filter.online||"all"===p.filter.online&&"DOWN"===e.status||!e.getHost())return e.online=!1,n.when(e);if(e.bma.useWs2p&&p.ws2pHeads){var t=[e.pubkey,e.bma.ws2pid].join("-"),i=p.ws2pHeads[t];return delete p.ws2pHeads[t],i&&(e.buid=i.buid,e.currentNumber=e.buid&&e.buid.split("-")[0],e.version=i.version,e.powPrefix=i.powPrefix),e.online=!!e.buid,e.uid&&p.expertMode&&p.difficulties&&(e.difficulty=p.difficulties[e.uid]),n.when(e)}return e.bma.useWs2p||!u||e.bma.useSsl?e.bma.useTor||e.bma.useWs2p?(e.online="UP"==e.status,e.buid=c.UNKNOWN_BUID,delete e.version,e.uid&&p.expertMode&&p.difficulties&&(e.difficulty=p.difficulties[e.uid]),n.when(e)):(e.api=e.api||r.lightInstance(e.getHost(),e.getPort(),e.isSsl(),p.timeout),e.api.blockchain.current().then(function(n){return e.currentNumber=n.number,e.online=!0,e.buid=m(n),e.medianTime=n.medianTime,p.knownBlocks.indexOf(e.buid)===-1&&p.knownBlocks.push(e.buid),e})["catch"](function(n){if(n&&n.ucode==r.errorCodes.NO_CURRENT_BLOCK)return e.online=!0,e.buid=m({number:0,hash:r.constants.ROOT_BLOCK_HASH}),e.difficulty=0,e;if(!e.secondTry){var t=e.bma||e.getBMA();if(t.dns&&e.server.indexOf(t.dns)==-1)return e.secondTry=!0,e.api=r.lightInstance(t.dns,t.port,t.useSsl),C(e)}return e.online=!1,e.currentNumber=null,e.buid=null,e.uid=p.uidsByPubkeys[e.pubkey],e}).then(function(e){if(!(p.filter.online&&e&&e.online&&p.expertMode))return e;var t=[];return e.uid&&t.push(e.api.blockchain.stats.hardship({pubkey:e.pubkey}).then(function(n){e.difficulty=n?n.level:null})["catch"](function(){e.difficulty=null})),t.push(e.api.node.summary().then(function(n){e.version=n&&n.duniter&&n.duniter.version})["catch"](function(){e.version="?"})),n.all(t).then(function(){return e})})):(e.online="UP"===e.status,e.buid=c.UNKNOWN_BUID,delete e.version,e.uid&&p.expertMode&&p.difficulties&&(e.difficulty=p.difficulties[e.uid]),n.when(e))},A=function(e,n){if(e=e||p.newPeers,e.length){var t=_.map(p.peers,function(e){return e.id}),i=!1,a=0;_.forEach(e.splice(0),function(e){t[e.id]||(p.peers.push(e),t[e.id]=e,i=!0,a++)}),i&&(console.debug("[network] Flushing {0} new peers...".format(a)),y(n))}},S=function(e,n,t){if(!e)return 0;var i=0;e=e.toLowerCase(),n>e.length&&(n=e.length),i+=e.charCodeAt(0);for(var a=1;a<n;a++)i+=Math.pow(.001,a)*e.charCodeAt(a);return t?1e3-i:i},y=function(e){var n={};p.memberPeersCount=0,_.forEach(p.peers,function(e){if(e.buid){var t=n[e.buid];t&&t.medianTime?!t.medianTime&&e.medianTime&&(t.medianTime=e.medianTime):(t={buid:e.buid,count:0,medianTime:e.medianTime},n[e.buid]=t),t.buid!=c.UNKNOWN_BUID&&t.count++}p.memberPeersCount+=e.uid?1:0}),_.forEach(_.values(n),function(e){e.pct=100*e.count/p.peers.length});var t=_.max(n,function(e){return e.count});_.forEach(p.peers,function(e){e.hasMainConsensusBlock=e.buid==t.buid,e.hasConsensusBlock=e.buid&&!e.hasMainConsensusBlock&&n[e.buid].count>1,e.hasConsensusBlock&&(e.consensusBlockDelta=n[e.buid].medianTime-t.medianTime)}),p.peers=_.uniq(p.peers,!1,function(e){return e.id}),p.peers=_.sortBy(p.peers,function(e){var t=0;if(p.sort.type){var i=0;i+="uid"==p.sort.type?S(e.uid||e.pubkey,3,p.sort.asc):0,i+="api"==p.sort.type&&(e.isWs2p()&&(p.sort.asc?1:-1)||0)+(e.hasEndpoint("ES_USER_API")&&(p.sort.asc?.01:-.01)||0)+(e.isSsl()&&(p.sort.asc?.75:-.75)||0)||0,i+="difficulty"==p.sort.type&&e.difficulty?p.sort.asc?1e4-e.difficulty:e.difficulty:0,i+="current_block"==p.sort.type&&e.currentNumber?p.sort.asc?1e9-e.currentNumber:e.currentNumber:0,t+=1e10*i}return t+=1e9*(e.online?1:0),t+=1e8*(e.hasMainConsensusBlock?1:0),t+=1e6*(e.hasConsensusBlock?n[e.buid].pct:0),p.expertMode?(t+=100*(e.difficulty?1e4-e.difficulty:0),t+=1*(e.uid?S(e.uid,2,!0):0)):(t+=100*(e.uid?S(e.uid,2,!0):0),t+=1*(e.uid?0:S(e.pubkey,2,!0))),-t}),!e||!t.buid||p.mainBlock&&p.mainBlock.buid===t.buid||(p.mainBlock=t,d.data.raise.mainBlockChanged(t)),d.data.raise.changed(p)},D=function(){var e=p.bma.websocket.block();p.websockets.push(e),e.on(function(e){if(e&&!p.loading){var n=[e.number,e.hash].join("-");if(p.knownBlocks.indexOf(n)===-1){console.debug("[network] Receiving block: "+n.substring(0,20)),p.knownBlocks.push(n);var t=1===p.knownBlocks.length;t||(p.loading=!0,i(function(){console.debug("[network] new block received by WS: will refresh peers"),I()},2e3,!1))}}});var n=p.bma.websocket.peer();p.websockets.push(n),n.on(function(e){if(e&&!p.loading){var n=[];N(e,n).then(function(e){e&&(n.length>0?A(n,!0):(console.debug("[network] [ws] Peers updated received"),y(!0)))})}})},L=function(e){e=e||{},p.filter=e.filter?angular.merge(p.filter,e.filter):p.filter,p.sort=e.sort?angular.merge(p.sort,e.sort):p.sort,y(!1)},P=function(e,n){return n=n||{},r.ready().then(function(){w(),p.bma=e?e:r,p.filter=n.filter?angular.merge(p.filter,n.filter):p.filter,p.sort=n.sort?angular.merge(p.sort,n.sort):p.sort,p.expertMode=angular.isDefined(n.expertMode)?n.expertMode:p.expertMode,p.timeout=angular.isDefined(n.timeout)?n.timeout:o.timeout,console.info("[network] Starting network from [{0}]".format(e.server));var t=new Date;return D(),I().then(function(e){return console.debug("[network] Started in "+((new Date).getTime()-t.getTime())+"ms"),e})})},w=function(){p.bma&&(console.info("[network] Stopping"),_.forEach(p.websockets,function(e){e.close()}),E())},M=function(){return!p.bma},k=function(e){return M()?n(e):P().then(function(){return n(e)})},U=function(){return k(function(e,n){e(p.mainBuid)})},x=function(){return k(function(e,n){e(p.peers.reduce(function(e,n){return n.hasMainConsensusBlock&&n.uid?e.concat(n):e},[]))})};return d.registerEvent("data","changed"),d.registerEvent("data","mainBlockChanged"),d.registerEvent("data","rollback"),{id:e,data:p,start:P,close:w,hasPeers:g,getPeers:b,sort:L,getTrustedPeers:x,getKnownBlocks:f,getMainBlockUid:U,loadPeers:I,isBusy:h,api:d}};var c=factory("default");return c.instance=factory,c}]),angular.module("cesium.crypto.services",["cesium.utils.services"]).factory("CryptoUtils",["$q","$timeout","ionicReady",function(e,n,t){"ngInject";function i(e){return new RegExp(e)}function a(){this.loaded=!1;var e=this;this.copy=function(n){_.forEach(_.keys(n),function(t){e[t]=n[t]})},this.isLoaded=function(){return this.loaded},this.util=this.util||{},this.util.array_to_string=function(e,n){var t=new Blob([new Uint8Array(e)]),i=new FileReader;i.onload=function(e){n(e.target.result)},i.readAsText(t)}}function o(){this.id="FullJS",this.scrypt=null,this.nacl=null,this.base58=null,this.base64=null;var n=this;this.util=this.util||{},this.util.decode_utf8=function(e){var n,t=unescape(encodeURIComponent(e)),i=new Uint8Array(t.length);for(n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i},this.util.encode_utf8=function(e){return n.nacl.encode_utf8(e)},this.util.encode_base58=function(e){return n.base58.encode(e)},this.util.decode_base58=function(e){var t;e=n.base58.decode(e);var i=new Uint8Array(e.length);for(t=0;t<e.length;t++)i[t]=e[t];return i},this.util.decode_base64=function(e){return n.base64.decode(e)},this.util.encode_base64=function(e){return n.base64.encode(e)},this.util.hash_sha256=function(t){return e(function(e){var i=n.util.decode_utf8(t),a=n.nacl.to_hex(n.nacl.crypto_hash_sha256(i));e(a.toUpperCase())})},this.util.random_nonce=function(){if(n.crypto&&n.crypto.getRandomValues){var t=new Uint8Array(n.constants.crypto_secretbox_NONCEBYTES);return n.crypto.getRandomValues(t),e.when(t)}return e.when(n.nacl.crypto_box_random_nonce())},this.box_keypair_from_sign=function(t){return t.bokSk&&t.boxPk?e.when(t):e.when(n.nacl.crypto_box_keypair_from_sign_sk(t.signSk))},this.box_pk_from_sign=function(t){return e.when(n.nacl.crypto_box_pk_from_sign_pk(t))},this.box_sk_from_sign=function(t){return e.when(n.nacl.crypto_box_sk_from_sign_sk(t))},this.box=function(t,i,a,o){return e(function(e,r){if(!t)return void e(t);var s=n.util.decode_utf8(t);"string"==typeof a&&(a=n.util.decode_base58(a));try{var l=n.nacl.crypto_box(s,i,a,o),c=n.util.encode_base64(l);e(c)}catch(u){r(u)}})},this.box_open=function(t,i,a,o){return e(function(e,r){if(!t)return void e(t);var s=n.util.decode_base64(t);"string"==typeof a&&(a=n.util.decode_base58(a));try{var l=n.nacl.crypto_box_open(s,i,a,o);n.util.array_to_string(l,function(n){e(n)})}catch(c){r(c)}})},this.scryptKeypair=function(t,i,a){return e(function(e,o){var r=n.scrypt.crypto_scrypt(n.util.encode_utf8(i),n.util.encode_utf8(t),a&&a.N||n.constants.SCRYPT_PARAMS.DEFAULT.N,a&&a.r||n.constants.SCRYPT_PARAMS.DEFAULT.r,a&&a.p||n.constants.SCRYPT_PARAMS.DEFAULT.p,n.constants.SEED_LENGTH),s=n.nacl.crypto_sign_seed_keypair(r),l=n.nacl.crypto_box_seed_keypair(r);e({signPk:s.signPk,signSk:s.signSk,boxPk:l.boxPk,boxSk:l.boxSk})})},this.scryptSignPk=function(t,i,a){return e(function(e,o){try{var r=n.scrypt.crypto_scrypt(n.util.encode_utf8(i),n.util.encode_utf8(t),a&&a.N||n.constants.SCRYPT_PARAMS.DEFAULT.N,a&&a.r||n.constants.SCRYPT_PARAMS.DEFAULT.r,a&&a.p||n.constants.SCRYPT_PARAMS.DEFAULT.p,n.constants.SEED_LENGTH),s=n.nacl.crypto_sign_seed_keypair(r);e(s.signPk)}catch(l){o(l)}})},this.verify=function(t,i,a){return e(function(e,o){var r,s=n.util.decode_utf8(t),l=n.util.decode_base64(i),c=n.util.decode_base58(a),u=new Uint8Array(n.constants.crypto_sign_BYTES+s.length);for(r=0;r<n.constants.crypto_sign_BYTES;r++)u[r]=l[r];for(r=0;r<s.length;r++)u[r+n.constants.crypto_sign_BYTES]=s[r];var d=null!==n.nacl.crypto_sign_open(u,c);e(d)})},this.sign=function(t,i){return e(function(e,a){for(var o=n.util.decode_utf8(t),r=i.signSk,s=n.nacl.crypto_sign(o,r),l=new Uint8Array(n.constants.crypto_sign_BYTES),c=0;c<l.length;c++)l[c]=s[c];var u=n.base64.encode(l);e(u)})},this.load=function(){var t=e.defer(),i={},a={};"a"!=ionic.Platform.grade.toLowerCase()&&(console.info("Reduce NaCl memory because plateform grade is not [a] but ["+ionic.Platform.grade+"]"),i.requested_total_memory=16777216);var o=0,r=function(){o++,4===o&&(n.loaded=!0,t.resolve())};return this.async_load_nacl_js(function(e){n.nacl=e,r()},i),this.async_load_scrypt(function(e){n.scrypt=e,r()},a),this.async_load_base58(function(e){n.base58=e,r()}),this.async_load_base64(function(e){n.base64=e,r()}),t.promise},this.util.hash=n.util.hash_sha256,this.box={keypair:{fromSignKeypair:n.box_keypair_from_sign,skFromSignSk:n.box_sk_from_sign,pkFromSignPk:n.box_pk_from_sign},pack:n.box,open:n.box_open}}function r(){this.id="MiniSodium",this.nacl=null,this.base58=null,this.sha256=null;var n=this;this.util=this.util||{},this.util.decode_utf8=function(e){return n.nacl.to_string(e)},this.util.encode_utf8=function(e){return n.nacl.from_string(e)},this.util.encode_base58=function(e){return n.base58.encode(e)},this.util.decode_base58=function(e){var t;e=n.base58.decode(e);var i=new Uint8Array(e.length);for(t=0;t<e.length;t++)i[t]=e[t];return i},this.util.decode_base64=function(e){return n.nacl.from_base64(e)},this.util.encode_base64=function(e){return n.nacl.to_base64(e)},this.util.hash_sha256=function(t){return e.when(n.sha256(t).toUpperCase())},this.util.random_nonce=function(){var t=new Uint8Array(n.constants.crypto_secretbox_NONCEBYTES);return n.crypto.getRandomValues(t),e.when(t)},this.scryptKeypair=function(t,i,a){var o=e.defer();return n.nacl.crypto_pwhash_scryptsalsa208sha256_ll(n.nacl.from_string(i),n.nacl.from_string(t),a&&a.N||n.constants.SCRYPT_PARAMS.DEFAULT.N,a&&a.r||n.constants.SCRYPT_PARAMS.DEFAULT.r,a&&a.p||n.constants.SCRYPT_PARAMS.DEFAULT.p,n.constants.SEED_LENGTH,function(e,t){return e?void o.reject(e):void n.nacl.crypto_sign_seed_keypair(t,function(e,t){if(e)return void o.reject(e);var i={signPk:t.pk,signSk:t.sk};n.box_keypair_from_sign(i).then(function(e){i.boxPk=e.pk,i.boxSk=e.sk,o.resolve(i)})["catch"](function(e){o.reject(e)})})}),o.promise},this.scryptSignPk=function(t,i,a){var o=e.defer();return n.nacl.crypto_pwhash_scryptsalsa208sha256_ll(n.nacl.from_string(i),n.nacl.from_string(t),a&&a.N||n.constants.SCRYPT_PARAMS.DEFAULT.N,a&&a.r||n.constants.SCRYPT_PARAMS.DEFAULT.r,a&&a.p||n.constants.SCRYPT_PARAMS.DEFAULT.p,n.constants.SEED_LENGTH,function(e,t){return e?void o.reject(e):void n.nacl.crypto_sign_seed_keypair(t,function(e,n){return e?void o.reject(e):void o.resolve(n.pk)})}),o.promise},this.verify=function(t,i,a){var o=e.defer();return n.nacl.crypto_sign_verify_detached(n.nacl.from_base64(i),n.nacl.from_string(t),n.nacl.from_base64(a),function(e,n){return e?void o.reject(e):void o.resolve(n)}),o.promise},this.sign=function(t,i){var a=e.defer();return n.nacl.crypto_sign(n.nacl.from_string(t),i.signSk,function(e,t){if(e)return void a.reject(e);var i;if(t.length>n.constants.crypto_sign_BYTES){i=new Uint8Array(n.constants.crypto_sign_BYTES);for(var o=0;o<i.length;o++)i[o]=t[o]}else i=t;var r=n.nacl.to_base64(i);a.resolve(r)}),a.promise},this.box_keypair_from_sign=function(t){if(t.bokSk&&t.boxPk)return e.when(t);var i=e.defer(),a={};return n.nacl.crypto_sign_ed25519_pk_to_curve25519(t.signPk,function(e,n){return e?void i.reject(e):(a.boxPk=n,void(a.boxSk&&i.resolve(a)))}),n.nacl.crypto_sign_ed25519_sk_to_curve25519(t.signSk,function(e,n){return e?void i.reject(e):(a.boxSk=n,void(a.boxPk&&i.resolve(a)))}),i.promise},this.box_pk_from_sign=function(t){var i=e.defer();return n.nacl.crypto_sign_ed25519_pk_to_curve25519(t,function(e,n){return e?void i.reject(e):void i.resolve(n)}),i.promise},this.box_sk_from_sign=function(t){var i=e.defer();return n.nacl.crypto_sign_ed25519_sk_to_curve25519(t,function(e,n){return e?void i.reject(e):void i.resolve(n)}),i.promise},this.box=function(t,i,a,o){if(!t)return e.reject("No message");var r=e.defer(),s=n.nacl.from_string(t);return"string"==typeof a&&(a=n.util.decode_base58(a)),n.nacl.crypto_box_easy(s,i,a,o,function(e,t){if(e)return void r.reject(e);var i=n.util.encode_base64(t);r.resolve(i)}),r.promise},this.box_open=function(t,i,a,o){if(!t)return e.reject("No cypherText");var r=e.defer(),s=n.nacl.from_base64(t);return"string"==typeof a&&(a=n.util.decode_base58(a)),s.length<n.constants.crypto_box_MACBYTES?void r.reject("Invalid cypher content length"):(n.nacl.crypto_box_open_easy(s,i,a,o,function(e,t){return e?void r.reject(e):void n.util.array_to_string(t,function(e){r.resolve(e)})}),r.promise)},this.load=function(){var t=e.defer();if(window.plugins&&window.plugins.MiniSodium){n.nacl=window.plugins.MiniSodium;var i=0,a=function(){i++,2==i&&(n.loaded=!0,t.resolve())};n.async_load_base58(function(e){n.base58=e,a()}),n.async_load_sha256(function(e){n.sha256=e,a()})}else t.reject("Cordova plugin 'MiniSodium' not found. Please load Full JS implementation instead.");return t.promise},this.util.hash=n.util.hash_sha256,this.box={keypair:{fromSignKeypair:n.box_keypair_from_sign,skFromSignSk:n.box_sk_from_sign,pkFromSignPk:n.box_pk_from_sign},pack:n.box,open:n.box_open}}a.prototype.constants={crypto_sign_BYTES:64,crypto_secretbox_NONCEBYTES:24,crypto_box_MACBYTES:16,SEED_LENGTH:32,SCRYPT_PARAMS:{SIMPLE:{N:2048,r:8,p:1,memory:-1},DEFAULT:{N:4096,r:16,p:1,memory:-1},SECURE:{N:16384,r:32,p:2,memory:-1},HARDEST:{N:65536,r:32,p:4,memory:-1},EXTREME:{N:262144,r:64,p:8,memory:-1}},REGEXP:{PUBKEY:"[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44}",SECKEY:"[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{86,88}",FILE:{TYPE_LINE:"^Type: ([a-zA-Z0-9]+)\n",PUB:"\npub: ([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44})\n",SEC:"\nsec: ([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{86,88})\n?$"}}},a.prototype.regexp={FILE:{TYPE_LINE:i(a.prototype.constants.REGEXP.FILE.TYPE_LINE),PUB:i(a.prototype.constants.REGEXP.FILE.PUB),SEC:i(a.prototype.constants.REGEXP.FILE.SEC)}},a.prototype.async_load_base58=function(e){var t=this;return null!==Base58?e(Base58):void n(function(){t.async_load_base58(e)},100)},a.prototype.async_load_scrypt=function(e,t){var i=this;null!==scrypt_module_factory?(e(scrypt_module_factory(t.requested_total_memory)),i.scrypt.requested_total_memory=t.requested_total_memory):n(function(){i.async_load_scrypt(e,t)},100)},a.prototype.async_load_nacl_js=function(e,t){var i=this;null!==nacl_factory?nacl_factory.instantiate(e,t):n(function(){i.async_load_nacl_js(e,t)},100)},a.prototype.async_load_base64=function(e){var n=this;null!==Base64?e(Base64):$timetout(function(){
n.async_load_base64(e)},100)},a.prototype.async_load_sha256=function(e){var t=this;return null!==sha256?e(sha256):void n(function(){t.async_load_sha256(e)},100)},a.prototype.readKeyFile=function(n,t){var i=this;return n&&n.content?i.parseKeyFileContent(n.content,t):e(function(e,a){if(!n)return a("Argument [file] is missing");console.debug("[crypto] [keypair] reading file: ",n);var o=new FileReader;o.onload=function(n){i.parseKeyFileContent(n.target.result,t).then(function(n){e(n)})["catch"](function(e){a(e)})},o.readAsText(n,"utf8")})},a.prototype.parseKeyFileContent=function(n,t,i){var a=this;return e(function(e,o){if(!n)return o("Argument [content] is missing");var r=a.regexp.FILE.TYPE_LINE.exec(n);if(!r)return e(a.parseKeyFileContent("Type: PubSec\n"+n,t,!0));var s=r[1];if("PubSec"==s){var l=a.regexp.FILE.PUB.exec(n);if(!l)return o("Missing [pub] field in file, or invalid public key value");if(!t)return e({signPk:a.base58.decode(l[1])});var c=a.regexp.FILE.SEC.exec(n);return c?e({signPk:a.base58.decode(l[1]),signSk:a.base58.decode(c[1])}):o("Missing [sec] field in file, or invalid secret key value")}return o(i?"Bad file format: missing Type field":"Bad file format, unknown type ["+s+"]")})};var s=window.crypto||window.msCrypto||window.Crypto;s&&s.getRandomValues&&(a.prototype.crypto=s,a.prototype.util={},a.prototype.util.random_nonce=function(){var n=new Uint8Array(crypto_secretbox_NONCEBYTES);return this.crypto.getRandomValues(n),e.when(n)}),o.prototype=new a,r.prototype=new a;var l=new a,c=!0;return c=!1,t().then(function(){console.debug("[crypto] Starting...");var e,n=(new Date).getTime();c&&window.plugins&&window.plugins.MiniSodium&&s&&s.getRandomValues?(console.debug("[crypto] Loading Cordova MiniSodium implementation..."),e=new r):(console.debug("[crypto] Loading FullJS implementation..."),e=new o),e.load()["catch"](function(e){throw console.error(e),e}).then(function(){l.copy(e),console.debug("[crypto] Loaded '{0}' implementation in {1}ms".format(l.id,(new Date).getTime()-n))})}),l}]),angular.module("cesium.utils.services",[]).factory("ionicReady",["$ionicPlatform",function(e){"ngInject";var n;return function(){return n||(n=e.ready()),n}}]).factory("UIUtils",["$ionicLoading","$ionicPopup","$ionicConfig","$translate","$q","ionicMaterialInk","ionicMaterialMotion","$window","$timeout","$ionicPopover","$state","$rootScope","screenmatch","csSettings",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";function E(e,t){return e?a(function(a){i([e,t,"ERROR.POPUP_TITLE","ERROR.UNKNOWN_ERROR","COMMON.BTN_OK"]).then(function(i){var o=e.message||i[e];return n.show({template:"<p>"+(o||i["ERROR.UNKNOWN_ERROR"])+"</p>",title:i["ERROR.POPUP_TITLE"],subTitle:i[t],buttons:[{text:"<b>"+i["COMMON.BTN_OK"]+"</b>",type:"button-assertive",onTap:function(e){a(e)}}]})})}):a.when()}function g(e,t){return a(function(a){i([e,t,"INFO.POPUP_TITLE","COMMON.BTN_OK"]).then(function(i){n.show({template:"<p>"+i[e]+"</p>",title:i["INFO.POPUP_TITLE"],subTitle:i[t],buttons:[{text:i["COMMON.BTN_OK"],type:"button-positive",onTap:function(e){a(e)}}]})})})}function b(){return g("INFO.FEATURES_NOT_IMPLEMENTED")}function h(e,t,a){return t=t||"CONFIRM.POPUP_TITLE",a=a||{},a.cssClass=a.cssClass||"confirm",a.okText=a.okText||"COMMON.BTN_OK",a.cancelText=a.cancelText||"COMMON.BTN_CANCEL",i([e,t,a.cancelText,a.okText]).then(function(i){return n.confirm({template:i[e],cssClass:a.cssClass,title:i[t],cancelText:i[a.cancelText],cancelType:a.cancelType,okText:i[a.okText],okType:a.okType})})}function f(n){return n?l(function(){return e.hide()},n):e.hide()}function T(n){return V?(n=n||{},n.template=n.template||V,e.show(n)):i("COMMON.LOADING").then(function(e){return V=e,T(n)})}function v(n,t,a){return t=t||"short",a=a||"bottom",i([n]).then(function(i){return"string"==typeof t&&(t="short"==t?2e3:5e3),e.show({template:i[n],noBackdrop:!0,duration:t})})}function I(e,n){return function(t){var i,a=e;return t&&t.message?(a=t.message,i=e):e||(a=t),n?void n(a):"CANCELLED"==a?f(10):(f(10),E(a,i))}}function O(){return Y.smallscreen.active}function N(e){if(e.value||"text"==e.type||"textarea"==e.type)s.getSelection&&!s.getSelection().toString()&&e.setSelectionRange(0,e.value.length);else if(e.childNodes&&e.childNodes.length>0)N(e.childNodes[0]);else{var n=s.document.createRange();n.selectNodeContents(e);var t=s.getSelection();t.removeAllRanges(),t.addRange(n)}}function R(){var e="";return window.getSelection&&(e=s.getSelection().toString()),e}function C(e,n,t){return function(n){var i=n.target.width,a=n.target.height,o=t?W.THUMB_MAX_WIDTH:W.MAX_WIDTH,r=t?W.THUMB_MAX_HEIGHT:W.MAX_HEIGHT;i>a?i>o&&(a*=o/i,i=o):a>r&&(i*=r/a,a=r);var s=document.createElement("canvas");s.width=i,s.height=a;var l=s.getContext("2d");l.drawImage(n.target,0,0,s.width,s.height);var c=s.toDataURL();s.remove(),e(c)}}function A(e,n){var t=document.createElement("img");return a(function(i,a){if(e){var o=new FileReader;o.onload=function(e){t.onload=C(i,a,n),t.src=e.target.result},o.readAsDataURL(e)}else a("no file to resize")}).then(function(e){return t.remove(),e})}function S(e,n){var t=document.createElement("img");return a(function(i,a){t.onload=C(i,a,n),t.src=e}).then(function(e){return t.remove(),e})}function y(e,n){var t=Math.PI/180,i=90*t;return function(n){var t=n.target.width,a=n.target.height,o=W.MAX_WIDTH,r=W.MAX_HEIGHT;t>a?t>o&&(a*=o/t,t=o):a>r&&(t*=r/a,a=r);var s=document.createElement("canvas");s.width=a,s.height=t;var l=s.getContext("2d");l.rotate(i),l.drawImage(n.target,0,-1*s.width);var c=s.toDataURL();s.remove(),e(c)}}function D(e,n){var t=document.createElement("img");return a(function(i,a){t.onload=y(i,a,n),t.src=e}).then(function(e){return t.remove(),e})}function L(e,n){var t=a.defer();n=n||{},n.templateUrl=n.templateUrl?n.templateUrl:"templates/common/popover_copy.html",n.scope=n.scope||d,n.scope.popovers=n.scope.popovers||{},n.autoselect=n.autoselect||!1,n.bindings=n.bindings||{},n.autoremove=!angular.isDefined(n.autoremove)||n.autoremove,n.backdropClickToClose=!angular.isDefined(n.backdropClickToClose)||n.backdropClickToClose,n.focusFirstInput=!!angular.isDefined(n.focusFirstInput)&&n.focusFirstInput;var i=function(i){i=i||n.scope.popovers[n.templateUrl],i.isResolved=!1,i.deferred=t,i.options=n,angular.merge(i.scope,n.bindings),l(function(){i.show(e).then(function(){var e;n.autoselect?(e=document.querySelectorAll(n.autoselect)[0],e&&(s.getSelection&&!s.getSelection().toString()?(e.setSelectionRange(0,e.value.length),e.focus()):e.focus())):n.autofocus&&(e=document.querySelectorAll(n.autofocus)[0],e&&e.focus()),i.scope.$parent.$emit("popover.shown"),n.afterShow&&n.afterShow(i)})})},o=function(e){e=e||n.scope.popovers[n.templateUrl],e&&(delete n.scope.popovers[n.templateUrl],e.remove().then(function(){var e=angular.element(s.document.querySelectorAll("body")[0]);e.removeClass("popover-open")}))},r=n.scope.popovers[n.templateUrl];return r?i(r):c.fromTemplateUrl(n.templateUrl,{scope:n.scope,backdropClickToClose:n.backdropClickToClose}).then(function(e){e.isResolved=!1,e.scope.closePopover=function(n){var t=e.options.autoremove;delete e.options.autoremove,e.hide().then(function(){if(t)return o(e)}).then(function(){e.deferred&&e.deferred.resolve(n),delete e.deferred,delete e.options})},e.scope.$on("popover.hidden",function(){e.options&&e.options.afterHidden&&e.options.afterHidden(),e.options&&e.options.autoremove&&o(e)}),n.scope.$on("$remove",function(){e.deferred&&e.deferred.resolve(),o()}),n.scope.popovers[n.templateUrl]=e,i(e)}),t.promise}function P(e,n){var t=n&&n.indexOf("\n")>=0?n.split("\n").length:1;return L(e,{templateUrl:"templates/common/popover_copy.html",bindings:{value:n,rows:t},autoselect:".popover-copy "+(t<=1?"input":"textarea")})}function w(e,n){return n=n||{},n.templateUrl=n.templateUrl?n.templateUrl:"templates/common/popover_share.html",n.autoselect=n.autoselect||".popover-share input",n.bindings=n.bindings||{},n.bindings.value=n.bindings.value||n.bindings.url||u.href(u.current,u.params,{absolute:!0}),n.bindings.postUrl=n.bindings.postUrl||n.bindings.value,n.bindings.postMessage=n.bindings.postMessage||"",n.bindings.titleKey=n.bindings.titleKey||"COMMON.POPOVER_SHARE.TITLE",L(e,n)}function M(e,n){var t="string"==typeof e&&e?s.document.getElementById(e):e;e||t||!n.selector||(t=s.document.querySelector(n.selector)),n=n||{};var i=n.deferred||a.defer();if(t&&!n.timeout)n.preAction&&t[n.preAction](),n.templateUrl=n.templateUrl?n.templateUrl:"templates/common/popover_helptip.html",n.autofocus=n.autofocus||"#helptip-btn-ok",n.bindings=n.bindings||{},n.bindings.icon=n.bindings.icon||{},n.bindings.icon.position=n.bindings.icon.position||!1,n.bindings.icon.glyph=n.bindings.icon.glyph||(n.bindings.icon.position&&n.bindings.icon.position.startsWith("bottom-")?"ion-arrow-down-c":"ion-arrow-up-c"),n.bindings.icon["class"]=n.bindings.icon["class"]||"calm icon "+n.bindings.icon.glyph,n.bindings.tour=!!angular.isDefined(n.bindings.tour)&&n.bindings.tour,L(t,n).then(function(e){n.postAction&&t[n.postAction](),i.resolve(e)})["catch"](function(e){n.postAction&&t[n.postAction](),i.reject(e)});else if(n.timeout){var o=n.timeout;n.retryTimeout=n.retryTimeout||o,delete n.timeout,n.deferred=i,l(function(){M(e,n)},o)}else angular.isDefined(n.retry)&&!n.retry?l("continue"===n.onError?function(){i.resolve(!0)}:function(){i.reject("[helptip] element now found: "+e)}):(n.retry=angular.isUndefined(n.retry)?2:n.retry-1,n.deferred=i,l(function(){M(e,n)},n.timeout||n.retryTimeout||100));return i.promise}function k(e,n){n||(n=900),l(function(){var n=document.getElementsByClassName("button-fab");_.forEach(n,function(n){n.id==e&&n.classList.toggle("on",!0)})},n)}function U(e,n){n||(n=10),l(function(){var n=document.getElementsByClassName("button-fab");_.forEach(n,function(n){n.id==e&&n.classList.toggle("on",!1)})},n)}function x(e,n){var t=O()?100:10,i=".list.{0} .item, .list .{0} .item".format(n,n);return{ionListClass:n,show:function(n){return n=n||{},n.selector=n.selector||i,n.ink=!angular.isDefined(n.ink)||n.ink,n.startVelocity=n.startVelocity||(O()?1100:3e3),l(function(){n.ink&&G.ink(),e(n)},n.timeout||t)}}}function B(e){if(G.motion.enable!==e)if(console.debug("[UI] [effects] "+(e?"Enable":"Disable")),e)t.views.transition("platform"),G.motion=$.motion;else{t.views.transition("none");var n={"class":void 0,show:function(){}};G.motion={enable:!1,"default":n,fadeSlideIn:n,fadeSlideInRight:n,panInLeft:n,pushDown:n,ripple:n,slideUp:n,fadeIn:n,toggleOn:H,toggleOff:F}}}function H(e,n){"string"==typeof e&&(e={selector:e});var t="undefined"==typeof e.selector||""===e.selector;return t?(console.error("invalid toggleOn selector"),!1):void l(function(){var n=document.querySelectorAll(e.selector);n&&_.forEach(n,function(e){e.classList.toggle("on",!0)})},n||100)}function F(e,n){"string"==typeof e&&(e={selector:e});var t="undefined"==typeof e.selector||""===e.selector;return t?(console.error("invalid toggleOff selector"),!1):void l(function(){var n=document.querySelectorAll(e.selector);n&&_.forEach(n,function(e){e.classList.toggle("on",!1)})},n||900)}var G,V=null,W={MAX_HEIGHT:400,MAX_WIDTH:400,THUMB_MAX_HEIGHT:100,THUMB_MAX_WIDTH:100},Y={smallscreen:p.bind("xs, sm",d)},$={};return $.motion={enable:!0,"default":x(r.ripple,"animate-ripple"),blinds:x(r.blinds,"animate-blinds"),fadeSlideIn:x(r.fadeSlideIn,"animate-fade-slide-in"),fadeSlideInRight:x(r.fadeSlideInRight,"animate-fade-slide-in-right"),panInLeft:x(r.panInLeft,"animate-pan-in-left"),pushDown:x(r.pushDown,"push-down"),ripple:x(r.ripple,"animate-ripple"),slideUp:x(r.slideUp,"slide-up"),fadeIn:x(function(e){H(e)},"fade-in"),toggleOn:H,toggleOff:F},m.api.data.on.changed(d,function(e){B(e.uiEffects)}),G={alert:{error:E,info:g,confirm:h,notImplemented:b},loading:{show:T,hide:f},toast:{show:v},onError:I,screen:{isSmall:O},ink:o.displayEffect,motion:$.motion,setEffects:B,fab:{show:k,hide:U},popover:{show:L,copy:P,share:w,helptip:M},selection:{select:N,get:R},image:{resizeFile:A,resizeSrc:S,rotateSrc:D},raw:$}}]).factory("$focus",["$timeout","$window",function(e,n){"ngInject";return function(t){e(function(){var e=n.document.getElementById(t);e&&e.focus()})}}]),angular.module("cesium.cache.services",["angular-cache"]).factory("csCache",["$http","csSettings","CacheFactory",function(e,n,t){"ngInject";function i(e,n,i){e=e||"csCache-",n=n||r.SHORT;var a=e+n;if(i){for(var o=1;t.get(a+o);)o++;return a+=o,s[a]||(s[a]=!0),t.createCache(a,{maxAge:n,deleteOnExpire:"aggressive",recycleFreq:n,onExpire:i,storageMode:"memory"})}return s[a]||(s[a]=!0),t.get(a)||t.createCache(a,{maxAge:n,deleteOnExpire:"aggressive",recycleFreq:Math.max(n-1e3,3e5),storageMode:"memory"})}function a(){console.debug("[cache] cleaning all caches"),_.forEach(_.keys(s),function(e){var n=t.get(e);n&&n.removeAll()})}function o(e){_.forEach(_.keys(s),function(n){if(n.startsWith(e)){var i=t.get(s);i&&i.removeAll()}})}var r={LONG:36e5,SHORT:n.defaultSettings.cacheTimeMs},s=[];return{get:i,clear:o,clearAll:a,constants:{LONG:r.LONG,SHORT:r.SHORT}}}]),angular.module("cesium.modal.services",[]).controller("EmptyModalCtrl",function(){"ngInject"}).controller("AboutModalCtrl",["$scope","UIUtils","csHttp",function(e,n,t){"ngInject";e.openLink=function(e,i,a){return a=a||{},a.onError=function(){return n.popover.copy(e,i)},t.uri.open(i,a)}}]).factory("ModalUtils",["$ionicModal","$rootScope","$q","$injector","$controller","$timeout",function(e,n,t,i,a,o){"ngInject";function r(e){var n={isControllerAs:!1,controllerName:"",propName:""},t=(e||"").trim().split(/\s+/);return n.isControllerAs=3===t.length&&"as"===(t[1]||"").toLowerCase(),n.isControllerAs?(n.controllerName=t[0],n.propName=t[2]):n.controllerName=e,n}function s(e,n,i){e.deferred=n||t.defer(),e.resolved=!1,e.openModal=function(){return e.modal.show()},e.hideModal=function(){return e.modal.hide()},e.closeModal=function(n){return e.resolved=!0,e.modal.remove().then(function(){return e.deferred.resolve(n),n})},e.setForm=function(n,t){t?e[t]=n:e.form=n},e.getParameters=function(){return i},e.$on("modal.hidden",function(){e.resolved||(e.resolved=!0,o(function(){return e.deferred.resolve(),e.modal.remove()},(e.modal.hideDelay||320)+20))})}function l(i,o,l,c){var u=t.defer();if(c=c?c:{},c.animation=c.animation||"slide-in-up",o){c.scope=c.scope?c.scope.$new():n.$new(),s.call({},c.scope,u,l);var d={$scope:c.scope,parameters:l},p=r(o),m=a(o,d);p.isControllerAs&&(m.openModal=c.scope.openModal,m.closeModal=c.scope.closeModal)}return e.fromTemplateUrl(i,c).then(function(e){if(o)e.scope.$parent.modal=e;else{var n=e.scope;s.call({},n,u,l),n.modal=e}return e.show()},function(e){u.reject(e)}),u.promise}return{show:l}}]).factory("Modals",["$rootScope","ModalUtils","UIUtils",function(e,n,t){"ngInject";function i(e){var i=t.screen.isSmall();return n.show("templates/wallet/modal_transfer.html","TransferModalCtrl",e,{focusFirstInput:!i})}function a(e){return n.show("templates/login/modal_login.html","LoginModalCtrl",e,{focusFirstInput:!0})}function o(e){return n.show("templates/login/modal_advanced_login.html","LoginModalCtrl",e,{focusFirstInput:!0})}function r(e){return n.show("templates/wot/modal_lookup.html","WotLookupModalCtrl",e||{},{focusFirstInput:!0})}function s(e){return n.show("templates/network/modal_network.html","NetworkLookupModalCtrl",e,{focusFirstInput:!0})}function l(e){return n.show("templates/modal_about.html","AboutModalCtrl",e)}function c(e){return n.show("templates/wallet/modal_security.html","WalletSecurityModalCtrl",e)}function u(e){return n.show("templates/join/modal_choose_account_type.html","JoinChooseAccountTypeModalCtrl",e).then(function(e){if(e)return"member"==e.accountType?d(e):p(e)})}function d(e){return n.show("templates/join/modal_join_member.html","JoinModalCtrl",e)}function p(e){return n.show("templates/join/modal_join_wallet.html","JoinModalCtrl",e)}function m(e){return n.show("templates/help/modal_help.html","HelpModalCtrl",e)}function E(e){return n.show("templates/currency/modal_license.html","CurrencyLicenseModalCtrl",e)}function g(e){return n.show("templates/wot/modal_select_pubkey_identity.html","WotSelectPubkeyIdentityModalCtrl",e)}return{showTransfer:i,showLogin:a,showAdvancedLogin:o,showWotLookup:r,showNetworkLookup:s,showAbout:l,showJoin:u,showJoinMember:d,showJoinWallet:p,showHelp:m,showAccountSecurity:c,showLicense:E,showSelectPubkeyIdentity:g}}]),angular.module("cesium.http.services",["cesium.cache.services"]).factory("csHttp",["$http","$q","$timeout","$window","csSettings","csCache","Device",function(e,n,t,i,a,o,r){"ngInject";function s(e,n){return e?e+(n&&80!=n&&443!=n?":"+n:""):null}function l(e,n,t,i){var a=443==n||i?"https":"http";return a+"://"+s(e,n)+(t?t:"")}function c(e,n,t,i){var a=443==n||i?"wss":"ws";return a+"://"+s(e,n)+(t?t:"")}function u(e,n,t,i){e(n&&n.message?n:404==i?{ucode:404,message:"Resource not found"+(t?" ("+t+")":"")}:t?"Error while requesting ["+t+"]":"Unknown error from node")}function d(e,n,t,i){var a=[],o={},r=e;return"object"==typeof n&&(a=_.keys(n)),_.forEach(a,function(e){var t=r;r=r.replace(":"+e,n[e]),t==r&&(o[e]=n[e])}),t.params=o,i(r,t)}function p(t,i,a,o,r){if(!t)return n.reject("[http] invalid URL from host: "+t);var s=l(t,i,a,o);return function(t){return n(function(n,i){var a={timeout:r||N,responseType:"json"};d(s,t,a,function(t,a){e.get(t,a).success(function(e,t,i,a){n(e)}).error(function(e,n,a,o){u(i,e,t,n)})})})}}function m(t,i,a,r,s,c,p){var m=l(t,i,a,r);return s=s||o.constants.LONG,function(t){return n(function(n,i){var a={timeout:p||N,responseType:"json"};c?a.cache=o.get(C,s,function(n,t){console.debug("[http] Refreshing cache for ["+n+"] "),e.get(n,a).success(function(e){a.cache.put(n,e)})}):a.cache=o.get(C,s),d(m,t,a,function(t,a){e.get(t,a).success(function(e){n(e)}).error(function(e,n){u(i,e,t,n)})})})}}function E(t,i,a,o,r){var s=l(t,i,a,o);return function(t,i){return n(function(n,a){var o={timeout:r||N,headers:{"Content-Type":"application/json;charset=UTF-8"}};d(s,i,o,function(i,o){e.post(i,t,o).success(function(e){n(e)}).error(function(e,n){u(a,e,i,n)})})})}}function g(e,i,o,r,s){function l(e){if(!e.delegate)throw new Error("Websocket not opened");return 1==e.delegate.readyState?n.when(e.delegate):3==e.delegate.readyState?n.reject("Unable to connect to websocket ["+e.delegate.url+"]"):(console.debug("[http] Waiting websocket ["+e.path+"] opening..."),e.waitDuration>=s&&(console.debug("[http] Will retry openning websocket later..."),e.waitRetryDelay=2e3),t(function(){return e.waitDuration+=e.waitRetryDelay,l(e)},e.waitRetryDelay))}function u(e,n,t){return e.delegate||(e.path=o,e.callbacks=[],e.waitDuration=0,e.waitRetryDelay=200,d(p,t,{},function(n){e.delegate=new WebSocket(n),e.delegate.onerror=function(n){e.delegate.readyState=3},e.delegate.onmessage=function(n){var t=JSON.parse(n.data);_.forEach(e.callbacks,function(e){e(t)})},e.delegate.onopen=function(n){console.debug("[http] Listening on websocket ["+e.path+"]..."),R.push(e),e.delegate.openTime=(new Date).getTime()},e.delegate.onclose=function(){var n=_.findIndex(R,function(n){return n.path===e.path});n>=0&&R.splice(n,1),e.delegate.closing?e.delegate=null:(console.debug("[http] Unexpected close of websocket ["+o+"] (open "+((new Date).getTime()-e.delegate.openTime)+"ms ago): re-opening..."),e.delegate=null,u(e,null,t))}})),n&&e.callbacks.push(n),l(e)}if(!o)throw console.error("calling csHttp.ws without path argument"),"calling csHttp.ws without path argument";var p=c(e,i,o,r);return s=s||a.data.timeout,{open:function(e){return u(this,null,e)},on:function(e,n){return u(this,e,n)},send:function(e){var n=this;return l(n).then(function(){n.delegate.send(e)})},close:function(){var e=this;e.delegate&&(e.delegate.closing=!0,console.debug("[http] Closing websocket ["+e.path+"]..."),e.delegate.close(),e.callbacks=[])}}}function b(){R.length>0&&(console.debug("[http] Closing all websocket..."),_.forEach(R,function(e){e.close()}),R=[])}function h(e){var n;e.startsWith("duniter://")&&(n="duniter",e=e.replace("duniter://","http://"));var t=document.createElement("a");t.href=e;var i=t.pathname;i&&i.startsWith("/")&&(i=i.substring(1));var a={protocol:n?n:t.protocol,hostname:t.hostname,host:t.host,port:t.port,username:t.username,password:t.password,pathname:i,search:t.search,hash:t.hash};return t.remove(),a}function f(e,n){if(n=n||{},!e.startsWith("http://")&&!e.startsWith("https://")){var t=h(e);!t.protocol&&n.type&&(t.protocol="email"==n.type?"mailto:":"phone"==n.type?"tel:":"",e=t.protocol+e);var a=("mailto:"==t.protocol||"tel:"==t.protocol)&&r.enable;if(!a)return void(n.onError&&"function"==typeof n.onError&&n.onError(e))}var o,s=n.target||(r.enable?"_system":"_blank");"_blank"==s&&r.isDesktop()&&i.screen&&i.screen.width&&i.screen.height&&(o="width={0},height={1},location=1,menubar=1,toolbar=1,resizable=1,scrollbars=1".format(i.screen.width/2,i.screen.height/2));var l=i.open(e,s,o);o&&(l.moveTo(i.screen.width/2/2,i.screen.height/2/2),l.focus())}function T(){return Math.floor(moment().utc().valueOf()/1e3)}function v(e){return/^\d+$/.test(e)}function I(e,n){function t(e){for(var n=0;n<e.length;++n)if(!v(e[n]))return!1;return!0}var i=e.split("."),a=n.split(".");if(!t(i)||!t(a))return NaN;for(var o=0;o<i.length;++o){if(a.length===o)return 1;if(i[o]!==a[o])return i[o]>a[o]?1:-1}return i.length!=a.length?-1:0}function O(e,n){return console.debug("[http] TODO: implement check version [{0}] compatible with [{1}]".format(n,e)),I(e,n)<=0}var N=a.data.timeout,R=[],C="csHttp";N||(N=4e3);var A=angular.copy(o.constants);return A.clear=function(){console.debug("[http] Cleaning cache..."),o.clear(C)},{get:p,getWithCache:m,post:E,ws:g,closeAllWs:b,getUrl:l,getServer:s,uri:{parse:h,open:f},date:{now:T},version:{compare:I,isCompatible:O},cache:A}}]),angular.module("cesium.storage.services",["cesium.config"]).factory("sessionStorage",["$window","$q",function(e,n){"ngInject";var t={storage:e.sessionStorage||{}};return t.put=function(e,i){return t.storage[e]=i,n.when()},t.get=function(e,i){return n.when(t.storage[e]||i)},t.setObject=function(e,i){return t.storage[e]=JSON.stringify(i),n.when()},t.getObject=function(e){return n.when(JSON.parse(t.storage[e]||"{}"))},t}]).factory("localStorage",["$window","$q","sessionStorage",function(e,n,t){"ngInject";function i(){return e.localStorage?(console.debug("[storage] Starting {local} storage..."),u.standard.storage=e.localStorage,_.forEach(_.keys(u.standard),function(e){u[e]=u.standard[e]})):(console.debug("[storage] Starting {session} storage..."),_.forEach(_.keys(t),function(e){u[e]=t[e]})),n.when()}function a(){console.debug("[storage] Starting {secure} storage..."),_.forEach(_.keys(u.secure),function(e){u[e]=u.secure[e]});var e=n.defer();return cordova.plugins&&cordova.plugins.SecureStorage?u.secure.storage=new cordova.plugins.SecureStorage(function(){e.resolve()},function(n){console.error("[storage] Could not use secure storage. Will use standard.",n),i(),e.resolve()},s):(i(),e.resolve()),e.promise}function o(){if(r)return r;var e=(new Date).getTime();return c?(console.debug("[storage] Starting secure storage..."),r=a()):r=i(),r.then(function(){console.debug("[storage] Started in "+((new Date).getTime()-e)+"ms"),l=!0,r=null})}var r,s="Cesium",l=!1,c=!0,u={standard:{storage:null},secure:{storage:null}};return c=!1,u.standard.put=function(e,t){return u.standard.storage[e]=t,n.when()},u.standard.get=function(e,t){return n.when(u.standard.storage[e]||t)},u.standard.setObject=function(e,t){return u.standard.storage[e]=JSON.stringify(t),n.when()},u.standard.getObject=function(e){return n.when(JSON.parse(u.standard.storage[e]||"{}"))},u.secure.put=function(e,t){var i=n.defer();return angular.isDefined(t)?u.secure.storage.set(function(e){i.resolve()},function(e){i.reject(e)},e,t):u.secure.storage.remove(function(e){i.resolve()},function(e){i.reject(e)},e),i.promise},u.secure.get=function(e,t){var i=n.defer();return u.secure.storage.get(function(e){!e&&t?i.resolve(t):i.resolve(e)},function(e){i.reject(e)},e),i.promise},u.secure.setObject=function(e,n){return u.secure.put(e,n?JSON.stringify(n):void 0)},u.secure.getObject=function(e){return u.secure.storage.get(e).then(function(e){return e&&JSON.parse(e)||{}})},u.isStarted=function(){return l},u.ready=function(){return l?n.when():r||o()},o(),u}]);var App;if(angular.module("cesium.device.services",["cesium.utils.services","cesium.settings.services"]).factory("Device",["$rootScope","$translate","$ionicPopup","$q","ionicReady",function(e,n,t,i,a){"ngInject";function o(e){return u.camera.enable?(e&&"string"==typeof e&&(e={sourceType:e}),e=e||{},angular.isUndefined(e.sourceType)?n(["SYSTEM.PICTURE_CHOOSE_TYPE","SYSTEM.BTN_PICTURE_GALLERY","SYSTEM.BTN_PICTURE_CAMERA"]).then(function(n){return t.show({title:n["SYSTEM.PICTURE_CHOOSE_TYPE"],buttons:[{text:n["SYSTEM.BTN_PICTURE_GALLERY"],type:"button",onTap:function(e){return navigator.camera.PictureSourceType.PHOTOLIBRARY}},{text:n["SYSTEM.BTN_PICTURE_CAMERA"],type:"button button-positive",onTap:function(e){return navigator.camera.PictureSourceType.CAMERA}}]}).then(function(n){return console.info("[camera] User select sourceType:"+n),e.sourceType=n,u.camera.getPicture(e)})}):(e.quality=e.quality||50,e.destinationType=e.destinationType||navigator.camera.DestinationType.DATA_URL,e.encodingType=e.encodingType||navigator.camera.EncodingType.PNG,e.targetWidth=e.targetWidth||c.MAX_WIDTH,e.targetHeight=e.targetHeight||c.MAX_HEIGHT,$cordovaCamera.getPicture(e))):i.reject("Camera not enable. Please call 'ionicReady()' once before use (e.g in app.js).")}function r(e){if(!u.enable)return i.reject("Barcode scanner not enable. Please call 'ionicReady()' once before use (e.g in app.js).");var n=i.defer();return cordova.plugins.barcodeScanner.scan(function(e){console.debug("[device] bar code result",e),e.cancelled?n.resolve():n.resolve(e.text)},function(e){console.error("[device] Error while using barcode scanner -> "+e),n.reject(e)},e),n.promise}function s(e,n){if(!u.enable)return i.reject("Device disabled");var t=i.defer();return $cordovaClipboard.copy(e).then(function(){n&&n(),t.resolve()},function(){t.reject({message:"ERROR.COPY_CLIPBOARD"})}),t.promise}var l,c={MAX_HEIGHT:400,MAX_WIDTH:400},u={enable:!0},d={},p=!1;return u.enable=!1,u.clipboard={copy:s},u.camera={getPicture:o,scan:function(e){return console.warn("Deprecated use of Device.camera.scan(). Use Device.barcode.scan() instead"),r(e)}},u.barcode={enable:!1,scan:r},u.keyboard={enable:!1,close:function(){u.keyboard.enable&&cordova.plugins.Keyboard.close()}},u.keyboard.digit={settings:{bindModel:function(n,t,i){i=i||{},n=n||e;var a=function(){return(t||"").split(".").reduce(function(e,n){return e?e[n]:void 0},n)},o=function(e){var i=(t||"").split("."),a=i.length&&i[i.length-1];i.reduce(function(n,t){return t==a?void(n[a]=e):n[t]},n)};return i.action=i.action||function(e){o((a()||"")+e)},i.decimal&&(i.decimalSeparator=i.decimalSeparator||".",i.leftButton=i.leftButton={html:"<span>.</span>",action:function(){var e=a()||"";e.indexOf(i.decimalSeparator)>=0||(e.trim().length||(e="0"),o(e+i.decimalSeparator))}}),i.rightButton=i.rightButton||{html:'<i class="icon ion-backspace-outline"></i>',action:function(){var e=a();e&&e.length&&(e=e.slice(0,-1),o(e))}},i}}},u.isIOS=function(){return!!navigator.userAgent.match(/iPhone | iPad | iPod/i)||ionic.Platform.isIOS()},u.isDesktop=function(){if(!angular.isDefined(d.isDesktop))try{d.isDesktop=!u.enable&&!!process&&!!App}catch(e){d.isDesktop=!1}return d.isDesktop},u.isWeb=function(){return!u.enable&&!u.isDesktop()},u.ready=function(){return p?i.when():l||u.start()},u.start=function(){return l=a().then(function(){u.enable=window.cordova&&cordova&&cordova.plugins,u.enable?(u.camera.enable=!!navigator.camera,u.keyboard.enable=cordova&&cordova.plugins&&!!cordova.plugins.Keyboard,u.barcode.enable=cordova&&cordova.plugins&&!!cordova.plugins.barcodeScanner,u.clipboard.enable=cordova&&cordova.plugins&&!!cordova.plugins.clipboard,u.keyboard.enable&&angular.extend(u.keyboard,cordova.plugins.Keyboard),console.debug("[device] Ionic platform ready, with [camera: {0}] [barcode scanner: {1}] [keyboard: {2}] [clipboard: {3}]".format(u.camera.enable,u.barcode.enable,u.keyboard.enable,u.clipboard.enable)),cordova.InAppBrowser&&console.debug("[device] Enabling InAppBrowser")):console.debug("[device] Ionic platform ready - no device detected."),p=!0,l=null})},u}]),angular.module("cesium.currency.services",["ngApi","cesium.bma.services"]).factory("csCurrency",["$rootScope","$q","$timeout","BMA","Api",function(e,n,t,i,a){"ngInject";function o(i,o){function r(e,n){return n<=0?e:e*Math.pow(10,n)}function s(){C.name=null,C.parameters=null,C.firstBlockTime=null,C.membersCount=null,C.cache={},C.node=o,C.currentUD=null,A=!1,O=void 0,S.data.raise.reset(C)}function l(){return n.all([c().then(function(e){return u(e.currency)}),d(),S.data.raisePromise.load(C)])["catch"](function(e){throw s(),e})}function c(){return o.blockchain.parameters().then(function(e){return C.name=e.currency,C.parameters=e,e})}function u(e){return R.WELL_KNOWN_CURRENCIES[e]?(angular.merge(C,R.WELL_KNOWN_CURRENCIES[e]),n.when()):o.blockchain.block({block:0}).then(function(e){C.firstBlockTime=e.medianTime})["catch"](function(e){if(e&&e.ucode===o.errorCodes.BLOCK_NOT_FOUND)return C.firstBlockTime=0,C.initPhase=!0,void console.warn("[currency] Blockchain not launched: Enable init phase mode");throw e})}function d(){return o.blockchain.stats.ud().then(function(e){if(e.result.blocks.length){var n=e.result.blocks[e.result.blocks.length-1];return o.blockchain.block({block:n}).then(function(e){return C.currentUD=r(e.dividend,e.unitbase),C.currentUD})["catch"](function(e){throw console.error("[currency] Unable to load last block with UD, with number {0}".format(n)),C.currentUD=null,e})}return C.currentUD=C.parameters?C.parameters.ud0:-1,C.currentUD})["catch"](function(e){throw C.currentUD=null,e})}function p(){return A?n.when(C):O||v()}function m(e){return function(){return A?n.when(C[e]):O||v().then(function(){return C[e]})}}function E(e){var n=new Block(e);n.cleanData(),console.debug("[currency] Received new block ["+n.number+"-"+n.hash+"]"),C.currentBlock=n,C.currentBlock.receivedAt=(new Date).getTime()/1e3,C.medianTime=n.medianTime,C.membersCount=n.membersCount,n.dividend&&(C.currentUD=n.dividend),S.data.raise.newBlock(n)}function g(){var n=o.websocket.block();n.on(E),N=[o.api.node.on.restart(e,T,this),n.close]}function b(){_.forEach(N,function(e){e()}),N=[]}function h(){return A?n.when(C):O||v()}function f(){console.debug("[currency] Stopping..."),b(),s()}function T(){return f(),t(v,200)}function v(){console.debug("[currency] Starting...");var e=(new Date).getTime();return O=o.ready().then(l).then(function(){g(),console.debug("[currency] Started in "+((new Date).getTime()-e)+"ms"),A=!0,O=null,S.data.raise.ready(C)}).then(function(){return C})}function I(e){return y().then(function(n){if(e){var t=(new Date).getTime()/1e3;if(n&&n.receivedAt-t<60)return console.debug("[currency] find current block in cache: use it"),n;console.warn("[currency] No current block in cache: get it from network")}return o.blockchain.current()["catch"](function(e){if(e&&e.ucode==o.errorCodes.NO_CURRENT_BLOCK)return{number:0,hash:o.constants.ROOT_BLOCK_HASH,medianTime:Math.trunc((new Date).getTime()/1e3)};throw e}).then(function(e){return C.currentBlock=e,C.currentBlock.receivedAt=t,e})})}var O,N,R={WELL_KNOWN_CURRENCIES:{g1:{firstBlockTime:1488987127}}},C={},A=!1,S=new a(this,"csCurrency-"+i),y=m("currentBlock");return S.registerEvent("data","ready"),S.registerEvent("data","load"),S.registerEvent("data","reset"),S.registerEvent("data","newBlock"),s(),{ready:h,start:v,stop:f,data:C,get:p,parameters:m("parameters"),currentUD:m("currentUD"),blockchain:{current:I},api:S,"default":function(){return console.warn("[currency] 'csCurrency.default()' has been DEPRECATED - Please use 'csCurrency.get()' instead."),p()}}}var r=o("default",i);return r.instance=o,r}]),angular.module("cesium.bma.services",["ngApi","cesium.http.services","cesium.settings.services"]).factory("BMA",["$q","$window","$rootScope","$timeout","Api","Device","csConfig","csSettings","csHttp",function(e,n,t,i,a,o,r,s,l){
"ngInject";function c(o,c,u,d){function p(e,n,t,i){k.started&&k.stop(),k.alive=!1,k.cache=g(),s.data&&s.data.node&&(e=e||s.data.node.host,n=n||s.data.node.port,t=angular.isDefined(t)?t:443==n||s.data.node.useSsl||k.forceUseSsl,i=!angular.isDefined(i)||i),e&&(k.host=e,k.port=n||80,k.useSsl=angular.isDefined(t)?t:443==k.port||k.forceUseSsl,k.useCache=!!angular.isDefined(i)&&i,k.server=l.getServer(e,n),k.url=l.getUrl(e,n,"",t))}function m(e){return new RegExp("^"+e+"$")}function E(e){return new RegExp(e)}function g(){return{getByPath:{},postByPath:{},wsByPath:{}}}function b(){console.warn("[BMA] Closing all websockets..."),_.keys(k.cache.wsByPath).forEach(function(e){var n=k.cache.wsByPath[e];n.close()}),k.cache.wsByPath={}}function h(){_.forEach(v,function(e){e()}),v=[]}function f(){v=[s.api.data.on.changed(t,T,this)]}function T(e){var n=l.getUrl(e.node.host,e.node.port,"",e.node.useSsl),t=n!=k.url;t&&(p(e.node.host,e.node.port,e.node.useSsl,k.useCache),k.restart())}var v,I="SIG\\(([0-9a-zA-Z]{43,44})\\)",O="XHX\\(([A-F0-9]{1,64})\\)",N="CSV\\(([0-9]{1,8})\\)",R="CLTV\\(([0-9]{1,10})\\)",C=I+"|"+O+"|"+N+"|"+R,A="(&&)|(\\|\\|)",S=C+"([ ]*"+A+"[ ]*"+C+")*",y="OBJ\\(([0-9]+)\\)",D=y+"[ ]*"+A+"[ ]*"+y,L="( ([a-z_][a-z0-9-_.]*))?( ([0-9.]+))?( ([0-9a-f:]+))?( ([0-9]+))( (.+))?",P={USER_ID:"[A-Za-z0-9_-]+",CURRENCY:"[A-Za-z0-9_-]+",PUBKEY:"[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44}",COMMENT:"[ a-zA-Z0-9-_:/;*\\[\\]()?!^\\+=@&~#{}|\\\\<>%.]*",URI_WITH_AT:"duniter://(?:([A-Za-z0-9_-]+):)?([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44})@([a-zA-Z0-9-.]+.[ a-zA-Z0-9-_:/;*?!^\\+=@&~#|<>%.]+)",URI_WITH_PATH:"duniter://([a-zA-Z0-9-.]+.[a-zA-Z0-9-_:.]+)/([123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44})(?:/([A-Za-z0-9_-]+))?",BMA_ENDPOINT:"BASIC_MERKLED_API"+L,BMAS_ENDPOINT:"BMAS"+L,WS2P_ENDPOINT:"WS2P ([a-f0-9]{8})"+L,BMATOR_ENDPOINT:"BMATOR ([a-z0-9-_.]*|[0-9.]+|[0-9a-f:]+.onion)(?: ([0-9]+))?",WS2PTOR_ENDPOINT:"WS2PTOR ([a-f0-9]{8}) ([a-z0-9-_.]*|[0-9.]+|[0-9a-f:]+.onion)(?: ([0-9]+))?(?: (.+))?"},w={REVOCATION_ALREADY_REGISTERED:1002,HTTP_LIMITATION:1006,IDENTITY_SANDBOX_FULL:1007,NO_MATCHING_IDENTITY:2001,UID_ALREADY_USED:2003,NO_MATCHING_MEMBER:2004,NO_IDTY_MATCHING_PUB_OR_UID:2021,WRONG_SIGNATURE_MEMBERSHIP:2006,MEMBERSHIP_ALREADY_SEND:2007,NO_CURRENT_BLOCK:2010,BLOCK_NOT_FOUND:2011,SOURCE_ALREADY_CONSUMED:2015,TX_INPUTS_OUTPUTS_NOT_EQUAL:2024,TX_OUTPUT_SUM_NOT_EQUALS_PREV_DELTAS:2025,TX_ALREADY_PROCESSED:2030},M={PROTOCOL_VERSION:10,ROOT_BLOCK_HASH:"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",LIMIT_REQUEST_COUNT:5,LIMIT_REQUEST_DELAY:1e3,regex:P,regexp:P},k=this;k.date={now:l.date.now},k.api=new a(this,"BMA-"+k.server),k.started=!1,k.init=p,k.forceUseSsl=!!("true"===r.httpsMode||r.httpsMode===!0||"force"===r.httpsMode||n.location&&"https:"===n.location.protocol),k.forceUseSsl&&console.debug("[BMA] Enable SSL (forced by config or detected in URL)"),o&&p(o,c,u,d),k.useCache=d,k.cleanCache=function(){console.debug("[BMA] Cleaning requests cache..."),b(),k.cache=g()},get=function(e,n){n=k.useCache&&n;var t=e+(n?"#"+n:""),i=function(a){if(!k.started)return k._startPromise||console.error("[BMA] Trying to get [{0}] before start()...".format(e)),k.ready().then(function(){return i(a)});var o=k.cache.getByPath[t];return o||(o=n?l.getWithCache(k.host,k.port,e,k.useSsl,n):l.get(k.host,k.port,e,k.useSsl),k.cache.getByPath[t]=o),o(a)};return i},post=function(e){var n=function(t,i){if(!k.started)return k._startPromise||console.error("[BMA] Trying to post [{0}] before start()...".format(e)),k.ready().then(function(){return n(t,i)});var a=k.cache.postByPath[e];return a||(a=l.post(k.host,k.port,e,k.useSsl),k.cache.postByPath[e]=a),a(t,i)};return n},ws=function(e){return function(){var n=k.cache.wsByPath[e];if(n)n._counter++;else{n=l.ws(k.host,k.port,e,k.useSsl),n._counter=1;var t=n.close;n.close=function(){n._counter--,n._counter<=0&&(console.debug("[BMA] Closing websocket ["+e+"]"),t(),delete k.cache.wsByPath[e])},k.cache.wsByPath[e]=n}return n}},k.isAlive=function(){return l.get(k.host,k.port,"/node/summary",k.useSsl)().then(function(e){var n=e&&e.duniter&&"duniter"==e.duniter.software&&e.duniter.version,t=n&&l.version.isCompatible(s.data.minVersion,e.duniter.version);return n&&!t&&console.error("[BMA] Uncompatible version [{0}] - expected at least [{1}]".format(e.duniter.version,s.data.minVersion)),t})["catch"](function(){return!1})},k.isStarted=function(){return k.started},k.ready=function(){return k.started?e.when(!0):k._startPromise||k.start()},k.start=function(){if(k._startPromise)return k._startPromise;if(k.started)return e.when(k.alive);if(!k.host)return s.ready().then(function(){return k.init(),k.useCache=!0,k.start()});k.useSsl?console.debug("[BMA] Starting [{0}] (SSL on)...".format(k.server)):console.debug("[BMA] Starting [{0}]...".format(k.server));var n=(new Date).getTime();return k._startPromise=e.all([s.ready,k.isAlive()]).then(function(e){return k.alive=e[1],k.alive?(v&&0!==v.length||f(),console.debug("[BMA] Started in "+((new Date).getTime()-n)+"ms"),k.api.node.raise.start(),k.started=!0,delete k._startPromise,!0):(console.error("[BMA] Could not start [{0}]: node unreachable".format(k.server)),k.started=!0,delete k._startPromise,!1)}),k._startPromise},k.stop=function(){console.debug("[BMA] Stopping..."),h(),l.cache.clear(),k.cleanCache(),k.alive=!1,k.started=!1,delete k._startPromise,k.api.node.raise.stop()},k.restart=function(){return k.stop(),i(k.start,200).then(function(e){return e&&k.api.node.raise.restart(),e})},k.api.registerEvent("node","start"),k.api.registerEvent("node","stop"),k.api.registerEvent("node","restart");var U={errorCodes:w,constants:M,regexp:{USER_ID:m(P.USER_ID),COMMENT:m(P.COMMENT),PUBKEY:m(P.PUBKEY),CURRENCY:m(P.CURRENCY),URI:m(P.URI),BMA_ENDPOINT:m(P.BMA_ENDPOINT),BMAS_ENDPOINT:m(P.BMAS_ENDPOINT),WS2P_ENDPOINT:m(P.WS2P_ENDPOINT),BMATOR_ENDPOINT:m(P.BMATOR_ENDPOINT),WS2PTOR_ENDPOINT:m(P.WS2PTOR_ENDPOINT),TX_OUTPUT_SIG:m(I),TX_OUTPUT_FUNCTION:E(C),TX_OUTPUT_OBJ_OPERATOR_AND:E(y+"([ ]*&&[ ]*("+y+"))+"),TX_OUTPUT_OBJ_OPERATOR_OR:E(y+"([ ]*\\|\\|[ ]*("+y+"))+"),TX_OUTPUT_OBJ:E(y),TX_OUTPUT_OBJ_OPERATOR:E(D),TX_OUTPUT_OBJ_PARENTHESIS:E("\\(("+y+")\\)"),TX_OUTPUT_FUNCTIONS:E(S)},node:{summary:get("/node/summary",l.cache.LONG),same:function(e,n){return e==k.host&&(!k.port&&!n||k.port==n||80)}},network:{peering:{self:get("/network/peering"),peers:get("/network/peering/peers")},peers:get("/network/peers"),ws2p:{info:get("/network/ws2p/info"),heads:get("/network/ws2p/heads")}},wot:{lookup:get("/wot/lookup/:search"),certifiedBy:get("/wot/certified-by/:pubkey"),certifiersOf:get("/wot/certifiers-of/:pubkey"),member:{all:get("/wot/members",l.cache.LONG),pending:get("/wot/pending",l.cache.SHORT)},requirements:get("/wot/requirements/:pubkey"),add:post("/wot/add"),certify:post("/wot/certify"),revoke:post("/wot/revoke")},blockchain:{parameters:get("/blockchain/parameters",l.cache.LONG),block:get("/blockchain/block/:block",l.cache.SHORT),blocksSlice:get("/blockchain/blocks/:count/:from"),current:get("/blockchain/current"),membership:post("/blockchain/membership"),stats:{ud:get("/blockchain/with/ud",l.cache.SHORT),tx:get("/blockchain/with/tx"),newcomers:get("/blockchain/with/newcomers"),hardship:get("/blockchain/hardship/:pubkey"),difficulties:get("/blockchain/difficulties")}},tx:{sources:get("/tx/sources/:pubkey"),process:post("/tx/process"),history:{all:get("/tx/history/:pubkey"),times:get("/tx/history/:pubkey/times/:from/:to",l.cache.LONG),timesNoCache:get("/tx/history/:pubkey/times/:from/:to"),blocks:get("/tx/history/:pubkey/blocks/:from/:to",l.cache.LONG),pending:get("/tx/history/:pubkey/pending")}},ud:{history:get("/ud/history/:pubkey")},uri:{},version:{},raw:{}};U.regex=U.regexp,U.tx.parseUnlockCondition=function(e){for(var n,t,i,a,o=e,r=[],s={},l=U.regexp.TX_OUTPUT_FUNCTION.exec(o);l;)n={},t="OBJ("+r.length+")",n.type=o.substr(l.index,l[0].indexOf("(")),n.value=l[1]||l[2]||l[3]||l[4],r.push(n),s[n.type]=s[n.type]++||1,o=o.replace(l[0],t),l=U.regexp.TX_OUTPUT_FUNCTION.exec(o);for(var c=!0;c;){for(l=U.regexp.TX_OUTPUT_OBJ_OPERATOR_AND.exec(o),c=!!l;l;){for(n={},t="OBJ("+r.length+")",n.type="AND",n.children=[],r.push(n),i=l[0],a=U.regexp.TX_OUTPUT_OBJ.exec(i);a;)n.children.push(r[a[1]]),i=i.replace(a[0],""),a=U.regexp.TX_OUTPUT_OBJ.exec(i);o=o.replace(l[0],t),l=U.regexp.TX_OUTPUT_OBJ_OPERATOR_AND.exec(i)}for(l=U.regexp.TX_OUTPUT_OBJ_OPERATOR_OR.exec(o),c=c||!!l;l;){for(n={},t="OBJ("+r.length+")",n.type="OR",n.children=[],r.push(n),i=l[0],a=U.regexp.TX_OUTPUT_OBJ.exec(i);a;)n.children.push(r[a[1]]),i=i.replace(a[0],""),a=U.regexp.TX_OUTPUT_OBJ.exec(i);o=o.replace(l[0],t),l=U.regexp.TX_OUTPUT_OBJ_OPERATOR_AND.exec(o)}for(l=U.regexp.TX_OUTPUT_OBJ_PARENTHESIS.exec(o),c=c||!!l;l;)o=o.replace(l[0],l[1]),l=U.regexp.TX_OUTPUT_OBJ_PARENTHESIS.exec(o)}return s=_.keys(s),0===s.length?void console.error("[BMA] Unparseable unlock condition: ",output):(console.debug("[BMA] Unlock conditions successfully parsed:",n),{unlockFunctions:s,unlockTree:n})},U.node.parseEndPoint=function(e){var n=U.regexp.BMA_ENDPOINT.exec(e);return n?{dns:n[2]||"",ipv4:n[4]||"",ipv6:n[6]||"",port:n[8]||80,useSsl:n[8]&&443==n[8],path:n[10],useBma:!0}:(n=U.regexp.BMAS_ENDPOINT.exec(e))?{dns:n[2]||"",ipv4:n[4]||"",ipv6:n[6]||"",port:n[8]||80,useSsl:!0,path:n[10],useBma:!0}:(n=U.regexp.BMATOR_ENDPOINT.exec(e))?{dns:n[1]||"",port:n[2]||80,useSsl:!1,useTor:!0,useBma:!0}:(n=U.regexp.WS2P_ENDPOINT.exec(e))?{ws2pid:n[1]||"",dns:n[3]||"",ipv4:n[5]||"",ipv6:n[7]||"",port:n[9]||80,useSsl:n[9]&&443==n[9],path:n[11]||"",useWs2p:!0}:(n=U.regexp.WS2PTOR_ENDPOINT.exec(e),n?{ws2pid:n[1]||"",dns:n[2]||"",port:n[3]||80,path:n[4]||"",useSsl:!1,useTor:!0,useWs2p:!0}:void 0)},U.copy=function(e){return k.started&&k.stop(),k.init(e.host,e.port,e.useSsl,k.useCache),k.start()},U.wot.member.uids=function(){return U.wot.member.all().then(function(e){return e.results.reduce(function(e,n){return e[n.pubkey]=n.uid,e},{})})},U.wot.member.get=function(e){return U.wot.member.uids().then(function(n){var t=n[e];return{pubkey:e,uid:t?t:null}})},U.wot.member.getByUid=function(e){return U.wot.member.all().then(function(n){return _.findWhere(n.results,{uid:e})})},U.blockchain.blocks=function(e){return U.raw.getHttpRecursive(U.blockchain.block,"block",e)},U.network.peering.peersByLeaves=function(e){return U.raw.getHttpRecursive(U.network.peering.peers,"leaf",e,0,10,callbackFlush)},U.raw.getHttpRecursive=function(n,t,a,o,r,s){return o=angular.isDefined(o)?o:0,r=r||U.constants.LIMIT_REQUEST_COUNT,e(function(s,l){var c=[],u=[];_.each(a.slice(o,o+r),function(e){var i={};i[t]=e,u.push(n(i).then(function(e){e&&c.push(e)}))}),e.all(u).then(function(){o<a.length-1?i(function(){U.raw.getHttpRecursive(n,t,a,o+r,r).then(function(e){return e&&e.length?void s(c.concat(e)):void s(c)})["catch"](function(e){l(e)})},U.constants.LIMIT_REQUEST_DELAY):s(c)})["catch"](function(e){e&&e.ucode===U.errorCodes.HTTP_LIMITATION?s(c):l(e)})})},U.raw.getHttpWithRetryIfLimitation=function(e){return e()["catch"](function(n){if(n&&n.ucode==U.errorCodes.HTTP_LIMITATION)return i(function(){return U.raw.getHttpWithRetryIfLimitation(e)},U.constants.LIMIT_REQUEST_DELAY)})},U.blockchain.lastUd=function(){return U.blockchain.stats.ud().then(function(e){if(!e.result.blocks||!e.result.blocks.length)return null;var n=e.result.blocks[e.result.blocks.length-1];return U.blockchain.block({block:n}).then(function(e){return e.unitbase>0?e.dividend*Math.pow(10,e.unitbase):e.dividend})})},U.uri.parse=function(n){return e(function(e,t){if(m(P.PUBKEY).test(n))e({pubkey:n});else{if(!n.startsWith("duniter://"))throw{message:"Bad URI format: "+n};var i,a,o=l.uri.parse(n),r=o.host.indexOf(".")===-1?o.host:null,s=o.host.indexOf(".")!==-1?o.host:null;if(o.username&&(o.password?(a=o.username,i=o.password):i=o.username),o.pathname){var c=o.pathname.split("/"),u=c?c.length:0,d=0;if(!r&&u>d&&(r=c[d++]),!i&&u>d&&(i=c[d++]),!a&&u>d&&(a=c[d++]),u>d)return void t({message:"Bad Duniter URI format. Invalid path (incomplete or redundant): "+o.pathname})}if(r)return s||e({uid:a,pubkey:i,currency:r}),l.get(s+"/blockchain/parameters")().then(function(n){return n.currency!==r?void t({message:"Node's currency ["+n.currency+"] does not matched URI's currency ["+r+"]."}):void e({uid:a,pubkey:i,host:s,currency:r})});if(!s)return void t({message:"Bad Duniter URI format. Missing currency name (or node address)."});l.get(s+"/blockchain/parameters")().then(function(n){e({uid:a,pubkey:i,host:s,currency:n.currency})})["catch"](function(e){t({message:"Could not get node parameter. Currency could not be retrieve"})})}}).then(function(e){return e.pubkey&&!m(P.PUBKEY).test(e.pubkey)?void reject({message:"Invalid pubkey format ["+e.pubkey+"]"}):e.uid&&!m(P.USER_ID).test(e.uid)?void reject({message:"Invalid uid format ["+e.uid+"]"}):e.currency&&!m(P.CURRENCY).test(e.currency)?void reject({message:"Invalid currency format ["+e.currency+"]"}):e})};var x=s.data.duniterLatestReleaseUrl&&l.uri.parse(s.data.duniterLatestReleaseUrl);U.raw.getLatestRelease=x?l.getWithCache(x.host,x.port,"/"+x.pathname,443==x.port||"https:"==x.protocol||k.forceUseSsl,l.cache.LONG):function(){return e.when()},U.version.latest=function(){return U.raw.getLatestRelease().then(function(e){if(e)return e.name&&e.html_url?{version:e.name,url:e.html_url}:e.tag_name&&e.html_url?{version:e.tag_name.substring(1),url:e.html_url}:void 0})["catch"](function(e){console.error("[BMA] Failed to get Duniter latest version",e)})},U.websocket={block:ws("/ws/block"),peer:ws("/ws/peer"),close:b},angular.merge(k,U)}var u=new c((void 0),(void 0),(void 0),(!0));return u.instance=function(e,n,t,i){var a=new c;return a.init(e,n,t,i),a},u.lightInstance=function(e,n,t,i){return n=n||80,t=angular.isDefined(t)?t:443==n,{host:e,port:n,useSsl:t,url:l.getUrl(e,n,"",t),node:{summary:l.getWithCache(e,n,"/node/summary",t,l.cache.LONG,!1,i)},network:{peering:{self:l.get(e,n,"/network/peering",t,i)},peers:l.get(e,n,"/network/peers",t,i)},blockchain:{current:l.get(e,n,"/blockchain/current",t,i),stats:{hardship:l.get(e,n,"/blockchain/hardship/:pubkey",t,i)}}}},u}]),angular.module("cesium.wot.services",["ngApi","cesium.bma.services","cesium.crypto.services","cesium.utils.services","cesium.settings.services"]).factory("csWot",["$q","$timeout","BMA","Api","CacheFactory","csConfig","csCurrency","csSettings","csCache",function(e,n,t,i,a,o,r,s,l){"ngInject";function c(a){var o=new i(this,"csWot-"+a),c=l.get("csWot-idty-",l.constants.SHORT),u=function(e){var n={};return e.reduce(function(e,t){return t.id=t.id||t.uid+"-"+t.pubkey,n[t.id]?e:(n[t.id]=!0,e.concat(t))},[])},d=function(e,n,t){return n=n||0,e=u(e),e=_.sortBy(e,function(e){var n=1;return n+=1e6*e.block,n+=10*(900-e.uid.toLowerCase().charCodeAt(0)),-n}),angular.isDefined(t)&&e.length>t&&(e=e.slice(n,n+t)),e},p=function(e){return e=_.sortBy(e,function(e){var n=1;return n+=1e12*(e.expiresIn?e.expiresIn:0),n+=1e7*(e.isMember?1:0),n+=10*(e.block?e.block:0),-n})},m=function(e){e.requirements={needSelf:!0,needMembership:!0,canMembershipOut:!1,needRenew:!1,pendingMembership:!1,wasMember:!1,certificationCount:0,needCertifications:!1,needCertificationCount:0,willNeedCertificationCount:0,alternatives:void 0},e.blockUid=null,e.isMember=!1,e.sigDate=null},E=function(e,n){if(e.hasSelf=!0,e.needSelf=!1,e.wasMember=!!angular.isDefined(e.wasMember)&&e.wasMember,e.needMembership=e.membershipExpiresIn<=0&&e.membershipPendingExpiresIn<=0&&!e.wasMember,e.needRenew=!e.needMembership&&e.membershipExpiresIn<=s.data.timeWarningExpireMembership&&e.membershipPendingExpiresIn<=0||e.wasMember&&0===e.membershipExpiresIn&&0===e.membershipPendingExpiresIn,e.canMembershipOut=e.membershipExpiresIn>0,e.pendingMembership=e.membershipExpiresIn<=0&&e.membershipPendingExpiresIn>0,e.isMember=e.membershipExpiresIn>0,e.blockUid=e.meta.timestamp,e.certificationCount=e.isMember&&e.certifications?e.certifications.length:0,e.willExpireCertificationCount=e.certifications?e.certifications.reduce(function(e,n){return e+(n.expiresIn<=s.data.timeWarningExpire?1:0)},0):0,e.willExpire=e.willExpireCertificationCount>0,e.pendingRevocation=!e.revoked&&!!e.revocation_sig,e.isMember||e.wasMember)e.pendingCertificationCount=angular.isDefined(e.pendingCerts)?e.pendingCerts.length:0;else{var t=_.union(_.pluck(e.pendingCerts||[],"from"),_.pluck(e.certifications||[],"from"));e.pendingCertificationCount=_.size(t)}return e.needCertificationCount=!e.needSelf&&e.certificationCount<n.sigQty?n.sigQty-e.certificationCount:0,e.willNeedCertificationCount=!e.needMembership&&!e.needCertificationCount&&e.certificationCount-e.willExpireCertificationCount<n.sigQty?n.sigQty-e.certificationCount+e.willExpireCertificationCount:0,e},g=function(n){return n&&(n.pubkey||n.uid)?e.all([r.get(),t.wot.requirements({pubkey:n.pubkey||n.uid})]).then(function(e){var t=e[0];if(e=e[1],e.identities&&e.identities.length){e.identities.length>1&&(e.identities=_.sortBy(e.identities,function(e){var t=0;t+=1e10*(n.uid&&e.uid===n.uid?1:0),t+=1e10*(n.blockUid&&e.meta&&e.meta.timestamp===n.blockUid?1:0),t+=1e9*(e.membershipExpiresIn>0?1:0),t+=1e8*(e.membershipPendingExpiresIn>0?1:0),t+=1e7*(e.expired?0:1),t+=1e6*(e.outdistanced?0:1),t+=1e5*(e.wasMember?1:0);var i=!e.expired&&e.certifications?e.certifications.length:0;return t+=1*(i?i:0),t+=1*(!i&&e.membershipPendingExpiresIn>0?e.membershipPendingExpiresIn/1e3:0),-t}),console.debug("[wot] Found {0} identities. Will selected the best one".format(e.identities.length)));var i=E(e.identities[0],t.parameters);return n.requirements=i,n.pubkey=i.pubkey,n.uid=i.uid,n.isMember=i.isMember,n.blockUid=i.blockUid,!i.isMember&&!i.wasMember&&e.identities.length>1&&(i.alternatives=e.identities.splice(1),_.forEach(i.alternatives,function(e){E(e,t.parameters)})),n}})["catch"](function(e){if(m(n),e&&(e.ucode==t.errorCodes.NO_MATCHING_MEMBER||e.ucode==t.errorCodes.NO_IDTY_MATCHING_PUB_OR_UID))return n;throw e}):e.when(n)},b=function(e,n){return t.wot.lookup({search:e||n}).then(function(e){var i=e.results.reduce(function(e,n){return e.concat(n.uids.reduce(function(e,t){var i=t.meta.timestamp.split("-",2);return e.concat({uid:t.uid,pubkey:n.pubkey,timestamp:t.meta.timestamp,number:parseInt(i[0]),hash:i[1],revoked:t.revoked,revocationNumber:t.revoked_on,sig:t.self})},[]))},[]);i.length&&(i=_.sortBy(i,function(e){var t=0;return t+=1e10*(n&&e.uid===n?1:0),t+=1e9*(e.revoked?0:1),t+=1*(e.number?e.number:0),-t}));var a=i[0];a.hasSelf=!!(a.uid&&a.timestamp&&a.sig),a.lookup={};var o=[];a.lookup.certifications=e.results?e.results.reduce(function(e,n){return n.uids.reduce(function(e,n){var t=n.uid+"-"+(n.meta?n.meta.timestamp:"");return e[t]=n.others.reduce(function(e,n){var i=t+"-"+n.pubkey,a={pubkey:n.pubkey,uid:n.uids[0],cert_time:{block:n.meta&&n.meta.block_number?n.meta.block_number:0,block_hash:n.meta&&n.meta.block_hash?n.meta.block_hash:null},isMember:n.isMember,wasMember:n.wasMember};return o[i]?a.cert_time.block>o[i].cert_time.block?(o[i]=a,e.splice(_.findIndex(e,{pubkey:n.pubkey}),1,a),e):e:(o[i]=a,e.concat(a))},[]),e},e)},{}):{},o=[],a.lookup.givenCertifications=e.results?e.results.reduce(function(e,n){return n.signed.reduce(function(e,n){var t={pubkey:n.pubkey,uid:n.uid,cert_time:{block:n.cert_time&&n.cert_time.block?n.cert_time.block:0,block_hash:n.cert_time&&n.cert_time.block_hash?n.cert_time.block_hash:null},sigDate:n.meta?n.meta.timestamp:null,isMember:n.isMember,wasMember:n.wasMember};if(o[n.pubkey]){if(!(t.block>o[n.pubkey].block))return e;o[n.pubkey]=t}else o[n.pubkey]=t;return e.concat(t)},e)},[]):[];var r=[a.number];return a.revocationNumber&&r.push(a.revocationNumber),t.blockchain.blocks(r).then(function(e){return a.sigDate=e[0].medianTime,0!==a.number&&a.hash!==e[0].hash&&(a.hasBadSelfBlock=!0),a.revocationNumber&&(a.revocationTime=e[1].medianTime),a})["catch"](function(e){if(e&&e.ucode==t.errorCodes.BLOCK_NOT_FOUND&&0===a.number)return a.sigDate=Math.trunc((new Date).getTime()/1e3),a;throw e})})["catch"](function(n){if(n&&n.ucode==t.errorCodes.NO_MATCHING_IDENTITY){var i={uid:null,pubkey:e,hasSelf:!1};return i}throw n})},h=function(e,n,i,a,o,l){function c(e,n){return e+"-"+n}var u=!0,d=i?i.reduce(function(e,n){var t=c(n.pubkey,n.cert_time?n.cert_time.block:n.sigDate);return n.cert_time||(u=!1),e[t]=n,e},{}):{},m=!0;return e({pubkey:n}).then(function(e){return e.certifications.reduce(function(e,n){var t=!n.written,i=n.cert_time?n.cert_time.medianTime:null,r=i?t?i+a.sigWindow-o:i+a.sigValidity-o:0;r=r<0?0:r;var l=c(n.pubkey,u&&n.cert_time?n.cert_time.block:n.sigDate);return delete d[l],e.concat({pubkey:n.pubkey,uid:n.uid,time:i,isMember:n.isMember,wasMember:n.wasMember,expiresIn:r,willExpire:r&&r<=s.data.timeWarningExpire,pending:t,block:null!==n.written?n.written.number:n.cert_time?n.cert_time.block:null,valid:r>0})},[])})["catch"](function(e){if(e&&e.ucode==t.errorCodes.NO_MATCHING_MEMBER)return m=!1,[];throw e}).then(function(e){var n=_.values(d);if(!n.length)return e;if(r.data.initPhase)return n.reduce(function(e,n){return e.concat({pubkey:n.pubkey,uid:n.uid,isMember:n.isMember,wasMember:n.wasMember,time:null,expiresIn:a.sigWindow,willExpire:!1,pending:!0,block:0,valid:!0})},e);var i=n.reduce(function(e,n){var t=u&&n.cert_time?n.cert_time.block:n.sigDate?n.sigDate.split("-")[0]:null;return angular.isDefined(t)&&(e[t]?e[t].push(n):e[t]=[n]),e},{});return t.blockchain.blocks(_.keys(i)).then(function(n){return e=n.reduce(function(e,n){return e.concat(i[n.number].reduce(function(e,t){var i=n.medianTime,r=Math.max(0,i+a.sigWindow-o),c=!t.cert_time||!t.cert_time.block_hash||t.cert_time.block_hash==n.hash;c||console.debug("[wot] Invalid cert {0}: block hash changed".format(t.pubkey.substring(0,8)));var d=r>0&&(!l||t.isMember)&&c;return e.concat({pubkey:t.pubkey,uid:t.uid,isMember:t.isMember,wasMember:t.wasMember,time:i,expiresIn:r,willExpire:r&&r<=s.data.timeWarningExpire,pending:!0,block:u&&t.cert_time?t.cert_time.block:t.sigDate?t.sigDate.split("-")[0]:null,valid:d})},[]))},e)})}).then(function(e){var n=e.reduce(function(e,n){return!n.pending&&n.valid&&n.expiresIn>=a.sigWindow&&(e[n.pubkey]=!0),e},{});e=p(e);var t=[],i=[],o=e.reduce(function(e,a){return a.pending?(a.valid&&!n[a.pubkey]?t.push(a):a.valid||n[a.pubkey]||i.push(a),e):e.concat(a)},[]);return{valid:o,pending:t,error:i}})},f=function(e){e.requirements.revoked?(delete e.hasBadSelfBlock,y(e,{type:"error",message:"ERROR.IDENTITY_REVOKED",messageParams:{revocationTime:e.revocationTime}}),console.debug("[wot] Identity [{0}] has been revoked".format(e.uid))):e.requirements.pendingRevocation?(y(e,{type:"error",message:"ERROR.IDENTITY_PENDING_REVOCATION"}),console.debug("[wot] Identity [{0}] has pending revocation".format(e.uid))):e.hasBadSelfBlock?(delete e.hasBadSelfBlock,e.isMember||(y(e,{type:"error",message:"ERROR.IDENTITY_INVALID_BLOCK_HASH"}),console.debug("[wot] Invalid membership for {0}: block hash changed".format(e.uid)))):e.requirements.expired?(y(e,{type:"error",message:"ERROR.IDENTITY_EXPIRED"}),console.debug("[wot] Identity {0} expired (in sandbox)".format(e.uid))):e.requirements.willNeedCertificationCount>0?(y(e,{type:"error",message:"INFO.IDENTITY_WILL_MISSING_CERTIFICATIONS",messageParams:e.requirements}),console.debug("[wot] Identity {0} will need {1} certification(s)".format(e.uid,e.requirements.willNeedCertificationCount))):!e.requirements.needSelf&&e.requirements.needMembership&&(y(e,{type:"error",message:"INFO.IDENTITY_NEED_MEMBERSHIP"}),console.debug("[wot] Identity {0} has a self but no membership".format(e.uid)))},T=function(n,i,a,r){var s;if(!n&&a&&!r)return t.wot.member.getByUid(a).then(function(e){return e?T(e.pubkey,i,e.uid):T(n,i,a,!0)});if(n){if(s=i?c.get(n):null,s&&(!a||s.uid==a))return console.debug("[wot] Identity "+n.substring(0,8)+" found in cache"),e.when(s);console.debug("[wot] Loading identity "+n.substring(0,8)+"..."),s={pubkey:n,uid:a}}else console.debug("[wot] Loading identity from uid "+a),s={uid:a};var l,u,d=(new Date).getTime();return e.all([t.blockchain.parameters().then(function(e){l=e}),t.blockchain.current().then(function(e){u=e.medianTime})["catch"](function(e){if(!e||e.ucode!=t.errorCodes.NO_CURRENT_BLOCK)throw e;u=Math.trunc((new Date).getTime()/1e3)}),g(s),b(n,a).then(function(e){angular.merge(s,e)})]).then(function(){if(s.requirements.uid){var n=s.requirements.uid+"-"+s.requirements.meta.timestamp;return e.all([h(t.wot.certifiersOf,s.pubkey,s.lookup?s.lookup.certifications[n]:null,l,u,!0).then(function(e){s.received_cert=e.valid,s.received_cert_pending=e.pending,s.received_cert_error=e.error}),h(t.wot.certifiedBy,s.pubkey,s.lookup?s.lookup.givenCertifications:null,l,u,!1).then(function(e){s.given_cert=e.valid,s.given_cert_pending=e.pending,s.given_cert_error=e.error})])}}).then(function(){return s.requirements.pendingCertificationCount=s.received_cert_pending?s.received_cert_pending.length:s.requirements.pendingCertificationCount,s.requirements.revoked=angular.isDefined(s.requirements.revoked)?s.requirements.revoked:s.revoked,f(s),o.data.raisePromise.load(s)["catch"](function(e){console.debug("Error while loading identity data, on extension point."),console.error(e)})}).then(function(){if(s.pubkey)return delete s.lookup,c.put(s.pubkey,s),console.debug("[wot] Identity "+s.pubkey.substring(0,8)+" loaded in "+((new Date).getTime()-d)+"ms"),s})},v=function(n,i){if(!n||n.trim()!==n)return e.when(void 0);var a=n.replace(/(^|\s)#\w+/g,"");a=a.replace(/[^a-zA-Z0-9_-\s]+/g,""),a=a.replace(/\s+/g," ").trim(),i=i||{},i.addUniqueId=!angular.isDefined(i.addUniqueId)||i.addUniqueId,i.allowExtension=!angular.isDefined(i.allowExtension)||i.allowExtension,i.excludeRevoked=!!angular.isDefined(i.excludeRevoked)&&i.excludeRevoked;var r;return r=a?e.all(a.split(" ").reduce(function(e,n){return console.debug("[wot] Will search on: '"+n+"'"),e.concat(t.wot.lookup({search:n}))},[])).then(function(e){return e.reduce(function(e,n){return e.concat(n.results.reduce(function(e,n){return e.concat(n.uids.reduce(function(e,t){var a=t.meta.timestamp.split("-",2),o=!t.revoked&&t.revocation_sig;return i.excludeRevoked&&o?e:e.concat({uid:t.uid,pubkey:n.pubkey,number:a[0],hash:a[1],revoked:o})},[]))},[]))},[])})["catch"](function(e){if(e&&e.ucode==t.errorCodes.NO_MATCHING_IDENTITY)return[];throw e}):e.when([]),r.then(function(e){if(!i.allowExtension)return i.addUniqueId?u(e):e;var a=e.length;return o.data.raisePromise.search(n,e,"pubkey").then(function(){if(e.length>a){var n=_.filter(e,function(e){return!e.uid&&e.pubkey});if(n.length)return t.wot.member.uids().then(function(n){_.forEach(e,function(e){!e.uid&&e.pubkey&&(e.uid=n[e.pubkey])})})}}).then(function(){return i.addUniqueId?u(e):e})})},I=function(n,i){n=n||0,i=i||20;var a;return e.all([r.blockchain.current(!0).then(function(e){a=e.membersCount}),t.blockchain.stats.newcomers()]).then(function(e){if(e=e[1],!e.result.blocks||!e.result.blocks.length)return null;var t=_.sortBy(e.result.blocks,function(e){return-e});return O(t,0,5,n+i)}).then(function(e){return e&&e.length?(e=d(e,n,i),S(e,"pubkey",!0)):null}).then(function(e){return{hits:e,total:a}})},O=function(i,a,o,r){return e(function(s,l){var c=[],u=[];_.each(i.slice(a,a+o),function(e){u.push(t.blockchain.block({block:e}).then(function(e){e&&e.joiners&&_.each(e.joiners,function(n){var t=n.split(":"),i=t[t.length-1]+"-"+t[0];c.push({id:i,uid:t[t.length-1],pubkey:t[0],memberDate:e.medianTime,block:e.number})})}))}),e.all(u).then(function(){c.length<r&&a<i.length-1?n(function(){O(i,a+o,o,r-c.length).then(function(e){s(c.concat(e))})["catch"](function(e){l(e)})},1e3):s(c)})["catch"](function(e){e&&e.ucode===t.errorCodes.HTTP_LIMITATION?s(c):l(e)})})},N=function(n,i){n=n||0,i=i||20;var a=(new Date).getTime();return e.all([t.wot.member.uids(),t.wot.member.pending().then(function(e){return e.memberships&&e.memberships.length?e.memberships:void 0})]).then(function(o){var r=o[0],s=o[1];if(s){var l={},c={};_.forEach(s,function(e){if("IN"==e.membership&&!r[e.pubkey]){var n={uid:e.uid,pubkey:e.pubkey,block:e.blockNumber,blockHash:e.blockHash},t=c[e.pubkey];if(t&&n.block>t.block)return;c[n.pubkey]=n,l[n.block]?l[n.block].push(n):l[n.block]=[n],t&&(l[t.block]=l[t.block].reduce(function(e,n){return n.pubkey==t.pubkey?e:(e||[]).concat(n)},null),null===l[t.block]&&delete l[t.block])}});var u=_.values(c),p=u.length;u=d(u,n,i);var m=u.reduce(function(e,n){return e.concat(n.block)},[]);return e.all([t.blockchain.blocks(_.uniq(m)).then(function(e){_.forEach(e,function(e){_.forEach(l[e.number],function(n){n.sigDate=e.medianTime,0!==e.number&&n.blockHash!==e.hash&&(y(n,{type:"error",message:"ERROR.WOT_PENDING_INVALID_BLOCK_HASH"}),console.debug("Invalid membership for uid={0}: block hash changed".format(n.uid)))})})}),S(u,"pubkey",!0)]).then(function(){return console.debug("[ES] [wot] Loaded {0}/{1} pending identities in {2} ms".format(u&&u.length||0,p,(new Date).getTime()-a)),{hits:u,total:p}})}})},R=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","u","v","w","x","y","z"];return C(e,0,t.constants.LIMIT_REQUEST_COUNT).then(function(e){return S(e,"pubkey",!0)}).then(u).then(function(){return{hits:idties,total:idties.length}})},C=function(i,a,o){return e(function(r,s){var l=[],c={},u=[];_.each(i.slice(a,a+o),function(e){u.push(v(e,{addUniqueId:!1,allowExtension:!1}).then(function(e){e&&e.length&&(l=e.reduce(function(e,n){return c[n.pubkey]?e:(c[n.pubkey]=!0,e.concat(n))},l))}))}),e.all(u).then(function(){a<i.length-1?n(function(){C(i,a+o,o).then(function(e){return e&&e.length?void r(e.reduce(function(e,n){return c[n.pubkey]?e:(c[n.pubkey]=!0,e.concat(n))},l)):void r(l)})["catch"](function(e){s(e)})},t.constants.LIMIT_REQUEST_DELAY):r(l)})["catch"](function(e){e&&e.ucode===t.errorCodes.HTTP_LIMITATION?r(l):s(e)})})},A=function(e,n,t){return S([e],n,t).then(function(e){return e[0]})},S=function(n,i,a){i=i||"pubkey";var r=[];return a||r.push(t.wot.member.uids()),r.push(o.data.raisePromise.search(null,n,i)["catch"](function(e){console.debug("Error while search identities, on extension point."),console.error(e)})),e.all(r).then(function(e){if(!a){var t=e[0];_.forEach(n,function(e){!e.uid&&e[i]&&(e.uid=t[e[i]],e.uid&&e.uid==e.name&&delete e.name)})}return n})},y=function(e,n){n=n||{},n.type=n.type||"info",n.message=n.message||"",n.messageParams=n.messageParams||{},e.events=e.events||[],e.events.push(n)};return o.registerEvent("data","load"),o.registerEvent("data","search"),{id:a,load:T,loadRequirements:g,search:v,newcomers:I,pending:N,all:R,extend:A,extendAll:S,api:o}}var u=c("default",t);return u.instance=c,u}]),angular.module("cesium.tx.services",["ngApi","cesium.bma.services","cesium.settings.services","cesium.wot.services"]).factory("csTx",["$q","$timeout","$filter","$translate","FileSaver","UIUtils","BMA","Api","csConfig","csSettings","csWot","csCurrency",function(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";function p(n,r){var l=new s(this,"csTx-"+n),p=function(e,n,t,i,a){n&&0!==n.length&&_.forEach(n,function(n){if(n.block_number||a){var o=!1,s=n.issuers.reduce(function(n,t){return o=t===e||o,n+(t!==e?", "+t:"")},"");s.length>0&&(s=s.substring(2));var l,c,u,d=[],p=n.outputs.reduce(function(t,i,a){var p="string"==typeof i?i.split(":",3):[i.amount,i.base,i.conditions];c=parseInt(p[1]);var m=E(parseInt(p[0]),c),g=p[2],b=r.regexp.TX_OUTPUT_SIG.exec(g);if(b){var h=b[1];if(h==e){if(!o)return t+m;null===n.block_number&&d.push({amount:parseInt(p[0]),base:c,type:"T",identifier:n.hash,noffset:a,consumed:!1})}else if(""!==h&&h!=s&&(l=h),o)return t-m}else if(g.indexOf("SIG("+e+")")!=-1){var f=r.tx.parseUnlockCondition(g);if(f)return f.amount=m,u=u||[],u.push(f),console.debug("[tx] has locked output:",f),t+m}return t},0),m=p>0?s:l,g=n.time||n.blockstampTime,b=p+":"+n.hash+":"+g;if(!i[b]&&0!==p){i[b]=!0;var h={time:g,amount:p,pubkey:m,comment:n.comment,isUD:!1,hash:n.hash,locktime:n.locktime,block_number:n.block_number};o&&null===n.block_number&&(h.inputs=n.inputs,
h.sources=d),u&&(h.lockedOutputs=u),t.push(h)}}})},m=function(n,t){return e(function(i,a){var o=[],s=[],u=[],d=Math.trunc((new Date).getTime()/1e3);t=t||d-c.data.walletHistoryTimeSecond;var m={},E={pendings:[]},g=function(e){p(n,e.history.sent,o,m),p(n,e.history.received,o,m),p(n,e.history.sending,u,m,!0),p(n,e.history.pending,u,m,!0)},b=[r.tx.history.pending({pubkey:n}).then(g)];if(t!==-1){var h=c.data.walletHistorySliceSecond;t-=t%h;for(var f=t;f-h<d;f+=h){Math.max(f,t);b.push(r.tx.history.times({pubkey:n,from:f,to:f+h-1}).then(g))}b.push(r.tx.history.timesNoCache({pubkey:n,from:d-d%h,to:d+999999999}).then(g))}else b.push(r.tx.history.all({pubkey:n}).then(g));c.data.showUDHistory&&b.push(l.data.raisePromise.loadUDs({pubkey:n,fromTime:t}).then(function(e){e&&e.length&&(s=e.reduce(function(e,n){return e.concat(n)},s))})["catch"](function(e){console.debug("Error while loading UDs history, on extension point."),console.error(e)})),e.all(b).then(function(){E.history=o.concat(s).sort(function(e,n){return n.time-e.time}),E.pendings=u,E.fromTime=t,E.toTime=E.history.length?E.history[0].time:t,i(E)})["catch"](function(e){E.history=[],E.pendings=[],E.errors=[],delete E.fromTime,delete E.toTime,a(e)})})},E=function(e,n){return n<=0?e:e*Math.pow(10,n)},g=function(e,n,t){var i=e.type+":"+e.identifier+":"+e.noffset;angular.isUndefined(t[i])&&(n.push(e),t[i]=n.length-1)},b=function(e,n){_(n).forEach(function(n){g(n,e.sources,e.sourcesIndexByKey)})},h=function(e){return r.tx.sources({pubkey:e}).then(function(e){var n={sources:[],sourcesIndexByKey:[],balance:0};return e.sources&&e.sources.length&&(_.forEach(e.sources,function(e){e.consumed=!1,n.balance+=E(e.amount,e.base)}),b(n,e.sources)),n})},f=function(n,t){var i=(new Date).getTime(),a={};return e.all([h(n),m(n,t)]).then(function(e){function n(e){var n=[],r=!0;e.amount>0?r=!1:(_.forEach(e.inputs,function(e){var t=e.split(":").slice(2).join(":"),i=a.sourcesIndexByKey[t];return angular.isDefined(i)?void n.push(a.sources[i]):(r=!1,!1)}),e.sources&&b(a,e.sources),delete e.sources,delete e.inputs),r?(o+=e.amount,t.push(e),_.forEach(n,function(e){e.consumed=!0})):i.push(e)}angular.merge(a,e[0]),a.tx=e[1];for(var t=[],i=[],o=a.balance,r=a.tx.pendings,s=!0;r&&r.length>0;)_.forEach(r,n),i.length>0&&t.length>0&&s?(r=i,i=[],s=!1):r=null;return a.tx.pendings=t,a.tx.errors=i,a.balance=o,u.extendAll((a.tx.history||[]).concat(a.tx.pendings||[]),"pubkey")}).then(function(){return console.debug("[tx] TX and sources loaded in "+((new Date).getTime()-i)+"ms"),a})};return downloadHistoryFile=function(n,r){return r=r||{},r.fromTime=r.fromTime||-1,console.debug("[tx] Exporting TX history for pubkey [{0}]".format(n.substr(0,8))),e.all([i(["ACCOUNT.HEADERS.TIME","COMMON.UID","COMMON.PUBKEY","COMMON.UNIVERSAL_DIVIDEND","ACCOUNT.HEADERS.AMOUNT","ACCOUNT.HEADERS.COMMENT"]),d.blockchain.current(!0),f(n,r.fromTime)]).then(function(e){var r=e[0],s=e[1],l=s&&s.medianTime||moment().utc().unix(),c=s&&s.currency;return e=e[2],e&&e.tx&&e.tx.history?i("ACCOUNT.FILE_NAME",{currency:c,pubkey:n,currentTime:l}).then(function(n){var i=t("formatDecimal"),o=(t("formatPubkey"),t("formatDate")),s=(t("formatDateForFile"),t("currencySymbolNoHtml")),l=[r["ACCOUNT.HEADERS.TIME"],r["COMMON.UID"],r["COMMON.PUBKEY"],r["ACCOUNT.HEADERS.AMOUNT"]+" ("+s(c)+")",r["ACCOUNT.HEADERS.COMMENT"]],u=e.tx.history.reduce(function(e,n){return e.concat([o(n.time),n.uid,n.pubkey,i(n.amount/100),'"'+(n.isUD?r["COMMON.UNIVERSAL_DIVIDEND"]:n.comment)+'"'].join(";")+"\n")},[l.join(";")+"\n"]),d=new Blob(u,{type:"text/plain; charset=utf-8"});a.saveAs(d,n)}):o.toast.show("INFO.EMPTY_TX_HISTORY")})},l.registerEvent("data","loadUDs"),{id:n,load:f,downloadHistoryFile:downloadHistoryFile,api:l}}var m=p("default",r);return m.instance=p,m}]),angular.module("cesium.wallet.services",["ngApi","ngFileSaver","cesium.bma.services","cesium.crypto.services","cesium.utils.services","cesium.settings.services"]).factory("csWallet",["$q","$rootScope","$timeout","$translate","$filter","$ionicHistory","UIUtils","Api","Idle","localStorage","sessionStorage","Modals","CryptoUtils","BMA","csConfig","csSettings","FileSaver","Blob","csWot","csTx","csCurrency",function(e,n,t,a,o,r,s,l,c,u,d,p,m,E,g,b,h,f,T,v,I){"ngInject";function O(E,O){function N(){D=[b.api.data.on.changed(n,ne,this),b.api.data.on.changed(n,ke,this),O.api.node.on.restart(n,S,this)],n.$on("IdleStart",q)}function R(){_.forEach(D,function(e){e()}),D=[]}function C(){return L?e.when():P||y()}function A(){console.debug("[wallet] Stopping..."),R(),B()}function S(){return A(),t(y,200)}function y(n){n=n||{},n.restore=angular.isDefined(n.restore)?n.restore:"default"===E,console.debug("[wallet] Starting...");var t=(new Date).getTime();return P=e.all([b.ready(),I.ready(),O.ready()]),n.restore&&(P=P.then(te)),P.then(function(){N(),console.debug("[wallet] Started in "+((new Date).getTime()-t)+"ms"),L=!0,P=null}).then(function(){return k}),P}var D,L,P,w,M={OLD_STORAGE_KEY:"CESIUM_DATA",STORAGE_PUBKEY:"pubkey",STORAGE_UID:"uid",STORAGE_SECKEY:"seckey",TX_VERSION:g.compatProtocol_0_80?3:O.constants.PROTOCOL_VERSION,IDTY_VERSION:g.compatProtocol_0_80?2:O.constants.PROTOCOL_VERSION,MS_VERSION:g.compatProtocol_0_80?2:O.constants.PROTOCOL_VERSION,CERT_VERSION:g.compatProtocol_0_80?2:O.constants.PROTOCOL_VERSION,REVOKE_VERSION:g.compatProtocol_0_80?2:O.constants.PROTOCOL_VERSION,TX_MAX_INPUTS_COUNT:40},k={},U=!1,x=new l(this,"csWallet-"+E),B=function(e){k.loaded=!1,k.pubkey=null,k.uid=null,k.isNew=null,k.sourcesIndexByKey=null,k.medianTime=null,k.requirements={},k.blockUid=null,k.sigDate=null,k.isMember=!1,k.events=[],H(),F(),L=!1,P=void 0,e?x.data.raise.init(k):(b.data.useLocalStorage||b.reset(),x.data.raise.reset(k))},H=function(){k.keypair={signSk:null,signPk:null}},F=function(){k.sources=void 0,k.sourcesIndexByKey=void 0,k.balance=0,k.tx=k.tx||{},k.tx.history=[],k.tx.pendings=[],k.tx.errors=[],delete k.tx.fromTime,delete k.tx.toTime},G=function(e,n,t){var i=e.type+":"+e.identifier+":"+e.noffset;angular.isUndefined(t[i])&&(n.push(e),t[i]=n.length-1)},V=function(e){k.sources=k.sources||[],k.sourcesIndexByKey=k.sourcesIndexByKey||{},_(e).forEach(function(e){G(e,k.sources,k.sourcesIndexByKey)})},W=function(n){if(!L)return(P||y()).then(function(){return W(n)});var i=!$(),a=n&&(n.auth&&!z()||n.forceAuth);if(!i&&!a)return Q(n)?e.when(k):le(n);var o,r=b.data.keepAuthIdle>0;return(n&&n.authData&&e.when(n.authData)||p.showLogin(n)).then(function(e){if(!e||!e.pubkey||!i&&e.pubkey!==k.pubkey||a&&(!e.keypair||!e.keypair.signPk||!e.keypair.signSk))throw"CANCELLED";if(o=e,k.pubkey=e.pubkey,k.isNew=n&&angular.isDefined(n.isNew)?n.isNew:k.isNew,r&&(k.keypair=e.keypair||{signSk:null,signPk:null}),i)return x.data.raisePromise.loginCheck(k)["catch"](function(e){throw B(),e}).then(function(){if(i)return x.data.raisePromise.login(k)["catch"](function(e){console.warn("Error during extension call [wallet.api.data.on.login]",e)})})}).then(function(){if(b.data.useLocalStorage&&ne(),a||z())return ke(!0),x.data.raisePromise.auth(r?k:o)}).then(function(){var e=!i&&n&&n.minData?{minData:!0}:void 0;if(!Q(e))return le(e)}).then(function(){return n&&n.silent&&s.loading.hide(),r?k:angular.merge({},k,o)})["catch"](function(e){if(!("RETRY"!=e||n&&n.authData))return t(function(){return W(n)},300);throw e})},Y=function(){var n=z();return e(function(e,t){B(),ne(),x.data.raise.logout(),n&&x.data.raise.unauth(),ke(!1),r.clearCache(),e()})},$=function(){return!!k.pubkey},K=function(n){return L?!z()||n&&n.forceAuth?(n=n||{},n.expectedPubkey=$()&&k.pubkey,n.auth=!0,W(n)):e.when(k):(P||y()).then(function(){return K(n)})},q=function(){return e(function(e,n){H(),ne(),x.data.raise.unauth(),ke(!1),r.clearCache(),e()})},z=function(){return!!(k.pubkey&&k.keypair&&k.keypair.signSk)},j=function(n){return L?z()?e.when(k.keypair):(n=n||{},n.silent=!angular.isDefined(n.silent)||n.silent,K(n).then(function(){return k.keypair})):(P||y()).then(function(){return j(n)})},X=function(){return!!k.pubkey&&k.requirements&&!k.requirements.needSelf},Q=function(e){return e&&e.minData?k.loaded:k.loaded&&k.sources},J=function(){if(k.loaded)return!k.pubkey||!(k.isMember||k.requirements.pendingMembership||!k.requirements.needSelf||k.requirements.wasMember||k.tx.history.length||k.tx.pendings.length||k.name||k.avatar)},Z=function(){return!!k.isNew},ee=function(e){return $()&&k.pubkey===e},ne=function(){if(b.data.useLocalStorage){if($()&&b.data.rememberMe){var n=[];return b.data.keepAuthIdle==M.KEEP_AUTH_IDLE_SESSION&&z()?n.push(d.put(M.STORAGE_SECKEY,m.base58.encode(k.keypair.signSk))):n.push(d.put(M.STORAGE_SECKEY,null)),n.push(u.put(M.STORAGE_PUBKEY,k.pubkey)),k.uid?n.push(u.put(M.STORAGE_UID,k.uid)):n.push(u.put(M.STORAGE_UID,null)),n.push(u.put(M.OLD_STORAGE_KEY,null)),e.all(n).then(function(){console.debug("[wallet] Saved locally")})}return e.all([d.put(M.STORAGE_SECKEY,null),u.put(M.STORAGE_PUBKEY,null),u.put(M.STORAGE_UID,null),u.put(M.OLD_STORAGE_KEY,null)])}return e.all([d.put(M.STORAGE_SECKEY,null),u.put(M.STORAGE_PUBKEY,null),u.put(M.STORAGE_UID,null),u.put(M.OLD_STORAGE_KEY,null)])},te=function(){return e.all([d.get(M.STORAGE_SECKEY),u.get(M.STORAGE_PUBKEY),u.get(M.STORAGE_UID)]).then(function(e){var n=e[0],t=e[1],i=e[2];if(t&&"null"!=t){var a;if(n&&n.length&&"null"!=n)try{a={signPk:m.util.decode_base58(t),signSk:m.util.decode_base58(n)}}catch(o){console.warn("[wallet] Secret key restoration failed: ",o),a=void 0}return k.pubkey=t,k.uid=i&&"null"!=i?i:void 0,k.keypair=a||{signPk:void 0,signSk:void 0},console.debug("[wallet] Restore '{0}' from local storage.".format(t.substring(0,8))),x.data.raisePromise.login(k)}}).then(function(){return k})},ie=function(){return k},ae=function(){return Me("requirements"),T.loadRequirements(k).then(function(){if(k.requirements.uid){var e=k.requirements.blockUid.split("-",2),n=parseInt(e[0]),t=e[1];return O.blockchain.block({block:n}).then(function(e){k.sigDate=e.medianTime,k.isMember||0===n||t===e.hash?!k.isMember&&k.requirements.expired&&(Ne({type:"error",message:"ERROR.WALLET_IDENTITY_EXPIRED",context:"requirements"}),console.debug("Identity expired for uid={0}.".format(k.uid))):(Ne({type:"error",message:"ERROR.WALLET_INVALID_BLOCK_HASH",context:"requirements"}),console.debug("Invalid membership for uid={0}: block hash changed".format(k.uid)))})["catch"](function(e){if(!e||e.ucode!=O.errorCodes.BLOCK_NOT_FOUND||0!==n)throw e;k.sigDate=Math.trunc((new Date).getTime()/1e3)})}})},oe=function(e){return v.load(k.pubkey,e).then(function(e){F(),angular.merge(k,e)})["catch"](function(e){throw F(),e})},re=function(){k.requirements.revoked?Ne({type:"warn",message:"ERROR.WALLET_REVOKED",context:"requirements"}):k.requirements.pendingRevocation?Ne({type:"pending",message:"INFO.REVOCATION_SENT_WAITING_PROCESS",context:"requirements"}):(k.requirements.pendingMembership?Ne({type:"pending",message:"ACCOUNT.WAITING_MEMBERSHIP",context:"requirements"}):!k.requirements.needSelf&&k.requirements.needMembership&&Ne({type:"warn",message:"ACCOUNT.NO_WAITING_MEMBERSHIP",context:"requirements"}),k.requirements.needCertificationCount>0&&Ne({type:"warn",message:"ACCOUNT.WAITING_CERTIFICATIONS",messageParams:k.requirements,context:"requirements"}),k.requirements.willNeedCertificationCount>0&&Ne({type:"warn",message:"ACCOUNT.WILL_MISSING_CERTIFICATIONS",messageParams:k.requirements,context:"requirements"}),k.requirements.needRenew?Ne({type:"warn",message:"ACCOUNT.WILL_NEED_RENEW_MEMBERSHIP",messageParams:k.requirements,context:"requirements"}):k.requirements.wasMember&&k.requirements.needMembership&&Ne({type:"warn",message:"ACCOUNT.NEED_RENEW_MEMBERSHIP",messageParams:k.requirements,context:"requirements"}))},se=function(){return e(function(e,n){O.wot.certifiedBy({pubkey:k.pubkey}).then(function(n){k.sigStock=n.certifications?n.certifications.reduce(function(e,n){return null===n.written?e:e+1},0):0,e()})["catch"](function(t){t&&t.ucode==O.errorCodes.NO_MATCHING_MEMBER?(k.sigStock=0,e()):n(t)})})},le=function(e){var n=!I.data.initPhase&&(!b.data.wallet||b.data.wallet.alertIfUnusedWallet)&&!k.loaded&&(!e||!e.minData);return w?w.then(function(){return Q(e)?k:de(e)}):(w=e&&e.minData?ue(e):e||k.loaded?de(e):ce(),w.then(function(){var e=J(),t=n&&!Z()&&angular.isDefined(e)&&e;return!t||s.loading.hide().then(function(){return s.alert.confirm("CONFIRM.LOGIN_UNUSED_WALLET","CONFIRM.LOGIN_UNUSED_WALLET_TITLE",{cancelText:"COMMON.BTN_CONTINUE",okText:"COMMON.BTN_RETRY"})}).then(function(e){return e?Y().then(function(){throw"RETRY"}):(b.data.wallet.alertIfUnusedWallet&&(b.data.wallet.alertIfUnusedWallet=!1,b.store()),!0)})}).then(function(e){if(w=null,e)return k;throw"CANCELLED"}))},ce=function(){return k.loaded=!1,e.all([ae(),oe(),se()]).then(function(){return re(),x.data.raisePromise.load(k)["catch"](function(e){console.error("[wallet] Error during load API extension point. Try to continue",e)})}).then(function(){return k.loaded=!0,k})["catch"](function(e){throw k.loaded=!1,e})},ue=function(n){return n=n||{},n.requirements=angular.isDefined(n.requirements)?n.requirements:!k.requirements||angular.isUndefined(k.requirements.needSelf),n.requirements?de(n).then(function(e){return e.loaded=!0,e}):e.when(k)},de=function(n){n=n||{requirements:!0,sources:!0,tx:{enable:!0,fromTime:k.tx?k.tx.fromTime:void 0},sigStock:!0,api:!0},n.requirements=angular.isDefined(n.requirements)?n.requirements:angular.isDefined(k.requirements.needSelf);var t=[];return n.requirements&&(Me("requirements"),t.push(ae().then(re))),(n.sources||n.tx&&n.tx.enable)&&t.push(oe(n.tx?n.tx.fromTime:void 0)),n.sigStock&&t.push(se()),(t.length?e.all(t):e.when()).then(function(){return x.data.raisePromise.load(k)}).then(function(){return k})},pe=function(n,t){return k.uid!=n||t&&k.blockUid!=t?k.loaded?(k.uid=n,k.blockUid=t,de({requirements:!0,sigStock:!0}).then(ne)):w?w.then(function(){return pe(n,t)}):e.when():e.when()},me=function(e,n){if(!n)return!0;if(e<Math.pow(10,n))return!1;var t="00000000"+e,i=parseInt(t.substring(t.length-n));return 0===i},Ee=function(e,n){var t=Math.pow(10,n);return e<t?0:Math.trunc(e/t)*t},ge=function(e,n){var t=Math.pow(10,n);return e<t?t:Math.trunc(e/t)*t},be=function(e,n){return n<=0?e:e*Math.pow(10,n)},he=function(e,n,t){angular.isUndefined(t)&&(t=n);var i=0,a=[],o=t,r=t;if(_.find(k.sources,function(n){return n.consumed||n.base!=t||(i+=be(n.amount,n.base),a.push(n)),i>=e}),i<e&&t>0){t-=1;var s=e-i,l=he(s,n,t);l.amount>0&&(o=l.minBase,i+=l.amount,[].push.apply(a,l.sources))}return{minBase:o,maxBase:r,amount:i,sources:a}},fe=function(n,i,r,l){return e.all([j(),I.get(),I.blockchain.current()]).then(function(e){var c=e[0],u=e[1],d=e[2];if(!O.regexp.PUBKEY.test(n))throw{message:"ERROR.INVALID_PUBKEY"};if(!O.regexp.COMMENT.test(r))throw{message:"ERROR.INVALID_COMMENT"};if(!$())throw{message:"ERROR.NEED_LOGIN_FIRST"};if(!i)throw{message:"ERROR.AMOUNT_REQUIRED"};if(i<=0)throw{message:"ERROR.AMOUNT_NEGATIVE"};i=Math.floor(i);var p={amount:0,minBase:d.unitbase,maxBase:d.unitbase+1,sources:[]},m=[];m.push("[wallet] amount="+i);for(var E=0;p.amount<i&&E<=d.unitbase;)p=he(i,d.unitbase),p.amount<i&&(E++,E<=d.unitbase&&(i=Ee(i,E),m.push("[wallet] inputs not found. Retrying with amount ="+i+" be compatible with amountBase="+E)));if(p.amount<i){if(k.balance<i)throw{message:"ERROR.NOT_ENOUGH_CREDIT"};if(0===p.amount)throw{message:"ERROR.ALL_SOURCES_USED"};return a("COMMON.UD").then(function(e){var n;return n=l?{amount:o("formatDecimal")(p.amount/u.currentUD),unit:e,subUnit:o("abbreviate")(u.name)}:{amount:o("formatDecimal")(p.amount/100),unit:o("abbreviate")(u.name),subUnit:""},a("ERROR.NOT_ENOUGH_SOURCES",n).then(function(e){throw{message:e}})})}return E<p.minBase&&!me(i,p.minBase)?(i=ge(i,p.minBase),console.debug("[wallet] Amount has been truncate to "+i),m.push("[wallet] Amount has been truncate to "+i)):E>0&&(console.debug("[wallet] Amount has been truncate to "+i),m.push("[wallet] Will use amount truncated to "+i+" (amountBase="+E+")")),_e(u,d,c,n,i,p,r,m).then(function(e){k.balance-=i,_.forEach(p.sources,function(e){e.consumed=!0}),e&&e.sources.length&&V(e.sources);var t={time:Math.floor(moment().utc().valueOf()/1e3),amount:-i,pubkey:n,comment:r,isUD:!1,hash:e.hash,locktime:0,block_number:null};return T.extendAll([t],"pubkey").then(function(){return k.tx.pendings.unshift(t),x.data.raise.balanceChanged(k),x.data.raise.newTx(k),{hash:e.hash}})})["catch"](function(e){if(e&&e.ucode===O.errorCodes.SOURCE_ALREADY_CONSUMED)return console.debug("[wallet] TX rejected by node with error [{0}]. Reloading sources then retry...".format(e.message||"Source already consumed")),t(oe,500).then(function(){return fe(n,i,r,l)});if(e&&e.ucode===O.errorCodes.TX_INPUTS_OUTPUTS_NOT_EQUAL){var a=b.data.plugins&&b.data.plugins.es&&b.data.plugins.es.enable;if(a)return s.loading.hide(),s.alert.confirm("CONFIRM.ISSUE_524_SEND_LOG","ERROR.POPUP_TITLE",{cssClass:"warning",okText:"COMMON.BTN_OK",cancelText:"COMMON.BTN_NO"}).then(function(e){if(e)return x.error.raise.send({title:"Issue #524 logs",content:"App version: "+g.version+"\nApp build: "+g.build+"\nLogs:\n\n"+m.join("\n")}),t(function(){throw{message:"ERROR.ISSUE_524_TX_FAILED"}},1500);throw{message:"ERROR.SEND_TX_FAILED"}})}throw e})})},_e=function(e,n,t,a,o,r,s,l){if(r.sources.length>M.TX_MAX_INPUTS_COUNT){console.debug("[Wallet] TX has to many sources. Will chain TX...");var c={minBase:n.unitbase,maxBase:0,amount:0,sources:r.sources.slice(0,M.TX_MAX_INPUTS_COUNT)};return _.forEach(c.sources,function(e){e.base<c.minBase&&(c.minBase=e.base),e.base>c.maxBase&&(c.maxBase=e.base),c.amount+=be(e.amount,e.base)}),_e(e,n,t,k.pubkey,c.amount,c,void 0,l).then(function(i){_.forEach(c.sources,function(e){e.consumed=!0}),V(i.sources);var u={minBase:n.unitbase,maxBase:0,amount:0,sources:r.sources.slice(M.TX_MAX_INPUTS_COUNT).concat(i.sources)};return _.forEach(u.sources,function(e){e.base<u.minBase&&(u.minBase=e.base),e.base>u.maxBase&&(u.maxBase=e.base),u.amount+=e.amount}),_e(e,n,t,a,o,u,s,l)})}var u="Version: "+M.TX_VERSION+"\nType: Transaction\nCurrency: "+e.name+"\nBlockstamp: "+n.number+"-"+n.hash+"\nLocktime: 0\nIssuers:\n"+k.pubkey+"\nInputs:\n";for(_.forEach(r.sources,function(e){u+=[e.amount,e.base,e.type,e.identifier,e.noffset].join(":")+"\n"}),u+="Unlocks:\n",i=0;i<r.sources.length;i++)u+=i+":SIG(0)\n";u+="Outputs:\n";var d,p=o,E=r.maxBase,g=0,b=[];if(a!==k.pubkey){for(;p>0;)d=Ee(p,E),p-=d,d>0&&(d=0===E?d:d/Math.pow(10,E),u+=d+":"+E+":SIG("+a+")\n",g++),E--;p=r.amount-o,E=r.maxBase}for(;p>0;)d=Ee(p,E),p-=d,d>0&&(d=0===E?d:d/Math.pow(10,E),u+=d+":"+E+":SIG("+k.pubkey+")\n",b.push({type:"T",noffset:g,amount:d,base:E}),g++),E--;return u+="Comment: "+(s||"")+"\n",l&&(a==k.pubkey?l.push("[wallet] Creating new TX, using inputs:\n - minBase: "+r.minBase+"\n - maxBase: "+r.maxBase):l.push("[wallet] Creating new TX, using inputs:\n - minBase: "+r.minBase+"\n - maxBase: "+r.maxBase+"\n - sources (=TX inputs):"),_.forEach(r.sources,function(e){l.push([e.amount,e.base,e.type,e.identifier,e.noffset].join(":"))}),l.push("\n[wallet] generated TX document (without signature) :\n------ START ------\n"+u+"------ END ------\n")),m.sign(u,t).then(function(e){var n=u+e+"\n";return O.tx.process({transaction:n})["catch"](function(e){if(!e||e.ucode!==O.errorCodes.TX_ALREADY_PROCESSED)throw e}).then(function(){return m.util.hash(n)}).then(function(e){return _.forEach(b,function(n){n.identifier=e,n.consumed=!1,n.pending=!0}),{tx:n,hash:e,sources:b}})})},Te=function(e,n,t,i){if(t=t||k.uid,i=i||k.blockUid,!t||!i)throw{message:"ERROR.WALLET_HAS_NO_SELF"};if(k.requirements&&k.requirements.expired)throw{message:"ERROR.WALLET_IDENTITY_EXPIRED"};var a="Version: "+M.IDTY_VERSION+"\nType: Identity\nCurrency: "+e.name+"\nIssuer: "+k.pubkey+"\nUniqueID: "+t+"\nTimestamp: "+i+"\n";return m.sign(a,n).then(function(e){return a+=e+"\n",console.debug("Has generate an identity document:\n----\n"+a+"----"),a})},ve=function(n,t){if(!O.regexp.USER_ID.test(n))return e.reject({message:"ERROR.INVALID_USER_ID"});var i;return e.all([j(),I.get(),I.blockchain.current()]).then(function(e){var t=e[0],a=e[1];return i=e[2],Te(a,t,n,i.number+"-"+i.hash)}).then(function(e){return O.wot.add({identity:e})}).then(function(){return t?ae():(k.uid=n,void(k.blockUid=i.number+"-"+i.hash))})["catch"](function(e){if(e&&e.ucode===O.errorCodes.IDENTITY_SANDBOX_FULL)throw{ucode:O.errorCodes.IDENTITY_SANDBOX_FULL,message:"ERROR.IDENTITY_SANDBOX_FULL"};throw e})},Ie=function(n){return function(){var i;return e.all([j(),I.blockchain.current()]).then(function(e){var t=e[0],a=e[1];return i="Version: "+M.MS_VERSION+"\nType: Membership\nCurrency: "+a.currency+"\nIssuer: "+k.pubkey+"\nBlock: "+a.number+"-"+a.hash+"\nMembership: "+(n?"IN":"OUT")+"\nUserID: "+k.uid+"\nCertTS: "+k.blockUid+"\n",m.sign(i,t)}).then(function(e){var n=i+e+"\n";return O.blockchain.membership({membership:n})}).then(function(){return t(function(){return ae()},1e3)}).then(re)}},Oe=function(n,t,i,a,o,r){return e.all([j(),I.get(),I.blockchain.current()]).then(function(e){var s=e[0],l=e[1],c=e[2],u="Version: "+M.CERT_VERSION+"\nType: Certification\nCurrency: "+l.name+"\nIssuer: "+k.pubkey+"\nIdtyIssuer: "+t+"\nIdtyUniqueID: "+n+"\nIdtyTimestamp: "+i+"\nIdtySignature: "+a+"\nCertTimestamp: "+c.number+"-"+c.hash+"\n";return m.sign(u,s).then(function(e){var n=u+e+"\n";return O.wot.certify({cert:n})}).then(function(){var e={pubkey:t,uid:n,time:c.medianTime,isMember:o,wasMember:r,expiresIn:l.parameters.sigWindow,pending:!0,block:c.number,valid:!0};return x.action.raise.certify(e),e})})},Ne=function(e,n){e=e||{},e.type=e.type||"info",e.message=e.message||"",e.messageParams=e.messageParams||{},e.context=e.context||"undefined",e.message.trim().length?n?k.events.splice(0,0,e):k.events.push(e):console.debug("Event without message. Skipping this event")},Re=function(e){var n=Math.round(e.answer.length/2),t=e.answer.substr(0,n),i=e.answer.substr(n);return m.scryptKeypair(t,i).then(function(n){return e.pubkey=m.util.encode_base58(n.signPk),e.keypair=n,e})},Ce=function(e){return Re(e).then(function(){return m.util.random_nonce()}).then(function(n){return e.nonce=n,m.box.pack(e.salt,e.nonce,e.keypair.boxPk,e.keypair.boxSk)}).then(function(n){return e.salt=n,m.box.pack(e.pwd,e.nonce,e.keypair.boxPk,e.keypair.boxSk)}).then(function(n){return e.pwd=n,e.nonce=m.util.encode_base58(e.nonce),e})},Ae=function(e){var n=m.util.decode_base58(e.cypherNonce);return Re(e).then(function(e){return m.box.open(e.cypherSalt,n,e.keypair.boxPk,e.keypair.boxSk)}).then(function(t){return e.salt=t,m.box.open(e.cypherPwd,n,e.keypair.boxPk,e.keypair.boxSk)}).then(function(n){return e.pwd=n,e})["catch"](function(e){console.warn("Incorrect answers - Unable to recover passwords")})},Se=function(e){var n="Version: 10 \nType: SaveID\nQuestions: \n"+e.questions+"Issuer: "+k.pubkey+"\nCrypted-Nonce: "+e.nonce+"\nCrypted-Pubkey: "+e.pubkey+"\nCrypted-Salt: "+e.salt+"\nCrypted-Pwd: "+e.pwd+"\n";return m.sign(n,k.keypair).then(function(e){return n+=e+"\n",console.debug("Has generate an SaveID document:\n----\n"+n+"----"),n})},ye=function(e){return Se(e).then(function(e){var n=new f([e],{type:"text/plain; charset=utf-8"});h.saveAs(n,"saveID.txt")})},De=function(){return e.all([j(),I.get()]).then(function(e){var n=e[0],t=e[1];return Te(t,n).then(function(e){var i=e.trim().split("\n"),a=i[i.length-1],o="Version: "+M.REVOKE_VERSION+"\nType: Revocation\nCurrency: "+t.name+"\nIssuer: "+k.pubkey+"\nIdtyUniqueID: "+k.uid+"\nIdtyTimestamp: "+k.blockUid+"\nIdtySignature: "+a+"\n";return m.sign(o,n).then(function(e){return o+=e+"\n",console.debug("Has generate an revocation document:\n----\n"+o+"----"),o})})})},Le=function(){return Me("revocation"),De().then(function(e){return O.wot.revoke({revocation:e})}).then(function(){return t(function(){return ae()},1e3)}).then(re)["catch"](function(e){if(!e||e.ucode!=O.errorCodes.REVOCATION_ALREADY_REGISTERED)throw e;Ne({type:"pending",message:"INFO.REVOCATION_SENT_WAITING_PROCESS",context:"requirements"},!0)})},Pe=function(n){return e.all([O.wot.revoke({revocation:n})]).then(function(e){return $()?t(function(){return ae()},1e3).then(re)["catch"](function(e){if(!e||e.ucode!=O.errorCodes.REVOCATION_ALREADY_REGISTERED)throw e;Ne({type:"pending",message:"INFO.REVOCATION_SENT_WAITING_PROCESS",context:"requirements"},!0)}):void Ne({type:"pending",message:"INFO.REVOCATION_SENT_WAITING_PROCESS",context:"requirements"},!0)})},we=function(){return e.all([I.get(),De()]).then(function(e){var n=e[0],t=e[1],i=new f([t],{type:"text/plain; charset=utf-8"});return a("ACCOUNT.SECURITY.REVOCATION_FILENAME",{uid:k.uid,currency:n.name,pubkey:k.pubkey}).then(function(e){h.saveAs(i,e)})})},Me=function(e){k.events=k.events.reduce(function(n,t){return t.context&&t.context==e?n:n.concat(t)},[])},ke=function(e){e=angular.isDefined(e)?e:e();var n=e&&b.data.keepAuthIdle>0&&b.data.keepAuthIdle!=b.constants.KEEP_AUTH_IDLE_SESSION,t=U!=n;t?(n?(console.debug("[wallet] Start idle (delay: {0}s)".format(b.data.keepAuthIdle)),c.setIdle(b.data.keepAuthIdle),c.watch()):U&&(console.debug("[wallet] Stop idle"),c.unwatch()),U=n):n&&c.getIdle()!==b.data.keepAuthIdle&&(console.debug("[idle] Updating auth idle (delay: {0}s)".format(b.data.keepAuthIdle)),c.setIdle(b.data.keepAuthIdle))};return x.registerEvent("data","init"),x.registerEvent("data","loginCheck"),x.registerEvent("data","login"),x.registerEvent("data","auth"),x.registerEvent("data","unauth"),x.registerEvent("data","load"),x.registerEvent("data","logout"),x.registerEvent("data","reset"),x.registerEvent("error","send"),x.registerEvent("data","balanceChanged"),x.registerEvent("data","newTx"),x.registerEvent("action","certify"),B(!0),{id:E,data:k,ready:C,start:y,stop:A,login:W,logout:Y,auth:K,unauth:q,isLogin:$,isAuth:z,getKeypair:j,hasSelf:X,setSelf:pe,isMember:function(){return k.isMember},isDataLoaded:Q,isNeverUsed:J,isNew:Z,isUserPubkey:ee,getData:ie,loadData:le,refreshData:de,transfer:fe,self:ve,revoke:Le,revokeWithFile:Pe,certify:Oe,downloadSaveId:ye,getCryptedId:Ce,recoverId:Ae,downloadRevocation:we,membership:{inside:Ie(!0),out:Ie(!1)},events:{add:Ne,cleanByContext:Me},api:x}}var N=O("default",E);return N.instance=O,N}]),angular.module("cesium.help.services",[]).constant("csHelpConstants",{wallet:{stepCount:4}}).factory("csHelp",["$rootScope","csSettings","UIUtils","csHelpConstants","$controller",function(e,n,t,i,a){"ngInject";function o(i,o){if(i||!e.tour&&n.data.helptip.enable&&!t.screen.isSmall()){var r=e.$new();return a(o||"HelpTipCtrl",{$scope:r}),r}}function r(e,t){if(e=angular.isDefined(e)?e:n.data.helptip.wallet,t=!!angular.isDefined(t)&&t,!(e<0||e>=i.wallet.stepCount)){var a=o(t);if(a)return a.tour=t,a.startWalletTour(e,!1).then(function(e){a.$destroy(),t||(n.data.helptip.wallet=e,n.store())})}}return{wallet:{tour:function(){return r(0,!0)},helptip:r}}}]),angular.module("cesium.plugin.services",[]).provider("PluginService",function(){"ngInject";var e=[],n={};this.registerEagerLoadingService=function(n){return e.push(n),this},this.extendState=function(e,t){return angular.isDefined(e)&&angular.isDefined(t)&&(n[e]||(n[e]=[]),n[e].push(t)),this},this.extendStates=function(e,n){var t=this;return e.forEach(function(e){t.extendState(e,n)}),this},this.$get=["$injector","$state",function(t,i){function a(){e.length>0&&_.forEach(e,function(e){t.get(e)})}function o(e){var t=_.keys(n).reduce(function(e,t){return i.includes(t)?e.concat(n[t]):e},[]);return t.reduce(function(n,t){return t.points&&t.points[e]?n.concat(t.points[e]):n},[])}function r(e){l=e}function s(){return l}var l;return{start:a,extensions:{points:{getActivesByName:o,current:{get:s,set:r}}}}}]}),angular.module("cesium.services",["cesium.settings.services","cesium.http.services","cesium.network.services","cesium.bma.services","cesium.crypto.services","cesium.utils.services","cesium.modal.services","cesium.storage.services","cesium.device.services","cesium.currency.services","cesium.wot.services","cesium.tx.services","cesium.wallet.services","cesium.help.services","cesium.plugin.services"]),Peer.prototype.regexp={BMA:/^BASIC_MERKLED_API[ ]?/,BMAS:/^BMAS[ ]?/,WS2P:/^WS2P[ ]?/,BMA_REGEXP:/^BASIC_MERKLED_API([ ]+([a-z_][a-z0-9-_.]*))?([ ]+([0-9.]+))?([ ]+([0-9a-f:]+))?([ ]+([0-9]+))$/,BMAS_REGEXP:/^BMAS([ ]+([a-z_][a-z0-9-_.]*))?([ ]+([0-9.]+))?([ ]+([0-9a-f:]+))?([ ]+([0-9]+))$/,WS2P_REGEXP:/^WS2P[ ]+([a-z0-9]+)([ ]+([a-z_][a-z0-9-_.]*))?([ ]+([0-9.]+))?([ ]+([0-9a-f:]+))?([ ]+([0-9]+))([ ]+([a-z0-9\/.&#!]+))?$/,LOCAL_IP_ADDRESS:/^127[.]0[.]0.|192[.]168[.]|10[.]0[.]0[.]|172[.]16[.]/},Peer.prototype.regex=Peer.prototype.regexp,Peer.prototype.keyID=function(){var e=this.bma||this.getBMA();return e.useBma?[this.pubkey||"Unknown",e.dns,e.ipv4,e.ipv6,e.port,e.useSsl,e.path].join("-"):[this.pubkey||"Unknown",e.ws2pid,e.path].join("-")},Peer.prototype.copyValues=function(e){var n=this;["version","currency","pub","endpoints","hash","status","statusTS","block","signature"].forEach(function(t){e[t]=n[t]})},Peer.prototype.copyValuesFrom=function(e){var n=this;["version","currency","pub","endpoints","block","signature"].forEach(function(t){n[t]=e[t]})},Peer.prototype.json=function(){var e=this,n={};return["version","currency","endpoints","status","block","signature"].forEach(function(t){n[t]=e[t]}),n.raw=this.raw&&this.getRaw(),n.pubkey=this.pubkey,n},Peer.prototype.getBMA=function(){if(this.bma)return this.bma;var e=null,n=this.regex.BMA_REGEXP;return this.endpoints.forEach(function(t){var i=!e&&n.exec(t);i&&(e={dns:i[2]||"",ipv4:i[4]||"",ipv6:i[6]||"",port:i[8]||80})}),e||{}},Peer.prototype.getEndpoints=function(e){return e?this.endpoints.reduce(function(n,t){return t.match(e)?n.concat(t):n},[]):this.endpoints},Peer.prototype.hasEndpoint=function(e){var n=this.regexp[e]||new RegExp("^"+e),t=this.getEndpoints(n);return!!t.length},Peer.prototype.getDns=function(){var e=this.bma||this.getBMA();return e.dns?e.dns:null},Peer.prototype.getIPv4=function(){var e=this.bma||this.getBMA();return e.ipv4?e.ipv4:null},Peer.prototype.getIPv6=function(){var e=this.bma||this.getBMA();return e.ipv6?e.ipv6:null},Peer.prototype.getPort=function(){var e=this.bma||this.getBMA();return e.port?e.port:null},Peer.prototype.getHost=function(){var e=this.bma||this.getBMA();return(443==e.port||e.useSsl)&&e.dns?e.dns:this.hasValid4(e)?e.ipv4:e.dns?e.dns:e.ipv6?"["+e.ipv6+"]":""},Peer.prototype.getURL=function(){var e=this.bma||this.getBMA(),n=this.getHost(),t=443==e.port||e.useSsl?"https":"http";return t+"://"+n+(e.port?":"+e.port:"")},Peer.prototype.getServer=function(){var e=this.bma||this.getBMA(),n=this.getHost();return n+(n&&e.port?":"+e.port:"")},Peer.prototype.hasValid4=function(e){return!(!e.ipv4||e.ipv4.match(this.regexp.LOCAL_IP_ADDRESS))},Peer.prototype.isReachable=function(){return!!this.getServer()},Peer.prototype.isSsl=function(){var e=this.bma||this.getBMA();return e.useSsl},Peer.prototype.isTor=function(){var e=this.bma||this.getBMA();return e.useTor},Peer.prototype.isWs2p=function(){var e=this.bma||this.getBMA();return e.useWs2p},Block.prototype.isEmpty=function(){"use strict";return!(this.transactionsCount||this.certificationsCount||this.joinersCount||this.dividend||this.activesCount||this.identitiesCount||this.leaversCount||this.excludedCount||this.revokedCount)},Block.prototype.parseData=function(){this.identities=this.parseArrayValues(this.identities,["pubkey","signature","buid","uid"]),this.joiners=this.parseArrayValues(this.joiners,["pubkey","signature","mBuid","iBuid","uid"]),this.actives=this.parseArrayValues(this.actives,["pubkey","signature","mBuid","iBuid","uid"]),this.leavers=this.parseArrayValues(this.leavers,["pubkey","signature","mBuid","iBuid","uid"]),this.revoked=this.parseArrayValues(this.revoked,["pubkey","signature"]),this.excluded=this.parseArrayValues(this.excluded,["pubkey"]),this.certifications=this.parseArrayValues(this.certifications,["from","to","block","signature"]),this.transactions=this.parseTransactions(this.transactions),delete this.raw},Block.prototype.cleanData=function(){delete this.identities,
delete this.joiners,delete this.actives,delete this.leavers,delete this.revoked,delete this.excluded,delete this.certifications,delete this.transactions,delete this.raw},Block.prototype.parseArrayValues=function(e,n){return e&&e.length?e.reduce(function(e,t){var i=t.split(":");if(i.length!=n.length)return console.debug("[block] Bad format for '{0}': [{1}]. Expected {1} parts. Skipping".format(arrayProperty,t,n.length)),e;for(var a={},o=0;o<n.length;o++)a[n[o]]=i[o];return e.concat(a)},[]):[]},Block.prototype.regexp={TX_OUTPUT_SIG:exact("SIG\\(([0-9a-zA-Z]{43,44})\\)")},Block.prototype.parseTransactions=function(e){return e&&e.length?e.reduce(function(e,n){var t={issuers:n.issuers,time:n.time};return t.outputs=n.outputs.reduce(function(e,t){var i=t.split(":");if(3!=i.length)return console.debug("[block] Bad format a 'transactions': [{0}]. Expected 3 parts. Skipping".format(t)),e;var a=i[0],o=i[1],r=i[2],s=Block.prototype.regexp.TX_OUTPUT_SIG.exec(i[2]);if(s){var l=s[1];return n.issuers&&n.issuers.indexOf(l)==-1?e.concat({amount:o<=0?a:a*Math.pow(10,o),unitbase:o,pubkey:l}):e}return e.concat({amount:o<=0?a:a*Math.pow(10,o),unitbase:o,unlockCondition:r})},[]),t.error||t.outputs.length||(t.toHimself=!0),e.concat(t)},[]):[]},Ws2pMessage.prototype.regexp={WS2P_PREFIX:/^WS2P(?:O([CT][SAM]))?(?:I([CT]))?$/},AppController.$inject=["$scope","$rootScope","$state","$ionicSideMenuDelegate","$q","$timeout","$ionicHistory","$controller","$window","csPlatform","UIUtils","BMA","csWallet","Device","Modals","csConfig","csHttp"],HomeController.$inject=["$scope","$state","$timeout","$ionicHistory","csPlatform","csCurrency"],PluginExtensionPointController.$inject=["$scope","PluginService"],angular.module("cesium.app.controllers",["cesium.platform","cesium.services"]).config(["$stateProvider","$urlRouterProvider",function(e,n){"ngInject";e.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl",data:{large:!1}}).state("app.home",{url:"/home?error",views:{menuContent:{templateUrl:"templates/home/home.html",controller:"HomeCtrl"}}}).state("app.lock",{cache:!1,url:"/lock",views:{menuContent:{templateUrl:"templates/common/view_passcode.html",controller:"PassCodeCtrl"}}}),n.otherwise("/app/home")}]).controller("AppCtrl",AppController).controller("HomeCtrl",HomeController).controller("PluginExtensionPointCtrl",PluginExtensionPointController),JoinController.$inject=["$timeout","Modals"],JoinChooseAccountTypeModalController.$inject=["$scope","$state","Modals","UIUtils","csCurrency"],JoinModalController.$inject=["$scope","$state","$interval","$timeout","Device","UIUtils","CryptoUtils","csSettings","Modals","csWallet","BMA","parameters"],angular.module("cesium.join.controllers",["cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.join",{url:"/join",views:{menuContent:{templateUrl:"templates/home/home.html",controller:"JoinCtrl"}}})}]).controller("JoinCtrl",JoinController).controller("JoinChooseAccountTypeModalCtrl",JoinChooseAccountTypeModalController).controller("JoinModalCtrl",JoinModalController),LoginModalController.$inject=["$scope","$timeout","$q","$ionicPopover","CryptoUtils","UIUtils","BMA","Modals","csSettings","Device","parameters"],AuthController.$inject=["$scope","$controller"],angular.module("cesium.login.controllers",["cesium.services"]).controller("LoginModalCtrl",LoginModalController).controller("AuthCtrl",AuthController),HelpController.$inject=["$scope","$state","$timeout","$anchorScroll","csSettings"],HelpModalController.$inject=["$scope","$timeout","$anchorScroll","csSettings","parameters"],HelpTipController.$inject=["$scope","$state","$window","$ionicSideMenuDelegate","$timeout","$q","$anchorScroll","UIUtils","csConfig","csSettings","csCurrency","csHelpConstants","Device","csWallet"],HelpTourController.$inject=["$scope"],angular.module("cesium.help.controllers",["cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.help_tour",{url:"/tour",views:{menuContent:{templateUrl:"templates/home/home.html",controller:"HelpTourCtrl"}}}).state("app.help",{url:"/help?anchor",views:{menuContent:{templateUrl:"templates/help/view_help.html",controller:"HelpCtrl"}}}).state("app.help_anchor",{url:"/help/:anchor",views:{menuContent:{templateUrl:"templates/help/view_help.html",controller:"HelpCtrl"}}})}]).controller("HelpCtrl",HelpController).controller("HelpModalCtrl",HelpModalController).controller("HelpTipCtrl",HelpTipController).controller("HelpTourCtrl",HelpTourController),WalletController.$inject=["$scope","$rootScope","$q","$ionicPopup","$timeout","$state","$translate","$ionicPopover","UIUtils","Modals","BMA","csConfig","csSettings","csWallet","csHelp"],WalletTxController.$inject=["$scope","$ionicPopover","$state","$timeout","$location","UIUtils","Modals","BMA","csSettings","csWallet","csTx"],WalletTxErrorController.$inject=["$scope","UIUtils","csWallet"],WalletSecurityModalController.$inject=["$scope","UIUtils","csWallet","$translate"],angular.module("cesium.wallet.controllers",["cesium.services","cesium.currency.controllers"]).config(["$stateProvider",function(e){"ngInject";e.state("app.view_wallet",{url:"/wallet?refresh",views:{menuContent:{templateUrl:"templates/wallet/view_wallet.html",controller:"WalletCtrl"}},data:{login:!0}}).state("app.view_wallet_tx",{url:"/history?refresh",views:{menuContent:{templateUrl:"templates/wallet/view_wallet_tx.html",controller:"WalletTxCtrl"}},data:{login:!0,silentLocationChange:!0}}).state("app.view_wallet_tx_errors",{url:"/wallet/tx/errors",views:{menuContent:{templateUrl:"templates/wallet/view_wallet_tx_error.html",controller:"WalletTxErrorCtrl"}},data:{login:!0}})}]).controller("WalletCtrl",WalletController).controller("WalletTxCtrl",WalletTxController).controller("WalletTxErrorCtrl",WalletTxErrorController).controller("WalletSecurityModalCtrl",WalletSecurityModalController),WotLookupController.$inject=["$scope","$state","$q","$timeout","$focus","$location","$ionicPopover","$ionicHistory","UIUtils","csConfig","csCurrency","csSettings","Device","BMA","csWallet","csWot"],WotLookupModalController.$inject=["$scope","$controller","$focus","parameters"],WotIdentityAbstractController.$inject=["$scope","$rootScope","$state","$translate","$ionicHistory","UIUtils","Modals","csConfig","csCurrency","csWot","csWallet"],WotIdentityViewController.$inject=["$scope","$rootScope","$controller","$timeout","UIUtils","csWallet"],WotIdentityTxViewController.$inject=["$scope","$timeout","$q","BMA","csSettings","csWot","csTx","UIUtils"],WotCertificationsViewController.$inject=["$scope","$rootScope","$controller","csSettings","csWallet","UIUtils"],WotSelectPubkeyIdentityModalController.$inject=["$scope","$q","csWot","parameters"],angular.module("cesium.wot.controllers",["cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.wot_lookup",{url:"/wot","abstract":!0,enableBack:!1,views:{menuContent:{templateUrl:"templates/wot/lookup.html"}}}).state("app.wot_lookup.tab_search",{url:"/search?q&type&hash",views:{tab:{templateUrl:"templates/wot/tabs/tab_lookup.html",controller:"WotLookupCtrl"}},data:{silentLocationChange:!0,large:"app.wot_lookup_lg"}}).state("app.wot_lookup_lg",{url:"/wot/lg?q&type&hash",views:{menuContent:{templateUrl:"templates/wot/lookup_lg.html",controller:"WotLookupCtrl"}},data:{silentLocationChange:!0}}).state("app.wot_identity",{url:"/wot/:pubkey/:uid?action",views:{menuContent:{templateUrl:"templates/wot/view_identity.html",controller:"WotIdentityViewCtrl"}}}).state("app.wot_identity_uid",{url:"/lookup/:uid?action",views:{menuContent:{templateUrl:"templates/wot/view_identity.html",controller:"WotIdentityViewCtrl"}}}).state("app.wot_identity_tx_uid",{url:"/wot/tx/:pubkey/:uid?action",views:{menuContent:{templateUrl:"templates/wot/view_identity_tx.html",controller:"WotIdentityTxViewCtrl"},data:{large:"app.wot_identity_tx_uid_lg"}}}).state("app.wot_identity_tx_uid_lg",{url:"/wot/tx/lg/:pubkey/:uid?action",views:{menuContent:{templateUrl:"templates/wot/view_identity_tx.html",controller:"WotIdentityTxViewCtrl"}}}).state("app.wot_cert",{url:"/wot/:pubkey/:uid/:type",views:{menuContent:{templateUrl:"templates/wot/view_certifications.html",controller:"WotCertificationsViewCtrl"}},data:{large:"app.wot_cert_lg"}}).state("app.wot_cert_lg",{url:"/wot/cert/lg/:pubkey/:uid",views:{menuContent:{templateUrl:"templates/wot/view_certifications.html",controller:"WotCertificationsViewCtrl"}}}).state("app.wallet_cert",{url:"/wallet/cert/:type",views:{menuContent:{templateUrl:"templates/wot/view_certifications.html",controller:"WotCertificationsViewCtrl"}},data:{large:"app.wallet_cert_lg"}}).state("app.wallet_cert_lg",{url:"/wallet/cert/lg",views:{menuContent:{templateUrl:"templates/wot/view_certifications.html",controller:"WotCertificationsViewCtrl"}}})}]).controller("WotLookupCtrl",WotLookupController).controller("WotLookupModalCtrl",WotLookupModalController).controller("WotIdentityAbstractCtrl",WotIdentityAbstractController).controller("WotIdentityViewCtrl",WotIdentityViewController).controller("WotIdentityTxViewCtrl",WotIdentityTxViewController).controller("WotCertificationsViewCtrl",WotCertificationsViewController).controller("WotSelectPubkeyIdentityModalCtrl",WotSelectPubkeyIdentityModalController),NetworkLookupController.$inject=["$scope","$state","$location","$ionicPopover","$window","$translate","BMA","UIUtils","csConfig","csSettings","csCurrency","csNetwork","csWot"],PeerViewController.$inject=["$scope","$q","$window","$state","UIUtils","csWot","BMA"],NetworkLookupModalController.$inject=["$scope","$controller","parameters"],NetworkLookupPopoverController.$inject=["$scope","$controller"],PeerInfoPopoverController.$inject=["$scope","$q","csSettings","csCurrency","csHttp","BMA"],angular.module("cesium.network.controllers",["cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.network",{url:"/network?type&expert",cache:!1,views:{menuContent:{templateUrl:"templates/network/view_network.html",controller:"NetworkLookupCtrl"}},data:{silentLocationChange:!0}}).state("app.view_peer",{url:"/network/peer/:server?ssl&tor",cache:!1,views:{menuContent:{templateUrl:"templates/network/view_peer.html",controller:"PeerViewCtrl"}},data:{preferHttp:!0}})}]).controller("NetworkLookupCtrl",NetworkLookupController).controller("PeerViewCtrl",PeerViewController).controller("NetworkLookupModalCtrl",NetworkLookupModalController).controller("NetworkLookupPopoverCtrl",NetworkLookupPopoverController).controller("PeerInfoPopoverCtrl",PeerInfoPopoverController),CurrencyViewController.$inject=["$scope","$q","$timeout","$ionicPopover","Modals","BMA","UIUtils","csSettings","csCurrency","csNetwork","ModalUtils"],CurrencyLicenseModalController.$inject=["$scope","$http","UIUtils","csSettings","FileSaver"],angular.module("cesium.currency.controllers",["ngFileSaver","cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.currency",{url:"/currency",views:{menuContent:{templateUrl:"templates/currency/view_currency.html",controller:"CurrencyViewCtrl"}},data:{large:"app.currency_lg"}}).state("app.currency.tab_parameters",{url:"/parameters",views:{"tab-parameters":{templateUrl:"templates/currency/tabs/tab_parameters.html"}}}).state("app.currency.tab_wot",{url:"/community",views:{"tab-wot":{templateUrl:"templates/currency/tabs/tab_wot.html"}}}).state("app.currency.tab_network",{url:"/network",views:{"tab-network":{templateUrl:"templates/currency/tabs/tab_network.html",controller:"NetworkLookupCtrl"}}}).state("app.currency.tab_blocks",{url:"/blocks",views:{"tab-blocks":{templateUrl:"templates/currency/tabs/tab_blocks.html",controller:"BlockLookupCtrl"}}}).state("app.currency_lg",{url:"/currency/lg",cache:!1,views:{menuContent:{templateUrl:"templates/currency/view_currency_lg.html",controller:"CurrencyViewCtrl"}}})}]).controller("CurrencyViewCtrl",CurrencyViewController).controller("CurrencyLicenseModalCtrl",CurrencyLicenseModalController),TransferController.$inject=["$scope","$controller","Device","UIUtils","csWot","csWallet"],TransferModalController.$inject=["$scope","$q","$translate","$timeout","$filter","$focus","Device","BMA","csWallet","UIUtils","Modals","csCurrency","csSettings","parameters"],angular.module("cesium.transfer.controllers",["cesium.services","cesium.currency.controllers"]).config(["$stateProvider",function(e){"ngInject";e.state("app.new_transfer",{cache:!1,url:"/transfer?amount&udAmount&comment",views:{menuContent:{templateUrl:"templates/wallet/new_transfer.html",controller:"TransferCtrl"}}}).state("app.new_transfer_pubkey_uid",{cache:!1,url:"/transfer/:pubkey/:uid?amount&udAmount&comment",views:{menuContent:{templateUrl:"templates/wallet/new_transfer.html",controller:"TransferCtrl"}}}).state("app.new_transfer_pubkey",{cache:!1,url:"/transfer/:pubkey?amount&udAmount&comment",views:{menuContent:{templateUrl:"templates/wallet/new_transfer.html",controller:"TransferCtrl"}}})}]).controller("TransferCtrl",TransferController).controller("TransferModalCtrl",TransferModalController),SettingsController.$inject=["$scope","$q","$ionicHistory","$ionicPopup","$timeout","$translate","csHttp","UIUtils","BMA","csSettings","csPlatform","$ionicPopover","Modals"],angular.module("cesium.settings.controllers",["cesium.services","cesium.currency.controllers"]).config(["$stateProvider",function(e){"ngInject";e.state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"templates/settings/settings.html",controller:"SettingsCtrl"}}})}]).controller("SettingsCtrl",SettingsController),BlockLookupController.$inject=["$scope","$timeout","$focus","$filter","$state","$anchorScroll","UIUtils","BMA","csCurrency","csWot","csSettings"],BlockViewController.$inject=["$scope","$ionicPopover","$state","UIUtils","BMA","csCurrency","csWot"],angular.module("cesium.blockchain.controllers",["cesium.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.blockchain",{url:"/blockchain",views:{menuContent:{templateUrl:"templates/blockchain/lookup.html",controller:"BlockLookupCtrl"}},data:{large:"app.blockchain_lg"}}).state("app.blockchain_lg",{url:"/blockchain/lg",views:{menuContent:{templateUrl:"templates/blockchain/lookup_lg.html",controller:"BlockLookupCtrl"}}}).state("app.server_blockchain",{url:"/network/peer/:server/blockchain?ssl&tor",views:{menuContent:{templateUrl:"templates/blockchain/lookup.html",controller:"BlockLookupCtrl"}},data:{large:"app.server_blockchain_lg"}}).state("app.server_blockchain_lg",{url:"/network/peer/:server/blockchain/lg?ssl&tor",views:{menuContent:{templateUrl:"templates/blockchain/lookup_lg.html",controller:"BlockLookupCtrl"}}}).state("app.view_block",{url:"/block/:number",views:{menuContent:{templateUrl:"templates/blockchain/view_block.html",controller:"BlockViewCtrl"}}}).state("app.view_block_hash",{url:"/block/:number/:hash",views:{menuContent:{templateUrl:"templates/blockchain/view_block.html",controller:"BlockViewCtrl"}}}).state("app.view_server_block_hash",{url:"/network/peer/:server/block/:number/:hash?ssl&tor",views:{menuContent:{templateUrl:"templates/blockchain/view_block.html",controller:"BlockViewCtrl"}}})}]).controller("BlockLookupCtrl",BlockLookupController).controller("BlockViewCtrl",BlockViewController),angular.module("cesium.controllers",["cesium.app.controllers","cesium.join.controllers","cesium.login.controllers","cesium.help.controllers","cesium.wallet.controllers","cesium.currency.controllers","cesium.wot.controllers","cesium.transfer.controllers","cesium.settings.controllers","cesium.network.controllers","cesium.blockchain.controllers"]),angular.module("cesium.templates",[]).run(["$templateCache",function(e){e.put("templates/menu.html",'<ion-side-menus enable-menu-with-back-views="true" bind-notifier="{locale:$root.settings.locale.id}">\n  <!-- HEADER -->\n  <ion-side-menu-content>\n    <ion-nav-bar class="bar-dark" title-align="left">\n      <ion-nav-back-button class="no-text">\n      </ion-nav-back-button>\n\n      <ion-nav-buttons side="left">\n        <button class="button button-icon button-clear icon ion-navicon visible-nomenu" menu-toggle="left"></button>\n      </ion-nav-buttons>\n      <ion-nav-buttons side="right">\n\n        <!-- current node info -->\n        <button class="button button-clear hidden-xs hidden-sm gray icon-left" ng-if="$root.settings.expertMode" style="max-width: 450px !important" ng-click="showNodeListPopover($event)">\n          <small class="ion-locked" ng-if="$root.currency.node.useSsl">&nbsp;</small>\n          {{$root.currency.node.host}}{{$root.currency.node.port != 80 && $root.currency.node.port != 443 ? \':\'+$root.currency.node.port : \'\'}}\n          <small>&nbsp;</small>\n          <small class="ion-arrow-down-b"></small>\n        </button>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="nav-buttons-right"></cs-extension-point>\n\n        <!-- profile -->\n        <a id="helptip-header-bar-btn-profile" class="button button-icon button-clear hidden-xs hidden-sm" ng-click="showProfilePopover($event)">\n          <i class="avatar avatar-member" ng-if="!$root.walletData.avatar" ng-class="{\'disable\': !login, \'royal-bg\': login}">\n          </i>\n          <i class="avatar" ng-if="$root.walletData.avatar" style="background-image: url(\'{{$root.walletData.avatar.src}}\')">\n          </i>\n          <span ng-if="login && !auth" class="badge badge-button badge-secondary badge-assertive ion-locked"> </span>\n        </a>\n      </ion-nav-buttons>\n    </ion-nav-bar>\n    <ion-nav-view name="menuContent"></ion-nav-view>\n  </ion-side-menu-content>\n\n  <!-- MENU -->\n  <ion-side-menu id="menu" side="left" expose-aside-when="large" enable-menu-with-back-views="false" width="225">\n    <ion-header-bar>\n      <h1 class="title dark hidden-sm hidden-xs">\n        <span class="animate-fade-in animate-show-hide ng-hide" ng-show="$root.currency.name">\n          {{:locale:\'COMMON.APP_NAME\'|translate}} {{$root.currency.name|abbreviate}}\n        </span>\n      </h1>\n\n      <div class="visible-sm visible-xs hero">\n        <div class="content">\n          <i class="avatar avatar-member hero-icon" ng-if="!$root.walletData.avatar" ng-class="{\'royal-bg\': login, \'stable-bg\': !login}" ng-click="!login ? showHome() : loginAndGo()" menu-close></i>\n          <a class="avatar hero-icon" ng-if="$root.walletData.avatar" style="background-image: url(\'{{$root.walletData.avatar.src}}\')" ui-sref="app.view_wallet" menu-close></a>\n          <h4 ng-if="login">\n            <a class="light" ui-sref="app.view_wallet" menu-close>\n              {{$root.walletData.name||$root.walletData.uid}}\n              <span ng-if="!$root.walletData.name && !$root.walletData.uid"><i class="icon ion-key"></i>&nbsp;{{$root.walletData.pubkey|formatPubkey}}</span>\n            </a>\n          </h4>\n          <h4 ng-if="!login">\n            <a class="light" ui-sref="app.home" menu-close>\n              {{\'COMMON.BTN_LOGIN\'|translate}}\n              <i class="ion-arrow-right-b"></i>\n            </a>\n          </h4>\n          <cs-extension-point name="menu-profile-user"></cs-extension-point>\n        </div>\n        <!-- logout -->\n        <a ng-if="login" class="button-icon" ng-click="logout({askConfirm: true})" style="position: absolute; top: 5px; left: 5px">\n          <i class="icon stable ion-android-exit"></i>\n        </a>\n      </div>\n    </ion-header-bar>\n\n    <ion-content scroll="false">\n      <ion-list class="list">\n\n        <!-- DISCOVER Section -->\n        <ion-item menu-close class="item-icon-left hidden-xs" ui-sref="app.home" active-link="active">\n          <i class="icon ion-home"></i>\n          {{:locale:\'MENU.HOME\'|translate}}\n        </ion-item>\n\n        <a menu-close class="item item-icon-left" active-link="active" active-link-path-prefix="#/app/currency" ui-sref="app.currency">\n          <i class="icon ion-ios-world-outline"></i>\n          {{:locale:\'MENU.CURRENCY\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-currency"></a>\n\n        <a menu-close class="item item-icon-left hidden-xs hidden-sm" active-link="active" active-link-path-prefix="#/app/network" ui-sref="app.network">\n          <i class="icon ion-cloud"></i>\n          {{:locale:\'MENU.NETWORK\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-network"></a>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="menu-discover"></cs-extension-point>\n\n        <!-- MAIN Section -->\n        <div class="item item-divider"></div>\n\n        <a menu-close class="item item-icon-left" active-link="active" active-link-path-prefix="#/app/wot" ui-sref="app.wot_lookup.tab_search">\n          <i class="icon ion-person-stalker"></i>\n          {{:locale:\'MENU.WOT\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-wot"></a>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="menu-main"></cs-extension-point>\n\n        <!-- USER Section -->\n        <div class="item item-divider"></div>\n\n        <a menu-close class="item item-icon-left" active-link="active" active-link-path-prefix="#/app/wallet" ui-sref="app.view_wallet" ng-class="{\'item-menu-disable\': !login}">\n          <i class="icon ion-person"></i>\n          {{:locale:\'MENU.ACCOUNT\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-account"></a>\n\n        <a menu-close class="item item-icon-left" active-link="active" active-link-path-prefix="#/app/history" ui-sref="app.view_wallet_tx" ng-class="{\'item-menu-disable\': !login}">\n          <i class="icon ion-card"></i>\n          {{:locale:\'MENU.TRANSACTIONS\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-tx"></a>\n\n        <div class="item item-divider visible-xs visible-sm"></div>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="menu-user"></cs-extension-point>\n\n        <a menu-close class="item item-icon-left visible-xs visible-sm" active-link="active" active-link-path-prefix="#/app/settings" ui-sref="app.settings">\n          <i class="icon ion-android-settings"></i>\n          {{:locale:\'MENU.SETTINGS\'|translate}}\n        </a>\n        <a id="helptip-menu-btn-settings"></a>\n\n        <!-- actions divider -->\n        <div class="item item-divider" ng-if="login"></div>\n\n        <!-- transfer -->\n        <ion-item menu-close class="item item-button-right hidden-xs hidden-sm" ng-if="login">\n          {{:locale:\'MENU.TRANSFER\'|translate}}\n          <button class="button button-positive ink-dark" ng-click="showTransferModal()">\n          <i class="icon ion-paper-airplane"></i>\n          </button>\n        </ion-item>\n\n        <!-- scan QR code -->\n        <ion-item menu-close class="item item-button-right" ng-if="$root.device.barcode.enable">\n          {{:locale:\'MENU.SCAN\'|translate}}\n          <button class="button button-stable ink" ng-click="scanQrCodeAndGo()">\n            <i class="icon ion-qr-scanner"></i>\n          </button>\n        </ion-item>\n\n        <cs-extension-point name="menu-actions"></cs-extension-point>\n\n      </ion-list>\n\n    </ion-content>\n\n    <!-- removeIf(device) -->\n    <ion-footer-bar class="bar-stable footer hidden-xs hidden-sm">\n      <a class="pull-left icon-help" menu-toggle="left" title="{{:locale:\'HOME.BTN_HELP\'|translate}}" ui-sref="app.help"></a>\n\n      <a class="title gray" ng-click="showAboutModal()">\n\n        <!-- version -->\n        <span title="{{:locale:\'HOME.BTN_ABOUT\'|translate}}" ng-class="{\'assertive\': $root.newRelease}">\n          <!-- warning icon, if new version available -->\n          <i ng-if="$root.newRelease" class="ion-alert-circled assertive"></i>\n\n          {{:locale:\'COMMON.APP_VERSION\'|translate:{version: config.version} }}\n        </span>\n        |\n        <!-- about -->\n        <span title="{{:locale:\'HOME.BTN_ABOUT\'|translate}}">\n          {{:locale:\'HOME.BTN_ABOUT\'|translate}}\n        </span>\n      </a>\n\n\n    </ion-footer-bar>\n    <!-- endRemoveIf(device) -->\n  </ion-side-menu>\n\n\n</ion-side-menus>\n'),e.put("templates/modal_about.html",'<ion-modal-view class="about">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CLOSE\n    </button>\n    <h1 class="title" translate>ABOUT.TITLE</h1>\n  </ion-header-bar>\n\n  <ion-content class="text-center" scroll="true">\n\n    <ion-list class="item-wrap-text">\n      <ion-item class="item-icon-left item-text-wrap">\n        {{\'COMMON.APP_NAME\'|translate}}&nbsp;<b>{{\'COMMON.APP_VERSION\'|translate:$root.config}}</b>\n        <i ng-if="$root.newRelease" class="assertive ion-alert-circled"></i>\n        <h3 ng-if="$root.config.build" class="gray">{{\'COMMON.APP_BUILD\'|translate:$root.config}}</h3>\n        <span translate>ABOUT.LICENSE</span>\n      </ion-item>\n\n      <!-- new version -->\n      <ion-item class="item-icon-left" ng-if="$root.newRelease">\n        <i class="item-image icon ion-alert-circled assertive"></i>\n\n        <span ng-if="!$root.device.isWeb()" ng-bind-html="\'ABOUT.PLEASE_UPDATE\' | translate:$root.newRelease "></span>\n        <span ng-if="$root.device.isWeb()" ng-bind-html="\'ABOUT.LATEST_RELEASE\' | translate:$root.newRelease "></span>\n\n        <!-- link to release page -->\n        <h3 ng-if="!$root.device.enable">\n          <a ng-click="openLink($event, $root.newRelease.url)" translate>{{::$root.newRelease.url}}</a>\n        </h3>\n      </ion-item>\n\n      <!-- report issue -->\n      <ion-item class="item-icon-left item-text-wrap">\n        <i class="item-image icon ion-bug"></i>\n        <span translate>ABOUT.PLEASE_REPORT_ISSUE</span>\n        <h3>\n          <a ng-click="openLink($event, $root.settings.newIssueUrl)" translate>ABOUT.REPORT_ISSUE</a>\n        </h3>\n      </ion-item>\n\n\n      <!-- source code -->\n      <ion-item class="item-icon-left">\n        <i class="item-image icon ion-network"></i>\n        {{\'ABOUT.CODE\' | translate}}\n        <h3><a ng-click="openLink($event, \'https://git.duniter.org/clients/cesium/cesium\')">https://git.duniter.org/clients/cesium/cesium</a></h3>\n      </ion-item>\n\n      <!-- forum -->\n      <ion-item class="item-icon-left">\n        <i class="item-image icon ion-chatbubbles"></i>\n        {{\'ABOUT.FORUM\' | translate}}\n        <h3><a ng-click="openLink($event, $root.settings.userForumUrl)">{{::$root.settings.userForumUrl}}</a></h3>\n      </ion-item>\n\n      <!-- team -->\n      <ion-item class="item-icon-left">\n        <i class="item-image icon ion-person-stalker"></i>\n        {{\'ABOUT.DEVELOPERS\' | translate}}\n        <h3>\n          <a href="https://github.com/c-geek" target="_system">cgeek</a>,\n          <a href="https://github.com/devingfx" target="_system">DiG</a>,\n          <a href="https://github.com/blavenie" target="_system">Benoit Lavenier</a>\n        </h3>\n      </ion-item>\n\n      <div class="padding hidden-xs text-center">\n        <button class="button button-stable icon-left ink" type="submit" ng-click="closeModal()" ui-sref="app.help">\n          <i class="icon ion-ios-help-outline"></i>\n          {{\'HOME.BTN_HELP\' | translate}}\n        </button>\n\n        <button class="button button-positive ink" type="submit" ng-click="closeModal()">\n          {{\'COMMON.BTN_CLOSE\' | translate}}\n        </button>\n      </div>\n\n    \n  </ion-list></ion-content>\n</ion-modal-view>\n'),e.put("templates/api/doc.html",'\n\n  <!-- transfer -->\n  <h2 class="padding" translate>API.DOC.TRANSFER.TITLE</h2>\n\n\n  <div class="list padding no-padding-xs no-padding-top">\n\n    <div class="item item-divider no-border">\n      <p translate>API.DOC.DESCRIPTION_DIVIDER</p>\n    </div>\n\n    <div class="item item-text-wrap">\n      <p translate>API.DOC.TRANSFER.DESCRIPTION</p>\n    </div>\n\n    <div class="item item-divider no-border">\n      <p translate>API.DOC.URL_DIVIDER</p>\n    </div>\n\n    <div class="item item-text-wrap">\n      <p class="gray text-right">\n        {{$root.rootPath}}#/v1/payment/:pubkey?amount=<span class="text-italic" translate>API.DOC.TRANSFER.PARAM_AMOUNT</span>\n      </p>\n    </div>\n\n    <div class="item item-divider no-border">\n      <p translate>API.DOC.PARAMETERS_DIVIDER</p>\n    </div>\n\n    <div class="item item-text-wrap">\n      <p translate>API.DOC.AVAILABLE_PARAMETERS</p>\n      <div class="row">\n        <div class="col col-20 text-italic">pubkey</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_PUBKEY_HELP</div>\n      </div>\n      <div class="row stable-bg">\n        <div class="col col-20 text-italic dark">amount</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_AMOUNT_HELP</div>\n      </div>\n      <div class="row">\n        <div class="col col-20 text-italic">comment</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_COMMENT_HELP</div>\n      </div>\n      <div class="row stable-bg">\n        <div class="col col-20 text-italic dark">name</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_NAME_HELP</div>\n      </div>\n      <div class="row">\n        <div class="col col-20 text-italic">redirect_url</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_REDIRECT_URL_HELP</div>\n      </div>\n      <div class="row stable-bg">\n        <div class="col col-20 text-italic dark">cancel_url</div>\n        <div class="col gray" translate>API.DOC.TRANSFER.PARAM_CANCEL_URL_HELP</div>\n      </div>\n    </div>\n\n    <!-- demo -->\n    <div class="item item-divider no-border">\n      <p translate>API.DOC.DEMO_DIVIDER</p>\n    </div>\n    <div class="item item-button-right item-text-wrap padding-bottom">\n      <p class="item-icon-right-padding" translate>API.DOC.DEMO_HELP</p>\n      <span class="badge" ng-if="loading">\n        <ion-spinner class="icon" icon="android"></ion-spinner>\n      </span>\n      <a ng-if="!loading" href="{{transferDemoUrl}}" class="button button-raised button-positive icon ion-play"></a>\n    </div>\n    <div class="item item-text-wrap" ng-if="result.type === \'payment\' && !result.cancelled">\n      <h2 class="text-right balanced" translate>API.DOC.DEMO_SUCCEED</h2>\n      <h4 class="gray" translate>API.DOC.DEMO_RESULT</h4>\n      <p class="balanced-100-bg padding dark text-keep-lines">{{result.content}}</p>\n    </div>\n    <div class="item item-text-wrap" ng-if="result.type === \'payment\' && result.cancelled">\n      <h2 class="text-right assertive" translate>API.DOC.DEMO_CANCELLED</h2>\n    </div>\n\n    <div class="item item-divider no-border">\n      <p translate>API.DOC.INTEGRATE_DIVIDER</p>\n    </div>\n\n    <div class="item item-text-wrap">\n      <p translate>API.DOC.TRANSFER.EXAMPLES_HELP</p>\n\n      <div class="row responsive-sm">\n        <div class="col col-20 text-italic">\n          <span translate>API.DOC.TRANSFER.EXAMPLE_BUTTON</span>\n        </div>\n\n        <!-- no text on button -->\n        <div class="col gray no-border">\n\n          <!-- code -->\n          <p>\n            <i class="icon ion-code"></i>\n            <span translate>API.DOC.INTEGRATE_CODE</span>\n          </p>\n          <div class="item item-input">\n            <textarea class="gray" select-on-click rows="5" ng-model="transferButton.html" ng-model-options="{ debounce: 650 }"></textarea>\n          </div>\n\n          <!-- preview -->\n          <p class="padding-top">\n            <i class="icon ion-eye"></i>\n            <span translate>API.DOC.INTEGRATE_RESULT</span>\n          </p>\n          <div class="padding-left" bind-notifier="{ notifierKey:watchedExpression }">\n            <ng-bind-html ng-bind-html="transferButton.html|trustAsHtml"></ng-bind-html>\n          </div>\n        </div>\n      </div>\n      <div class="row responsive-sm">\n\n        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n        <!-- HTML button parameters -->\n        <div class="col gray no-border">\n          <p class="padding-top">\n            <a class="positive" ng-click="transferButton.showParameters=!transferButton.showParameters">\n              <i class="icon ion-wrench"></i>\n              <span translate>API.DOC.INTEGRATE_PARAMETERS</span>\n              <i class="icon" ng-class="{\'ion-arrow-down-b\': !transferButton.showParameters, \'ion-arrow-up-b\': transferButton.showParameters}"></i>\n            </a>\n          </p>\n\n          <div ng-if="transferButton.showParameters" class="padding-left">\n\n            <form id="transferForm" class="stable-bg padding">\n              <p class="padding-top">\n                <i class="icon ion-key"></i>\n                {{\'API.DOC.TRANSFER.PARAM_PUBKEY\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.pubkey" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.PARAM_PUBKEY_HELP\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <i class="icon ion-pricetag"></i>\n                {{\'API.DOC.TRANSFER.PARAM_AMOUNT\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.amount" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.PARAM_AMOUNT_HELP\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <i class="icon ion-flag"></i>\n                {{\'API.DOC.TRANSFER.PARAM_COMMENT\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.comment" placeholder="{{\'API.DOC.TRANSFER.PARAM_COMMENT\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <i class="icon ion-ios-world-outline"></i>\n                {{\'API.DOC.TRANSFER.PARAM_NAME\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.name" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.PARAM_NAME\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <i class="icon ion-arrow-return-left"></i>\n                {{\'API.DOC.TRANSFER.PARAM_REDIRECT_URL\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.redirect_url" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.PARAM_REDIRECT_URL\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <i class="icon ion-backspace"></i>\n                {{\'API.DOC.TRANSFER.PARAM_CANCEL_URL\' | translate}} :\n              </p>\n              <label class="item item-input">\n                <input type="text" ng-model="transferData.cancel_url" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.PARAM_CANCEL_URL\'|translate}}">\n              </label>\n\n              <p class="padding-top">\n                <a class="positive" ng-click="transferButton.style.enable=!transferButton.style.enable">\n                  <i class="icon" ng-class="{\'ion-android-checkbox-outline\': transferButton.style.enable, \'ion-android-checkbox-outline-blank\': !transferButton.style.enable}"></i>\n                  <span translate>API.DOC.TRANSFER.EXAMPLE_BUTTON_DEFAULT_STYLE</span>\n                </a>\n              </p>\n\n              <div ng-if="transferButton.style.enable">\n\n                <!-- button icon -->\n                <p class="padding-top">\n                  <i class="icon ion-image"></i>\n                  {{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_TEXT_ICON\' | translate}} :\n                </p>\n                <label class="item item-input item-select">\n                  <select class="stable-bg dark" ng-model="transferButton.style.icon" style="width: 100%; max-width: 100%" ng-options="l as (l.label | translate) for l in transferButton.icons track by l.filename">\n                  </select>\n                </label>\n\n                <!-- button text -->\n                <p class="padding-top">\n                  <i class="icon ion-quote"></i>\n                  {{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_TEXT_HELP\' | translate}} :\n                </p>\n                <label class="item item-input">\n                  <input type="text" ng-model="transferButton.style.text" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_TEXT_HELP\'|translate}}">\n                </label>\n\n\n                <!-- button bg color -->\n                <p class="padding-top">\n                  <i class="icon ion-paintbucket"></i>\n                  {{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_BG_COLOR\' | translate}} :\n                </p>\n                <label class="item item-input">\n                  <input type="text" ng-model="transferButton.style.bgColor" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_BG_COLOR_HELP\'|translate}}">\n                </label>\n\n                <!-- button font color -->\n                <p class="padding-top">\n                  <i class="icon ion-paintbrush"></i>\n                  {{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_FONT_COLOR\' | translate}} :\n                </p>\n                <label class="item item-input">\n                  <input type="text" ng-model="transferButton.style.fontColor" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_FONT_COLOR_HELP\'|translate}}">\n                </label>\n\n                <!-- button width -->\n                <p class="padding-top">\n                  <i class="icon ion-ios-crop-strong"></i>\n                  {{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_TEXT_WIDTH\' | translate}} :\n                </p>\n                <label class="item item-input">\n                  <input type="text" ng-model="transferButton.style.width" ng-model-options="{ debounce: 650 }" placeholder="{{\'API.DOC.TRANSFER.EXAMPLE_BUTTON_TEXT_WIDTH_HELP\'|translate}}">\n                </label>\n              </div>\n            </form></div>\n          \n\n        </div>\n      </div>\n    </div>\n\n  </div>\n'),
e.put("templates/api/home.html",'<ion-view class="circle-bg-dark">\n  <ion-nav-title>\n    <span class="title visible-xs visible-sm" translate>API.HOME.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="right">\n    <!-- locales -->\n    <button class="button button-clear hidden-xs hidden-sm gray icon-left" style="max-width: 450px !important" ng-click="showLocalesPopover($event)">\n      <i class="icon ion-earth"></i>\n      {{$root.settings.locale.label}}\n      <small class="ion-arrow-down-b"></small>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="has-header no-padding-xs positive-900-bg">\n\n    <br class="hidden-xs">\n\n    <div class="light text-center">\n      <h4 class="hidden-xs" translate>API.HOME.MESSAGE</h4>\n      <h4 class="visible-xs padding" translate>API.HOME.MESSAGE_SHORT</h4>\n    </div>\n\n    <br class="hidden-xs">\n\n    <div class="row no-padding-xs">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n      <div class="col">\n\n        <div class="light-bg no-padding">\n          <!-- include documentation -->\n          <ng-include src="\'templates/api/doc.html\'"></ng-include>\n        </div>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm text-center" id="home">\n        <div style="display: block; width: 100%">\n          <div class="logo"></div>\n          <small class="gray padding-top">v{{$root.config.version}}</small>\n        </div>\n      </div>\n    </div>\n\n    <p class="visible-xs visible-sm light padding-top text-center">\n      {{\'COMMON.APP_NAME\'|translate}} API\n      - <a href="#" ng-click="showAboutModal($event)">v{{$root.config.version}}</a>\n    </p>\n\n    <p class="hidden-xs hidden-sm gray padding-top text-center">\n      {{\'COMMON.APP_NAME\'|translate}} API v{{$root.config.version}}\n      - <a href="#" ng-click="showAboutModal($event)" title="{{\'HOME.BTN_ABOUT\'|translate}}">{{\'HOME.BTN_ABOUT\'|translate}}</a>\n      - <a href="../" title="{{\'API.COMMON.LINK_STANDARD_APP_HELP\'|translate}}">{{\'API.COMMON.LINK_STANDARD_APP\'|translate}}</a>\n    </p>\n\n  </ion-content>\n\n</ion-view>\n\n'),e.put("templates/api/locales_popover.html",'<ion-popover-view class="fit popover-locales" style="height: {{locales.length*48}}px">\n  <ion-content scroll="false">\n    <div class="list item-text-wrap block">\n\n      <a ng-repeat="l in locales track by l.id" class="item item-icon-left ink" ng-click="changeLanguage(l.id)">\n        {{l.label | translate}}\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/api/menu.html",'\n<ion-nav-bar class="bar-dark" title-align="left">\n  <ion-nav-back-button class="no-text">\n  </ion-nav-back-button>\n\n  <ion-nav-buttons side="left">\n  </ion-nav-buttons>\n\n  <ion-nav-buttons side="right">\n  </ion-nav-buttons>\n</ion-nav-bar>\n<ion-nav-view name="menuContent"></ion-nav-view>\n\n'),e.put("templates/api/transfer.html",'<ion-view class="circle-bg-dark">\n\n  <ion-nav-buttons side="left">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n  </ion-nav-buttons>\n\n  <ion-nav-title>\n    <span class="title visible-xs" translate>API.TRANSFER.TITLE_SHORT</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="right">\n    <!-- locales -->\n    <button class="button button-clear hidden-xs hidden-sm gray icon-left" style="max-width: 450px !important" ng-click="showLocalesPopover($event)">\n      <i class="icon ion-earth"></i>\n      {{$root.settings.locale.label}}\n      <small class="ion-arrow-down-b"></small>\n    </button>\n\n    <button class="button button-positive button-icon button-clear icon ion-android-done visible-xs" ng-click="doLogin()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="has-header no-padding-xs positive-900-bg">\n\n    <br class="hidden-xs">\n\n    <div class="row no-padding-xs">\n      <div class="col col-20 hidden-xs hidden-sm">\n        &nbsp;\n      </div>\n      <div class="col no-padding-xs">\n\n        <div class="light-bg">\n\n          <h2 class="padding-top text-center hidden-xs" translate>API.TRANSFER.TITLE</h2>\n\n          <div class="no-padding energized-100-bg" ng-if="demo">\n            <div class="item item-icon-left item-text-wrap no-border">\n              <i class="icon ion-information-circled positive"></i>\n              <p translate>API.TRANSFER.DEMO.HELP</p>\n            </div>\n          </div>\n\n          <ng-include src="\'templates/login/form_login.html\'"></ng-include>\n\n        </div>\n        <br class="hidden-xs">\n        <br class="hidden-xs">\n        <div class="list padding no-padding-xs light-bg expert-mode">\n          <div class="item">\n            <p translate>API.TRANSFER.SUMMARY</p>\n          </div>\n\n          <div class="item item-icon-left-padding item-tx no-border">\n            <h2 translate>API.TRANSFER.AMOUNT</h2>\n            <div class="badge item-note badge-calm" ng-bind-html="transferData.amount|formatAmount:{useRelative: false, currency: $root.currency.name}"></div>\n            <div class="badge badge-secondary" ng-bind-html="transferData.amount|formatAmount:{useRelative: true, currency: $root.currency.name}"></div>\n          </div>\n          <div class="item item-icon-left-padding" ng-if="transferData.name">\n            <h2 translate>API.TRANSFER.NAME</h2>\n            <div class="badge item-note">\n              {{transferData.name}}\n            </div>\n          </div>\n          <div class="item item-icon-left-padding item-text-wrap">\n            <h2 translate>API.TRANSFER.PUBKEY</h2>\n            <div class="badge">\n              <span class="hidden-xs"><br class="visible-sm visible-md"><i class="icon ion-key"> </i>{{transferData.pubkey}}</span>\n              <span class="visible-xs" copy-on-click="{{transferData.pubkey}}"><br class="visible-xs"><i class="icon ion-key"></i> {{transferData.pubkey|formatPubkey}}</span>\n            </div>\n          </div>\n\n          <div class="item item-icon-left-padding">\n            <h2 translate>API.TRANSFER.COMMENT</h2>\n            <div class="badge item-note">\n              <span class="hidden-xs"><br class="visible-sm visible-md">{{transferData.comment}}</span>\n              <span class="visible-xs" copy-on-click="{{transferData.comment}}"><br>{{transferData.comment}}</span>\n            </div>\n          </div>\n          <!-- spacer in small screen -->\n          <div class="padding-bottom visible-xs">&nbsp;</div>\n        </div>\n      </div>\n      <div class="col col-20 hidden-xs hidden-sm text-center" id="home">\n        <div style="display: block; width: 100%">\n          <div class="logo text-center"></div>\n          <small class="gray padding-top">v{{$root.config.version}}</small>\n        </div>\n      </div>\n    </div>\n\n    <p class="visible-xs visible-sm light padding-top text-center">\n      {{\'COMMON.APP_NAME\'|translate}}\n      - <a href="#" ng-click="showAboutModal($event)">v{{$root.config.version}}</a>\n    </p>\n\n    <p class="hidden-xs hidden-sm gray padding-top text-center">\n      {{\'COMMON.APP_NAME\'|translate}} API v{{$root.config.version}}\n      - <a href="#" ng-click="showAboutModal($event)" title="{{\'HOME.BTN_ABOUT\'|translate}}">{{\'HOME.BTN_ABOUT\'|translate}}</a>\n      - <a ui-sref="app.home" target="_system" title="{{\'API.COMMON.LINK_DOC_HELP\'|translate}}">{{\'API.COMMON.LINK_DOC\'|translate}}</a>\n      - <a href="../" title="{{\'API.COMMON.LINK_STANDARD_APP_HELP\'|translate}}">{{\'API.COMMON.LINK_STANDARD_APP\'|translate}}</a>\n    </p>\n\n  </ion-content>\n\n</ion-view>'),e.put("templates/blockchain/item_block.html",'<a name="block-{{:rebind:block.number}}"></a>\n<ion-item id="block-{{:rebind:block.number}}" class="item item-icon-left item-block {{::ionItemClass}}" ng-class="{\'ink\': !block.empty||!block.compacted, \'item-block-empty\': block.empty, \'compacted\': block.compacted && compactMode}" ng-click="selectBlock(block)">\n\n  <i class="icon ion-cube stable" ng-if=":rebind:(!block.empty && !block.avatar)"></i>\n  <i class="avatar" ng-if=":rebind:!block.empty && block.avatar" style="background-image: url(\'{{:rebind:block.avatar.src}}\')"></i>\n\n  <div class="row no-padding" ng-if=":rebind:!block.compacted || !compactMode">\n    <div class="col">\n      <h4 ng-class="{\'gray\': block.compacted, \'dark\': !block.compacted}">\n        <i class="ion-clock"></i>\n        {{:rebind:block.medianTime|formatDate}}\n      </h4>\n      <h4 ng-if="!block.empty">\n        <!-- joiners/leavers -->\n        <ng-if ng-if=":rebind:block.joinersCount||(block.excludedCount-block.revokedCount)">\n          <i class="dark ion-person"></i>\n          <span class="dark" ng-if=":rebind:block.joinersCount">+{{:rebind:block.joinersCount}}</span>\n          <span class="dark" ng-if=":rebind:block.excludedCount">-{{:rebind:block.excludedCount-block.revokedCount}}</span>\n        </ng-if>\n        <span class="dark" ng-if=":rebind:block.revokedCount" class="assertive"><i class="ion-minus-circled"></i> {{:rebind:block.revokedCount}}&nbsp;&nbsp;</span>\n        <span class="dark" ng-if=":rebind:block.activesCount" class="gray"><i class="gray ion-refresh"></i> {{:rebind:block.activesCount}}&nbsp;&nbsp;</span>\n        <span class="dark" ng-if=":rebind:block.certificationsCount"><i class="ion-ribbon-a"></i> {{:rebind:block.certificationsCount}}&nbsp;&nbsp;</span>\n        <span class="dark" ng-if=":rebind:block.dividend" class="gray"><i class="gray ion-arrow-up-c"></i> {{\'COMMON.UD\'|translate}}&nbsp;&nbsp;</span>\n        <span class="dark" ng-if=":rebind:block.transactionsCount"><i class="ion-card"> {{:rebind:block.transactionsCount}}</i></span>\n      </h4>\n    </div>\n\n    <div class="col col-33 positive hidden-md">\n      <h4><i class="ion-person"></i> {{:rebind:block.name||block.uid}}</h4>\n    </div>\n\n    <div class="col col-20">\n      <span class="badge" ng-class="{\'badge-balanced\': !$index , \'badge-calm\': $index && !block.compacted && !block.empty}">{{:rebind:block.number|formatInteger}}</span>\n    </div>\n\n  </div>\n</ion-item>\n'),e.put("templates/blockchain/item_block_empty_lg.html",'<a name="block-{{::block.number}}"></a>\n<div id="block-{{::block.number}}" class="item item-block item-icon-left item-block-empty" ng-class="{\'compacted\': block.compacted && compactMode}" ng-click="selectBlock(block)">\n  <div class="row no-padding" ng-if=":rebind:!block.compacted || !compactMode">\n    <div class="col">\n      <h3 class="gray">\n        <i class="ion-clock"></i>\n        {{:rebind:block.medianTime|formatDate}}\n      </h3>\n    </div>\n\n    <div class="col">\n      <h3>\n        <span class="gray" ng-if=":rebind:expertMode">\n          <i class="ion-key"></i> {{:rebind:block.issuer|formatPubkey}}\n        </span>\n        <span class="positive">\n          <i class="ion-person"></i> {{:rebind:block.name||block.uid}}\n        </span>\n      </h3>\n    </div>\n\n    <div class="col col-20"></div>\n\n    <div class="col col-20">\n      <span class="badge" ng-class="{\'badge-balanced\': !$index && search.type==\'last\'}">{{block.number|formatInteger}}</span>\n    </div>\n\n  </div>\n</div>\n'),e.put("templates/blockchain/item_block_lg.html",'<ion-item id="block-{{::block.number}}" class="item item-block item-icon-left ink {{::ionItemClass}}" ng-class="{{::ionItemClass}}" ng-click="selectBlock(block)">\n\n  <i class="icon ion-cube stable" ng-if=":rebind:!block.avatar"></i>\n  <i class="avatar" ng-if=":rebind:!block.empty && block.avatar" style="background-image: url(\'{{:rebind:block.avatar.src}}\')"></i>\n\n  <div class="row no-padding">\n    <div class="col">\n      <h3 class="dark"><i class="ion-clock"></i> {{:rebind:block.medianTime|formatDate}}</h3>\n      <h4 class="gray">{{:rebind:\'BLOCKCHAIN.HASH\'|translate}} {{:rebind:block.hash|formatHash}}</h4>\n    </div>\n\n    <div class="col">\n      <h3>\n        <span class="gray" ng-if=":rebind:expertMode">\n          <i class="ion-key"></i> {{:rebind:block.issuer|formatPubkey}}\n        </span>\n        <span class="positive">\n          <i class="ion-person"></i> {{:rebind:block.name||block.uid}}\n        </span>\n      </h3>\n    </div>\n\n    <div class="col col-20">\n      <small>\n        <ng-if ng-if=":rebind:block.joinersCount||(block.excludedCount-block.revokedCount)">\n          <i class="ion-person"></i>\n          <span ng-if=":rebind:block.joinersCount">+{{:rebind:block.joinersCount}}</span>\n          <span ng-if=":rebind:block.excludedCount">-{{:rebind:block.excludedCount-block.revokedCount}}</span>\n          &nbsp;&nbsp;\n        </ng-if>\n        <span ng-if=":rebind:block.revokedCount" class="assertive"><i class="ion-minus-circled"></i> -{{:rebind:block.revokedCount}}&nbsp;&nbsp;</span>\n        <span ng-if=":rebind:block.activesCount"><i class="ion-refresh"></i> {{:rebind:block.activesCount}}&nbsp;&nbsp;</span>\n        <span ng-if=":rebind:block.certificationsCount"><i class="ion-ribbon-a"></i> {{:rebind:block.certificationsCount}}&nbsp;&nbsp;</span>\n        <span ng-if=":rebind:block.dividend"><i class="gray ion-arrow-up-c"></i> {{:rebind:\'COMMON.UD\'|translate}}&nbsp;&nbsp;</span>\n        <span ng-if=":rebind:block.transactionsCount"><i class="ion-card"> {{:rebind:block.transactionsCount}}</i>&nbsp;&nbsp;</span>\n\n      </small>\n    </div>\n\n    <div class="col col-20">\n      <span class="badge" ng-class="{\'badge-balanced\': !$index && search.type==\'last\', \'badge-calm\': ($index  || search.type!=\'last\')&& !block.compacted && !block.empty}">{{:rebind:block.number}}</span>\n    </div>\n\n  </div>\n</ion-item>\n'),e.put("templates/blockchain/items_blocks.html",'  <div class="center padding" ng-if="search.loading">\n    <ion-spinner icon="android"></ion-spinner>\n  </div>\n\n  <ion-list class="animate-ripple padding padding-xs">\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      BLOCKCHAIN.LOOKUP.NO_BLOCK\n    </div>\n    <!-- blocks -->\n    <ng-repeat ng-repeat="block in :rebind:search.results track by block.number" ng-include="\'templates/blockchain/item_block.html\'">\n    </ng-repeat>\n  </ion-list>\n\n  <ion-infinite-scroll ng-if="search.hasMore" icon="android" on-infinite="showMore()" distance="1%">\n  </ion-infinite-scroll>\n'),e.put("templates/blockchain/link_identity.html",'<a ui-sref="app.wot_identity({pubkey: identity.pubkey, uid: identity.uid})">\n  <span class="positive" ng-if="identity.uid"><i class="icon ion-person"></i> {{::identity.uid}}&nbsp;</span>\n  <span class="gray" ng-class="{\'hidden-xs hidden-sm\': identity.uid}"><i class="icon ion-key"></i>&nbsp;{{::identity.pubkey|formatPubkey}}</span>\n</a>\n'),e.put("templates/blockchain/list_blocks.html",'\n  <div class="center padding" ng-if="search.loading">\n    <ion-spinner icon="android"></ion-spinner>\n  </div>\n\n  <ion-list class="padding padding-xs list-blocks" ng-class="::motion.ionListClass">\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      BLOCKCHAIN.LOOKUP.NO_BLOCK\n    </div>\n    <!-- blocks -->\n    <ng-repeat ng-repeat="block in :rebind:search.results track by block.number" ng-include="\'templates/blockchain/item_block.html\'">\n    </ng-repeat>\n  </ion-list>\n\n  <ion-infinite-scroll ng-if="search.hasMore" spinner="android" on-infinite="showMore()" distance="1%">\n  </ion-infinite-scroll>\n'),e.put("templates/blockchain/list_blocks_lg.html",'  <div class="padding padding-xs" style="display: block; height: 100px">\n    <h4 translate>BLOCKCHAIN.LOOKUP.LAST_BLOCKS</h4>\n\n    <div class="pull-right">\n      <a class="button button-text button-small ink" ng-class="{\'button-text-positive\': compactMode, \'button-text-stable\': !compactMode}" ng-click="toggleCompactMode()">\n        <i class="icon ion-navicon"></i>\n        <b class="ion-arrow-down-b" style="position: absolute; top: -2px; left: 4px; font-size: 8px"></b>\n        <b class="ion-arrow-up-b" style="position: absolute; top: 10px; left: 4px; font-size: 8px"></b>\n        <span>{{\'BLOCKCHAIN.LOOKUP.BTN_COMPACT\'|translate}}</span>\n      </a>\n    </div>\n  </div>\n\n  <div class="center padding" ng-if="search.loading">\n    <ion-spinner icon="android"></ion-spinner>\n  </div>\n\n  <ion-list class="padding padding-xs list-blocks" ng-class="::motion.ionListClass">\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      BLOCKCHAIN.LOOKUP.NO_BLOCK\n    </div>\n    <!-- blocks -->\n    <ng-repeat ng-repeat="block in search.results" ng-include="!block.empty ? \'templates/blockchain/item_block_lg.html\' : \'templates/blockchain/item_block_empty_lg.html\'">\n    </ng-repeat>\n  </ion-list>\n\n  <ion-infinite-scroll ng-if="search.hasMore" spinner="android" on-infinite="showMore()" distance="1%">\n  </ion-infinite-scroll>\n'),e.put("templates/blockchain/lookup.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>BLOCKCHAIN.LOOKUP.TITLE</span>\n  </ion-nav-title>\n\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n    <ng-include src="\'templates/blockchain/list_blocks.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("templates/blockchain/lookup_lg.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>BLOCKCHAIN.LOOKUP.TITLE</span>\n  </ion-nav-title>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n    <ng-include src="\'templates/blockchain/list_blocks_lg.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("templates/blockchain/unlock_condition_popover.html",'<ion-popover-view class="fit">\n  <ion-header-bar>\n    <h1 class="title" translate>BLOCKCHAIN.VIEW.TX_OUTPUT_UNLOCK_CONDITIONS</h1>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="row" ng-repeat="condition in popoverData.unlockConditions track by $index" ng-style="::condition.style">\n      <span class="gray" ng-if="::condition.operator">{{::\'BLOCKCHAIN.VIEW.TX_OUTPUT_OPERATOR.\'+condition.operator|translate}}&nbsp;</span>\n      <div ng-if="::condition.type==\'SIG\'">\n          <i class="icon ion-key dark"></i>\n        <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.SIG\' | translate"></span>\n        <a ng-click="goState(\'app.wot_identity\', {pubkey:condition.value})" style="text-decoration: none" class="positive">\n          {{condition.value|formatPubkey}}\n        </a>\n      </div>\n      <div ng-if="::condition.type==\'XHX\'">\n        <i class="icon ion-lock-combination dark"></i>\n        <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.XHX\' | translate"></span>\n        <a copy-on-click="{{::condition.value}}" class="positive">\n          {{::condition.value|formatPubkey}}...\n        </a>\n      </div>\n      <div ng-if="condition.type==\'CSV\'">\n        <i class="icon ion-clock dark"></i>\n        <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.CSV\' | translate"></span>\n        {{::condition.value|formatDuration}}\n      </div>\n      <div ng-if="condition.type==\'CLTV\'">\n        <i class="icon ion-clock dark"></i>\n        <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.CLTV\' | translate"></span>\n        {{::condition.value|formatDate}}\n      </div>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/blockchain/view_block.html",'<ion-view>\n  <ion-nav-title>\n    <span class="title visible-xs visible-sm" ng-if="number==\'current\'">{{\'BLOCKCHAIN.VIEW.TITLE_CURRENT\'|translate}}</span>\n    <span class="title visible-xs visible-sm" ng-if="number!=\'current\'">{{\'BLOCKCHAIN.VIEW.TITLE\'|translate:formData}}</span>\n  </ion-nav-title>\n\n  <ion-content class="no-padding-xs" scroll="true">\n\n    <div class="row no-padding">\n      <div class="col col-15 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col no-padding">\n\n        <div class="center padding" ng-if="loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <!-- animate-fade-slide-in -->\n        <ion-list class="item-text-wrap no-padding-xs" ng-if="!loading">\n\n          <!-- header -->\n          <div class="item item-text-wrap">\n\n            <h1 class="padding-top hidden-xs hidden-sm">\n              <span ng-if="number!=\'current\'">{{\'BLOCKCHAIN.VIEW.TITLE\'|translate:formData}}</span>\n              <span ng-if="number==\'current\'">{{\'BLOCKCHAIN.VIEW.TITLE_CURRENT\'|translate}}</span>\n            </h1>\n\n            <h3>\n              <span class="dark">\n                <i class="icon ion-clock"></i>\n                {{formData.medianTime | formatDate}}\n              </span>\n              <span class="gray">\n                |\n                {{formData.medianTime | formatFromNow}}\n              </span>\n            </h3>\n\n            <h3>\n              <span class="dark">\n                <i class="icon ion-lock-combination"></i>\n                {{\'BLOCKCHAIN.VIEW.COMPUTED_BY\'|translate}}\n              </span>\n              <a class="positive" ui-sref="app.wot_identity({pubkey:issuer.pubkey, uid: issuer.uid})">\n                <i class="icon ion-person positive"></i>\n                {{issuer.name||issuer.uid}}\n                <span class="gray" ng-if="issuer.name">\n                  ({{issuer.uid}})\n                </span>\n              </a>\n            </h3>\n\n            <h3>\n              <a ng-click="openRawBlock($event)">\n                <i class="icon ion-share"></i> {{\'BLOCKCHAIN.VIEW.SHOW_RAW\'|translate}}\n              </a>\n            </h3>\n\n          </div>\n\n          <!-- button bar-->\n          <div class="item hidden-xs hidden-sm padding text-center">\n            <div class="pull-right">\n              <a class="button button-text button-small ink" ng-class="{\'button-text-positive\': compactMode, \'button-text-stable\': !compactMode}" ng-click="toggleCompactMode()">\n                <i class="icon ion-navicon"></i>\n                <b class="ion-arrow-down-b" style="position: absolute; top: -2px; left: 4px; font-size: 8px"></b>\n                <b class="ion-arrow-up-b" style="position: absolute; top: 10px; left: 4px; font-size: 8px"></b>\n                <span>{{\'BLOCKCHAIN.LOOKUP.BTN_COMPACT\'|translate}}</span>\n              </a>\n            </div>\n\n            <!-- Allow extension here -->\n            <cs-extension-point name="buttons"></cs-extension-point>\n          </div>\n\n          <span class="item item-divider">\n            {{\'BLOCKCHAIN.VIEW.TECHNICAL_DIVIDER\' | translate}}\n          </span>\n\n          <!-- protocole -->\n          <ion-item class="item-icon-left item-text-wrap" ng-if="!compactMode || $root.settings.expertMode">\n            <i class="icon ion-gear-b"></i>\n            {{\'BLOCKCHAIN.VIEW.VERSION\'|translate}}\n            <span class="badge badge-stable">\n              {{::formData.version}}\n            </span>\n          </ion-item>\n\n          <!-- difficulty -->\n          <ion-item class="item-icon-left item-text-wrap" ng-if="!compactMode || $root.settings.expertMode" copy-on-click="{{::formData.powMin}}">\n            <i class="icon ion-lock-combination"></i>\n            {{\'BLOCKCHAIN.VIEW.POW_MIN\'|translate}}\n            <h4 class="gray">{{\'BLOCKCHAIN.VIEW.POW_MIN_HELP\'|translate}}</h4>\n            <span class="badge badge-stable">\n              {{::formData.powMin}}\n            </span>\n          </ion-item>\n\n          <!-- hash -->\n          <ion-item class="item-icon-left item-text-wrap" copy-on-click="{{::formData.hash}}">\n            <i class="icon ion-pound"></i>\n            {{\'BLOCKCHAIN.VIEW.HASH\'|translate}}\n            <span class="item-note hidden-xs hidden-sm dark">\n              {{::formData.hash}}\n            </span>\n            <h5 class="visible-xs visible-sm dark">\n              {{::formData.hash}}\n            </h5>\n          </ion-item>\n\n          <!-- spacer -->\n          <ion-item class="hidden-sm hidden-xs"></ion-item>\n\n          <span class="item item-divider">\n            {{\'BLOCKCHAIN.VIEW.DATA_DIVIDER\' | translate}}\n          </span>\n\n          <!-- If Empty & compact -->\n          <ion-item ng-if="compactMode && formData.empty" class="item-icon-left item-text-wrap">\n            {{\'BLOCKCHAIN.VIEW.EMPTY\'|translate}}\n          </ion-item>\n\n          <!-- DU -->\n          <ion-item ng-if="!compactMode || formData.dividend" class="item-icon-left item-text-wrap" copy-on-click="{{::formData.dividend/100}}">\n            <i class="icon ion-arrow-up-c"></i>\n            <div class="col col-60">\n              {{\'COMMON.UNIVERSAL_DIVIDEND\'|translate}}\n              <h4 class="gray">{{\'BLOCKCHAIN.VIEW.UNIVERSAL_DIVIDEND_HELP\'|translate: {membersCount: formData.membersCount} }}</h4>\n            </div>\n            <span class="badge badge-balanced" ng-if="formData.dividend">\n              +1 <span ng-bind-html="formData.currency|currencySymbol: {useRelative: true} "></span> / {{\'COMMON.MEMBER\'|translate|lowercase}}\n            </span>\n            <span class="badge badge-stable" ng-if="!formData.dividend">0</span>\n            <span class="badge badge-secondary" ng-if="formData.dividend">+ {{formData.dividend| formatAmount: {currency: formData.currency, useRelative: false} }} / {{\'COMMON.MEMBER\'|translate|lowercase}}</span>\n          </ion-item>\n\n          <!-- identities -->\n          <ng-if ng-if="!compactMode || formData.identitiesCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-person"></i>\n              <b class="ion-clock" style="position: absolute; top: 16px; left: 39px; font-size: 12px"></b>\n              {{\'BLOCKCHAIN.VIEW.IDENTITIES_COUNT\'|translate}}\n              <span class="badge badge-balanced" ng-if="formData.identitiesCount">+{{::formData.identitiesCount}}</span>\n              <span class="badge badge-stable" ng-if="!formData.identitiesCount">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.identitiesCount">\n              <ion-item ng-repeat="identity in ::formData.identities" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- joiners -->\n          <ng-if ng-if="!compactMode || formData.joinersCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-person-add"></i>\n              {{\'BLOCKCHAIN.VIEW.JOINERS_COUNT\'|translate}}\n              <span class="badge badge-balanced" ng-if="formData.joinersCount">+{{::formData.joinersCount}}</span>\n              <span class="badge badge-stable" ng-if="!formData.joinersCount">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.joinersCount">\n              <ion-item ng-repeat="identity in ::formData.joiners" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- actives -->\n          <ng-if ng-if="!compactMode || formData.activesCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-person"></i>\n              <b class="ion-refresh" style="position: absolute; top: 25px; left: 39px; font-size: 12px"></b>\n              {{\'BLOCKCHAIN.VIEW.ACTIVES_COUNT\'|translate}}\n              <h4 class="gray">{{\'BLOCKCHAIN.VIEW.ACTIVES_COUNT_HELP\'|translate}}</h4>\n              <span class="badge badge-balanced" ng-if="formData.activesCount">{{::formData.activesCount}}</span>\n              <span class="badge badge-stable" ng-if="!formData.activesCount">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.activesCount">\n              <ion-item ng-repeat="identity in ::formData.actives" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- excluded -->\n          <ng-if ng-if="!compactMode || (formData.excludedCount-formData.revokedCount)">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-person"></i>\n              <b class="ion-close dark" style="position: absolute; top: 25px; left: 39px; font-size: 12px"></b>\n              {{\'BLOCKCHAIN.VIEW.EXCLUDED_COUNT\'|translate}}\n              <h4 class="gray">{{\'BLOCKCHAIN.VIEW.EXCLUDED_COUNT_HELP\'|translate}}</h4>\n              <span class="badge badge-assertive" ng-if="formData.excludedCount-formData.revokedCount">-{{::formData.excludedCount-formData.revokedCount}}</span>\n              <span class="badge badge-stable" ng-if="!(formData.excludedCount-formData.revokedCount)">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.excludedCount">\n              <ion-item ng-repeat="identity in ::formData.excluded" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- leavers -->\n          <ng-if ng-if="!compactMode || formData.leaversCount">\n            <ion-item class="item-icon-left" ng-if="!compactMode || formData.leaversCount">\n              <i class="icon ion-person"></i>\n              <b class="ion-minus" style="position: absolute; top: 25px; left: 39px; font-size: 12px"></b>\n              {{\'BLOCKCHAIN.VIEW.LEAVERS_COUNT\'|translate}}\n              <h4 class="gray">{{\'BLOCKCHAIN.VIEW.LEAVERS_COUNT_HELP\'|translate}}</h4>\n              <span class="badge badge-assertive" ng-if="formData.leaversCount">-{{::formData.leaversCount}}</span>\n              <span class="badge badge-stable" ng-if="!formData.leaversCount">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.leaversCount">\n              <ion-item ng-repeat="identity in ::formData.leavers" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- revoked -->\n          <ng-if ng-if="!compactMode || formData.revokedCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-person"></i>\n              <b class="ion-minus-circled assertive" style="position: absolute; top: 25px; left: 39px; font-size: 12px"></b>\n              {{\'BLOCKCHAIN.VIEW.REVOKED_COUNT\'|translate}}\n              <h4 class="gray">{{\'BLOCKCHAIN.VIEW.REVOKED_COUNT_HELP\'|translate}}</h4>\n              <span class="badge badge-balanced" ng-if="formData.revokedCount">-{{::formData.revokedCount}}</span>\n              <span class="badge badge-stable" ng-if="!formData.revokedCount">0</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding" ng-if="formData.revokedCount">\n              <ion-item ng-repeat="identity in ::formData.revoked" class="item-border-large item-small-height" ng-include="\'templates/blockchain/link_identity.html\'">\n              </ion-item>\n            </div>\n          </ng-if>\n\n          <!-- cert -->\n          <ng-if ng-if="!compactMode || formData.certificationsCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-ribbon-a"></i>\n              {{\'BLOCKCHAIN.VIEW.CERT_COUNT\'|translate}}\n              <span class="badge badge-stable" ng-class="{\'badge-positive\':formData.certificationsCount}">{{::formData.certificationsCount}}</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding no-padding-xs" ng-if="formData.certificationsCount">\n              <div ng-repeat="(key, certs) in formData.certifications" class="item item-border-large item-small-height">\n                <div class="row no-padding">\n                  <div class="col col-center no-padding">\n                    <ng-repeat ng-repeat="cert in certs">\n                      <ng-include src="\'templates/blockchain/link_identity.html\'" onload="identity=cert.from"></ng-include>\n                      <br>\n                    </ng-repeat>\n                  </div>\n                  <div class="col col-10 col-center gray text-center no-padding">\n                    <h2><i class="icon ion-arrow-right-a"></i></h2>\n                  </div>\n                  <div class="col col-40 col-center no-padding" ng-include="\'templates/blockchain/link_identity.html\'" onload="identity=certs[0].to">\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-if>\n\n          <!-- TX -->\n          <ng-if ng-if="!compactMode || formData.transactionsCount">\n            <ion-item class="item-icon-left">\n              <i class="icon ion-card"></i>\n              {{\'BLOCKCHAIN.VIEW.TX_COUNT\'|translate}}\n              <span class="badge badge-stable" ng-class="{\'badge-positive\':formData.transactionsCount}">{{::formData.transactionsCount}}</span>\n            </ion-item>\n\n            <div class="padding-bottom item-icon-left-padding item-icon-right-padding no-padding-xs" ng-if="formData.transactionsCount">\n              <div ng-repeat="tx in ::formData.transactions" class="item item-small-height item-border-large">\n                <div class="row no-padding" style="padding-top: 3px">\n                  <div class="col col-40 col-center no-padding list no-margin">\n                    <div ng-repeat="identity in ::tx.issuers" class="item no-padding item-small-height">\n                      <ng-include src="\'templates/blockchain/link_identity.html\'"></ng-include>\n                    </div>\n                  </div>\n                  <div class="col col-10 col-center gray text-center no-padding">\n                    <h2><i class="icon ion-arrow-right-a"></i></h2>\n                  </div>\n                  <!-- recipients -->\n                  <div class="col no-padding padding-right no-padding-xs col-text-wrap list no-margin">\n                    <span class="gray" class="gray" ng-if="tx.toHimself" translate>BLOCKCHAIN.VIEW.TX_TO_HIMSELF</span>\n                    <div ng-repeat="output in ::tx.outputs" class="item no-padding item-small-height">\n\n                      <!-- simple SIG expression -->\n                      <ng-include ng-if="::output.pubkey" src="\'templates/blockchain/link_identity.html\'" onload="identity=output"></ng-include>\n\n                      <!-- complex unlock condition -->\n                      <span ng-if="::!output.pubkey && output.unlockFunctions">\n                        <i class="icon ion-locked"></i>\n                        (<a ng-click="showUnlockConditionPopover(output, $event)">\n                          <i ng-repeat="unlockFunction in ::output.unlockFunctions" ng-class="::{\'ion-key\': (unlockFunction==\'SIG\'), \'ion-clock\': (unlockFunction==\'CSV\' || unlockFunction==\'CLTV\'), \'ion-lock-combination\': (unlockFunction==\'XHX\') }" class="icon"></i>\n                        </a>)\n                      </span>\n                      <span class="badge badge-balanced" ng-bind-html="::output.amount | formatAmount:{currency: formData.currency, useRelative: false} "></span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-if>\n\n        </ion-list>\n      </div>\n\n      <div class="col col-15 hidden-xs"></div>\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),
e.put("templates/common/badge_certification_count.html",'<span ng-attr-id="{{$ctrl.csId}}" class="badge badge-balanced" ng-class="{\'badge-energized\': $ctrl.requirements.willNeedCertificationCount || ($ctrl.requirements.needCertificationCount + $ctrl.requirements.pendingCertificationCount >= $ctrl.parameters.sigQty),\n               \'badge-assertive\': ($ctrl.requirements.needCertificationCount + $ctrl.requirements.pendingCertificationCount < $ctrl.parameters.sigQty)}">\n  <span ng-if="$ctrl.requirements.certificationCount || !$ctrl.requirements.pendingCertificationCount">\n    <i ng-if="!$ctrl.requirements.needCertificationCount" class="ion-android-done"></i>\n    {{$ctrl.requirements.certificationCount}}\n    <i ng-if="$ctrl.requirements.willNeedCertificationCount" class="ion-android-warning"></i>\n  </span>\n  <span ng-if="$ctrl.requirements.pendingCertificationCount">\n    <ng-if ng-if="$ctrl.requirements.certificationCount">+ </ng-if>\n    <i class="ion-clock"></i>\n    {{$ctrl.requirements.pendingCertificationCount}}\n  </span>\n</span>\n'),e.put("templates/common/badge_given_certification_count.html",'<div ng-attr-id="{{$ctrl.csId}}" class="badge badge-calm" ng-class="{\'badge-assertive\': $ctrl.identity.given_cert.length >= $ctrl.parameters.sigStock}">\n        <span>\n          <i ng-if="$ctrl.identity.given_cert.length" class="ion-android-done"></i>\n          {{$ctrl.identity.given_cert.length}}\n        </span>\n  <span ng-if="$ctrl.identity.given_cert_pending.length">\n          (<ng-if ng-if="$ctrl.identity.given_cert.length">+ </ng-if>\n          <i class="ion-clock"></i>\n          {{$ctrl.identity.given_cert_pending.length}})\n        </span>\n  <small>/ {{$ctrl.parameters.sigStock}}</small>\n</div>\n'),e.put("templates/common/form_error_messages.html",'  <div class="form-error" ng-message="minlength">\n    <span translate="ERROR.FIELD_TOO_SHORT"></span>\n  </div>\n  <div class="form-error" ng-message="maxlength">\n    <span translate="ERROR.FIELD_TOO_LONG"></span>\n  </div>\n  <div class="form-error" ng-message="pattern">\n    <span translate="ERROR.FIELD_ACCENT"></span>\n  </div>\n  <div class="form-error" ng-message="required">\n    <span translate="ERROR.FIELD_REQUIRED"></span>\n  </div>\n'),e.put("templates/common/popover_copy.html",'<ion-popover-view class="popover-copy" style="height: {{(!rows || rows &lt;= 1) ? 50 : rows*22}}px">\n  <ion-content scroll="false">\n    <div class="list">\n      <div class="item item-input">\n        <input type="text" ng-if="!rows || rows &lt;= 1" ng-model="value">\n        <textarea ng-if="rows && rows > 1" ng-model="value" rows="{{rows}}" cols="10">\n      </textarea></div>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/common/popover_helptip.html",'<ion-popover-view class="popover-helptip">\n  <ion-content scroll="false" class="list">\n    <p>\n      <i ng-if="icon.position && !icon.position.startsWith(\'bottom-\')" class="{{icon.class}} icon-{{icon.position}} hidden-xs" style="{{icon.style}}"></i>\n\n      <!-- close button-->\n      <a ng-click="closePopover()" class="pull-right button-close" ng-class="{\'pull-left\': icon.position === \'right\', \'pull-right\': icon.position !== \'right\'}">\n        <i class="ion-close"></i>\n      </a>\n\n      <span>&nbsp;</span>\n    </p>\n\n    <p class="padding light">\n      <ng-bind-html ng-bind-html="content | translate:contentParams"></ng-bind-html>\n      <ng-bind-html ng-bind-html="trustContent"></ng-bind-html>\n    </p>\n\n    <!-- buttons (if helptip) -->\n    <div class="text-center" ng-if="!tour">\n      <button class="button button-small button-stable" ng-if="!hasNext" ng-click="closePopover(true)" translate>COMMON.BTN_UNDERSTOOD</button>\n      <button class="button button-small button-stable" id="helptip-btn-ok" ng-if="hasNext" ng-click="closePopover(false)" translate>COMMON.BTN_UNDERSTOOD</button>\n      <button id="helptip-btn-ok" class="button button-small button-positive icon-right ink" ng-if="hasNext" ng-click="closePopover(true)">\n              <i class="icon ion-chevron-right"></i>\n      </button>\n    </div>\n\n    <!-- buttons (if feature tour) -->\n    <div class="text-center" ng-if="tour">\n      <button class="button button-small button-positive" id="helptip-btn-ok" ng-if="!hasNext" ng-click="closePopover(false)" translate>COMMON.BTN_CLOSE</button>\n      <button id="helptip-btn-ok" class="button button-small button-positive icon-right ink" ng-if="hasNext" ng-click="closePopover(true)">\n        {{\'COMMON.BTN_CONTINUE\'|translate}}\n        <i class="icon ion-chevron-right"></i>\n      </button>\n    </div>\n\n    <p>\n      <i ng-if="icon.position && icon.position.startsWith(\'bottom-\')" class="{{icon.class}} icon-{{icon.position}} hidden-xs"></i>\n    </p>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/common/popover_profile.html",'<ion-popover-view class="fit has-header popover-profile hidden-xs hidden-sm">\n  <ion-content scroll="false">\n    <div class="row">\n      <div class="col col-33">\n        <i class="avatar avatar-member" ng-if="!$root.walletData.avatar" ng-class="{\'royal-bg\': login, \'stable-bg\': !login}"></i>\n        <i class="avatar" ng-if="$root.walletData.avatar" style="background-image: url(\'{{$root.walletData.avatar.src}}\')"></i>\n      </div>\n      <div class="col col-66" ng-if="login">\n        <h4>{{$root.walletData.name||$root.walletData.uid}}</h4>\n        <h4 class="gray" ng-if="!$root.walletData.name && !$root.walletData.uid" copy-on-click="{{$root.walletData.pubkey}}">\n          <i class="icon ion-key"></i> {{$root.walletData.pubkey|formatPubkey}}\n        </h4>\n        <span class="gray" ng-if="$root.walletData.name||$root.walletData.uid" copy-on-click="{{$root.walletData.pubkey}}">\n          <i class="icon ion-key"></i> {{$root.walletData.pubkey|formatPubkey}}\n        </span>\n      </div>\n    </div>\n\n    <div class="row" ng-show="login">\n      <div class="col col-66 col-offset-33">\n\n        <!-- auth -->\n        <button ng-show="!auth" class="button button-assertive button-small ink" ng-click="doAuth()">\n          {{\'AUTH.BTN_AUTH\' | translate}}\n        </button>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="profile-popover-user"></cs-extension-point>\n      </div>\n    </div>\n\n    <div class="row" ng-show="!login">\n      <div class="col col-66 col-offset-33">\n        <div class="text-center no-padding gray">\n          {{\'LOGIN.NO_ACCOUNT_QUESTION\'|translate}}\n          <br class="visible-xs">\n          <b>\n            <button class="button button-calm button-small ink" ng-click="showJoinModal()">\n              {{\'LOGIN.CREATE_ACCOUNT\'|translate}}\n            </button>\n          </b>\n        </div>\n      </div>\n    </div>\n  </ion-content>\n  <ion-footer-bar class="stable-bg row">\n    <div class="col">\n      <!-- settings -->\n      <button class="button button-raised button-block button-stable ink ink-dark" id="helptip-popover-profile-btn-settings" ng-click="showSettings()" ui-sref="app.settings">\n        <i class="icon ion-android-settings"></i>\n        {{\'MENU.SETTINGS\' | translate}}\n      </button>\n    </div>\n    <div class="col">\n      <button class="button button-raised button-block button-stable ink ink-dark" ng-show="login" ng-click="logout()" translate>COMMON.BTN_LOGOUT</button>\n      <button class="button button-raised button-block button-positive ink" ng-show="!login" ng-click="loginAndGo(\'app.view_wallet\')" translate>COMMON.BTN_LOGIN</button>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("templates/common/popover_share.html",'<ion-popover-view class="popover-share">\n  <ion-content scroll="false">\n    <div class="bar bar-header">\n      <h1 class="title">{{titleKey|translate:titleValues}}</h1>\n      <span class="gray pull-right">{{time|formatDate}}</span>\n    </div>\n    <div class="list no-margin no-padding has-header has-footer block">\n      <div class="item item-input">\n        <input type="text" ng-model="value">\n      </div>\n    </div>\n\n    <div class="bar bar-footer">\n      <div class="button-bar">\n\n        <a class="button button-icon positive icon ion-social-facebook" href="https://www.facebook.com/sharer/sharer.php?u={{postUrl|formatEncodeURI}}&amp;title={{postMessage|formatEncodeURI}}" onclick="window.open(this.href, \'facebook-share\',\'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=580,height=296\');return false;" title="{{\'COMMON.POPOVER_SHARE.SHARE_ON_FACEBOOK\'|translate}}">\n        </a>\n\n        <a class="button button-icon positive icon ion-social-twitter" href="https://twitter.com/intent/tweet?url={{postUrl|formatEncodeURI}}&amp;text={{postMessage|formatEncodeURI}}" onclick="window.open(this.href, \'twitter-share\',\'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=580,height=296\');return false;" title="{{\'COMMON.POPOVER_SHARE.SHARE_ON_TWITTER\'|translate}}">\n        </a>\n\n        <a class="button button-icon positive icon ion-social-googleplus" href="https://plus.google.com/share?url={{postUrl|formatEncodeURI}}" onclick="window.open(this.href, \'google-plus-share\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=296,width=580\');return false;" title="{{\'COMMON.POPOVER_SHARE.SHARE_ON_GOOGLEPLUS\'|translate}}">\n        </a>\n\n        <a class="button button-icon positive icon ion-social-diaspora" href="https://sharetodiaspora.github.io/?title={{postMessage|formatEncodeURI}}&amp;url={{postUrl|formatEncodeURI}}" onclick="window.open(this.href, \'diaspora-share\',\'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=580,height=296\');return false;" title="{{\'COMMON.POPOVER_SHARE.SHARE_ON_DIASPORA\'|translate}}">\n        </a>\n\n        <a class="button-close" title="{{\'COMMON.BTN_CLOSE\'|translate}}" ng-click="closePopover()">\n          <i class="icon ion-close"></i>\n        </a>\n        </div>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/common/view_passcode.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm" translate>COMMON.PASSCODE.TITLE</span>\n  </ion-nav-title>\n\n  <ion-content scroll="false">\n\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/items_network.html",'\n  <ion-item id="helptip-network-blockchain" class="item-icon-left item-text-wrap">\n    <i class="icon ion-clock"></i>\n    <span class="col col-60" translate>CURRENCY.VIEW.MEDIAN_TIME</span>\n    <span class="badge badge-stable">{{formData.medianTime | formatDate}}</span>\n  </ion-item>\n\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-lock-combination"></i>\n    <span class="col col-75" translate>CURRENCY.VIEW.POW_MIN</span>\n    <span class="badge badge-stable">{{formData.difficulty | formatInteger}}</span>\n  </ion-item>\n\n  <!-- Allow extension here -->\n  <cs-extension-point name="network-actual"></cs-extension-point>\n\n  <div class="item item-divider">\n    <span translate>CURRENCY.VIEW.NETWORK_RULES_DIVIDER</span>\n  </div>\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-clock" style="position: absolute; font-size: 20px; left: 16px; margin-top: 11px"></i>\n    <b class="icon-secondary ion-lock-combination" style="left: 14px; margin-top: -4px"></b>\n    <b class="icon-secondary ion-arrow-right-c" style="font-size: 12px; left: 28px; margin-top: -4px"></b>\n    <b class="icon-secondary ion-lock-combination" style="left: 38px; margin-top: -4px"></b>\n\n    <span class="col col-75" translate>CURRENCY.VIEW.AVG_GEN_TIME</span>\n    <span class="badge badge-stable">{{formData.avgGenTime | formatDuration}}</span>\n  </ion-item>\n\n\n    <div id="helptip-network-peers" class="item item-divider">\n      <div class="pull-left">\n        <span ng-if="search.type==\'member\'" translate>PEER.MEMBERS</span>\n        <span ng-if="search.type==\'mirror\'" translate>PEER.MIRRORS</span>\n        <span ng-if="search.type==\'offline\'" translate>PEER.OFFLINE</span>\n        <span ng-if="!search.type" translate>PEER.PEERS</span>\n        <span ng-if="!search.loading">({{search.results.length}})</span>\n      </div>\n\n      <div class="buttons pull-right">\n        <ion-spinner class="icon" icon="android" ng-if="search.loading"></ion-spinner>\n        <a class="button button-icon button-small-padding icon ion-loop gray hidden-xs hidden-sm ink" ng-if="!search.loading" ng-click="refresh()">\n        </a>\n        <a class="button button-icon button-small-padding icon ion-android-more-vertical gray hidden-xs hidden-sm ink" ng-if="!search.loading" ng-click="showActionsPopover($event)">\n        </a>\n\n      </div>\n    </div>\n\n    <ng-include src="\'templates/network/items_peers.html\'"></ng-include>\n'),e.put("templates/currency/items_parameters.html",'<div bind-notifier="{ rebind:formData.useRelative }">\n\n  <ion-item class="item-icon-left item-text-wrap visible-xs visible-sm">\n    <i class="icon ion-android-bookmark"></i>\n    <span translate>CURRENCY.VIEW.CURRENCY_NAME</span>\n    <div class="item-note dark" ng-if="!loading">\n      {{formData.currency}} (<span ng-bind-html=":rebind:formData.currency | currencySymbol:formData.useRelative"></span>)\n    </div>\n  </ion-item>\n\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-record"></i>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.MASS</span>\n      <span class="gray">(M<sub>t</sub>)</span>\n    </div>\n    <span class="badge badge-calm" ng-if="!loading" ng-bind-html=":rebind:formData.M | formatAmount:{currency: formData.currency, useRelative: formData.useRelative, currentUD: formData.currentUD}"></span>\n  </ion-item>\n\n  <ion-item id="helptip-currency-mass-member" class="item-icon-left item-text-wrap">\n    <i class="icon ion-pie-graph"></i>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.SHARE</span>\n      <span class="gray">(M<sub>t</sub>/N<sub>t</sub>)</span>\n    </div>\n    <span id="helptip-currency-mass-member-unit" ng-if="!loading" class="badge badge-energized" ng-bind-html=":rebind:formData.MoverN | formatAmount:{currency: formData.currency, useRelative: formData.useRelative, currentUD: formData.currentUD}">\n    </span>\n  </ion-item>\n\n\n  <!-- Allow extension here -->\n  <cs-extension-point name="parameters-actual"></cs-extension-point>\n\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-arrow-graph-up-right"></i>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.C_ACTUAL</span>\n      <span class="gray">(c<sub>{{\'CURRENCY.VIEW.CURRENT\'|translate}}</sub>)</span>\n    </div>\n    <span class="badge badge-stable">{{formData.cactual | formatNumeral: \'0,0.00\'}} %&nbsp;/&nbsp;{{formData.dt | formatPeriod}}</span>\n  </ion-item>\n\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-load-c"></i>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.UD</span>\n      <span class="gray">({{\'COMMON.UD\'|translate}}<sub>t</sub>)</span>\n    </div>\n    <div class="badge badge-royal" ng-if="!loading">\n      <span ng-if="formData.useRelative">\n        1 <ng-bind-html ng-bind-html=":rebind:formData.currency| currencySymbol:true"></ng-bind-html>\n      </span>\n      <span ng-if="!formData.useRelative" ng-bind-html=":rebind:formData.currentUD | formatAmount:{currency: formData.currency, useRelative: formData.useRelative, currentUD: formData.currentUD}">\n      </span>\n      &nbsp;/&nbsp;{{formData.dt | formatPeriod}}\n    </div>\n  </ion-item>\n\n  <div class="item item-toggle dark">\n    <div class="item-label text-right gray" translate>COMMON.BTN_RELATIVE_UNIT</div>\n    <label class="toggle toggle-royal" id="helptip-currency-change-unit">\n      <input type="checkbox" ng-model="formData.useRelative">\n      <div class="track">\n        <div class="handle"></div>\n      </div>\n    </label>\n  </div>\n\n\n  <a name="helptip-currency-rules-anchor"></a>\n  <div class="item item-divider" id="helptip-currency-rules">\n    <span translate>CURRENCY.VIEW.MONEY_RULES_DIVIDER</span>\n  </div>\n\n  <ion-item class="item-icon-left item-text-wrap">\n    <i class="icon ion-arrow-graph-up-right"></i>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.C_RULE</span>\n      <span class="gray">(c)</span>\n    </div>\n    <!-- compat with Duniter 0.90 -->\n    <span class="item-note dark" ng-if="!loading && !formData.udReevalTime0">{{formData.c*100 | formatNumeral: \'0,0.00\'}} %&nbsp;/&nbsp;{{formData.dt | formatPeriod}}</span>\n    <!-- Duniter 1.0+ -->\n    <span class="badge badge-stable" ng-if="!loading && formData.udReevalTime0">{{formData.c*100 | formatNumeral: \'0,0.00\'}} %&nbsp;/&nbsp;{{formData.dtReeval | formatDuration}}</span>\n  </ion-item>\n\n  <!-- only Duniter 1.0+ -->\n  <ion-item class="item-icon-left item-text-wrap" ng-if="formData.udReevalTime0 && formData.allRules">\n    <i class="icon ion-load-c"></i>\n    <b class="ion-clock icon-secondary" style="font-size: 18px; left: 36px; top: -12px"></b>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.DT_REEVAL</span>\n      <span class="gray">(dt<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub>)</span>\n    </div>\n    <span class="item-note dark" ng-if="!loading" translate="CURRENCY.VIEW.DT_REEVAL_VALUE" translate-values="formData">\n    </span>\n  </ion-item>\n\n  <!-- only Duniter 1.0+ -->\n  <ion-item class="item-icon-left item-text-wrap" ng-if="formData.udReevalTime0 && formData.allRules">\n    <i class="icon ion-load-c"></i>\n    <b class="ion-calendar icon-secondary" style="font-size: 18px; left: 36px; top: -12px"></b>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.UD_REEVAL_TIME0</span>\n      <span class="gray">(t0<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub>)</span>\n    </div>\n    <span class="item-note dark" ng-if="!loading">{{formData.udReevalTime0|formatDate}}\n    </span>\n  </ion-item>\n\n  <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allRules">\n    <i class="icon ion-load-c"></i>\n    <b class="ion-calculator icon-secondary" style="font-size: 18px; left: 36px; top: -12px"></b>\n    <div class="col col-60">\n      <span translate>CURRENCY.VIEW.UD_RULE</span>\n      <span class="gray" ng-if="formData.udReevalTime0">- {{\'COMMON.UD\'|translate}}<sub>{{formData.dt|formatPeriod}}</sub>(t<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub>)</span>\n    </div>\n    <!-- compat with Duniter 0.90 -->\n    <span class="item-note dark" ng-if="!loading && !formData.udReevalTime0">{{\'COMMON.UD\'|translate}}<sub>t-1</sub> + c<sup>2</sup> * M<sub>t-1</sub>/N<sub>t-1</sub></span>\n    <!-- Duniter 1.0+ -->\n    <span class="item-note dark" ng-if="!loading && formData.udReevalTime0">{{\'COMMON.UD\'|translate}}<sub>{{formData.dt|formatPeriod}}</sub>(t<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub> - dt<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub>)+ c<sup>2</sup> * (M/N)(t<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub> - dt<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub>) / dt<sub>{{\'CURRENCY.VIEW.REEVAL_SYMBOL\'|translate}}</sub></span>\n  </ion-item>\n\n  <div class="item item-toggle dark">\n    <div class="item-label text-right gray" translate>CURRENCY.VIEW.DISPLAY_ALL_RULES</div>\n    <label class="toggle toggle-royal">\n      <input type="checkbox" ng-model="formData.allRules">\n      <div class="track">\n        <div class="handle"></div>\n      </div>\n    </label>\n  </div>\n\n</div>\n'),e.put("templates/currency/items_wot.html",'\n  <div bind-notifier="{ rebind:formData.useRelative }">\n\n    <a name="helptip-currency-newcomers-anchor"></a>\n    <ion-item class="item-icon-left item-text-wrap">\n      <i class="icon ion-person-stalker"></i>\n      <div class="col col-60">\n        <span translate>CURRENCY.VIEW.MEMBERS</span>\n        <span class="gray">(N<sub>{{\'CURRENCY.VIEW.CURRENT\'|translate}}</sub>)</span>\n      </div>\n      <span class="badge badge-calm" ng-if="!loading">{{formData.N | formatInteger}}</span>\n    </ion-item>\n\n    <ion-item id="helptip-currency-newcomers" class="item-icon-left item-text-wrap">\n      <i class="icon ion-arrow-graph-up-right"></i>\n      <div class="col col-75">\n        <span translate="CURRENCY.VIEW.MEMBERS_VARIATION" translate-values="{duration: formData.durationFromLastUD}"></span>\n        <span class="gray">(&#916;N)</span>\n      </div>\n      <div class="badge" ng-if="!loading" ng-class="{\'badge-balanced\': (formData.N>formData.Nprev), \'badge-stable\': (formData.N==formData.Nprev) ,\'badge-assertive\': (formData.Nprev>formData.N)}">\n        {{formData.N > formData.Nprev ? \'+\' : \'\'}}{{formData.N - formData.Nprev}}\n      </div>\n    </ion-item>\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="wot-actual"></cs-extension-point>\n\n    <div class="item item-divider">\n      <span translate>CURRENCY.VIEW.WOT_RULES_DIVIDER</span>\n    </div>\n\n    <ion-item class="item-icon-left item-text-wrap">\n      <i class="icon ion-ribbon-b"></i>\n      <span class="col col-75" translate>CURRENCY.VIEW.SIG_QTY_RULE</span>\n      <span class="badge badge-balanced" ng-if="!loading">{{formData.sigQty}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap">\n      <i class="icon ion-person"></i>\n      <b class="ion-clock icon-secondary" style="font-size: 18px; left: 33px; top: -12px"></b>\n      <span class="col col-60" translate>CURRENCY.VIEW.MS_WINDOW</span>\n      <span class="badge badge-assertive" ng-if="!loading">{{formData.msWindow | formatDuration}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap">\n      <i class="icon ion-person"></i>\n      <b class="ion-calendar icon-secondary" style="font-size: 18px; left: 33px; top: -12px"></b>\n      <span class="col col-60" translate>CURRENCY.VIEW.MS_VALIDITY</span>\n      <span class="badge badge-balanced" ng-if="!loading">{{formData.msValidity | formatDuration}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-ribbon-b"></i>\n      <b class="ion-clock icon-secondary" style="font-size: 18px; left: 33px; top: -12px"></b>\n      <span class="col col-60" translate>CURRENCY.VIEW.SIG_WINDOW</span>\n      <span class="badge badge-stable" ng-if="!loading">{{formData.sigWindow | formatDuration}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-ribbon-b"></i>\n      <b class="ion-calendar icon-secondary" style="font-size: 18px; left: 33px; top: -12px"></b>\n      <span class="col col-60" translate>CURRENCY.VIEW.SIG_VALIDITY</span>\n      <span class="badge badge-balanced" ng-if="!loading">{{formData.sigValidity | formatDuration}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-ribbon-a"></i>\n      <span class="col col-75" translate>CURRENCY.VIEW.SIG_STOCK</span>\n      <span class="badge badge-stable" ng-if="!loading">{{formData.sigStock}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-clock" style="position: absolute; font-size: 20px; left: 16px"></i>\n      <b class="ion-ribbon-a icon-secondary" style="left: 16px; top: -15px"></b>\n      <b class="ion-arrow-right-c icon-secondary" style="left: 28px; top: -15px"></b>\n      <b class="ion-ribbon-a icon-secondary" style="left: 40px; top: -15px"></b>\n      <span class="col col-75" translate>CURRENCY.VIEW.SIG_PERIOD</span>\n      <span class="badge badge-stable" ng-if="!loading">{{formData.sigPeriod | formatDuration}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-steam"></i>\n      <b class="ion-person icon-secondary" style="left: 38px; top: -17px"></b>\n      <div class="col col-75">\n        <span ng-bind-html="\'CURRENCY.VIEW.STEP_MAX\'|translate"></span>\n        <span class="gray">(stepMax)</span>\n      </div>\n      <span class="badge badge-assertive" ng-if="!loading">{{formData.stepMax}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-ribbon-b"></i>\n      <b class="ion-star icon-secondary" style="color: yellow; font-size: 16px; left: 25px; top: -7px"></b>\n      <span class="col col-75" translate>CURRENCY.VIEW.SENTRIES</span>\n      <span class="badge badge-stable" ng-if="!loading">{{formData.sentries}}</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-ribbon-b"></i>\n      <b class="ion-star icon-secondary" style="color: yellow; font-size: 16px; left: 25px; top: -7px"></b>\n      <span class="col col-75" translate>CURRENCY.VIEW.SENTRIES_FORMULA</span>\n      <span class="item-note dark" ng-if="!loading">{{\'CURRENCY.VIEW.MATH_CEILING\'| translate}}( N<sub>t</sub><sup>^ (1 / stepMax)</sup>)</span>\n    </ion-item>\n\n    <ion-item class="item-icon-left item-text-wrap" ng-if="formData.allWotRules">\n      <i class="icon ion-pull-request"></i>\n      <span class="col col-75" translate>CURRENCY.VIEW.XPERCENT</span>\n      <span class="badge badge-stable" ng-if="!loading">{{formData.xpercent*100| formatNumeral: \'0,0\'}} %</span>\n    </ion-item>\n\n    <div class="item item-toggle dark">\n      <div class="item-label text-right gray" translate>CURRENCY.VIEW.DISPLAY_ALL_RULES</div>\n      <label class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.allWotRules">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </label>\n    </div>\n\n  </div>\n'),e.put("templates/currency/lookup.html",'<ion-view view-title="{{\'CURRENCY.SELECT.TITLE\' | translate}}">\n  <ion-content class="padding no-padding-xs">\n    <h4 class="content double-padding-x" translate>CURRENCY.SELECT.CURRENCIES</h4>\n\n    <ng-include src="\'templates/currency/lookup_form.html\'">\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/lookup_form.html",'<ion-list>\n\n  <div class="item center" ng-if="search.loading">\n    <ion-spinner icon="android"></ion-spinner>\n  </div>\n\n  <div ng-repeat="currency in search.results" ng-class="{ selected: selectedCurrency == currency }">\n    <a class="item card card-item stable-bg padding ink" ng-click="selectCurrency(currency)" ng-class="{ selected: selectedCurrency && selectedCurrency.name == currency.name }">\n      <h2>{{currency.name}}</h2>\n      <h4 class="gray">{{currency.peer.server}}</h4>\n      <span class="badge badge-royal">{{\'CURRENCY.SELECT.MEMBERS_COUNT\'|translate:currency}}</span>\n    </a>\n  </div>\n</ion-list>\n'),e.put("templates/currency/modal_license.html",'<ion-modal-view class="modal-full-height modal-license">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>CURRENCY.LICENSE.TITLE</h1>\n\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doTransfer()">\n    </button>\n  </ion-header-bar>\n\n  <ion-content scroll="false" style="bottom: 0px">\n\n    <p ng-if="!licenseUrl && !loading">\n      translate>CURRENCY.LICENSE.NO_LICENSE_FILE\n    </p>\n    <iframe ng-if="licenseUrl && !loading" class="padding-left padding-right no-padding-xs iframe-license" id="iframe-license" ng-src="{{licenseUrlHtml||licenseUrl}}">\n    </iframe>\n\n    <div class="padding hidden-xs text-center">\n      <button class="button button-stable ink" ng-click="downloadFile()">\n        {{\'CURRENCY.LICENSE.BTN_DOWNLOAD\' | translate}}\n      </button>\n\n      <button class="button button-positive ink" type="submit" ng-click="closeModal()">\n        {{\'COMMON.BTN_CLOSE\' | translate}}\n      </button>\n    </div>\n  </ion-content>\n</ion-modal-view>\n'),e.put("templates/currency/popover_actions.html",'<ion-popover-view class="fit has-header popover-wallet-actions">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- help tour -->\n      <a class="item item-icon-left ink hidden-sm hidden-xs" ng-click="startCurrencyTour()">\n        <i class="icon ion-easel"></i>\n        {{\'COMMON.BTN_HELP_TOUR_SCREEN\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/currency/view_currency.html",'<ion-view left-buttons="leftButtons" cache-view="false">\n\n  <ion-tabs class="tabs-positive tabs-icon-top">\n\n    <ion-tab title="{{\'CURRENCY.VIEW.TAB_CURRENCY\'|translate}}" icon="ion-stats-bars" ui-sref="app.currency.tab_parameters">\n      <ion-nav-view name="tab-parameters"></ion-nav-view>\n    </ion-tab>\n\n    <ion-tab title="{{\'CURRENCY.VIEW.TAB_WOT\'|translate}}" icon="ion-person-stalker" ui-sref="app.currency.tab_wot">\n      <ion-nav-view name="tab-wot"></ion-nav-view>\n    </ion-tab>\n\n    <ion-tab id="helptip-currency-tab-peers" title="{{\'CURRENCY.VIEW.TAB_NETWORK\'|translate}}" icon="ion-cloud" ui-sref="app.currency.tab_network">\n      <ion-nav-view name="tab-network"></ion-nav-view>\n    </ion-tab>\n\n    <ion-tab title="{{\'CURRENCY.VIEW.TAB_BLOCKS\'|translate}}" icon="ion-lock-combination" ui-sref="app.currency.tab_blocks">\n      <ion-nav-view name="tab-blocks"></ion-nav-view>\n    </ion-tab>\n\n  </ion-tabs>\n</ion-view>\n'),e.put("templates/currency/view_currency_lg.html",'<ion-view left-buttons="leftButtons" cache-view="false">\n    <ion-nav-title bind-notifier="{ rebind:formData.useRelative }">\n      <span ng-if="!loading">\n         {{\'CURRENCY.VIEW.TITLE\' | translate}} {{formData.currency|abbreviate}}\n      </span>\n    </ion-nav-title>\n\n    <ion-nav-buttons side="secondary">\n        <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="refreshPeers()">\n        </button>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="nav-buttons"></cs-extension-point>\n    </ion-nav-buttons>\n\n    <ion-content>\n\n      <!-- Buttons bar-->\n      <div class="hidden-xs hidden-sm padding text-center">\n\n\n        <button class="button button-stable icon-right ink" ng-if="formData.licenseUrl" ng-click="showLicenseModal()">\n          <i class="icon ion-document-text"></i>&nbsp;\n          {{\'CURRENCY.VIEW.BTN_SHOW_LICENSE\' | translate}}\n        </button>\n\n        <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="refresh()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n        </button>\n\n        <button class="button button-stable button-small-padding icon ion-android-more-vertical ink" ng-click="showActionsPopover($event)">\n        </button>\n\n      </div>\n\n      <div class="item item-text-wrap no-border no-padding pull-left">\n        <div class="item-icon-left card padding stable-900-bg">\n          <ion-spinner class="icon" icon="android" ng-if="loading"></ion-spinner>\n          <i class="icon ion-help-circled calm" ng-if="!loading"></i>\n          <div class="item-icon-left-padding" style="min-height: 26px">\n            <span ng-if="!loading" trust-as-html="\'CURRENCY.VIEW.CURRENCY_SHORT_DESCRIPTION\'|translate:formData">\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div class="row responsive-sm">\n        <!-- currency -->\n        <div class="col list">\n          <div class="item item-divider">\n            <span translate>CURRENCY.VIEW.MONEY_DIVIDER</span>\n          </div>\n          <ng-include src="\'templates/currency/items_parameters.html\'"></ng-include>\n\n        </div>\n\n        <!-- wot -->\n        <div class="col list">\n          <div class="item item-divider">\n            <span translate>CURRENCY.VIEW.WOT_DIVIDER</span>\n          </div>\n          <ng-include src="\'templates/currency/items_wot.html\'"></ng-include>\n\n        </div>\n      </div>\n    </ion-content>\n</ion-view>\n'),
e.put("templates/help/help.html",'\n  <a name="join"></a>\n  <h2 translate>HELP.JOIN.SECTION</h2>\n\n    <a name="join-salt"></a>\n    <div class="row responsive-sm" ng-class="itemsClass[\'join-salt\']">\n      <div class="col col-20" translate>LOGIN.SALT</div>\n      <div class="col" translate>HELP.JOIN.SALT</div>\n    </div>\n\n    <a name="join-password"></a>\n    <div class="row responsive-sm" ng-class="itemsClass[\'join-password\']">\n      <div class="col col-20" translate>LOGIN.PASSWORD</div>\n      <div class="col" translate>HELP.JOIN.PASSWORD</div>\n    </div>\n\n    <a name="join-pseudo"></a>\n    <div class="row responsive-sm" ng-class="itemsClass[\'join-pseudo\']">\n      <div class="col col-20" translate>ACCOUNT.NEW.PSEUDO</div>\n      <div class="col" translate>HELP.JOIN.PSEUDO</div>\n    </div>\n\n  <a name="login"></a>\n  <h2 translate>HELP.LOGIN.SECTION</h2>\n\n  <a name="login-pubkey"></a>\n  <div class="row responsive-sm" ng-class="itemsClass[\'login-pubkey\']">\n    <div class="col col-20" translate>HELP.LOGIN.PUBKEY</div>\n    <div class="col" translate>HELP.LOGIN.PUBKEY_DEF</div>\n  </div>\n\n  <a name="login-method"></a>\n  <div class="row responsive-sm" ng-class="itemsClass[\'login-method\']">\n    <div class="col col-20" translate>HELP.LOGIN.METHOD</div>\n    <div class="col" translate>HELP.LOGIN.METHOD_DEF</div>\n  </div>\n\n  <a name="glossary"></a>\n  <h2 translate>HELP.GLOSSARY.SECTION</h2>\n\n    <a name="pubkey"></a>\n    <div class="row responsive-sm" ng-class="itemsClass.pubkey">\n      <div class="col col-20" translate>COMMON.PUBKEY</div>\n      <div class="col" translate>HELP.GLOSSARY.PUBKEY_DEF</div>\n    </div>\n\n    <a name="blockchain"></a>\n    <div class="row responsive-sm" ng-class="itemsClass.blockchain">\n      <div class="col col-20" translate>HELP.GLOSSARY.BLOCKCHAIN</div>\n      <div class="col" translate>HELP.GLOSSARY.BLOCKCHAIN_DEF</div>\n    </div>\n\n    <a name="universal_dividend"></a>\n    <a name="ud"></a>\n    <div class="row responsive-sm" ng-class="itemsClass.ud">\n      <div class="col col-20" translate>COMMON.UNIVERSAL_DIVIDEND</div>\n      <div class="col" translate>HELP.GLOSSARY.UNIVERSAL_DIVIDEND_DEF</div>\n    </div>\n\n    <a name="member"></a>\n    <div class="row responsive-sm" ng-class="itemsClass.member">\n      <div class="col col-20" translate>HELP.GLOSSARY.MEMBER</div>\n      <div class="col" translate>HELP.GLOSSARY.MEMBER_DEF</div>\n    </div>\n\n    <a name="currency_rules"></a>\n    <div class="row responsive-sm" ng-class="itemsClass.currency_rules">\n      <div class="col col-20" translate>HELP.GLOSSARY.CURRENCY_RULES</div>\n      <div class="col" translate>HELP.GLOSSARY.CURRENCY_RULES_DEF</div>\n    </div>\n'),e.put("templates/help/modal_help.html",'<ion-modal-view class="modal-full-height modal-help">\n\n    <ion-header-bar class="bar-positive">\n      <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CLOSE\n      </button>\n\n      <h1 class="title" translate>HELP.TITLE</h1>\n    </ion-header-bar>\n\n    <ion-content scroll="true" class="padding no-padding-xs">\n\n      <div ng-class="listClass">\n        <ng-include src="\'templates/help/help.html\'"></ng-include>\n      </div>\n\n      <div class="padding hidden-xs text-center">\n        <button class="button button-positive ink" type="submit" ng-click="closeModal()">\n          {{\'COMMON.BTN_CLOSE\' | translate}}\n        </button>\n      </div>\n\n    </ion-content>\n</ion-modal-view>\n'),e.put("templates/help/view_help.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm" translate>HELP.TITLE</span>\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="padding">\n\n    <h1 class="hidden-xs hidden-sm" translate>HELP.TITLE</h1>\n\n    <ng-include src="\'templates/help/help.html\'"></ng-include>\n\n  </ion-content>\n</ion-view>\n'),e.put("templates/home/home.html",'<ion-view id="home" class="">\n  <ion-nav-title>\n\n  </ion-nav-title>\n\n  <ion-content class="has-header text-center padding-xs positive-900-bg circle-bg-dark">\n\n    <div id="helptip-home-logo" class="logo"></div>\n\n    <h4>\n      <span class="hidden-xs" translate>HOME.WELCOME</span>\n      <span ng-show="!loading" translate-values=":currency:{currency: $root.currency.name}" translate>HOME.MESSAGE</span>\n    </h4>\n\n    <div class="center padding">\n\n      <ion-spinner icon="android" ng-if="loading"></ion-spinner>\n\n      <div class="animate-fade-in animate-show-hide ng-hide" ng-show="!loading && error">\n        <div class="card card-item padding">\n          <p class="item-content item-text-wrap">\n              <span class="dark" trust-as-html="\'HOME.CONNECTION_ERROR\'|translate:node"></span>\n          </p>\n\n          <!-- Retry -->\n          <button type="button" class="button button-positive icon icon-left ion-refresh ink" ng-click="reload()">{{\'COMMON.BTN_REFRESH\'|translate}}</button>\n        </div>\n      </div>\n    </div>\n\n    <div class="center animate-fade-in animate-show-hide ng-hide" ng-show="!loading && !error">\n\n      <!-- Help tour (NOT ready yet for small device) -->\n      <button type="button" class="button button-block button-stable button-raised icon-left icon ion-easel ink-dark hidden-xs" ng-click="startHelpTour()">\n        {{\'COMMON.BTN_HELP_TOUR\'|translate}}\n      </button>\n\n      <!-- Currency-->\n      <button type="button" class="item button button-block button-stable button-raised icon icon-left ion-ios-world-outline ink-dark hidden-sm hidden-xs" ui-sref="app.currency">{{\'HOME.BTN_CURRENCY\'|translate:$root.currency }}</button>\n\n      <button type="button" class="item button button-block button-positive button-raised icon icon-left ion-locked ink-dark" ui-sref="app.view_wallet" ng-show="!login" translate>COMMON.BTN_LOGIN</button>\n\n      <button type="button" class="item button button-block button-positive button-raised icon icon-left ion-person ink-dark" ui-sref="app.view_wallet" ng-show="login" translate>MENU.ACCOUNT</button>\n\n      <button type="button" class="item button button-block button-positive button-raised icon icon-left ion-card ink-dark visible-xs" ui-sref="app.view_wallet_tx" ng-show="login" translate>MENU.TRANSACTIONS</button>\n\n      <br class="visible-xs visible-sm">\n\n      <!-- join link -->\n      <div class="text-center no-padding" ng-show="!login">\n        <br class="visible-xs visible-sm">\n        {{\'LOGIN.NO_ACCOUNT_QUESTION\'|translate}}\n        <b>\n          <a class="assertive hidden-xs hidden-sm" ng-click="showJoinModal()" translate>\n            LOGIN.CREATE_ACCOUNT\n          </a>\n        </b>\n      </div>\n\n      <!-- disconnect link -->\n      <div class="text-center no-padding" ng-show="login">\n        <br class="visible-xs visible-sm">\n        <span ng-bind-html="\'HOME.NOT_YOUR_ACCOUNT_QUESTION\'|translate:$root.walletData"></span>\n        <br>\n        <b>\n          <a class="assertive hidden-xs hidden-sm" ng-click="logout()" translate>\n            HOME.BTN_CHANGE_ACCOUNT\n          </a>\n        </b>\n      </div>\n\n      <button type="button" class="button button-block button-calm button-raised icon icon-left ion-wand ink-dark visible-xs visible-sm" ng-click="showJoinModal()" ng-if="!login" translate>LOGIN.CREATE_ACCOUNT</button>\n      <button type="button" class="button button-block button-assertive button-raised icon icon-left ion-wand ink-dark visible-xs visible-sm" ng-click="logout()" ng-if="login" translate>COMMON.BTN_LOGOUT</button>\n\n\n      <div class="text-center no-padding visible-xs stable">\n        <br>\n        <!-- version -->\n        {{\'COMMON.APP_VERSION\'|translate:{version: config.version} }}\n        |\n        <!-- about -->\n        <a href="#" ng-click="showAboutModal()" translate>HOME.BTN_ABOUT</a>\n      </div>\n\n    </div>\n  </ion-content>\n\n</ion-view>\n\n'),e.put("templates/join/modal_choose_account_type.html",'<ion-modal-view class="modal-full-height">\n\n  <ion-header-bar class="bar-positive">\n\n    <button class="button button-clear visible-xs" ng-if="!slides.slider.activeIndex" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-arrow-back buttons header-item" ng-click="slidePrev()" ng-if="slides.slider.activeIndex">\n    </button>\n\n    <h1 class="title" translate>ACCOUNT.NEW.TITLE</h1>\n\n    <button class="button button-clear icon-right visible-xs" ng-if="slides.slider.activeIndex === 0" ng-click="slideNext()">\n      <span translate>COMMON.BTN_NEXT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n  </ion-header-bar>\n\n\n    <ion-slides options="slides.options" slider="slides.slider">\n\n      <!-- STEP 1: currency -->\n      <ion-slide-page>\n        <ion-content class="has-header padding">\n          <div class="center padding" ng-if="loading">\n            <ion-spinner class="icon" icon="android"></ion-spinner>\n          </div>\n\n          <div ng-if="!loading">\n\n\n            <p ng-bind-html="\'ACCOUNT.NEW.INTRO_WARNING_TIME\'|translate:currency"></p>\n\n            <div class="row responsive-sm">\n              <div class="col">\n                <div class="item card item-icon-left padding item-text-wrap stable-bg">\n                  <i class="icon ion-android-warning assertive"></i>\n\n                  <p class="item-content item-icon-left-padding">\n                    <span class="dark" translate>ACCOUNT.NEW.INTRO_WARNING_SECURITY</span><br>\n                    <small translate>ACCOUNT.NEW.INTRO_WARNING_SECURITY_HELP</small>\n                  </p>\n                </div>\n              </div>\n\n              <div class="col">\n                <div class="item card item-icon-left padding item-text-wrap stable-bg">\n                  <i class="icon ion-information-circled positive"></i>\n                  <p class="item-content item-icon-left-padding">\n                    <span class="dark" trust-as-html="\'ACCOUNT.NEW.REGISTRATION_NODE\'|translate:currency.node"></span><br>\n                    <small trust-as-html="\'ACCOUNT.NEW.REGISTRATION_NODE_HELP\'|translate:currency.node"></small>\n                  </p>\n                </div>\n              </div>\n            </div>\n\n\n          </div>\n\n          <p class="hidden-xs hidden-sm" ng-bind-html="\'ACCOUNT.NEW.INTRO_HELP\'|translate"></p>\n\n          <div class="padding hidden-xs text-right">\n            <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n            </button>\n            <button class="button button-positive icon-right ion-chevron-right ink" ng-click="slideNext()" ng-disabled="loading" type="button" translate>\n              COMMON.BTN_START\n            </button>\n          </div>\n        </ion-content>\n      </ion-slide-page>\n\n      <!-- STEP 2: account type -->\n      <ion-slide-page>\n        <ion-content class="has-header padding">\n          <p translate>ACCOUNT.NEW.SELECT_ACCOUNT_TYPE</p>\n          <div class="list">\n            <!-- member account -->\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="selectAccountTypeAndClose(\'member\')">\n              <div class="item-content item-text-wrap">\n                <i class="item-image icon dark ion-person"></i>\n                <h2 translate>ACCOUNT.NEW.MEMBER_ACCOUNT</h2>\n                <h4 class="gray" ng-bind-html="\'ACCOUNT.NEW.MEMBER_ACCOUNT_HELP\'|translate:currency"></h4>\n                <i class="icon dark ion-ios-arrow-right"></i>\n              </div>\n            </div>\n\n            <!-- Allow extension here -->\n            <cs-extension-point name="select-account-type"></cs-extension-point>\n\n            <!-- simple wallet -->\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="selectAccountTypeAndClose(\'wallet\')">\n              <div class="item-content item-text-wrap">\n                <i class="item-image icon dark ion-card"></i>\n                <h2 translate>ACCOUNT.NEW.WALLET_ACCOUNT</h2>\n                <h4 class="gray" translate>ACCOUNT.NEW.WALLET_ACCOUNT_HELP</h4>\n                <i class="icon dark ion-ios-arrow-right"></i> </div>\n            </div>\n          </div>\n          <div class="padding hidden-xs text-right">\n            <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n            </button>\n          </div>\n        </ion-content>\n      </ion-slide-page>\n    \n</ion-slides></ion-modal-view>\n'),e.put("templates/join/modal_join_member.html",'<ion-modal-view class="modal-full-height">\n\n  <ion-header-bar class="bar-positive">\n\n    <button class="button button-clear visible-xs" ng-if="!slides.slider.activeIndex" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-arrow-back buttons header-item" ng-click="slidePrev()" ng-if="slides.slider.activeIndex && slideBehavior.hasPreviousButton">\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-help-outline visible-xs" ng-if="slideBehavior.helpAnchor" ng-click="showHelpModal(slideBehavior.helpAnchor)">\n    </button>\n\n    <h1 class="title" translate>ACCOUNT.NEW.MEMBER_ACCOUNT_TITLE</h1>\n\n    <!-- next -->\n    <button class="button button-clear icon-right visible-xs" ng-if="slideBehavior.hasNextButton" ng-click="doNext()">\n      <span translate>COMMON.BTN_NEXT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n    <!-- accept -->\n    <button class="button button-clear icon-right visible-xs" ng-class="{\'button-text-stable\': !isLicenseRead}" ng-if="slideBehavior.hasAcceptButton" ng-click="isLicenseRead ? doNext() : undefined">\n      <span translate>ACCOUNT.NEW.BTN_ACCEPT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n    <!-- send -->\n    <button class="button button-clear icon-right visible-xs" ng-if="slideBehavior.hasSendButton" ng-click="doNewAccount()">\n      <i class="icon ion-android-send"></i>\n    </button>\n  </ion-header-bar>\n\n\n    <ion-slides options="slides.options" slider="slides.slider" ng-init="console.log(\'START SLIDE\');">\n\n      <!-- STEP 1: license -->\n      <ion-slide-page ng-if="licenseFileUrl">\n        <ion-content class="has-header" scroll="false">\n            <div class="padding" translate>ACCOUNT.NEW.INFO_LICENSE</div>\n\n            <div class="center padding" ng-if="loading">\n              <ion-spinner class="icon" icon="android"></ion-spinner>\n            </div>\n\n            <iframe ng-if="!loading" class="padding-left padding-right no-padding-xs iframe-license" id="iframe-license" ng-src="{{licenseFileUrl}}">\n            </iframe>\n\n            <div class="padding hidden-xs text-right">\n              <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>\n                COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-calm icon-right ion-chevron-right ink" ng-click="doNext(\'licenceForm\')" ng-disabled="!isLicenseRead" type="button" translate>\n                ACCOUNT.NEW.BTN_ACCEPT_LICENSE\n              </button>\n            </div>\n        </ion-content>\n      </ion-slide-page>\n\n      <!-- STEP 2: pseudo-->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n          <form name="pseudoForm" novalidate="" ng-submit="doNext(\'pseudoForm\')">\n\n            <div class="item item-text-wrap text-center padding">\n              <a class="pull-right icon-help hidden-xs" ng-click="showHelpModal(\'join-pseudo\')"></a>\n              <span translate>ACCOUNT.NEW.PSEUDO_WARNING</span>\n            </div>\n\n            <div class="list" ng-init="setForm(pseudoForm, \'pseudoForm\')">\n\n              <!-- pseudo -->\n              <div class="item item-input" ng-class="{\'item-input-error\': (pseudoForm.$submitted && pseudoForm.pseudo.$invalid) || (uiAlreadyUsed && formData.pseudo)}">\n                <span class="input-label" translate>ACCOUNT.NEW.PSEUDO</span>\n                <input id="pseudo" name="pseudo" type="text" placeholder="{{\'ACCOUNT.NEW.PSEUDO_HELP\' | translate}}" ng-model="formData.pseudo" autocomplete="off" ng-minlength="3" ng-maxlength="100" ng-pattern="userIdPattern" ng-model-options="{ debounce: 250 }" required>\n              </div>\n              <div class="form-errors" ng-show="pseudoForm.$submitted && pseudoForm.pseudo.$error" ng-messages="pseudoForm.pseudo.$error">\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT_WITH_LENGTH" translate-values="{minLength: 3}"></span>\n                </div>\n                <div class="form-error" ng-message="maxlength">\n                  <span translate="ERROR.FIELD_TOO_LONG_WITH_LENGTH" translate-values="{maxLength: 100}"></span>\n                </div>\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n                <div class="form-error" ng-message="pattern">\n                  <span translate="ERROR.INVALID_USER_ID"></span>\n                </div>\n              </div>\n\n              <!-- Show if valid pseudo-->\n              <div class="text-right" style="min-height: 18px">\n                <div class="form-error gray" ng-if="formData.computing && formData.pseudo">\n                  <ion-spinner class="icon ion-spinner-small" icon="android" ng-if="formData.computing && formData.pseudo"></ion-spinner>\n                  <span translate>ACCOUNT.NEW.CHECKING_PSEUDO</span>\n                </div>\n\n                <ng-if ng-if="!formData.computing && formData.pseudo">\n                  <div class="form-error balanced" ng-if="!uiAlreadyUsed ">\n                    <i class="icon ion-checkmark balanced"></i>\n                    <span translate>ACCOUNT.NEW.PSEUDO_AVAILABLE</span>\n                  </div>\n                  <div class="form-error" ng-if="uiAlreadyUsed">\n                    <i class="icon ion-close-circled assertive"></i>\n                    <span translate>ACCOUNT.NEW.PSEUDO_NOT_AVAILABLE</span>\n                  </div>\n                </ng-if>\n\n              </div>\n\n              <div class="padding hidden-xs text-right">\n                <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n                </button>\n                <button class="button button-calm icon-right ion-chevron-right ink" type="submit" ng-disabled="UIDFound" translate>\n                  COMMON.BTN_NEXT\n                </button>\n              </div>\n            </div>\n          </form>\n        </ion-content>\n      </ion-slide-page>\n\n\n      <!-- STEP 3: salt -->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n          <form name="saltForm" novalidate="" ng-submit="doNext(\'saltForm\')">\n\n            <div class="list" ng-init="setForm(saltForm, \'saltForm\')">\n\n              <div class="item item-text-wrap text-center padding hidden-xs">\n                <a class="pull-right icon-help" ng-click="showHelpModal(\'join-salt\')"></a>\n                <span translate>ACCOUNT.NEW.SALT_WARNING</span>\n              </div>\n\n              <!-- salt -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': saltForm.$submitted && saltForm.username.$invalid}">\n                <span class="input-label" translate>LOGIN.SALT</span>\n                <input ng-if="!showUsername" name="username" type="password" placeholder="{{\'LOGIN.SALT_HELP\' | translate}}" ng-change="formDataChanged()" ng-model="formData.username" autocomplete="off" ng-minlength="8" different-to="formData.pseudo" required>\n                <!-- different-to="formData.pseudo" -->\n                <input ng-if="showUsername" name="username" type="text" placeholder="{{\'LOGIN.SALT_HELP\' | translate}}" ng-change="formDataChanged()" ng-model="formData.username" autocomplete="off" ng-minlength="8" different-to="formData.pseudo" required>\n              </div>\n              <div class="form-errors" ng-show="saltForm.$submitted && saltForm.username.$error" ng-messages="saltForm.username.$error">\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT_WITH_LENGTH" translate-values="{minLength: 8}"></span>\n                </div>\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n                <div class="form-error" ng-message="differentTo">\n                  <span translate="ERROR.EQUALS_TO_PSEUDO"></span>\n                </div>\n              </div>\n\n              <!-- confirm salt -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': saltForm.$submitted && saltForm.confirmSalt.$invalid}">\n                <span class="input-label pull-right" translate>ACCOUNT.NEW.SALT_CONFIRM</span>\n                <input ng-if="!showUsername" name="confirmUsername" type="password" placeholder="{{\'ACCOUNT.NEW.SALT_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmUsername" autocomplete="off" compare-to="formData.username">\n                <input ng-if="showUsername" name="confirmUsername" type="text" placeholder="{{\'ACCOUNT.NEW.SALT_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmUsername" autocomplete="off" compare-to="formData.username">\n              </div>\n              <div class="form-errors" ng-show="saltForm.$submitted && saltForm.confirmUsername.$error" ng-messages="saltForm.confirmUsername.$error">\n                <div class="form-error" ng-message="compareTo">\n                  <span translate="ERROR.SALT_NOT_CONFIRMED"></span>\n                </div>\n              </div>\n\n              <!-- Show values -->\n              <div class="item item-toggle dark">\n                <span translate>COMMON.SHOW_VALUES</span>\n                <label class="toggle toggle-royal">\n                  <input type="checkbox" ng-model="showUsername">\n                  <div class="track">\n                    <div class="handle"></div>\n                  </div>\n                </label>\n              </div>\n\n              <div class="padding hidden-xs text-right">\n                <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n                </button>\n                <button class="button button-calm icon-right ion-chevron-right ink" type="submit" translate>\n                  COMMON.BTN_NEXT\n                  <i class="icon ion-arrow-right-a"></i>\n                </button>\n              </div>\n            </div>\n          </form>\n        </ion-content>\n      </ion-slide-page>\n\n      <!-- STEP 4: password-->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n          <form name="passwordForm" novalidate="" ng-submit="doNext(\'passwordForm\')">\n\n            <div class="item item-text-wrap text-center padding hidden-xs">\n              <a class="pull-right icon-help" ng-click="showHelpModal(\'join-password\')"></a>\n              <span translate>ACCOUNT.NEW.PASSWORD_WARNING</span>\n            </div>\n\n            <div class="list" ng-init="setForm(passwordForm, \'passwordForm\')">\n\n              <!-- password -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': passwordForm.$submitted && passwordForm.password.$invalid}">\n                <span class="input-label" translate>LOGIN.PASSWORD</span>\n                <input ng-if="!showPassword" name="password" type="password" placeholder="{{\'LOGIN.PASSWORD_HELP\' | translate}}" ng-model="formData.password" autocomplete="off" ng-change="formDataChanged()" ng-minlength="8" different-to="formData.username" required>\n                <input ng-if="showPassword" name="text" type="text" placeholder="{{\'LOGIN.PASSWORD_HELP\' | translate}}" ng-model="formData.password" autocomplete="off" ng-change="formDataChanged()" ng-minlength="8" different-to="formData.username" required>\n              </div>\n              <div class="form-errors" ng-show="passwordForm.$submitted && passwordForm.password.$error" ng-messages="passwordForm.password.$error">\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT_WITH_LENGTH" translate-values="{minLength: 8}"></span>\n                </div>\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n                <div class="form-error" ng-message="differentTo">\n                  <span translate="ERROR.EQUALS_TO_SALT"></span>\n                </div>\n              </div>\n\n              <!-- confirm password -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': passwordForm.$submitted && passwordForm.confirmPassword.$invalid}">\n                <span class="input-label" translate>ACCOUNT.NEW.PASSWORD_CONFIRM</span>\n                <input ng-if="!showPassword" name="confirmPassword" type="password" placeholder="{{\'ACCOUNT.NEW.PASSWORD_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmPassword" autocomplete="off" compare-to="formData.password">\n                <input ng-if="showPassword" name="confirmPassword" type="text" placeholder="{{\'ACCOUNT.NEW.PASSWORD_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmPassword" autocomplete="off" compare-to="formData.password">\n              </div>\n              <div class="form-errors" ng-show="passwordForm.$submitted && passwordForm.confirmPassword.$error" ng-messages="passwordForm.confirmPassword.$error">\n                <div class="form-error" ng-message="compareTo">\n                  <span translate="ERROR.PASSWORD_NOT_CONFIRMED"></span>\n                </div>\n              </div>\n\n              <!-- Show values -->\n              <div class="item item-toggle dark">\n                <span translate>COMMON.SHOW_VALUES</span>\n                <label class="toggle toggle-royal">\n                  <input type="checkbox" ng-model="showPassword">\n                  <div class="track">\n                    <div class="handle"></div>\n                  </div>\n                </label>\n              </div>\n            </div>\n\n            <div class="padding hidden-xs text-right">\n              <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-calm icon-right ion-chevron-right ink" type="submit" ng-click="getRevocationDocument()" translate>\n                  COMMON.BTN_NEXT\n              </button>\n            </div>\n\n            <div class="padding hidden-xs">\n            </div>\n          </form>\n        </ion-content>\n      </ion-slide-page>\n\n      <!--<cs-extension-point name="last-slide"></cs-extension-point>-->\n\n      <!-- STEP 5: last slide  -->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n\n          <!-- Computing -->\n          <div class="center padding" ng-if="formData.computing">\n            <ion-spinner icon="android"></ion-spinner>\n          </div>\n\n          <!-- Account available -->\n          <div ng-if="accountAvailable && !formData.computing">\n            <div class="padding text-center" translate>ACCOUNT.NEW.LAST_SLIDE_CONGRATULATION</div>\n\n            <div class="list">\n\n              <ion-item class="item text-center item-text-wrap">\n                <h3 class="gray" translate>LOGIN.ASSOCIATED_PUBKEY</h3>\n                <!-- do NOT add copy-on-click attribute here - see issue #470-->\n                <h3 class="dark bold">\n                  {{formData.pubkey}}\n                </h3>\n              </ion-item>\n            </div>\n\n            <div class="padding hidden-xs text-right">\n              <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-positive ink" ng-click="doNewAccount()" translate>\n                COMMON.BTN_SEND\n                <i class="icon ion-android-send"></i>\n              </button>\n            </div>\n          </div>\n\n          <!-- Existing non-empty account -->\n          <div ng-if="!accountAvailable && !formData.computing">\n\n            <ion-item class="item-icon-left item-text-wrap text-center">\n                <i class="icon ion-minus-circled assertive"></i>\n                <span id="modal-license" trust-as-html="\'ERROR.EXISTING_ACCOUNT\'|translate"></span>\n            </ion-item>\n\n            <div class="list">\n\n              <ion-item class="item item-text-wrap item-border">\n                <div class="padding text-center">\n                  <span class="gray text-no-wrap">\n                    {{formData.pubkey}}\n                  </span>\n                </div>\n              </ion-item>\n\n              <div class="padding text-center">\n                <span translate>ERROR.EXISTING_ACCOUNT_REQUEST</span>\n              </div>\n\n            </div>\n            <div class="padding hidden-xs text-left">\n              <button class="button button-assertive icon-left ion-chevron-left ink" ng-click="identifierRecovery()" translate>\n                COMMON.BTN_MODIFY\n              </button>\n            </div>\n          </div>\n\n        </ion-content>\n      </ion-slide-page>\n    </ion-slides>\n  \n</ion-modal-view>\n'),e.put("templates/join/modal_join_wallet.html",'<ion-modal-view class="modal-full-height">\n\n  <ion-header-bar class="bar-positive">\n\n    <button class="button button-clear visible-xs" ng-if="!slides.slider.activeIndex" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-arrow-back buttons header-item" ng-click="slidePrev()" ng-if="slideBehavior.hasPreviousButton">\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-help-outline visible-xs" ng-if="slideBehavior.helpAnchor" ng-click="showHelpModal(slideBehavior.helpAnchor)">\n    </button>\n\n    <h1 class="title" translate>ACCOUNT.NEW.WALLET_ACCOUNT_TITLE</h1>\n\n    <!-- next -->\n    <button class="button button-clear icon-right visible-xs" ng-if="slideBehavior.hasNextButton" ng-click="doNext()">\n      <span translate>COMMON.BTN_NEXT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n    <!-- send -->\n    <button class="button button-clear icon-right visible-xs" ng-if="slideBehavior.hasSendButton" ng-click="doNewAccount()">\n      <i class="icon ion-android-send"></i>\n    </button>\n  </ion-header-bar>\n\n\n    <ion-slides options="slides.options" slider="slides.slider">\n\n      <!-- STEP 1: salt -->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n          <form name="saltForm" novalidate="" ng-submit="doNext(\'saltForm\')">\n\n            <div class="list" ng-init="setForm(saltForm, \'saltForm\')">\n\n              <div class="item item-text-wrap text-center padding hidden-xs">\n                <a class="pull-right icon-help" ng-click="showHelpModal(\'join-salt\')"></a>\n                <span translate>ACCOUNT.NEW.SALT_WARNING</span>\n              </div>\n\n              <!-- salt -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': saltForm.$submitted && saltForm.username.$invalid}">\n                <span class="input-label" translate>LOGIN.SALT</span>\n                <input ng-if="!showUsername" name="username" type="password" placeholder="{{\'LOGIN.SALT_HELP\' | translate}}" ng-change="formDataChanged()" ng-model="formData.username" ng-minlength="8" required>\n                <input ng-if="showUsername" name="username" type="text" placeholder="{{\'LOGIN.SALT_HELP\' | translate}}" ng-change="formDataChanged()" ng-model="formData.username" ng-minlength="8" required>\n              </div>\n              <div class="form-errors" ng-show="saltForm.$submitted && saltForm.username.$error" ng-messages="saltForm.username.$error">\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT_WITH_LENGTH" translate-values="{minLength: 8}"></span>\n                </div>\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n              </div>\n\n              <!-- confirm salt -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': saltForm.$submitted && saltForm.confirmSalt.$invalid}">\n                <span class="input-label pull-right" translate>ACCOUNT.NEW.SALT_CONFIRM</span>\n                <input ng-if="!showUsername" name="confirmUsername" type="password" placeholder="{{\'ACCOUNT.NEW.SALT_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmUsername" compare-to="formData.username">\n                <input ng-if="showUsername" name="confirmUsername" type="text" placeholder="{{\'ACCOUNT.NEW.SALT_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmUsername" compare-to="formData.username">\n              </div>\n              <div class="form-errors" ng-show="saltForm.$submitted && saltForm.confirmUsername.$error" ng-messages="saltForm.confirmUsername.$error">\n                <div class="form-error" ng-message="compareTo">\n                  <span translate="ERROR.SALT_NOT_CONFIRMED"></span>\n                </div>\n              </div>\n\n              <!-- Show values -->\n              <div class="item item-toggle dark">\n                <span translate>COMMON.SHOW_VALUES</span>\n                <label class="toggle toggle-royal">\n                  <input type="checkbox" ng-model="showUsername">\n                  <div class="track">\n                    <div class="handle"></div>\n                  </div>\n                </label>\n              </div>\n\n              <div class="padding hidden-xs text-right">\n                <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n                </button>\n                <button class="button button-calm icon-right ion-chevron-right ink" type="submit" translate>\n                  COMMON.BTN_NEXT\n                  <i class="icon ion-arrow-right-a"></i>\n                </button>\n              </div>\n            </div>\n          </form>\n        </ion-content>\n      </ion-slide-page>\n\n      <!-- STEP 2: password-->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n          <form name="passwordForm" novalidate="" ng-submit="doNext(\'passwordForm\')">\n\n            <div class="item item-text-wrap text-center padding hidden-xs">\n              <a class="pull-right icon-help" ng-click="showHelpModal(\'join-password\')"></a>\n              <span translate>ACCOUNT.NEW.PASSWORD_WARNING</span>\n            </div>\n\n            <div class="list" ng-init="setForm(passwordForm, \'passwordForm\')">\n\n              <!-- password -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': passwordForm.$submitted && passwordForm.password.$invalid}">\n                <span class="input-label" translate>LOGIN.PASSWORD</span>\n                <input ng-if="!showPassword" name="password" type="password" placeholder="{{\'LOGIN.PASSWORD_HELP\' | translate}}" ng-model="formData.password" ng-change="formDataChanged()" ng-minlength="8" required>\n                <input ng-if="showPassword" name="text" type="text" placeholder="{{\'LOGIN.PASSWORD_HELP\' | translate}}" ng-model="formData.password" ng-change="formDataChanged()" ng-minlength="8" required>\n              </div>\n              <div class="form-errors" ng-show="passwordForm.$submitted && passwordForm.password.$error" ng-messages="passwordForm.password.$error">\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT_WITH_LENGTH" translate-values="{minLength: 8}"></span>\n                </div>\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n              </div>\n\n              <!-- confirm password -->\n              <div class="item item-input" ng-class="{ \'item-input-error\': passwordForm.$submitted && passwordForm.confirmPassword.$invalid}">\n                <span class="input-label" translate>ACCOUNT.NEW.PASSWORD_CONFIRM</span>\n                <input ng-if="!showPassword" name="confirmPassword" type="password" placeholder="{{\'ACCOUNT.NEW.PASSWORD_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmPassword" compare-to="formData.password">\n                <input ng-if="showPassword" name="confirmPassword" type="text" placeholder="{{\'ACCOUNT.NEW.PASSWORD_CONFIRM_HELP\' | translate}}" ng-model="formData.confirmPassword" compare-to="formData.password">\n              </div>\n              <div class="form-errors" ng-show="passwordForm.$submitted && passwordForm.confirmPassword.$error" ng-messages="passwordForm.confirmPassword.$error">\n                <div class="form-error" ng-message="compareTo">\n                  <span translate="ERROR.PASSWORD_NOT_CONFIRMED"></span>\n                </div>\n              </div>\n\n              <!-- Show values -->\n              <div class="item item-toggle dark">\n                <span translate>COMMON.SHOW_VALUES</span>\n                <label class="toggle toggle-royal">\n                  <input type="checkbox" ng-model="showPassword">\n                  <div class="track">\n                    <div class="handle"></div>\n                  </div>\n                </label>\n              </div>\n            </div>\n\n            <div class="padding hidden-xs text-right">\n              <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-calm icon-right ion-chevron-right ink" type="submit" translate>\n                  COMMON.BTN_NEXT\n              </button>\n            </div>\n\n            <div class="padding hidden-xs">\n            </div>\n          </form>\n        </ion-content>\n      </ion-slide-page>\n\n\n      <!--<cs-extension-point name="last-slide"></cs-extension-point>-->\n\n      <!-- STEP 3: last slide  -->\n      <ion-slide-page>\n        <ion-content class="has-header" scroll="false">\n\n          <!-- Computing -->\n\n          <div class="padding center" ng-if="formData.computing">\n            <ion-spinner icon="android"></ion-spinner>\n          </div>\n          <!-- ng-if="formData.computing" -->\n\n          <!-- Account available -->\n          <div ng-if="accountAvailable && !formData.computing">\n            <div class="padding text-center" translate>ACCOUNT.NEW.LAST_SLIDE_CONGRATULATION</div>\n\n            <div class="list">\n\n              <ion-item class="item item-text-wrap item-border">\n                <div class="dark pull-right padding-right" ng-if="formData.computing">\n                  <ion-spinner icon="android"></ion-spinner>\n                </div>\n                <span class="input-label" translate>COMMON.PUBKEY</span>\n                <span class="gray text-no-wrap" ng-if="formData.computing" translate>\n                  ACCOUNT.NEW.COMPUTING_PUBKEY\n                </span>\n                <span class="gray text-no-wrap" ng-if="formData.pubkey">\n                  {{formData.pubkey}}\n                </span>\n              </ion-item>\n            </div>\n\n            <div class="padding hidden-xs text-right">\n              <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-positive ink" ng-click="doNewAccount()" translate>\n                COMMON.BTN_CREATE\n              </button>\n            </div>\n          </div>\n\n          <!-- Existing non-empty account -->\n          <div ng-if="!accountAvailable && !formData.computing">\n\n            <ion-item class="item-icon-left item-text-wrap text-center">\n                <i class="icon ion-android-close active"></i>\n                <span id="modal-license" translate>ERROR.EXISTING_ACCOUNT</span>\n            </ion-item>\n\n\n            <div class="list">\n\n              <ion-item class="item item-text-wrap item-border">\n                <div class="dark pull-right padding-right" ng-if="formData.computing">\n                  <ion-spinner icon="android"></ion-spinner>\n                </div>\n                <span class="gray text-no-wrap" ng-if="formData.computing" translate>\n                  ACCOUNT.NEW.COMPUTING_PUBKEY\n                </span>\n                <div class="padding text-center">\n                  <span class="gray text-no-wrap" ng-if="formData.pubkey">\n                    {{formData.pubkey}}\n                  </span>\n                </div>\n              </ion-item>\n\n              <div class="padding text-center">\n                <span translate>ERROR.EXISTING_ACCOUNT_REQUEST</span>\n              </div>\n\n            </div>\n            <div class="padding hidden-xs text-left">\n              <button class="button button-assertive icon-left ion-chevron-left ink" ng-click="identifierRecovery()" translate>\n                COMMON.BTN_MODIFY\n              </button>\n            </div>\n          </div>\n\n        </ion-content>\n      </ion-slide-page>\n  \n</ion-slides></ion-modal-view>\n'),
e.put("templates/login/form_file_import.html",'<div class="item">\n  <p class="item-text-wrap" translate>LOGIN.FILE_FORM_HELP</p>\n</div>\n\n\n<div class="item item-icon-left item-text-wrap">\n  <i class="icon ion-ios-information-outline positive"></i>\n  <span class="positive" translate>LOGIN.FILE.HELP</span>\n</div>\n\n<div class="dropzone" dropzone="onKeyFileDrop(file)">\n  <div ng-if="!formData.file" onclick="angular.element(document.querySelector(\'#loginImportFile\'))[0].click();">\n    <h2 class="gray" translate>COMMON.CHOOSE_FILE</h2>\n    <input type="file" id="loginImportFile" accept=".yml" style="visibility:hidden; position:absolute" onchange="angular.element(this).scope().fileChanged(event)">\n  </div>\n\n  <div class="item item-icon-left item-icon-right stable-bg" ng-if="formData.file">\n    <i class="icon ion-document-text dark"></i>\n    <div class="item-content row">\n      <div class="col">\n        <h2>\n          {{formData.file.name}}\n        </h2>\n        <h4 class="dark" ng-if="formData.file.lastModified">\n          <span class="gray" translate>LOGIN.FILE.DATE</span> {{formData.file.lastModified/1000|formatDate}}\n        </h4>\n        <h5 class="dark">\n          <span class="gray" translate>LOGIN.FILE.SIZE</span> {{formData.file.size|formatInteger}} Ko\n        </h5>\n      </div>\n\n      <div class="col">\n        <h3>\n          <span class="gray" translate>COMMON.PUBKEY</span>\n          <ion-spinner class="ion-spinner-small" icon="android" ng-if="validatingFile"></ion-spinner>\n        </h3>\n        <h3 ng-if="!validatingFile">\n\n          <span class="dark animate-show-hide ng-hide" ng-show="formData.file.pubkey">{{formData.file.pubkey}}</span>\n          <span class="assertive animate-show-hide ng-hide" ng-show="!formData.file.valid"><br>\n            <i class="ion-close-circled assertive"></i>\n            {{formData.file.pubkey ? \'ERROR.AUTH_INVALID_PUBKEY\' : \'ERROR.AUTH_INVALID_FILE\' |translate}}\n          </span>\n        </h3>\n      </div>\n    </div>\n\n    <!--  -->\n    <a class="ion-close-round gray pull-right" style="font-size: 10px; position: absolute; top: 6px; right: 6px" ng-click="removeKeyFile()"></a>\n  </div>\n</div>\n\n\n<!-- keep auth after login (checkbox)  -->\n<ion-checkbox ng-model="formData.keepAuth" class="item ink item-text-wrap">\n  <div class="item-content dark" translate>LOGIN.MEMORIZE_AUTH_FILE</div>\n</ion-checkbox>\n\n\n'),e.put("templates/login/form_login.html",'\n  <form name="loginForm" novalidate="" ng-submit="doLogin()" autocomplete="off">\n\n   <div class="list padding no-padding-xs" ng-init="setForm(loginForm)" ng-switch on="formData.method">\n\n     <div class="item hidden-xs no-padding" ng-if="showMethods">\n       <div class="pull-right">\n          <a class="button button-text button-small-padding icon-right ink" ng-click="showMethodsPopover($event)">\n            <i class="icon ion-wrench"></i>\n            {{\'LOGIN.BTN_METHODS\'| translate}}\n          </a>&nbsp;\n          <a class="button button-icon positive button-small-padding icon ion-ios-help-outline" style="right: 8px" ng-click="showHelpModal(\'login-method\')">\n          </a>\n       </div>\n     </div>\n\n      <!-- Form content, depending of the login method -->\n      <div ng-switch-when="SCRYPT_DEFAULT">\n        <ng-include src="\'templates/login/form_scrypt.html\'"></ng-include>\n      </div>\n      <div ng-switch-when="SCRYPT_ADVANCED">\n        <ng-include src="\'templates/login/form_scrypt_advanced.html\'"></ng-include>\n      </div>\n      <div ng-switch-when="PUBKEY">\n        <ng-include src="\'templates/login/form_pubkey.html\'"></ng-include>\n      </div>\n      <div ng-switch-when="FILE">\n        <ng-include src="\'templates/login/form_file_import.html\'"></ng-include>\n      </div>\n      <div ng-switch-default>\n        <ng-include src="\'templates/login/form_scrypt.html\'"></ng-include>\n      </div>\n    </div>\n\n    <div class="padding hidden-xs text-right">\n      <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n      </button>\n      <button class="button button-positive ink" ng-class="{\'button-assertive\': isAuth, \'button-positive\': !isAuth}" type="submit">\n        {{isAuth ? \'AUTH.BTN_AUTH\' : \'COMMON.BTN_LOGIN\' | translate}}\n      </button>\n    </div>\n\n    <div class="text-center no-padding visible-xs">\n      <br>\n      <a ng-click="showMethodsPopover($event)">\n        <i class="ion-loop"></i>\n        <span translate>LOGIN.BTN_METHODS_DOTS</span>\n      </a>\n      <br><br>\n    </div>\n\n    <!-- Register ? -->\n    <ng-if ng-if="!isAuth">\n      <div class="text-center no-padding">\n        {{\'LOGIN.NO_ACCOUNT_QUESTION\'|translate}}\n        <br class="visible-xs">\n        <a ng-click="showJoinModal()" translate>\n          LOGIN.CREATE_ACCOUNT\n        </a>\n      </div>\n\n      <br class="visible-xs">\n\n      <div class="text-center no-padding">\n        <a ng-click="showAccountSecurityModal()" translate>\n          LOGIN.FORGOTTEN_ID\n        </a>\n      </div>\n    </ng-if>\n  </form>\n'),e.put("templates/login/form_pubkey.html",'<div class="item">\n  <p class="item-text-wrap" translate>LOGIN.PUBKEY_FORM_HELP</p>\n</div>\n\n<!-- pubkey  -->\n<div class="item item-input item-button-right" ng-class="{ \'item-input-error\': form.$submitted && form.pubkey.$invalid}">\n  <span class="input-label hidden-xs" translate>COMMON.PUBKEY</span>\n  <input name="pubkey" type="text" placeholder="{{\'LOGIN.PUBKEY_HELP\' | translate}}" ng-model="formData.pubkey" ng-model-options="{ debounce: 650 }" ng-pattern="pubkeyPattern" required>\n  <a class="button button-stable icon ion-android-search ink" ng-click="showWotLookupModal()">\n  </a>\n</div>\n<div class="form-errors" ng-show="form.$submitted && form.pubkey.$error" ng-messages="form.pubkey.$error">\n  <div class="form-error" ng-message="required">\n    <span translate="ERROR.FIELD_REQUIRED"></span>\n  </div>\n  <div class="form-error" ng-message="pattern">\n    <span translate="ERROR.INVALID_PUBKEY"></span>\n  </div>\n</div>\n\n'),e.put("templates/login/form_scrypt.html",'\n  <div class="item item-text-wrap">\n    <p ng-bind-html="isAuth ? \'AUTH.SCRYPT_FORM_HELP\': \'LOGIN.SCRYPT_FORM_HELP\'|translate"></p>\n  </div>\n\n  <!-- avoid web browser to fill password automatically -->\n  <input type="password" name="fake-password" autocomplete="off" style="visibility:hidden; position:absolute">\n\n  <!-- salt (=username, to enable browser login cache) -->\n  <label class="item item-input" ng-class="{ \'item-input-error\': form.$submitted && form.username.$invalid}">\n    <span class="input-label hidden-xs" translate>LOGIN.SALT</span>\n    <input name="username" type="password" placeholder="{{\'LOGIN.SALT_HELP\' | translate}}" autocomplete="off" ng-model="formData.username" ng-model-options="{ debounce: 650 }" class="highlight-light" required>\n  </label>\n  <div class="form-errors" ng-show="form.$submitted && form.username.$error" ng-messages="form.username.$error">\n    <div class="form-error" ng-message="required">\n      <span translate="ERROR.FIELD_REQUIRED"></span>\n    </div>\n  </div>\n\n  <!-- password-->\n  <label class="item item-input" ng-class="{ \'item-input-error\': form.$submitted && form.password.$invalid}">\n    <span class="input-label hidden-xs" translate>LOGIN.PASSWORD</span>\n    <input name="password" type="password" placeholder="{{\'LOGIN.PASSWORD_HELP\' | translate}}" autocomplete="off" ng-model="formData.password" ng-model-options="{ debounce: 650 }" select-on-click required>\n  </label>\n  <div class="form-errors" ng-show="form.$submitted && form.password.$error" ng-messages="form.password.$error">\n    <div class="form-error" ng-message="required">\n      <span translate="ERROR.FIELD_REQUIRED"></span>\n    </div>\n  </div>\n\n  <div class="item item-icon-right item-text-wrap" ng-class="{ \'item-input-error\': pubkeyError, \'item-input\': showPubkey}">\n    <span class="input-label hidden-xs animate-show-hide ng-hide" ng-show="showPubkey" translate>COMMON.PUBKEY</span>\n    <div class="item-content text-wrap">\n      <a class="positive ink animate-show-hide ng-hide" ng-show="showComputePubkeyButton && !pubkey" ng-click="computePubkey()">\n        <i class="ion-eye"></i>\n        {{\'COMMON.BTN_SHOW_PUBKEY\' | translate}}\n      </a>\n      <span class="gray animate-show-hide" ng-show="!computing && pubkey">{{pubkey}}</span>\n      <ion-spinner class="ion-spinner-small" icon="android" ng-if="computing"></ion-spinner>\n    </div>\n    <a class="button button-icon positive button-small-padding icon ion-ios-help-outline animate-show-hide" ng-click="showHelpModal(\'login-pubkey\')" ng-if="!expectedPubkey" ng-show="showPubkey">\n    </a>\n    <span class="button button-icon balanced button-small-padding icon ion-checkmark animate-show-hide" ng-if="expectedPubkey" ng-show="showPubkey && !showComputePubkeyButton && !computing && !pubkeyError">\n    </span>\n  </div>\n  <div class="form-errors" ng-if="expectedPubkey">\n    <div class="form-error" ng-show="pubkeyError">\n      <span trust-as-html="::\'ERROR.AUTH_INVALID_PUBKEY\'|translate:{pubkey: expectedPubkey}"></span>\n    </div>\n  </div>\n\n'),e.put("templates/login/form_scrypt_advanced.html",'\n<!-- Scrypt method: params -->\n<div class="row responsive-md responsive-sm padding-left">\n  <div class="col col-33 no-padding">\n    <label class="item item-input item-select">\n      <select ng-model="formData.scrypt" style="max-width: 100%" ng-change="changeScrypt(formData.scrypt)" ng-options="l as (l.label | translate) for l in scryptParamsValues track by l.id">\n      </select>\n    </label>\n  </div>\n  <div class="col no-padding">\n    <label class="item item-input">\n      <span class="input-label" translate>LOGIN.SCRYPT.N</span>\n      <input class="no-padding-right" type="number" placeholder="N" ng-model="formData.scrypt.params.N" ng-model-options="{ debounce: 650 }" ng-change="onScryptFormChanged()" required>\n    </label>\n  </div>\n  <div class="col no-padding">\n    <label class="item item-input">\n      <span class="input-label" translate>LOGIN.SCRYPT.r</span>\n      <input class="no-padding-right" type="number" placeholder="r" ng-model="formData.scrypt.params.r" ng-model-options="{ debounce: 650 }" ng-change="onScryptFormChanged()" required>\n    </label>\n  </div>\n  <div class="col no-padding">\n    <label class="item item-input">\n      <span class="input-label" translate>LOGIN.SCRYPT.p</span>\n      <input class="no-padding-right" type="number" placeholder="p" ng-model="formData.scrypt.params.p" ng-model-options="{ debounce: 650 }" ng-change="onScryptFormChanged()" required>\n    </label>\n  </div>\n</div>\n\n\n<!-- WARN: not implemented yet -->\n<p class="energized-100-bg padding">\n  <i class="icon ion-android-warning"></i>\n  <span translate>INFO.FEATURES_NOT_IMPLEMENTED</span>\n</p>\n\n<ng-include src="\'templates/login/form_scrypt.html\'"></ng-include>\n\n'),e.put("templates/login/item_remember_me.html",'<!-- remember me (checkbox) -->\n<ion-checkbox ng-model="formData.rememberMe" ng-if="!isAuth" class="item ink item-text-wrap">\n  <div class="item-content dark" translate>SETTINGS.REMEMBER_ME</div>\n</ion-checkbox>\n'),e.put("templates/login/modal_login.html",'<ion-modal-view class="modal-full-height modal-login">\n  <ion-header-bar class="" ng-class="{\'bar-positive\': !isAuth, \'bar-assertive\': isAuth}">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n    <h1 class="title" ng-bind-html="isAuth ? \'AUTH.TITLE\' : \'LOGIN.TITLE\' | translate">\n    </h1>\n    <div class="buttons buttons-right">\n      <div class="secondary-buttons">\n        <button class="button button-positive button-icon button-clear icon ion-android-done visible-xs" ng-click="doLogin()">\n        </button>\n      </div>\n    </div>\n\n  </ion-header-bar>\n\n  <ion-content>\n    <ng-include src="\'templates/login/form_login.html\'"></ng-include>\n  </ion-content>\n</ion-modal-view>\n'),e.put("templates/login/popover_methods.html",'<ion-popover-view class="fit has-header popover-login-methods" ng-class="{\'auth\': isAuth}">\n  <ion-header-bar>\n    <h1 class="title" translate>LOGIN.METHOD_POPOVER_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n\n\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink" ng-click="changeMethod(\'SCRYPT_DEFAULT\')">\n        <i class="icon ion-shuffle" style="font-size: 22px"></i>\n        {{\'LOGIN.METHOD.SCRYPT_DEFAULT\' | translate}}\n      </a>\n\n      <a class="item item-icon-left ink" ng-click="changeMethod(\'SCRYPT_ADVANCED\')">\n        <i class="icon ion-shuffle" style="font-size: 22px"></i>\n        <i class="icon-secondary ion-plus" style="font-size: 13px; left: 40px; margin-top: -4px"></i>\n        {{\'LOGIN.METHOD.SCRYPT_ADVANCED\' | translate}}\n      </a>\n\n      <a class="item item-icon-left ink hidden-xs" ng-click="changeMethod(\'FILE\')">\n        <i class="icon ion-document-text"></i>\n        {{\'LOGIN.METHOD.FILE\' | translate}}\n      </a>\n\n      <ng-if ng-if="!isAuth">\n\n        <div class="item-divider"></div>\n\n        <a class="item item-icon-left ink" ng-click="changeMethod(\'PUBKEY\')">\n          <i class="icon ion-key"></i>\n          {{\'LOGIN.METHOD.PUBKEY\' | translate}}\n        </a>\n\n      </ng-if>\n\n<!--\n      {id: \'PUBKEY\', label: \'LOGIN.METHOD.PUBKEY\'}\n      ];\n      var authMethods = [\n      {id: \'SCRYPT_DEFAULT\', label: \'LOGIN.METHOD.SCRYPT_DEFAULT\'},\n      {\n      id: \'SCRYPT_ADVANCED\', label: \'LOGIN.METHOD.SCRYPT_ADVANCED\',\n      values: _.keys(CryptoUtils.constants.SCRYPT_PARAMS).reduce(function(res, key) {\n      return res.concat({id: key, label: \'LOGIN.SCRYPT.\' + key, params: CryptoUtils.constants.SCRYPT_PARAMS[key]});\n      }, [{id: \'user\', label: \'LOGIN.SCRYPT.USER\', params: {}}])\n      },\n      {id: \'FILE\', label: \'LOGIN.METHOD.FILE\'}\n       -->\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/network/item_content_peer.html",'\n    <i class="icon ion-android-desktop" ng-class=":rebind:{\'balanced\': peer.online && peer.hasMainConsensusBlock, \'energized\': peer.online && peer.hasConsensusBlock, \'gray\': peer.online && !peer.hasConsensusBlock && !peer.hasMainConsensusBlock, \'stable\': !peer.online}" ng-if=":rebind:!peer.avatar"></i>\n    <b class="icon-secondary ion-person" ng-if=":rebind:!peer.avatar" ng-class=":rebind:{\'balanced\': peer.online && peer.hasMainConsensusBlock, \'energized\': peer.online && peer.hasConsensusBlock, \'gray\': peer.online && !peer.hasConsensusBlock && !peer.hasMainConsensusBlock, \'stable\': !peer.online}" style="left: 26px; top: -3px"></b>\n    <i class="avatar" ng-if=":rebind:peer.avatar" style="background-image: url(\'{{:rebind:peer.avatar.src}}\')"></i>\n    <b class="icon-secondary assertive ion-close-circled" ng-if=":rebind:!peer.online" style="left: 37px; top: -10px"></b>\n\n    <div class="row no-padding">\n      <div class="col no-padding">\n        <h3 class="dark" ng-if=":rebind:!peer.bma.private">{{:rebind:peer.dns || peer.server}}</h3>\n        <h4 class="gray" ng-if=":rebind:peer.bma.private"><i class="ion-flash"></i> {{\'NETWORK.VIEW.PRIVATE_ACCESS\'|translate}}</h4>\n        <h4>\n          <span class="gray" ng-if=":rebind:!peer.uid">\n            <i class="ion-key"></i> {{:rebind:peer.pubkey|formatPubkey}}\n          </span>\n          <span class="positive" ng-if=":rebind:peer.uid">\n            <i class="ion-person"></i> {{:rebind:peer.name || peer.uid}}\n          </span>\n          <span class="gray">{{:rebind:peer.dns && (\' | \' + peer.server) + (peer.bma.path||\'\') }}</span>\n        </h4>\n      </div>\n      <div class="col col-15 no-padding text-center hidden-xs hidden-sm" ng-if="::expertMode">\n        <div style="min-width: 50px; padding-top: 5px" title="SSL">\n          <span ng-if=":rebind:peer.isSsl()">\n            <i class="ion-locked"></i><small class="hidden-md"> SSL</small>\n          </span>\n          <span ng-if=":rebind:peer.isWs2p()" ng-click="showWs2pPopover($event, peer)" title="WS2P">\n            <i class="ion-arrow-swap"></i><small class="hidden-md"> WS2P</small>\n          </span>\n        </div>\n        <div ng-if=":rebind:!peer.isWs2p()&&peer.hasEndpoint(\'ES_USER_API\')" ng-click="showEndpointsPopover($event, peer, \'ES_USER_API\')" title="Cesium+">\n          <i class="ion-es-user-api"></i>\n          <b class="ion-plus dark" style="position: relative; left: -14px; top:-17px; font-size : 16px"></b>\n        </div>\n        <div ng-if=":rebind:!peer.isWs2p()&&peer.isTor()" ng-click="showEndpointsPopover($event, peer, \'BMATOR\')">\n          <i class="ion-bma-tor-api"></i>\n        </div>\n        <div ng-if=":rebind:peer.isWs2p()&&peer.isTor()" ng-click="showWs2pPopover($event, peer)">\n          <i class="ion-bma-tor-api"></i>\n        </div>\n      </div>\n      <div class="col col-20 no-padding text-center" ng-if="::expertMode && search.type != \'offline\'">\n        <h3 class="hidden-sm hidden-xs gray">\n          <span ng-if=":rebind:peer.uid"><i class="ion-lock-combination"></i>{{:rebind:peer.difficulty||\'?\'}}</span>\n          <span ng-if=":rebind:!peer.uid" translate>PEER.MIRROR</span>\n        </h3>\n        <h4 class="hidden-sm hidden-xs gray">{{:rebind: peer.version ? (\'v\'+peer.version) : \'\'}}</h4>\n      </div>\n      <div class="col col-20 no-padding text-center">\n        <span id="{{$index === 0 ? helptipPrefix + \'-peer-0-block\' : \'\'}}" class="badge" ng-class=":rebind:{\'badge-balanced\': peer.hasMainConsensusBlock, \'badge-energized\': peer.hasConsensusBlock, \'ng-hide\': !peer.currentNumber }">\n          {{::!expertMode ? (\'COMMON.BLOCK\'|translate) : \'\' }}\n          {{:rebind:peer.currentNumber|formatInteger}}</span>\n        <span class="badge badge-secondary" ng-if=":rebind:peer.consensusBlockDelta && expertMode">\n          <i class="ion-clock"></i>&nbsp;\n          {{:rebind:peer.consensusBlockDelta|formatDurationTime}}</span>\n\n      </div>\n    </div>\n'),e.put("templates/network/items_peers.html",'<div ng-class="::motion.ionListClass" class="no-padding">\n\n  <div class="item item-text-wrap no-border done in gray no-padding-top no-padding-bottom inline text-italic" ng-if="::isHttps && expertMode">\n    <small><i class="icon ion-alert-circled"></i> {{\'NETWORK.INFO.ONLY_SSL_PEERS\'|translate}}</small>\n  </div>\n\n  <div class="item row row-header hidden-xs hidden-sm done in" ng-if="::expertMode">\n    <a class="col col-header no-padding dark" ng-click="toggleSort(\'uid\')">\n      <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'uid\'"></cs-sort-icon>\n      {{\'COMMON.UID\' | translate}} / {{\'COMMON.PUBKEY\' | translate}}\n    </a>\n    <a class="no-padding dark hidden-md col col-15 col-header" ng-click="toggleSort(\'api\')">\n      <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'api\'"></cs-sort-icon>\n      {{\'PEER.API\' | translate}}\n    </a>\n    <a class="no-padding dark col col-20 col-header" ng-click="toggleSort(\'difficulty\')">\n      <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'difficulty\'"></cs-sort-icon>\n      {{\'PEER.DIFFICULTY\' | translate}}\n    </a>\n    <a class="col col-20 col-header no-padding dark" ng-click="toggleSort(\'current_block\')">\n      <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'current_block\'"></cs-sort-icon>\n      {{\'PEER.CURRENT_BLOCK\' | translate}}\n    </a>\n  </div>\n\n  <div ng-repeat="peer in :rebind:search.results track by peer.id" class="item item-peer item-icon-left ink" ng-class="::ionItemClass" id="{{helptipPrefix}}-peer-{{$index}}" ng-click="selectPeer(peer)" ng-include="\'templates/network/item_content_peer.html\'">\n  </div>\n\n</div>\n'),e.put("templates/network/lookup_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>PEER.POPOVER_FILTER_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left item-icon-right ink" ng-click="toggleSearchType(\'member\')">\n        <i class="icon ion-person"></i>\n        {{\'PEER.MEMBERS\' | translate}}\n        <i class="icon ion-ios-checkmark-empty" ng-show="search.type==\'member\'"></i>\n      </a>\n\n      <a class="item item-icon-left item-icon-right ink" ng-click="toggleSearchType(\'mirror\')">\n        <i class="icon ion-radio-waves"></i>\n        {{\'PEER.MIRRORS\' | translate}}\n        <i class="icon ion-ios-checkmark-empty" ng-show="search.type==\'mirror\'"></i>\n      </a>\n\n      <a class="item item-icon-left item-icon-right ink" ng-click="toggleSearchType(\'offline\')">\n        <i class="icon ion-eye-disabled"></i>\n        {{\'PEER.OFFLINE\' | translate}}\n        <i class="icon ion-ios-checkmark-empty" ng-show="search.type==\'offline\'"></i>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/network/modal_network.html",'<ion-modal-view id="nodes" class="modal-full-height" cache-view="false">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>PEER.PEER_LIST</h1>\n    <div class="buttons buttons-right header-item">\n      <span class="secondary">\n        <button class="button button-clear icon ion-loop button-clear" ng-click="refresh()">\n\n        </button>\n        <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showActionsPopover($event)">\n        </button>\n      </span>\n    </div>\n  </ion-header-bar>\n\n  <ion-content>\n    <div class="list">\n      <div class="padding padding-xs" style="display: block; height: 60px">\n\n        <div class="pull-left">\n          <h4 ng-if="enableFilter && search.type==\'member\'">\n            {{\'PEER.MEMBERS\' | translate}} <span ng-if="!search.loading">({{search.results.length}})</span>\n          </h4>\n          <h4 ng-if="enableFilter && search.type==\'mirror\'">\n            {{\'PEER.MIRRORS\' | translate}} <span ng-if="!search.loading">({{search.results.length}})</span>\n          </h4>\n          <h4 ng-if="!enableFilter || !search.type">\n            {{\'PEER.ALL_PEERS\' | translate}} <span ng-if="!search.loading">({{search.results.length}})</span>\n          </h4>\n        </div>\n\n        <div class="pull-right">\n          <ion-spinner class="icon" icon="android" ng-if="search.loading"></ion-spinner>&nbsp;\n\n          <div class="pull-right">\n            <a class="button button-text button-small hidden-xs hidden-sm ink" ng-if="enableFilter" ng-class="{\'button-text-positive\': search.type==\'member\'}" ng-click="toggleSearchType(\'member\')">\n              <i class="icon ion-person"></i>\n              {{\'PEER.MEMBERS\'|translate}}\n            </a>\n            &nbsp;\n            <a class="button button-text button-small hidden-xs hidden-sm ink" ng-if="enableFilter" ng-class="{\'button-text-positive\': search.type==\'mirror\'}" ng-click="toggleSearchType(\'mirror\')">\n              <i class="icon ion-ios-infinite"></i>\n              {{\'PEER.MIRRORS\'|translate}}\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <ng-include src="\'templates/network/items_peers.html\'"></ng-include>\n\n\t  </div>\n  </ion-content>\n</ion-modal-view>\n'),e.put("templates/network/popover_endpoints.html",'<ion-popover-view class="popover-endpoints popover-light" style="height: {{(titleKey?30:0)+((!items || items.length &lt;= 1) ? 55 : 3+items.length*52)}}px">\n  <ion-header-bar class="bar bar-header stable-bg" ng-if="titleKey">\n    <div class="title">\n      {{titleKey | translate:titleValues }}\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list" ng-class="{\'has-header\': titleKey}">\n      <div class="item item-text-wrap" ng-repeat="item in items">\n        <div class="item-label" ng-if="item.label">{{item.label | translate}}</div>\n        <div id="endpoint_{{$index}}" class="badge item-note dark">{{item.value}}\n      </div>\n    </div>\n  </div></ion-content>\n</ion-popover-view>\n'),e.put("templates/network/popover_network.html",'<ion-popover-view class="fit hidden-xs hidden-sm popover-notification popover-network" ng-controller="NetworkLookupPopoverCtrl">\n  <ion-header-bar class="stable-bg block">\n    <div class="title">\n      {{\'MENU.NETWORK\'|translate}}\n      <ion-spinner class="ion-spinner-small" icon="android" ng-if="search.loading"></ion-spinner>\n    </div>\n\n    <div class="pull-right">\n      <a ng-class="{\'positive\': search.type==\'member\', \'dark\': search.type!==\'member\'}" ng-click="toggleSearchType(\'member\')" translate>PEER.MEMBERS</a>\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="list no-padding">\n      <ng-include src="\'templates/network/items_peers.html\'"></ng-include>\n    </div>\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg block">\n    <!-- settings -->\n    <div class="pull-left">\n      <a class="positive" ui-sref="app.settings" ng-click="closePopover()" translate>COMMON.NOTIFICATIONS.SETTINGS</a>\n    </div>\n\n    <!-- show all -->\n    <div class="pull-right">\n      <a class="positive" ui-sref="app.network" ng-click="closePopover()" translate>COMMON.NOTIFICATIONS.SHOW_ALL</a>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("templates/network/popover_peer_info.html",'<ion-popover-view class="fit hidden-xs hidden-sm popover-notification popover-peer-info" ng-controller="PeerInfoPopoverCtrl">\n  <ion-header-bar class="stable-bg block">\n    <div class="title">\n      {{\'PEER.VIEW.TITLE\'|translate}}\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list no-padding" ng-if="!loading">\n\n      <div class="item" ng-if=":rebind:formData.software">\n        <i class="ion-outlet"></i>\n        {{\'NETWORK.VIEW.SOFTWARE\'|translate}}\n        <div class="badge" ng-class=":rebind:{\'badge-energized\': formData.isPreRelease, \'badge-assertive\': formData.hasNewRelease }">\n          {{formData.software}} v{{:rebind:formData.version}}\n        </div>\n        <div class="gray badge badge-secondary" ng-if="formData.isPreRelease">\n          <i class="ion-alert-circled"></i>\n          <span ng-bind-html="\'NETWORK.VIEW.WARN_PRE_RELEASE\'|translate: formData.latestRelease"></span>\n        </div>\n        <div class="gray badge badge-secondary" ng-if="formData.hasNewRelease">\n          <i class="ion-alert-circled"></i>\n          <span ng-bind-html="\'NETWORK.VIEW.WARN_NEW_RELEASE\'|translate: formData.latestRelease"></span>\n        </div>\n      </div>\n\n      <div class="item">\n        <i class="ion-locked"></i>\n        {{\'NETWORK.VIEW.ENDPOINTS.BMAS\'|translate}}\n        <div class="badge badge-balanced" ng-if=":rebind:formData.useSsl" translate>COMMON.BTN_YES</div>\n        <div class="badge badge-assertive" ng-if=":rebind:!formData.useSsl" translate>COMMON.BTN_NO</div>\n      </div>\n\n      <div class="item">\n        <i class="ion-cube"></i>\n        {{\'BLOCKCHAIN.VIEW.TITLE_CURRENT\'|translate}}\n        <div class="badge badge-balanced">\n          {{:rebind:formData.number | formatInteger}}\n        </div>\n      </div>\n\n      <div class="item">\n          <i class="ion-clock"></i>\n          {{\'CURRENCY.VIEW.MEDIAN_TIME\'|translate}}\n        <div class="badge dark">\n          {{:rebind:formData.medianTime | formatDate}}\n        </div>\n      </div>\n\n      <div class="item">\n        <i class="ion-lock-combination"></i>\n        {{\'CURRENCY.VIEW.POW_MIN\'|translate}}\n        <div class="badge dark">\n          {{:rebind:formData.powMin | formatInteger}}\n        </div>\n      </div>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="default"></cs-extension-point>\n\n    </div>\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg block">\n    <!-- settings -->\n    <div class="pull-left">\n      <a class="positive" ui-sref="app.settings" ng-click="closePopover()" translate>MENU.SETTINGS</a>\n    </div>\n\n    <!-- show all -->\n    <div class="pull-right">\n      <a class="positive" ui-sref="app.view_peer" ng-click="closePopover()" translate>PEER.BTN_SHOW_PEER</a>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("templates/network/view_network.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>MENU.NETWORK</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="refresh()">\n    </button>\n  </ion-nav-buttons>\n\n\n  <ion-content scroll="true" ng-init="enableFilter=true; ionItemClass=\'item-border-large\';">\n\n    <div class="row responsive-sm responsive-md responsive-lg">\n      <div class="col list col-border-right">\n        <div class="padding padding-xs" style="display: block; height: 60px">\n          <div class="pull-left">\n            <h4>\n              <span ng-if="enableFilter && search.type==\'member\'" translate>PEER.MEMBERS</span>\n              <span ng-if="enableFilter && search.type==\'mirror\'" translate>PEER.MIRRORS</span>\n              <span ng-if="enableFilter && search.type==\'offline\'" translate>PEER.OFFLINE</span>\n              <span ng-if="!enableFilter || !search.type" translate>PEER.ALL_PEERS</span>\n              <span ng-if="search.results.length">({{search.results.length}})</span>\n              <ion-spinner ng-if="search.loading" class="icon ion-spinner-small" icon="android"></ion-spinner>\n            </h4>\n          </div>\n\n          <div class="pull-right">\n\n            <div class="pull-right" ng-if="enableFilter">\n              <a class="button button-text button-small hidden-xs hidden-sm ink" ng-class="{\'button-text-positive\': search.type==\'member\'}" ng-click="toggleSearchType(\'member\')">\n                <i class="icon ion-person-stalker"></i>\n                {{\'PEER.MEMBERS\'|translate}}\n              </a>\n              &nbsp;\n              <a class="button button-text button-small hidden-xs hidden-sm ink" ng-class="{\'button-text-positive\': search.type==\'mirror\'}" ng-click="toggleSearchType(\'mirror\')">\n                <i class="icon ion-radio-waves"></i>\n                {{\'PEER.MIRRORS\'|translate}}\n              </a>\n\n              <a class="button button-text button-small hidden-xs hidden-sm ink" ng-class="{\'button-text-positive\': search.type==\'offline\', \'button-text-stable\': search.type!=\'offline\'}" ng-click="toggleSearchType(\'offline\')">\n                <i class="icon ion-close-circled light-gray"></i>\n                <span>{{\'PEER.OFFLINE\'|translate}}</span>\n              </a>\n\n              <!-- Allow extension here -->\n              <cs-extension-point name="filter-buttons"></cs-extension-point>\n            </div>\n          </div>\n        </div>\n\n        <div id="helptip-network-blockchain" style="display: block"></div>\n        <div id="helptip-network-peers" style="display: block"></div>\n\n        <ng-include src="\'templates/network/items_peers.html\'"></ng-include>\n      </div>\n\n      <div class="col col-33" ng-controller="BlockLookupCtrl">\n\n        <div class="padding padding-xs" style="display: block; height: 100px">\n          <h4 translate>BLOCKCHAIN.LOOKUP.LAST_BLOCKS</h4>\n\n          <div class="pull-right hidden-xs hidden-sm">\n            <a class="button button-text button-small ink" ng-class="{\'button-text-positive\': compactMode, \'button-text-stable\': !compactMode}" ng-click="toggleCompactMode()">\n              <i class="icon ion-navicon"></i>\n              <b class="icon-secondary ion-arrow-down-b" style="top: -8px; left: 5px; font-size: 8px"></b>\n              <b class="icon-secondary ion-arrow-up-b" style="top: 4px; left: 5px; font-size: 8px"></b>\n              <span>{{\'BLOCKCHAIN.LOOKUP.BTN_COMPACT\'|translate}}</span>\n            </a>\n\n            <!-- Allow extension here -->\n            <cs-extension-point name="buttons"></cs-extension-point>\n\n          </div>\n        </div>\n\n        <ng-include src="\'templates/blockchain/list_blocks.html\'"></ng-include>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),
e.put("templates/network/view_peer.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>PEER.VIEW.TITLE</span>\n  </ion-nav-title>\n\n  <ion-content class="has-header" scroll="true">\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n\n      <div class="col list">\n\n        <ion-item>\n          <h1>\n            <span translate>PEER.VIEW.TITLE</span>\n            <span class="gray">\n              {{node.host}}\n            </span>\n          </h1>\n          <h2 class="gray">\n            <i class="gray icon ion-android-globe"></i>\n            {{node.bma.dns || node.server}}\n            <span class="gray" ng-if="!loading && node.useSsl">\n              <i class="gray ion-locked"></i> <small>SSL</small>\n            </span>\n            <span class="gray" ng-if="!loading && node.useTor">\n              <i class="gray ion-bma-tor-api"></i>\n            </span>\n\n            <span class="assertive" ng-if="!loading && !node.uid">({{\'PEER.MIRROR\'|translate}})</span>\n          </h2>\n\n          <!-- node owner -->\n          <h3>\n            <span class="dark">\n              <i class="icon ion-android-desktop"></i>\n              {{\'PEER.VIEW.OWNER\'|translate}}\n            </span>\n            <a class="positive" ng-if="node.uid" ui-sref="app.wot_identity({pubkey: node.pubkey, uid: node.uid})">\n              <i class="ion-person"></i> {{node.name || node.uid}}\n              <span class="gray" ng-if="node.name">\n                ({{node.uid}})\n              </span>\n            </a>\n            <span ng-if="!loading && !node.uid">\n              <a class="gray" ui-sref="app.wot_identity({pubkey: node.pubkey})">\n                <i class="ion-key"></i>\n                {{node.pubkey|formatPubkey}}\n                <span class="gray" ng-if="node.name">\n                  ({{node.name}})\n                </span>\n              </a>\n            </span>\n          </h3>\n\n          <h3>\n            <a ng-click="openRawPeering($event)">\n              <i class="icon ion-share"></i> {{\'PEER.VIEW.SHOW_RAW_PEERING\'|translate}}\n            </a>\n\n            <span class="gray" ng-if="!isReachable"> | </span>\n            <a ng-if="!isReachable" ng-click="openRawCurrentBlock($event)">\n              <i class="icon ion-share"></i> <span translate>PEER.VIEW.SHOW_RAW_CURRENT_BLOCK</span>\n            </a>\n          </h3>\n        </ion-item>\n\n\n        <div class="item item-divider" translate>\n          PEER.VIEW.GENERAL_DIVIDER\n        </div>\n\n        <ion-item class="item-icon-left item-text-wrap ink" copy-on-click="{{node.pubkey}}">\n          <i class="icon ion-key"></i>\n          <span translate>COMMON.PUBKEY</span>\n          <h4 class="dark text-left">{{node.pubkey}}</h4>\n        </ion-item>\n\n        <a class="item item-icon-left item-icon-right item-text-wrap ink" ng-if="isReachable" ui-sref="app.view_server_block_hash({server: node.server, ssl: node.useSsl, tor: node.useTor, number: current.number, hash: current.hash})">\n          <i class="icon ion-cube"></i>\n          <span translate>BLOCKCHAIN.VIEW.TITLE_CURRENT</span>\n          <div class="badge badge-calm" ng-if="!loading">\n            {{current.number|formatInteger}}\n          </div>\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n\n        <a class="item item-icon-left item-icon-right item-text-wrap ink" ng-if="isReachable" ui-sref="app.server_blockchain({server: node.server, ssl: node.useSsl, tor: node.useTor})">\n          <i class="icon ion-cube" style="font-size: 25px"></i>\n          <i class="icon-secondary ion-clock" style="font-size: 18px; left: 33px; top: -12px"></i>\n          <span translate>PEER.VIEW.LAST_BLOCKS</span>\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="general"></cs-extension-point>\n\n        <div class="item item-divider" ng-hide="loading || !isReachable" translate>\n          PEER.VIEW.KNOWN_PEERS\n        </div>\n\n        <ion-item class="item item-text-wrap no-border done in gray no-padding-top no-padding-bottom inline text-italic" ng-show="!loading && !isReachable">\n          <small><i class="icon ion-alert-circled"></i> {{\'NETWORK.INFO.ONLY_SSL_PEERS\'|translate}}</small>\n        </ion-item>\n\n        <div class="item center" ng-if="loading">\n            <ion-spinner class="icon" icon="android"></ion-spinner>\n        </div>\n\n        <div class="list no-padding {{::motion.ionListClass}}" ng-if="isReachable">\n\n          <div ng-repeat="peer in :rebind:peers track by peer.id" class="item item-peer item-icon-left ink" ng-class="::ionItemClass" ng-click="selectPeer(peer)" ng-include="\'templates/network/item_content_peer.html\'">\n          </div>\n\n        </div>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n\n  </ion-content>\n</ion-view>\n'),e.put("templates/settings/popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink visible-xs visible-sm" ng-click="reset()">\n        <i class="icon ion-refresh"></i>\n        {{\'SETTINGS.BTN_RESET\' | translate}}\n      </a>\n\n      <!-- help tour -->\n      <a class="item item-icon-left ink" ng-click="startSettingsTour()">\n        <i class="icon ion-easel"></i>\n        {{\'COMMON.BTN_HELP_TOUR_SCREEN\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/settings/popup_node.html",'<form name="popupForm" ng-submit="">\n\n  <div class="list no-padding" ng-init="setPopupForm(popupForm)">\n    <div class="item item-input item-floating-label" ng-class="{\'item-input-error\': popupForm.$submitted && popupForm.newNode.$invalid}">\n      <span class="input-label" ng-bind-html="\'SETTINGS.POPUP_PEER.HOST\'|translate"></span>\n      <input name="newNode" type="text" placeholder="{{\'SETTINGS.POPUP_PEER.HOST_HELP\' | translate}}" ng-model="popupData.newNode" ng-minlength="3" required>\n    </div>\n    <div class="form-errors" ng-if="popupForm.$submitted && popupForm.newNode.$error" ng-messages="popupForm.newNode.$error">\n      <div class="form-error" ng-message="required">\n        <span translate="ERROR.FIELD_REQUIRED"></span>\n      </div>\n      <div class="form-error" ng-message="minlength">\n        <span translate="ERROR.FIELD_TOO_SHORT"></span>\n      </div>\n    </div>\n\n    <div class="item item-toggle">\n      <span class="input-label">\n        {{\'SETTINGS.POPUP_PEER.USE_SSL\' | translate}}\n      </span>\n      <h4>\n        <small class="gray" ng-bind-html="\'SETTINGS.POPUP_PEER.USE_SSL_HELP\' | translate">\n        </small>\n      </h4>\n      <label class="toggle toggle-royal no-padding-right">\n        <input type="checkbox" ng-model="popupData.useSsl">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </label>\n    </div>\n\n\n    <a class="button button-positive button-clear positive button-outline button-full button-small-padding icon-left ink no-padding" ng-click="showNodeList()">\n      <i class="icon ion-search"></i>\n      {{\'SETTINGS.POPUP_PEER.BTN_SHOW_LIST\' | translate}}\n    </a>\n  </div>\n\n  <button type="submit" class="hide"></button>\n</form>\n\n\n\n'),e.put("templates/settings/settings.html",'<ion-view left-buttons="leftButtons" cache-view="false" class="settings">\n  <ion-nav-title translate>SETTINGS.TITLE</ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content>\n\n    <!-- Buttons bar-->\n    <div class="padding text-center hidden-xs hidden-sm">\n      <button class="button button-raised button-stable ink" ng-click="reset()">\n        <i class="icon ion-refresh"></i>\n        {{\'SETTINGS.BTN_RESET\' | translate}}\n      </button>\n\n      <button class="button button-stable button-small-padding icon ion-android-more-vertical" ng-click="showActionsPopover($event)" title="{{\'COMMON.BTN_OPTIONS\' | translate}}">\n      </button>\n    </div>\n\n    <div class="list item-border-large">\n\n      <div class="item item-toggle dark">\n        <div class="input-label">\n          {{\'COMMON.BTN_RELATIVE_UNIT\' | translate}}\n        </div>\n        <label class="toggle toggle-royal" id="helptip-settings-btn-unit-relative">\n            <input type="checkbox" ng-model="formData.useRelative">\n            <div class="track">\n                <div class="handle"></div>\n            </div>\n        </label>\n      </div>\n\n      <label class="item item-input item-select">\n        <div class="input-label">\n          {{\'COMMON.LANGUAGE\' | translate}}\n        </div>\n        <select ng-model="formData.locale" ng-change="changeLanguage(formData.locale.id)" ng-options="l as l.label for l in locales track by l.id">\n        </select>\n      </label>\n\n      <div class="item item-text-wrap item-toggle dark">\n        <div class="input-label">\n         {{\'SETTINGS.USE_LOCAL_STORAGE\' | translate}}\n        </div>\n        <h4 class="gray" ng-bind-html="\'SETTINGS.USE_LOCAL_STORAGE_HELP\' | translate">\n        </h4>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.useLocalStorage">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n      <div class="item item-toggle dark item-text-wrap">\n        <div class="input-label" ng-bind-html="\'SETTINGS.ENABLE_HELPTIP\' | translate">\n        </div>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.helptip.enable">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n     <!-- <div class="item item-toggle dark item-text-wrap">\n        <div class="input-label" ng-bind-html="\'SETTINGS.ENABLE_UI_EFFECTS\' | translate">\n        </div>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.enableUuiEffects" >\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>-->\n      <!-- Allow extension here -->\n      <cs-extension-point name="common"></cs-extension-point>\n\n      <span class="item item-divider">\n        {{\'SETTINGS.AUTHENTICATION_SETTINGS\' | translate}}\n      </span>\n\n      <div class="item item-toggle">\n        <div class="input-label" ng-class="{\'gray\': !formData.useLocalStorage}">\n          {{\'SETTINGS.REMEMBER_ME\' | translate}}\n        </div>\n        <h4 class="gray text-wrap" ng-bind-html="\'SETTINGS.REMEMBER_ME_HELP\' | translate"></h4>\n\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.rememberMe" ng-disabled="!formData.useLocalStorage">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n      <div class="item item-input item-select">\n        <div class="input-label">\n          <span class="input-label" translate>SETTINGS.KEEP_AUTH</span>\n          <h4 class="gray text-wrap" ng-bind-html="\'SETTINGS.KEEP_AUTH_HELP\' | translate"></h4>\n        </div>\n\n        <label>\n          <select ng-model="formData.keepAuthIdle" ng-options="i as (keepAuthIdleLabels[i].labelKey | translate:keepAuthIdleLabels[i].labelParams ) for i in keepAuthIdles track by i">\n          </select>\n        </label>\n      </div>\n\n      <span class="item item-divider" translate>SETTINGS.HISTORY_SETTINGS</span>\n\n      <div class="item item-toggle dark">\n        <div class="col col-75 input-label" translate>SETTINGS.DISPLAY_UD_HISTORY</div>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.showUDHistory">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="history"></cs-extension-point>\n\n      <span class="item item-divider" translate>SETTINGS.NETWORK_SETTINGS</span>\n\n      <div class="item ink item-text-wrap" ng-click="changeNode()">\n        <div class="input-label">\n        {{\'SETTINGS.PEER\' | translate}}\n        </div>\n\n        <!-- node temporary changed -->\n        <ng-if ng-if="formData.node.temporary">\n          <h4 class="gray text-wrap assertive">\n            <i class="icon ion-alert-circled"></i>\n            <span ng-bind-html="\'SETTINGS.PEER_CHANGED_TEMPORARY\' | translate "></span>\n          </h4>\n          <div class="item-note assertive text-italic">{{bma.server}}</div>\n        </ng-if>\n\n        <div class="item-note dark" ng-if="!formData.node.temporary">{{bma.server}}</div>\n      </div>\n\n      <div class="item item-text-wrap item-toggle dark hidden-xs hidden-sm">\n        <div class="input-label" ng-bind-html="\'SETTINGS.EXPERT_MODE\' | translate"></div>\n        <h4 class="gray" ng-bind-html="\'SETTINGS.EXPERT_MODE_HELP\' | translate"></h4>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.expertMode">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="network"></cs-extension-point>\n\n      <span class="item item-divider" ng-if="$root.config.plugins" translate>SETTINGS.PLUGINS_SETTINGS</span>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="plugins"></cs-extension-point>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("templates/wallet/item_tx.html",'<i class="icon item-image" ng-if="::!tx.avatar" ng-class="::{\'ion-person dark\': tx.uid, \'ion-card dark\': !tx.uid}"></i>\n<i class="avatar" ng-if="::tx.avatar" style="background-image: url({{::tx.avatar.src}})"></i>\n\n<div class="row no-padding">\n  <div class="col no-padding">\n    <b class="ion-clock" ng-if="::pending"> </b>\n    <a class="" ui-sref="app.wot_identity({pubkey:tx.pubkey, uid:tx.uid})" ng-if="tx.uid">\n      {{::tx.name||tx.uid}}\n    </a>\n    <a class="gray" ui-sref="app.wot_identity({pubkey:tx.pubkey, uid:tx.uid})" ng-if="!tx.uid">\n      <i class="ion-key gray"></i>\n      {{::tx.pubkey | formatPubkey}}\n    </a>\n    <p class="dark visible-xs width-cup text-italic" data-toggle="tooltip" ng-if="::tx.comment" title="{{::tx.comment}}">\n      <i class="ion-ios-chatbubble-outline"></i>\n      {{::tx.comment}}<br>\n    </p>\n    <h4>\n      <a ng-if="::!pending" class="gray underline" ui-sref="app.view_block({number: tx.block_number})">\n        {{::tx.time | formatFromNow}} | {{::tx.time | formatDate}}\n      </a>\n      <span ng-if="::pending" class="gray">\n        {{::tx.time | formatFromNow}} | {{::tx.time | formatDate}}\n      </span>\n    </h4>\n  </div>\n  <div class="col col-50 no-padding" ng-if="::tx.comment">\n    <p class="vertical-center gray text-italic hidden-xs" data-toggle="tooltip" title="{{::tx.comment}}">{{::tx.comment}}</p>\n  </div>\n  <div class="col col-10 no-padding">\n\n    <!-- not locked TX -->\n    <span ng-if="::!tx.lockedOutputs" class="badge item-note" ng-class="{\'badge-calm\': tx.amount > 0}">\n      <!--<span class="hidden-xs" ng-if=":rebind:tx.amount>0">+</span>-->\n      <span ng-bind-html=":rebind:tx.amount| formatAmount:{currency:$root.currency.name}"></span>\n    </span>\n\n    <!-- Locked TX -->\n    <a ng-if=":rebind:tx.lockedOutputs" class="badge item-note" ng-class="{\'badge-calm\': tx.amount > 0}" ng-click="showLockedOutputsPopover(tx, $event)">\n      <i class="icon ion-locked"></i>\n      <!--<span class="hidden-xs" ng-if=":rebind:tx.amount>0">+</span>-->\n      <span ng-bind-html=":rebind:tx.amount| formatAmount:{currency:$root.currency.name}"></span>\n    </a>\n\n    <div class="badge badge-secondary" ng-if="$root.settings.expertMode">\n      (<span ng-bind-html=":rebind:tx.amount| formatAmount:{useRelative: !$root.settings.useRelative, currency:$root.currency.name}"></span>)\n    </div>\n  </div>\n</div>\n'),e.put("templates/wallet/item_ud.html",'<i class="icon item-image ion-arrow-up-c energized"></i>\n\n<div class="row no-padding">\n  <div class="col no-padding">\n    <span class="energized" translate>COMMON.UNIVERSAL_DIVIDEND</span>\n    <h4>\n      <a class="gray underline" ui-sref="app.view_block({number: tx.block_number})">\n        {{::tx.time | formatFromNow}} | {{::tx.time | formatDate}}\n      </a>\n    </h4>\n  </div>\n  <div class="col col-10 no-padding">\n\n    <span class="badge item-note badge-energized">\n      <!--<span class="hidden-xs" ng-if=":rebind:tx.amount>0">+</span>-->\n      <span ng-bind-html=":rebind:tx.amount| formatAmount:{currency:$root.currency.name}"></span>\n    </span>\n\n    <div class="badge badge-secondary" ng-if="$root.settings.expertMode">\n      (<span ng-bind-html=":rebind:tx.amount| formatAmount:{useRelative: !$root.settings.useRelative, currency:$root.currency.name}"></span>)\n    </div>\n  </div>\n</div>\n'),e.put("templates/wallet/modal_security.html",'<ion-modal-view class="modal-full-height">\n\n  <ion-header-bar class="bar-positive">\n\n    <button class="button button-clear visible-xs" ng-if="!slides.slider.activeIndex" ng-click="closeModal()" translate>COMMON.BTN_CANCEL\n    </button>\n    <button class="button button-icon button-clear icon ion-ios-arrow-back buttons header-item" ng-click="slidePrev()" ng-if="slides.slider.activeIndex">\n    </button>\n\n    <h1 class="title hidden-xs" translate>ACCOUNT.SECURITY.TITLE</h1>\n\n    <button class="button button-clear icon-right visible-xs" ng-if="!isLastSlide && slides.slider.activeIndex > 0" ng-click="doNext()">\n      <span translate>COMMON.BTN_NEXT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n    <button class="button button-positive button-icon button-clear icon ion-android-done visible-xs" ng-click="doNext()" ng-if="isLastSlide && option === \'saveID\'">\n    </button>\n  </ion-header-bar>\n\n\n    <ion-slides options="slides.options" slider="slides.slider">\n\n      <!-- STEP 1 -->\n      <ion-slide-page>\n        <ion-content class="has-header padding">\n\n          <div class="list">\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="selectOption(\'recoverID\')" ng-if="!isLogin">\n              <div class="item-content item-text-wrap">\n                <i class="item-image dark icon ion-person"></i>\n                <b class="ion-ios-undo icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <h2 translate>ACCOUNT.SECURITY.RECOVER_ID</h2>\n                <h4 class="gray" translate>ACCOUNT.SECURITY.RECOVER_ID_HELP</h4>\n                <i class="icon dark ion-ios-arrow-right"></i>\n              </div>\n            </div>\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="selectOption(\'revocation\')" ng-if="!isLogin">\n              <div class="item-content item-text-wrap">\n                <i class="item-image dark icon ion-person"></i>\n                <b class="ion-close icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <h2 translate>ACCOUNT.SECURITY.REVOCATION_WITH_FILE</h2>\n                <h4 class="gray" translate>ACCOUNT.SECURITY.REVOCATION_WITH_FILE_DESCRIPTION</h4>\n                <i class="icon dark ion-ios-arrow-right"></i>\n              </div>\n            </div>\n\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="selectOption(\'saveID\')" ng-if="isLogin">\n              <div class="item-content item-text-wrap">\n                <i class="item-image dark icon ion-person"></i>\n                <b class="ion-ios-redo icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <b class="ion-locked icon-secondary dark" style="top: 0px; left: 40px; font-size: 8px"></b>\n                <h2 translate>ACCOUNT.SECURITY.SAVE_ID</h2>\n                <h4 class="gray" translate>ACCOUNT.SECURITY.SAVE_ID_HELP</h4>\n                <i class="icon dark ion-ios-arrow-right"></i>\n              </div>\n            </div>\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink hidden-xs hidden-sm" ng-click="downloadRevokeFile()" ng-if="isLogin && hasSelf">\n              <div class="item-content item-text-wrap">\n                <i class="item-image dark icon ion-person"></i>\n                <b class="ion-ios-redo icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <b class="ion-close icon-secondary dark" style="top: 0px; left: 40px; font-size: 8px"></b>\n                <h2 translate>ACCOUNT.SECURITY.DOWNLOAD_REVOKE</h2>\n                <h4 class="gray" translate>ACCOUNT.SECURITY.DOWNLOAD_REVOKE_HELP</h4>\n                <i class="icon dark ion-android-archive"></i>\n              </div>\n            </div>\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="self()" ng-if="needSelf">\n              <div class="item-content item-text-wrap">\n                <i class="item-image icon ion-person dark"></i>\n                <b class="ion-flag icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <h2 translate>ACCOUNT.SECURITY.SEND_IDENTITY</h2>\n                <h4 class="gray" ng-bind-html="::\'ACCOUNT.SECURITY.SEND_IDENTITY_HELP\' | translate"></h4>\n              </div>\n            </div>\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="membershipIn()" ng-if="needMembership">\n              <div class="item-content item-text-wrap">\n                <i class="item-image icon ion-person dark"></i>\n                <b class="ion-plus icon-secondary dark" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <h2 translate>ACCOUNT.SECURITY.MEMBERSHIP_IN</h2>\n                <h4 class="gray" ng-bind-html="::\'ACCOUNT.SECURITY.MEMBERSHIP_IN_HELP\' | translate"></h4>\n              </div>\n            </div>\n\n            <div class="item item-complex card stable-bg item-icon-left item-icon-right ink" ng-click="revokeWalletIdentity()" ng-if="isLogin && hasSelf">\n              <div class="item-content item-text-wrap">\n                <i class="item-image icon ion-person assertive-900"></i>\n                <b class="ion-close icon-secondary assertive-900" style="top: -8px; left: 39px; font-size: 12px"></b>\n                <h2 translate>ACCOUNT.SECURITY.REVOCATION_WALLET</h2>\n                <h4 class="gray" translate>ACCOUNT.SECURITY.REVOCATION_WALLET_HELP</h4>\n              </div>\n            </div>\n          </div>\n\n          <div class="padding hidden-xs text-right">\n            <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n            </button>\n          </div>\n        </ion-content>\n      </ion-slide-page>\n\n      <ion-slide-page ng-if="option == \'revocation\'">\n        <ng-include src="\'templates/wallet/slides/slides_revocation_file.html\'"></ng-include>\n      </ion-slide-page>\n\n      <ion-slide-page ng-if="isLogin && option == \'saveID\'">\n        <ng-include src="\'templates/wallet/slides/slides_saveID_1.html\'"></ng-include>\n      </ion-slide-page>\n      <ion-slide-page ng-if="isLogin && option == \'saveID\'">\n        <ng-include src="\'templates/wallet/slides/slides_saveID_2.html\'"></ng-include>\n      </ion-slide-page>\n\n      <ion-slide-page ng-if="option == \'recoverID\'">\n        <ng-include src="\'templates/wallet/slides/slides_recoverID_1.html\'"></ng-include>\n      </ion-slide-page>\n      <ion-slide-page ng-if="option == \'recoverID\'">\n        <ng-include src="\'templates/wallet/slides/slides_recoverID_2.html\'"></ng-include>\n      </ion-slide-page>\n      <ion-slide-page ng-if="option == \'recoverID\'">\n        <ng-include src="\'templates/wallet/slides/slides_recoverID_3.html\'"></ng-include>\n      </ion-slide-page>\n\n    </ion-slides>\n</ion-modal-view>\n'),e.put("templates/wallet/modal_transfer.html",'<ion-modal-view id="transfer" class="modal-full-height modal-transfer">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>TRANSFER.MODAL.TITLE</h1>\n\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doTransfer()">\n    </button>\n  </ion-header-bar>\n\n  <ion-content scroll="true">\n      <ng-include src="\'templates/wallet/transfer_form.html\'"></ng-include>\n  </ion-content>\n\n  <!-- Digit keyboard - fix #30 -->\n  <ion-digit-keyboard settings="digitKeyboardSettings" ng-if="digitKeyboardVisible"></ion-digit-keyboard>\n</ion-modal-view>\n'),e.put("templates/wallet/new_transfer.html",'<ion-view left-buttons="leftButtons" id="transfer">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm" translate>TRANSFER.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n      <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doTransfer()">\n      </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n    <div class="row no-padding-xs">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n      <div class="col no-padding-xs">\n        <h2 class="hidden-xs hidden-sm">\n          {{\'TRANSFER.SUB_TITLE\'|translate}}\n        </h2>\n        <h4 class="hidden-xs hidden-sm">&nbsp;</h4>\n        <ng-include src="\'templates/wallet/transfer_form.html\'"></ng-include>\n      </div>\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n    </div>\n  </ion-content>\n\n  <!-- Digit keyboard - fix #30 -->\n  <ion-digit-keyboard settings="digitKeyboardSettings" ng-if="digitKeyboardVisible"></ion-digit-keyboard>\n</ion-view>\n'),e.put("templates/wallet/popover_actions.html",'<ion-popover-view class="fit has-header popover-wallet-actions">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink visible-xs visible-sm" ng-click="showSharePopover($event)">\n        <i class="icon ion-android-share-alt"></i>\n        {{\'COMMON.BTN_SHARE\' | translate}}\n      </a>\n\n\n      <!-- alternatives identities -->\n      <a class="item item-icon-left ink" ng-if="walletData.requirements.alternatives" ng-click="showSelectIdentitiesModal()">\n        <i class="icon ion-person"></i>\n        <b class="icon-secondary ion-loop" style="margin-top: 4px; left: 15px"></b>\n        {{\'ACCOUNT.BTN_SELECT_ALTERNATIVES_IDENTITIES\' | translate}}\n      </a>\n\n      <!-- renew membership -->\n      <!-- (show only if a SELF has been sent - fix #673) -->\n      <a class="item item-icon-left ink visible-xs visible-sm" ng-if="!walletData.requirements.needSelf && walletData.requirements.needRenew" ng-click="renewMembership()">\n        <i class="icon ion-loop"></i>\n        {{\'ACCOUNT.BTN_MEMBERSHIP_RENEW_DOTS\' | translate}}\n      </a>\n      <a class="item item-icon-left ink hidden-xs hidden-sm" ng-if="!walletData.requirements.needSelf" ng-class="{\'gray\':!walletData.requirements.needRenew}" ng-click="renewMembership()">\n        <i class="icon ion-loop"></i>\n        {{\'ACCOUNT.BTN_MEMBERSHIP_RENEW_DOTS\' | translate}}\n      </a>\n\n      <a class="item item-icon-left assertive ink" ng-if="walletData.requirements.canMembershipOut" ng-click="membershipOut()">\n        <i class="icon ion-log-out"></i>\n        {{\'ACCOUNT.BTN_MEMBERSHIP_OUT_DOTS\' | translate}}\n      </a>\n\n      <a class="item item-icon-left ink" ng-click="showSecurityModal()">\n        <i class="icon ion-locked"></i>\n        <span ng-bind-html="\'ACCOUNT.BTN_SECURITY_DOTS\' | translate"></span>\n\n      </a>\n\n      <div class="item-divider hidden-sm hidden-xs"></div>\n\n      <!-- help tour -->\n      <a class="item item-icon-left ink hidden-sm hidden-xs" ng-click="startWalletTour()">\n        <i class="icon ion-easel"></i>\n        {{\'COMMON.BTN_HELP_TOUR_SCREEN\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/wallet/popover_unit.html",'<ion-popover-view class="popover-unit">\n  <ion-content scroll="false">\n    <div class="list">\n      <a class="item item-icon-left" ng-class="{ \'selected\': !formData.useRelative}" ng-click="closePopover(false)">\n        <i class="icon" ng-class="{ \'ion-ios-checkmark-empty\': !formData.useRelative}"></i>\n        <i ng-bind-html="$root.currency.name | currencySymbol:false"></i>\n      </a>\n      <a class="item item-icon-left" ng-class="{ \'selected\': formData.useRelative}" ng-click="closePopover(true)">\n        <i class="icon" ng-class="{ \'ion-ios-checkmark-empty\': formData.useRelative}"></i>\n        <i ng-bind-html="$root.currency.name | currencySymbol:true"></i>\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/wallet/popup_register.html",'<form name="registerForm" ng-submit="">\n  <div class="list" ng-init="setRegisterForm(registerForm)">\n    <label class="item item-input" ng-class="{\'item-input-error\': registerForm.$submitted && registerForm.pseudo.$invalid}">\n      <input name="pseudo" type="text" placeholder="{{\'ACCOUNT.NEW.PSEUDO_HELP\' | translate}}" ng-model="walletData.newUid" ng-minlength="3" required>\n    </label>\n    <div class="form-errors" ng-if="registerForm.$submitted && registerForm.pseudo.$error" ng-messages="registerForm.pseudo.$error">\n      <div class="form-error" ng-message="required">\n        <span translate="ERROR.FIELD_REQUIRED"></span>\n      </div>\n      <div class="form-error" ng-message="minlength">\n        <span translate="ERROR.FIELD_TOO_SHORT"></span>\n      </div>\n    </div>\n  </div>\n</form>\n'),e.put("templates/wallet/transfer_form.html",'  <form name="transferForm" novalidate="" ng-submit="doTransfer()">\n\n    <div class="list no-padding-xs" ng-init="setForm(transferForm)">\n\n      <a class="item item-icon-right gray ink" ng-class="{\'item-input-error\': form.$submitted && !formData.destPub}" ng-click="showWotLookupModal()">\n          <span class="gray" translate>TRANSFER.TO</span>\n          <span class="badge badge-royal animate-fade-in animate-show-hide ng-hide" ng-show="destUid">\n            <i class="ion-person"></i> {{destUid}}\n          </span>&nbsp;\n          <span class="badge badge-royal" ng-show="!destUid && formData.destPub">\n            <i class="ion-key"></i> {{formData.destPub | formatPubkey}}\n          </span>\n        <i class="gray icon ion-ios-arrow-right"></i>\n      </a>\n      <div class="form-errors" ng-if="form.$submitted && !formData.destPub">\n        <div class="form-error">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n      </div>\n\n      <span class="item item-text-wrap">\n          <span class="gray" translate>TRANSFER.FROM</span>\n          <span class="badge animate-fade-in animate-show-hide ng-hide" ng-show="!loading" ng-class="{\'badge-assertive\': (convertedBalance <= 0 || (formData.amount && convertedBalance < formData.amount)), \'badge-balanced\': (convertedBalance > 0 && (!formData.amount || convertedBalance >= formData.amount)) }">\n              <ion-spinner icon="android" ng-if="!walletData.pubkey"></ion-spinner>\n              <span ng-if="walletData.pubkey && !walletData.isMember">\n                <i class="ion-key"></i> {{walletData.pubkey| formatPubkey}}&nbsp;&nbsp;\n              </span>\n              <span ng-if="walletData.isMember">\n                <i class="ion-person"></i> {{walletData.name||walletData.uid}}&nbsp;&nbsp;\n              </span>\n              <span ng-bind-html="walletData.balance|formatAmount:{useRelative: formData.useRelative, currency:currency}"></span>\n          </span>\n\n      </span>\n\n      <!-- Amount -->\n      <ion-item class="item-input item-floating-label item-button-right" ng-class="{\'item-input-error\': form.$submitted && form.amount.$invalid}">\n        <div class="input-label">\n          <span translate>TRANSFER.AMOUNT</span>\n          (<span ng-bind-html="$root.currency.name | currencySymbol:formData.useRelative"></span>)\n        </div>\n        <input type="text" class="hidden-xs hidden-sm" name="amount" placeholder="{{::\'TRANSFER.AMOUNT_HELP\' | translate}} ({{$root.currency.name | currencySymbolNoHtml:formData.useRelative}})" ng-model="formData.amount" required number-float>\n\n        <!-- mobile: come OVER the input -->\n        <input type="text" class="visible-xs visible-sm" name="amount" placeholder="{{::\'TRANSFER.AMOUNT_HELP\' | translate}} ({{$root.currency.name | currencySymbolNoHtml:formData.useRelative}})" ng-model="formData.amount" required number-float>\n        <!-- This div will catch click event, to open digit keyboard -->\n        <div class="block visible-xs visible-sm" style="position:absolute; opacity:0; z-index:100; top: 0; left: 0; height: 100%; width: 100%" ng-click="showDigitKeyboard()"></div>\n\n        <a class="button button-stable icon ion-arrow-swap gray ink hidden-xs hidden-sm" ng-click="showUnitPopover($event)">\n        </a>\n        <a class="button button-icon gray icon ion-android-more-vertical ink visible-xs visible-sm" style="z-index:110; right: 0px" ng-click="showUnitPopover($event)">\n        </a>\n      </ion-item>\n      <div class="form-errors" ng-show="form.$submitted && form.amount.$error" ng-messages="form.amount.$error">\n        <div class="form-error" ng-message="required">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n        <div class="form-error" ng-message="numberFloat">\n          <span translate="ERROR.FIELD_NOT_NUMBER"></span>\n        </div>\n        <div class="form-error" ng-message="numberInt">\n          <span translate="ERROR.FIELD_NOT_INT"></span>\n        </div>\n        <div class="form-error" ng-message="min">\n          <span translate="ERROR.FIELD_MIN" translate-values="{min: minAmount}"></span>\n        </div>\n      </div>\n\n      <!-- Enable comment ? -->\n      <div class="pull-right visible-xs visible-sm" ng-if="!formData.useComment">\n        <a class="button button-text button-small ink" ng-click="addComment()">\n          <i class="icon ion-plus"></i>\n          <span translate>TRANSFER.BTN_ADD_COMMENT</span>\n        </a>\n      </div>\n\n      <!-- Comment -->\n      <label class="item item-input item-floating-label hidden-xs hidden-sm" ng-class="{\'item-input-error\': form.$submitted && form.comment.$invalid}">\n        <span class="input-label">{{\'TRANSFER.COMMENT\' | translate}}</span>\n        <textarea placeholder="{{\'TRANSFER.COMMENT_HELP\' | translate}}" name="comment" ng-model="formData.comment" ng-maxlength="255" ng-pattern="commentPattern">\n        </textarea>\n      </label>\n      <label class="item item-input item-floating-label visible-xs visible-sm" ng-if="formData.useComment" ng-class="{\'item-input-error\': form.$submitted && form.comment.$invalid}">\n        <span class="input-label">{{\'TRANSFER.COMMENT\' | translate}}</span>\n        <textarea placeholder="{{\'TRANSFER.COMMENT_HELP\' | translate}}" id="{{commentInputId}}" name="comment" ng-model="formData.comment" ng-maxlength="255" ng-pattern="commentPattern" ng-focus="hideDigitKeyboard()">\n        </textarea>\n      </label>\n      <div class="form-errors" ng-show="form.$submitted && form.comment.$error" ng-messages="form.comment.$error">\n        <div class="form-error" ng-message="maxlength">\n          <span translate="ERROR.FIELD_TOO_LONG"></span>\n        </div>\n        <div class="form-error" ng-message="pattern">\n          <span translate="ERROR.FIELD_ACCENT"></span>\n        </div>\n      </div>\n\n      <!-- Warn comment is public -->\n      <div class="item item-icon-left item-text-wrap hidden-xs hidden-sm">\n        <i class="icon ion-ios-information-outline positive"></i>\n        <h4 class="positive" translate>TRANSFER.WARN_COMMENT_IS_PUBLIC</h4>\n      </div>\n      <div class="item item-icon-left item-text-wrap visible-xs visible-sm" ng-if="formData.useComment">\n        <i class="icon ion-ios-information-outline positive"></i>\n        <h4 class="positive" translate>TRANSFER.WARN_COMMENT_IS_PUBLIC</h4>\n      </div>\n    </div>\n\n\n\n    <div class="padding hidden-xs text-right">\n      <button class="button button-clear button-dark ink" ng-click="cancel()" type="button" translate>COMMON.BTN_CANCEL\n      </button>\n      <button class="button button-positive ink" type="submit">\n        {{\'TRANSFER.BTN_SEND\' | translate}}\n      </button>\n    </div>\n  </form>\n\n\n'),
e.put("templates/wallet/tx_locked_outputs_popover.html",'<ion-popover-view class="fit popover-locked-outputs">\n  <ion-header-bar>\n    <h1 class="title" translate>ACCOUNT.LOCKED_OUTPUTS_POPOVER.TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="true">\n\n    <div ng-if="popoverData.lockedOuputs.length == 1" class="item item-text-wrap no-border">\n      <h4 class="positive" translate>ACCOUNT.LOCKED_OUTPUTS_POPOVER.DESCRIPTION</h4>\n    </div>\n    <div ng-if="popoverData.lockedOuputs.length > 1" class="item item-text-wrap no-border">\n      <h4 class="positive" translate>ACCOUNT.LOCKED_OUTPUTS_POPOVER.DESCRIPTION_MANY</h4>\n    </div>\n\n    <!-- outputs -->\n    <div ng-repeat="output in popoverData.lockedOuputs track by $index" class="item">\n\n      <!-- output amount (only visible if more than one outputs -->\n      <h2 class="gray" ng-if="popoverData.lockedOuputs.length > 1" translate>ACCOUNT.LOCKED_OUTPUTS_POPOVER.LOCKED_AMOUNT</h2>\n      <div ng-if="popoverData.lockedOuputs.length > 1" class="badge item-note" ng-class="{\'badge-balanced\': output.amount > 0}">\n        <i class="icon ion-locked"></i>\n        <span ng-bind-html="::output.amount| formatAmount"></span>\n        <span ng-bind-html="::unit"></span>\n      </div>\n\n      <!-- unlock conditions -->\n      <div ng-repeat="condition in output.unlockConditions track by $index" class="row" ng-class="::{\'padding-top\': !$index && popoverData.lockedOuputs.length > 1}" ng-style="::condition.style">\n        <span class="gray" ng-if="::condition.operator">{{::\'BLOCKCHAIN.VIEW.TX_OUTPUT_OPERATOR.\'+condition.operator|translate}}&nbsp;</span>\n        <div ng-if="::condition.type==\'SIG\'">\n            <i class="icon ion-key dark"></i>\n          <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.SIG\' | translate"></span>\n          <a ng-click="goState(\'app.wot_identity\', {pubkey:condition.value})" style="text-decoration: none" class="positive">\n            {{condition.value|formatPubkey}}\n          </a>\n        </div>\n        <div ng-if="::condition.type==\'XHX\'">\n          <i class="icon ion-lock-combination dark"></i>\n          <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.XHX\' | translate"></span>\n          <a copy-on-click="{{::condition.value}}" class="positive">\n            {{::condition.value|formatPubkey}}...\n          </a>\n        </div>\n        <div ng-if="condition.type==\'CSV\'">\n          <i class="icon ion-clock dark"></i>\n          <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.CSV\' | translate"></span>\n          {{::condition.value|formatDuration}}\n        </div>\n        <div ng-if="condition.type==\'CLTV\'">\n          <i class="icon ion-clock dark"></i>\n          <span class="dark" ng-bind-html="::\'BLOCKCHAIN.VIEW.TX_OUTPUT_FUNCTION.CLTV\' | translate"></span>\n          {{::condition.value|formatDate}}\n        </div>\n      </div>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/wallet/view_wallet.html",'<ion-view left-buttons="leftButtons" class="view-wallet" id="wallet">\n  <ion-nav-title>\n    <!-- no title-->\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" id="helptip-wallet-options-xs" ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true" class="refresher-top-bg refresher-light" bind-notifier="{ rebind:settings.useRelative, locale:$root.settings.locale.id}">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doUpdate(true)">\n    </ion-refresher>\n\n    <div class="positive-900-bg hero" id="wallet-header" ng-class="{\'hero-qrcode-active\': toggleQRCode}">\n      <div class="content" ng-if="!loading">\n        <i class="avatar" ng-if=":rebind:!formData.avatar" ng-class=":rebind:{\'avatar-wallet\': !formData.isMember, \'avatar-member\': formData.isMember}"></i>\n        <i class="avatar" ng-if=":rebind:formData.avatar" style="background-image: url({{:rebind:formData.avatar.src}})"></i>\n        <ng-if ng-if=":rebind:formData.name">\n          <h3 class="light">{{:rebind:formData.name}}</h3>\n        </ng-if>\n        <ng-if ng-if=":rebind:!formData.name">\n          <h3 class="light" ng-if=":rebind:formData.uid">{{:rebind:formData.uid}}</h3>\n          <h3 class="light" ng-if=":rebind:!formData.uid"><i class="ion-key"></i> {{:rebind:formData.pubkey | formatPubkey}}</h3>\n        </ng-if>\n        <h4 class="assertive"><ng-if ng-if=":rebind:(formData.name || formData.uid) && !formData.isMember" translate>WOT.NOT_MEMBER_PARENTHESIS</ng-if></h4>\n      </div>\n      <h4 class="content light" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </h4>\n    </div>\n\n    <div ng-attr-id="{{ qrcodeId }}" class="qrcode spin" ng-class="{\'active\': toggleQRCode}" ng-click="toggleQRCode = !toggleQRCode"></div>\n\n    <!-- Buttons bar-->\n    <a id="wallet-share-anchor"></a>\n    <div class="hidden-xs hidden-sm padding text-center" ng-if="!loading">\n\n      <button class="button button-stable button-small-padding icon ion-android-share-alt ink" ng-click="showSharePopover($event)" title="{{\'COMMON.BTN_SHARE\' | translate}}">\n      </button>\n\n      <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="doUpdate()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <cs-extension-point name="buttons"></cs-extension-point>\n\n      &nbsp;&nbsp;\n\n      <button id="helptip-wallet-options" class="button button-stable icon-right ink" ng-click="showActionsPopover($event)">\n        &nbsp; <i class="icon ion-android-more-vertical"></i>&nbsp;\n        {{:locale:\'COMMON.BTN_OPTIONS\' | translate}}\n      </button>\n\n      <div ng-if="formData.requirements.needRenew">\n        <br>\n        <button class="button button-raised button-stable ink" ng-click="renewMembership()">\n          <span class="assertive">{{:locale:\'ACCOUNT.BTN_MEMBERSHIP_RENEW\' | translate}}</span>\n        </button>\n      </div>\n    </div>\n\n    <div class="visible-xs visible-sm padding text-center" ng-if="!loading">\n      <button class="button button-assertive button-small-padding ink" ng-click="logout({askConfirm: true})">\n        <i class="icon ion-log-out"></i>\n        {{\'COMMON.BTN_LOGOUT\' | translate}}\n      </button>\n    </div>\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col">\n\n        <div class="list" ng-class="::motion.ionListClass" ng-hide="loading">\n\n          <span class="item item-divider" translate>WOT.GENERAL_DIVIDER</span>\n\n          <!-- Public key -->\n          <div id="helptip-wallet-pubkey" class="item item-icon-left item-text-wrap ink" on-hold="copy(formData.pubkey)" copy-on-click="{{:rebind:formData.pubkey}}">\n            <i class="icon ion-key"></i>\n            <span>{{:locale:\'COMMON.PUBKEY\'|translate}}</span>\n            <h4 id="pubkey" class="dark">{{:rebind:formData.pubkey}}</h4>\n          </div>\n\n          <!-- Uid + Registration date -->\n          <ion-item class="item-icon-left" ng-if=":rebind:formData.sigDate||formData.uid">\n            <i class="icon ion-calendar"></i>\n            <span translate>COMMON.UID</span>\n            <h5 class="dark" ng-if=":rebind:formData.sigDate">\n              <span translate>WOT.REGISTERED_SINCE</span>\n              {{:rebind:formData.sigDate | formatDate}}\n            </h5>\n            <span class="badge badge-stable">{{:rebind:formData.uid}}</span>\n          </ion-item>\n\n          <!-- Certifications -->\n          <a id="helptip-wallet-certifications" class="item item-icon-left item-icon-right item-text-wrap ink" ng-if="formData.isMember||formData.requirements.pendingMembership||!formData.requirements.needSelf" ng-click="showCertifications()">\n            <i class="icon ion-ribbon-b"></i>\n            <b ng-if="formData.requirements.isSentry" class="ion-star icon-secondary" style="color: yellow; font-size: 16px; left: 25px; top: -7px"></b>\n            {{:locale:\'ACCOUNT.CERTIFICATION_COUNT\'|translate}}\n            <cs-badge-certification requirements="formData.requirements" parameters="::currency.parameters">\n            </cs-badge-certification>\n            <i class="gray icon ion-ios-arrow-right"></i>\n          </a>\n\n          <!-- Signature stock -->\n          <a id="helptip-wallet-given-certifications" class="item item-icon-left item-text-wrap item-icon-right ink visible-xs visible-sm" ng-if="formData.isMember" ng-click="showGivenCertifications()">\n            <i class="icon ion-ribbon-a"></i>\n            <span translate>WOT.GIVEN_CERTIFICATIONS.SENT</span>\n            <i class="gray icon ion-ios-arrow-right"></i>\n          </a>\n\n          <!-- Account transaction -->\n          <a class="item item-icon-left item-icon-right ink" ng-if="!loading" ui-sref="app.view_wallet_tx">\n            <i class="icon ion-card"></i>\n            <span translate>WOT.ACCOUNT_OPERATIONS</span>\n            <i class="gray icon ion-ios-arrow-right"></i>\n          </a>\n\n          <!-- Events -->\n          <span class="item item-divider" ng-if="formData.events.length">\n            {{:locale:\'ACCOUNT.EVENTS\' | translate}}\n          </span>\n\n          <div class="item item-text-wrap item-icon-left item-wallet-event" ng-repeat="event in formData.events">\n            <i class="icon" ng-class="{\'ion-information-circled royal\': event.type==\'info\',\'ion-alert-circled\': event.type==\'warn\'||event.type==\'error\',\'assertive\': event.type==\'error\',\'ion-clock\': event.type==\'pending\'}"></i>\n            <span trust-as-html="event.message | translate:event.messageParams"></span>\n          </div>\n\n\n          <cs-extension-point name="general"></cs-extension-point>\n\n          <cs-extension-point name="after-general"></cs-extension-point>\n\n\n       </div>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n  </ion-content>\n\n</ion-view>\n'),e.put("templates/wallet/view_wallet_tx.html",'<ion-view left-buttons="leftButtons" class="view-wallet-tx">\n  <ion-nav-title>\n    <!-- no title-->\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true" class="refresher-top-bg refresher-light" bind-notifier="{ rebind:settings.useRelative, locale:settings.locale.id}">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doUpdate(true)">\n    </ion-refresher>\n\n    <div class="positive-900-bg hero">\n      <div class="content" ng-if="!loading">\n        <h1 class="light">\n          <span ng-bind-html=":balance:rebind:formData.balance | formatAmount:{currency: $root.currency.name}"></span>\n        </h1>\n        <h4 ng-if="!loading && $root.settings.expertMode" style="font-style: italic">\n          (<span ng-bind-html=":balance:rebind:formData.balance | formatAmount:{useRelative:!$root.settings.useRelative, currency: $root.currency.name}"></span>)\n        </h4>\n        <div class="helptip-anchor-center">\n          <a id="helptip-wallet-balance">&nbsp;</a>\n        </div>\n      </div>\n\n      <h2 class="content light" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </h2>\n    </div>\n\n    <!-- Buttons bar-->\n    <div class="hidden-xs hidden-sm padding text-center" ng-if="!loading">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="doUpdate()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <button class="button button-stable button-small-padding icon ion-android-download ink" ng-click="downloadHistoryFile()" title="{{\'COMMON.BTN_DOWNLOAD_ACCOUNT_STATEMENT\' | translate}}">\n      </button>\n\n      <cs-extension-point name="buttons"></cs-extension-point>\n\n      &nbsp;&nbsp;\n\n      <button class="button button-calm ink" ng-click="showTransferModal()">\n        {{:locale:\'COMMON.BTN_SEND_MONEY\' | translate}}\n      </button>\n  </div>\n\n    <div class="row no-padding">\n\n      <div class="col col-15 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col">\n\n\n\n        <div class="list" ng-class="::motion.ionListClass">\n\n          <!-- Errors transactions-->\n          <a class="item item-icon-left item-icon-right ink" ng-if="formData.tx.errors && formData.tx.errors.length" ui-sref="app.view_wallet_tx_errors">\n            <i class="icon ion-alert-circled"></i>\n            {{:locale:\'ACCOUNT.ERROR_TX\'|translate}}\n            <div class="badge badge-assertive">\n              {{formData.tx.errors.length}}\n            </div>\n            <i class="gray icon ion-ios-arrow-right"></i>\n          </a>\n\n          <!-- Pending transactions -->\n          <span class="item item-pending item-divider" ng-if="formData.tx.pendings && formData.tx.pendings.length">\n            {{:locale:\'ACCOUNT.PENDING_TX\'|translate}}\n          </span>\n\n          <div class="item item-pending item-tx item-icon-left" ng-repeat="tx in formData.tx.pendings" ng-init="pending=true;" ng-include="\'templates/wallet/item_tx.html\'">\n          </div>\n\n          <!-- Last Transactions -->\n          <span class="item item-divider" ng-if="!loading">\n            {{:locale:\'ACCOUNT.LAST_TX\'|translate}}\n            <a id="helptip-wallet-tx" style="position: relative; bottom: 0; right: 0px">&nbsp;</a>\n          </span>\n\n\n          <span class="item padding" ng-if="!loading && !formData.tx.history.length">\n            <span class="gray">{{:locale:\'ACCOUNT.NO_TX\'|translate}}</span>\n          </span>\n\n\n          <div ng-repeat="tx in formData.tx.history" class="item item-tx item-icon-left" ng-include="::!tx.isUD ? \'templates/wallet/item_tx.html\' : \'templates/wallet/item_ud.html\'">\n          </div>\n          <div class="item item-text-wrap text-center" ng-if="formData.tx.fromTime > 0">\n            <p>\n              <a ng-click="showMoreTx()">{{:locale:\'ACCOUNT.SHOW_MORE_TX\'|translate}}</a>\n              <span class="gray" translate="ACCOUNT.TX_FROM_DATE" translate-values="{fromTime: formData.tx.fromTime}"></span>\n              <span class="gray">|</span>\n              <a ng-click="showMoreTx(-1)" translate>ACCOUNT.SHOW_ALL_TX</a>\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div class="col col-15 hidden-xs hidden-sm">&nbsp;</div>\n\n    </div>\n\n\n    \n  </ion-content>\n\n  <button id="fab-transfer" ng-if="formData" class="button button-fab button-fab-bottom-right button-energized-900 hidden-md hidden-lg drop" ng-click="showTransferModal()">\n    <i class="icon ion-android-send"></i>\n  </button>\n</ion-view>\n'),e.put("templates/wallet/view_wallet_tx_error.html",'<ion-view left-buttons="leftButtons" id="wallet">\n  <ion-nav-title>\n    <!-- no title-->\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="doUpdate()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n\n    <!-- Buttons bar -->\n    <div class="hidden-xs hidden-sm padding text-center">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="doUpdate()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n    </div>\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n\n      <div class="col list" ng-class="::motion.ionListClass">\n\n        <!-- Pending received TX -->\n        <span class="item item-divider">\n          <span translate>ACCOUNT.PENDING_TX_RECEIVED</span>\n          <div class="badge item-note">\n            <span ng-if="!$root.settings.useRelative">({{$root.currency.name | abbreviate}})</span>\n            <span ng-if="$root.settings.useRelative">({{\'COMMON.UD\' | translate}}<sub>{{$root.currency.name | abbreviate}}</sub>)</span>\n          </div>\n        </span>\n\n        <span class="item" ng-if="!formData.tx.errors.length">\n          <h3 translate>ACCOUNT.NO_TX</h3>\n        </span>\n\n        <div class="item item-pending item-tx item-icon-left" ng-repeat="tx in formData.tx.errors | filter: filterReceivedTx" ng-init="pending=true;" ng-include="\'templates/wallet/item_tx.html\'">\n        </div>\n\n        <!-- Error sent TX -->\n        <span class="item item-divider">\n          <span translate>ACCOUNT.ERROR_TX_SENT</span>\n          <div class="badge item-note">\n            <span ng-if="!$root.settings.useRelative">({{$root.currency.name | abbreviate}})</span>\n            <span ng-if="$root.settings.useRelative">({{\'COMMON.UD\' | translate}}<sub>{{$root.currency.name | abbreviate}}</sub>)</span>\n          </div>\n        </span>\n\n        <span class="item" ng-if="!formData.tx.errors.length">\n          <h3 translate>ACCOUNT.NO_TX</h3>\n        </span>\n\n        <div class="item item-pending item-tx item-icon-left" ng-repeat="tx in formData.tx.errors | filter: filterSentTx" ng-init="error=true;" ng-include="\'templates/wallet/item_tx.html\'">\n        </div>\n\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n  </ion-content>\n\n  <!--button id="fab-redo-transfer"\n          ng-if="walletData"\n          class="button button-fab button-fab-bottom-right button-energized-900 hidden-md hidden-lg drop"\n          ng-click="redoTransfer()">\n    <i class="icon ion-refresh"></i>\n  </button-->\n</ion-view>\n'),e.put("templates/wot/item_certification.html",'\n          <i class="item-image" ng-if="!cert.avatar" ng-class="{\'ion-card\': !cert.isMember, \'ion-person\': cert.isMember}"></i>\n          <i class="item-image avatar" ng-if="cert.avatar" style="background-image: url({{::cert.avatar.src}})"></i>\n\n            <span ng-if="cert.isMember">\n              <h3>\n                <i class="icon ion-clock" ng-if="cert.pending"> </i>\n                <span class="positive">\n                  {{::cert.name||cert.uid}}\n                </span>\n              </h3>\n              <h4 class="gray">\n                <i class="ion-key"></i>\n                {{::cert.pubkey | formatPubkey}}\n                <span class="gray"> | {{::cert.time|formatDate}}</span>\n                <span class="gray" ng-if="$root.settings.expertMode"> | {{::cert.pending ? \'WOT.SIGNED_ON_BLOCK\' : \'WOT.WRITTEN_ON_BLOCK\' | translate:cert}}</span>\n              </h4>\n            </span>\n            <span ng-if="!cert.isMember">\n              <h3>\n                <i class="icon ion-clock" ng-if="cert.pending"> </i>\n                <span ng-if="cert.uid" class="dark">\n                  {{::cert.name||cert.uid}}\n                </span>\n                <span ng-if="!cert.uid" class="gray">\n                  <i class="ion-key"> </i>\n                  {{::cert.pubkey | formatPubkey}}\n                </span>\n              </h3>\n              <h5 class="assertive">\n                {{::\'WOT.NOT_MEMBER_PARENTHESIS\'|translate}}\n              </h5>\n              <h4 class="gray">\n                <span ng-if="cert.uid">\n                  <i class="ion-key"></i>\n                  {{::cert.pubkey | formatPubkey}}\n                </span>\n                <span class="gray"> | {{::cert.time|formatDate}}</span>\n                <span class="gray" ng-if="$root.settings.expertMode"> | {{::cert.pending ? \'WOT.SIGNED_ON_BLOCK\' : \'WOT.WRITTEN_ON_BLOCK\' | translate:cert}}</span>\n              </h4>\n            </span>\n            <div class="badge badge-stable" ng-class="{\'badge-energized\': cert.willExpire}" ng-if="cert.expiresIn">\n              {{::cert.expiresIn | formatDurationTo}}\n            </div>\n            <div class="badge badge-assertive" ng-if="!cert.expiresIn">\n              {{::\'WOT.EXPIRED\' | translate}}\n            </div>\n'),e.put("templates/wot/item_content_identity.html",'<i ng-if="::!item.avatar" class="item-image icon ion-person"></i>\n<i ng-if="::item.avatar" class="item-image avatar" style="background-image: url({{::item.avatar.src}})"></i>\n\n<h2>\n  <ng-if ng-if="::item.name||item.uid" ng-bind-html="::item.name||item.uid"></ng-if>\n  <ng-if ng-if="::!item.name && !item.uid">{{::item.pubkey|formatPubkey}}</ng-if>\n</h2>\n\n<h4 class="gray" ng-class="{\'pull-right\': !smallscreen}" ng-if="::item.sigDate">\n  <i class="ion-clock"></i>\n  {{::\'WOT.LOOKUP.REGISTERED\' | translate:item}}\n</h4>\n<h4 class="gray" ng-class="{\'pull-right\': !smallscreen}" ng-if="item.memberDate">\n  <i class="ion-clock"></i>\n  {{::\'WOT.LOOKUP.MEMBER_FROM\' | translate:item}}\n</h4>\n<h4 class="gray">\n  <span class="positive" ng-if="::item.name && item.uid">\n    <i class="ion-person"></i>\n    {{::item.uid}}&nbsp;\n  </span>\n  <b class="ion-key"></b>\n  {{::item.pubkey | formatPubkey}}\n  <span ng-if="::!item.uid" class="assertive" translate>WOT.NOT_MEMBER_PARENTHESIS</span>\n  <span ng-if="::item.revoked" class="assertive" translate>WOT.IDENTITY_REVOKED_PARENTHESIS</span>\n</h4>\n<h4 ng-if="::item.events||item.tags">\n  <span ng-repeat="event in ::item.events" class="assertive">\n    <i class="ion-alert-circled" ng-if="::!item.valid"></i>\n    <span ng-bind-html="::event.message|translate:event.messageParams"></span>\n  </span>\n  <span ng-if="::item.tags" class="dark">\n   <ng-repeat ng-repeat="tag in ::item.tags">\n     #<ng-bind-html ng-bind-html="::tag"></ng-bind-html>\n   </ng-repeat>\n  </span>\n</h4>\n'),e.put("templates/wot/items_given_certifications.html",'\n<div class="list given-certifications" ng-class="::motions.givenCertifications.ionListClass">\n  <span class="item item-divider hidden-xs">\n    <span translate>WOT.GIVEN_CERTIFICATIONS.SUMMARY</span>\n  </span>\n\n  <!-- Signature stock -->\n  <div id="helptip-certs-stock" class="item item-icon-left item-text-wrap ink">\n    <i class="icon ion-ribbon-a"></i>\n    <span translate>WOT.GIVEN_CERTIFICATIONS.SENT</span>\n\n    <cs-badge-given-certification identity="formData" parameters="$root.currency.parameters">\n    </cs-badge-given-certification>\n  </div>\n\n  <!-- Error certifications count -->\n  <div class="item item-icon-left item-text-wrap ink" ng-if="formData.given_cert_error.length">\n    <i class="icon ion-alert-circled"></i>\n    <span translate>WOT.GIVEN_CERTIFICATIONS.ERROR</span>\n\n    <span class="badge badge-assertive">\n      {{formData.given_cert_error.length}}\n    </span>\n  </div>\n\n  <!-- pending given certifications -->\n  <span class="item item-divider" ng-if="formData.given_cert_pending.length">\n    <span translate>WOT.GIVEN_CERTIFICATIONS.PENDING_LIST</span>\n    <div class="badge item-note" style="text-align: right !important" translate>WOT.NOT_WRITTEN_EXPIRE_IN</div>\n  </span>\n\n  <a class="item item-avatar ink" ng-repeat="cert in formData.given_cert_pending" ui-sref="app.wot_identity({pubkey:cert.pubkey, uid:cert.uid})" ng-include="\'templates/wot/item_certification.html\'">\n  </a>\n\n  <!-- validated given certifications -->\n  <span class="item item-divider">\n    <span translate>WOT.GIVEN_CERTIFICATIONS.LIST</span>\n    <div class="badge item-note" translate>WOT.EXPIRE_IN</div>\n  </span>\n\n  <span class="item gray" ng-if="!formData.given_cert.length" translate>\n    WOT.NO_GIVEN_CERTIFICATION\n  </span>\n\n  <a class="item item-avatar ink" ng-repeat="cert in formData.given_cert" ui-sref="app.wot_identity({pubkey:cert.pubkey, uid:cert.uid})" ng-include="\'templates/wot/item_certification.html\'">\n  </a>\n</div>\n'),e.put("templates/wot/items_received_certifications.html",'        <div class="list certifications" ng-class="::motions.receivedCertifications.ionListClass">\n          <span class="item item-divider hidden-xs">\n            <span translate>WOT.CERTIFICATIONS.SUMMARY</span>\n          </span>\n\n          <!-- Certifications count -->\n          <div id="helptip-received-certs" class="item item-icon-left item-text-wrap ink">\n            <i class="icon ion-ribbon-b"></i>\n            <b ng-if="formData.requirements.isSentry" class="ion-star icon-secondary" style="color: yellow; font-size: 16px; left: 25px; top: -7px"></b>\n\n            <span translate>WOT.CERTIFICATIONS.RECEIVED</span>\n            <h4 class="gray" ng-if="formData.requirements.isSentry" translate>WOT.CERTIFICATIONS.SENTRY_MEMBER</h4>\n\n            <cs-badge-certification cs-id="helptip-wot-view-certifications-count" requirements="formData.requirements" parameters="$root.currency.parameters">\n            </cs-badge-certification>\n          </div>\n\n          <!-- Error certifications count -->\n          <div class="item item-icon-left item-text-wrap ink" ng-if="formData.received_cert_error.length">\n            <i class="icon ion-alert-circled"></i>\n            <span translate>WOT.CERTIFICATIONS.ERROR</span>\n\n            <span class="badge badge-assertive">\n              {{formData.received_cert_error.length}}\n            </span>\n          </div>\n\n          <!-- pending certifications -->\n          <span class="item item-divider" ng-if="formData.received_cert_pending.length">\n            <span translate>WOT.CERTIFICATIONS.PENDING_LIST</span>\n            <div class="badge item-note" style="text-align: right !important" translate>WOT.NOT_WRITTEN_EXPIRE_IN</div>\n          </span>\n\n          <a class="item item-avatar ink" ng-repeat="cert in formData.received_cert_pending" ui-sref="app.wot_identity({pubkey:cert.pubkey, uid:cert.uid})" ng-include="\'templates/wot/item_certification.html\'">\n          </a>\n\n          <!-- valid certifications -->\n          <span class="item item-divider">\n            <span translate>WOT.CERTIFICATIONS.LIST</span>\n            <div class="badge item-note" translate>WOT.EXPIRE_IN</div>\n          </span>\n\n          <span class="item gray" ng-if="!formData.received_cert.length" translate>WOT.NO_CERTIFICATION</span>\n\n          <a class="item item-avatar ink" ng-repeat="cert in formData.received_cert" ui-sref="app.wot_identity({pubkey:cert.pubkey, uid:cert.uid})" ng-include="\'templates/wot/item_certification.html\'">\n          </a>\n        </div>\n'),e.put("templates/wot/lookup.html",'<ion-view left-buttons="leftButtons">\n\n  <ion-tabs class="tabs-positive tabs-icon-top">\n\n    <!--ion-tab title="{{\'WOT.CONTACTS.TITLE\'|translate}}" icon="ion-person"\n             ui-sref="app.wot_lookup.tab_contacts">\n      <i class="ion-person"></i>\n      <ion-nav-view name="tab"></ion-nav-view>\n    </ion-tab-->\n\n\n    <ion-tab title="{{\'WOT.LOOKUP.TITLE\'|translate}}" icon="ion-person-stalker" ui-sref="app.wot_lookup.tab_search">\n      <ion-nav-view name="tab"></ion-nav-view>\n    </ion-tab>\n\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="tabs"></cs-extension-point>\n\n  </ion-tabs>\n</ion-view>\n'),e.put("templates/wot/lookup_form.html",'<div class="lookupForm">\n\n  <div class="item no-padding">\n\n    <div class="double-padding-x padding-top-xs item-text-wrap" ng-if="::allowMultiple" style="height: 36px">\n\n      <div class="gray padding-top" ng-if="!selection.length && parameters.help">{{::parameters.help|translate}}</div>\n\n      <div ng-repeat="identity in selection track by identity.id" class="button button-small button-text button-stable button-icon-event ink" ng-class="{\'button-text-positive\': identity.selected}">\n        <span ng-bind-html="identity.name||identity.uid||(identity.pubkey|formatPubkey)"></span>\n        <i class="icon ion-close" ng-click="removeSelection(identity, $event)">&nbsp;&nbsp;</i>\n      </div>\n\n    </div>\n\n    <div class="item-input">\n      <i class="icon ion-search placeholder-icon"></i>\n\n      <input type="text" class="visible-xs visible-sm" placeholder="{{\'WOT.SEARCH_HELP\'|translate}}" ng-model="search.text" ng-model-options="{ debounce: 650 }" ng-change="doSearch()" on-return="doSearchText()" select-on-click>\n      <input type="text" class="hidden-xs hidden-sm" id="{{wotSearchTextId}}" placeholder="{{\'WOT.SEARCH_HELP\'|translate}}" ng-model="search.text" on-return="doSearchText()">\n      <div class="helptip-anchor-center">\n        <a id="helptip-wot-search-text"></a>\n      </div>\n    </div>\n  </div>\n\n  <div class="padding-top padding-xs" style="display: block; height: 60px" ng-class="::{\'hidden-xs\': !showResultLabel}">\n    <div class="pull-left" ng-if="!search.loading && showResultLabel">\n      <ng-if ng-if="search.type==\'newcomers\'">\n        <h4 translate>WOT.LOOKUP.NEWCOMERS</h4>\n        <small class="gray no-padding" ng-if="search.total">{{\'WOT.LOOKUP.NEWCOMERS_COUNT\'|translate:{count: search.total} }}</small>\n      </ng-if>\n      <ng-if ng-if="search.type==\'pending\'">\n        <h4 translate>WOT.LOOKUP.PENDING</h4>\n        <small class="gray no-padding" ng-if="search.total">{{\'WOT.LOOKUP.PENDING_COUNT\'|translate:{count: search.total} }}</small>\n      </ng-if>\n      <h4 ng-if="search.type==\'text\'">\n        <span translate>COMMON.RESULTS_LIST</span>\n        <small class="gray" ng-if="search.total">({{search.total}})</small>\n      </h4>\n    </div>\n\n\n    <div class="pull-right hidden-xs hidden-sm">\n      <a ng-if="enableFilter" class="button button-text button-small ink" ng-class="{\'button-text-positive\': search.type==\'newcomers\'}" ng-click="doGetNewcomers()">\n        <i class="icon ion-person-stalker"></i>\n        {{\'WOT.LOOKUP.BTN_NEWCOMERS\' | translate}}\n      </a>\n      <a ng-if="enableFilter" class="button button-text button-small ink" ng-class="{\'button-text-positive\': search.type==\'pending\'}" ng-click="doGetPending()" class="badge-balanced">\n        <i class="icon ion-clock"></i>\n        {{\'WOT.LOOKUP.BTN_PENDING\' | translate}}\n      </a>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="filter-buttons"></cs-extension-point>\n      &nbsp;\n      <button class="button button-small button-stable ink" ng-click="doSearch()">\n        {{\'COMMON.BTN_SEARCH\' | translate}}\n      </button>\n\n      <button class="button button-small button-positive {{parameters.okType}} ink" ng-if="::allowMultiple" ng-disabled="!selection.length" ng-click="next()">\n        {{parameters.okText||\'COMMON.BTN_NEXT\' | translate}}\n      </button>\n    </div>\n  </div>\n\n  <div class="text-center" ng-if="search.loading">\n    <p class="gray" ng-if="::$root.currency.initPhase" translate>WOT.SEARCH_INIT_PHASE_WARNING</p>\n    <ion-spinner icon="android"></ion-spinner>\n  </div>\n\n  <ng-if ng-if="!search.loading">\n    <div class="assertive padding" ng-if="!search.results.length">\n      <span ng-if="search.type==\'text\'" translate>COMMON.SEARCH_NO_RESULT</span>\n      <span ng-if="search.type==\'pending\'" translate>WOT.LOOKUP.NO_PENDING</span>\n      <span ng-if="search.type==\'newcomers\'" translate>WOT.LOOKUP.NO_NEWCOMERS</span>\n    </div>\n\n    <!-- simple selection + device -->\n    \n\n    <!-- simple selection + no device -->\n    <!--removeIf(device)-->\n    <div ng-if="::!allowMultiple" class="list {{::motion.ionListClass}}">\n\n      <div ng-repeat="item in search.results track by item.id" id="helptip-wot-search-result-{{$index}}" ng-class="::{\'item-avatar item-icon-right ink\': !item.divider, \'item-divider \': item.divider}" class="item item-border-large {{::item.ionItemClass}}" ng-click="::select(item)">\n\n        <!-- divider -->\n        <span ng-if="::item.divider">{{::(\'WOT.SEARCH.DIVIDER_\' + item.index)|upper|translate}}</span>\n\n        <!-- item -->\n        <ng-include ng-if="::!item.divider" src="item.templateUrl || \'templates/wot/item_content_identity.html\'"></ng-include>\n\n        <i ng-if="::!item.divider" class="icon ion-ios-arrow-right"></i>\n      </div>\n    </div>\n    <!--endRemoveIf(device)-->\n\n    <!-- multi selection -->\n    <div ng-if="::allowMultiple" class="list {{::motion.ionListClass}}">\n\n      <ion-checkbox ng-repeat="item in search.results track by item.id" ng-model="item.checked" class="item item-border-large item-avatar ink" ng-click="toggleCheck($index, $event)">\n        <ng-include src="\'templates/wot/item_content_identity.html\'"></ng-include>\n      </ion-checkbox>\n    </div>\n\n    <ion-infinite-scroll ng-if="search.hasMore" spinner="android" on-infinite="showMore()" distance="20%">\n    </ion-infinite-scroll>\n\n  </ng-if>\n</div>\n'),
e.put("templates/wot/lookup_lg.html",'<ion-view>\n  <ion-nav-title>\n    {{\'MENU.WOT\' | translate}}\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    \n    <button class="button button-icon button-clear visible-xs visible-sm" ng-click="showActionsPopover($event)">\n      <i class="icon ion-android-funnel"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="top"></cs-extension-point>\n\n    <ng-include src="\'templates/wot/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("templates/wot/lookup_popover_actions.html",'<ion-popover-view class="fit has-header visible-sm visible-xs">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_FILTER_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink" ng-click="doGetNewcomers()">\n        <i class="icon ion-person"></i>\n        {{\'WOT.LOOKUP.BTN_NEWCOMERS\' | translate}}\n      </a>\n\n      <a class="item item-icon-left ink" ng-click="doGetPending()">\n        <i class="icon ion-clock"></i>\n        {{\'WOT.LOOKUP.BTN_PENDING\' | translate}}\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("templates/wot/modal_lookup.html",'<ion-modal-view id="wotLookup" class="modal-full-height">\n\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear" ng-click="closeModal()" translate="">COMMON.BTN_CANCEL</button>\n\n    <h1 class="title hidden-xs">\n      {{::parameters.title?parameters.title:\'WOT.MODAL.TITLE\'|translate}}\n    </h1>\n\n    <button class="button button-clear icon-right visible-xs ink" ng-if="allowMultiple && selection.length" ng-click="closeModal(selection)">\n      {{::parameters.okText||\'COMMON.BTN_NEXT\' | translate}}\n      <i ng-if="::!parameters.okText||parameters.okIcon" class="icon {{::parameters.okIcon||\'ion-ios-arrow-right\'}}"></i>\n    </button>\n  </ion-header-bar>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <div class="visible-xs visible-sm text-right stable-bg stable">\n      \n      <button class="button button-icon button-small-padding dark ink" ng-click="showActionsPopover($event)">\n        <i class="icon ion-android-funnel"></i>\n      </button>\n    </div>\n\n    <ng-include src="\'templates/wot/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-modal-view>\n'),e.put("templates/wot/modal_select_pubkey_identity.html",'<ion-modal-view id="transfer" class="modal-full-height modal-transfer">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>ACCOUNT.SELECT_IDENTITY_MODAL.TITLE</h1>\n  </ion-header-bar>\n\n  <ion-content scroll="true">\n\n    <div class="padding">\n      <p trust-as-html="\'ACCOUNT.SELECT_IDENTITY_MODAL.HELP\'|translate:{pubkey: pubkey}"></p>\n    </div>\n\n    <ion-list>\n      <ion-item class="item-avatar item-icon-right" ng-repeat="item in identities" ng-click="closeModal(item)">\n\n        <i class="item-image icon ion-person"></i>\n\n        <h2>{{item.uid}}</h2>\n\n        <h4 class="gray">\n          <b class="ion-key"></b>\n          {{::item.pubkey | formatPubkey}}\n          <span ng-if="::!item.revoked && !item.pendingRevocation && !item.isMember" class="assertive" translate>WOT.NOT_MEMBER_PARENTHESIS</span>\n          <span ng-if="::item.revoked || item.pendingRevocation" class="assertive bold" translate>WOT.IDENTITY_REVOKED_PARENTHESIS</span>\n        </h4>\n\n        <ng-if ng-if="::!item.revoked && !item.pendingRevocation && (item.certificationCount || item.pendingCertificationCount)">\n\n          <!-- certification count -->\n          <cs-badge-certification requirements="item" parameters="$root.currency.parameters"></cs-badge-certification>\n\n          <!-- certification label -->\n          <div class="gray badge badge-secondary">\n            <span translate>ACCOUNT.CERTIFICATION_COUNT</span>\n          </div>\n        </ng-if>\n\n        <i class="icon ion-ios-arrow-right"></i>\n      </ion-item>\n    </ion-list>\n\n  </ion-content>\n\n</ion-modal-view>\n'),e.put("templates/wot/view_certifications.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm">{{::formData.name||formData.uid}}</span>\n    <span class="hidden-xs hidden-sm" ng-if="!loading" translate="WOT.CERTIFICATIONS.TITLE" translate-values="{uid: formData.name || formData.uid}"></span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n  </ion-nav-buttons>\n\n  <ion-content class="certifications certifications-lg">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doUpdate()">\n    </ion-refresher>\n\n    <!-- Buttons bar -->\n    <div class="hidden-xs hidden-sm text-center padding">\n      <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="doUpdate()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <button id="helptip-certs-certify" class="button button-raised button-calm icon-left ion-ribbon-b" ng-if="canCertify" ng-click="certify()" ng-disabled="disableCertifyButton">\n        {{\'WOT.BTN_CERTIFY\' | translate}}\n      </button>\n      <button id="helptip-certs-select-certify" class="button button-raised button-calm icon-left" ng-if="canSelectAndCertify" ng-click="selectAndCertify()">\n        {{\'WOT.BTN_SELECT_AND_CERTIFY\' | translate}}\n      </button>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="buttons"></cs-extension-point>\n    </div>\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <!-- certifications tables -->\n    <div class="row responsive-sm responsive-md responsive-lg">\n      <!-- Received certifications -->\n      <div class="col no-padding" ng-if="motions.receivedCertifications.enable">\n        <ng-include src="\'templates/wot/items_received_certifications.html\'"></ng-include>\n      </div>\n\n      <!-- Avatar -->\n      <div class="col col-20 col-avatar hidden-xs hidden-sm hidden-md no-padding" style="margin-top: 100px" ng-if="motions.avatar.enable">\n        <div class="row no-padding" ng-class="::motions.avatar.ionListClass">\n          <div class="col text-center no-padding gray" style="margin-top: 30px">\n            <i class="icon ion-arrow-right-a" style="font-size:30px"></i>\n          </div>\n          <div class="col text-center no-padding">\n            <a style="text-decoration: none" ui-sref="app.wot_identity({pubkey: formData.pubkey, uid: formData.uid})">\n              <i class="avatar avatar-large" ng-if="!formData.avatar" ng-class="{\'avatar-wallet\': !formData.isMember, \'avatar-member\': formData.isMember}"></i>\n              <i class="avatar avatar-large" ng-if="formData.avatar" style="background-image: url({{::formData.avatar.src}})"></i>\n              <h4 class="text-center" ng-class="{\'positive\': formData.isMember, \'gray\': !formData.isMember}">\n                {{::formData.name||formData.uid}}\n              </h4>\n              <h5 class="text-center gray">\n                <i class="icon ion-key"></i> {{formData.pubkey|formatPubkey}}\n              </h5>\n              <h5 class="assertive">\n                <span ng-if="::(formData.name || formData.uid) && !formData.isMember && !revoked" translate>WOT.NOT_MEMBER_PARENTHESIS</span>\n                <b ng-if="::(formData.name || formData.uid) && !formData.isMember && revoked" translate>WOT.IDENTITY_REVOKED_PARENTHESIS</b>\n                <b ng-if="::(formData.name || formData.uid) && formData.isMember && revoked" translate>WOT.MEMBER_PENDING_REVOCATION_PARENTHESIS</b>\n              </h5>\n            </a>\n          </div>\n          <div class="col text-center no-padding gray" style="margin-top: 30px">\n            <i class="icon ion-arrow-right-a" style="font-size:30px"></i>\n          </div>\n        </div>\n      </div>\n\n      <!-- Given certifications -->\n      <div class="col no-padding" ng-if="motions.givenCertifications.enable">\n        <ng-include src="\'templates/wot/items_given_certifications.html\'"></ng-include>\n      </div>\n    </div>\n  </ion-content>\n\n    <!-- fab button -->\n  <div class="visible-xs visible-sm">\n    <button id="fab-certify" class="button button-fab button-fab-bottom-right button-energized-900 spin" ng-if="canCertify && !alreadyCertified" ng-click="certify()">\n      <i class="icon ion-ribbon-b"></i>\n    </button>\n    <button id="fab-select-certify" class="button button-fab button-fab-bottom-right button-energized-900 spin" ng-if="canSelectAndCertify" ng-click="selectAndCertify()">\n      <i class="icon ion-plus"></i>\n    </button>\n  </div>\n</ion-view>\n'),e.put("templates/wot/view_identity.html",'<ion-view left-buttons="leftButtons" class="view-identity">\n  <ion-nav-title>\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="refresher-top-bg" ng-class="{\'member\': !loading && formData.isMember}">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doUpdate(true)">\n    </ion-refresher>\n\n    <div class="hero">\n      <div class="content" ng-if="!loading">\n        <i class="avatar" ng-if="::!formData.avatar" ng-class="{\'avatar-wallet\': !formData.isMember, \'avatar-member\': formData.isMember}"></i>\n        <i class="avatar" ng-if="::formData.avatar" style="background-image: url({{::formData.avatar.src}})"></i>\n        <ng-if ng-if="::formData.name">\n          <h3 class="light">{{::formData.name}}</h3>\n        </ng-if>\n        <ng-if ng-if="::!formData.name">\n          <h3 class="light" ng-if="::formData.uid">{{::formData.uid}}</h3>\n          <h3 class="light" ng-if="::!formData.uid"><i class="ion-key"></i> {{::formData.pubkey | formatPubkey}}</h3>\n        </ng-if>\n        <h4 class="assertive">\n          <ng-if ng-if="::(formData.name || formData.uid) && !formData.isMember && revoked" translate>WOT.IDENTITY_REVOKED_PARENTHESIS</ng-if>\n          <ng-if ng-if="::(formData.name || formData.uid) && formData.isMember && revoked" translate>WOT.MEMBER_PENDING_REVOCATION_PARENTHESIS</ng-if>\n        </h4>\n\n      </div>\n      <h4 class="content light" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </h4>\n\n\n    </div>\n\n    <!-- button bar-->\n    <a id="wot-share-anchor-{{::formData.pubkey}}"></a>\n    <div class="hidden-xs hidden-sm padding text-center">\n      <button class="button button-stable button-small-padding icon ion-android-share-alt ink" ng-click="showSharePopover($event)" title="{{\'COMMON.BTN_SHARE\' | translate}}">\n      </button>\n\n      <!-- Allow extension here -->\n      <cs-extension-point name="buttons"></cs-extension-point>\n\n      <button class="button button-stable button-small-padding icon ion-ribbon-b ink" ng-click="certify()" ng-if=":rebind:formData.hasSelf" title="{{\'WOT.BTN_CERTIFY\' | translate}}" ng-disabled="disableCertifyButton">\n      </button>\n\n      <button class="button button-calm ink" ng-click="showTransferModal({pubkey:formData.pubkey, uid: formData.name||formData.uid})">\n        {{\'COMMON.BTN_SEND_MONEY\' | translate}}\n      </button>\n    </div>\n\n    <div class="row no-padding">\n\n      <div class="visible-xs visible-sm">\n        <button id="fab-certify-{{:rebind:formData.uid}}" style="top: 170px" class="button button-fab button-fab-top-left button-fab-hero button-calm spin" ng-if=":rebind:(canCertify && !alreadyCertified)" ng-click="certify()">\n          <i class="icon ion-ribbon-b"></i>\n        </button>\n      </div>\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col list" ng-class="::motion.ionListClass" bind-notifier="{ rebind:loading}">\n\n        <span class="item item-divider" translate>WOT.GENERAL_DIVIDER</span>\n\n        <!-- Pubkey -->\n        <ion-item class="item-icon-left item-text-wrap ink" copy-on-click="{{:rebind:formData.pubkey}}">\n          <i class="icon ion-key"></i>\n          <span translate>COMMON.PUBKEY</span>\n          <h4 id="pubkey" class="dark text-left">{{:rebind:formData.pubkey}}</h4>\n        </ion-item>\n\n        <div class="item item-icon-left item-text-wrap" ng-if=":rebind:!formData.hasSelf">\n          <i class="icon ion-ios-help-outline positive"></i>\n          <span translate>WOT.NOT_MEMBER_ACCOUNT</span>\n          <h4 class="gray" translate>WOT.NOT_MEMBER_ACCOUNT_HELP</h4>\n        </div>\n\n        <!-- Uid + Registration date -->\n        <ion-item class="item-icon-left" ng-if=":rebind:formData.sigDate||formData.uid">\n          <i class="icon ion-calendar"></i>\n          <span translate>COMMON.UID</span>\n          <h5 class="dark" ng-if=":rebind:formData.sigDate">\n            <span translate>WOT.REGISTERED_SINCE</span>\n            {{:rebind:formData.sigDate | formatDate}}\n          </h5>\n          <span class="badge badge-stable">{{:rebind:formData.uid}}</span>\n        </ion-item>\n\n        <!-- Received certifications count -->\n        <a id="helptip-wot-view-certifications" class="item item-icon-left item-text-wrap item-icon-right ink" ng-if=":rebind:formData.hasSelf" ng-click="showCertifications()">\n          <i class="icon ion-ribbon-b"></i>\n          <b ng-if=":rebind:formData.requirements.isSentry" class="ion-star icon-secondary" style="color: yellow; font-size: 16px; left: 25px; top: -7px"></b>\n          <span translate>ACCOUNT.CERTIFICATION_COUNT</span>\n          <cs-badge-certification cs-id="helptip-wot-view-certifications-count" requirements="formData.requirements" parameters="{sigQty: formData.sigQty}">\n          </cs-badge-certification>\n\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n\n        <!-- Signature stock -->\n        <a class="item item-icon-left item-text-wrap item-icon-right ink visible-xs visible-sm" ng-if=":rebind:formData.hasSelf && formData.isMember" ng-click="showGivenCertifications()">\n          <i class="icon ion-ribbon-a"></i>\n          <span translate>WOT.GIVEN_CERTIFICATIONS.SENT</span>\n          <cs-badge-given-certification identity="formData" parameters="{sigStock: formData.sigStock}">\n          </cs-badge-given-certification>\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n\n        <!-- Account transaction -->\n        <a class="item item-icon-left item-icon-right ink" ng-if="!loading" ui-sref="app.wot_identity_tx_uid({uid:formData.uid,pubkey:formData.pubkey})">\n          <i class="icon ion-card"></i>\n          <span translate>WOT.ACCOUNT_OPERATIONS</span>\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n\n        <div class="item item-text-wrap item-icon-left item-wallet-event assertive" ng-repeat="event in :rebind:formData.events | filter: {type: \'error\'}">\n          <i class="icon ion-alert-circled"></i>\n          <span trust-as-html="event.message | translate:event.messageParams"></span>\n        </div>\n\n        <cs-extension-point name="general"></cs-extension-point>\n\n        <cs-extension-point name="after-general"></cs-extension-point>\n\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n    </div>\n\n  </ion-content>\n\n  <!-- fab button -->\n  <div class="visible-xs visible-sm" ng-hide="loading">\n    <button id="fab-transfer" class="button button-fab button-fab-bottom-right button-assertive drop" ng-click="showTransferModal({pubkey:formData.pubkey, uid: formData.uid})">\n      <i class="icon ion-android-send"></i>\n    </button>\n  </div>\n</ion-view>\n'),e.put("templates/wot/view_identity_tx.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm">{{::formData.name||formData.uid}}</span>\n    <span class="hidden-xs hidden-sm" ng-if="!loading" translate="WOT.OPERATIONS.TITLE" translate-values="{uid: formData.name || formData.uid}"></span>\n  </ion-nav-title>\n\n  <ion-content scroll="true">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doUpdate(true)">\n    </ion-refresher>\n\n    <div class="hidden-xs hidden-sm padding text-center">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink" ng-click="doUpdate()" title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <button class="button button-stable button-small-padding icon ion-android-download ink" ng-click="downloadHistoryFile()" title="{{\'COMMON.BTN_DOWNLOAD_ACCOUNT_STATEMENT\' | translate}}">\n      </button>\n\n      <cs-extension-point name="buttons"></cs-extension-point>\n\n    </div>\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list {{motion.ionListClass}}" ng-if="!loading">\n\n      <div class="row">\n\n        <div class="col col-15 hidden-xs hidden-sm">&nbsp;</div>\n\n        <div class="col">\n\n          <!-- the balance -->\n          <div class="item item-tx item-divider">\n            {{\'ACCOUNT.BALANCE_ACCOUNT\'|translate}}\n            <div class="badge item-note badge-balanced" ng-bind-html=":balance:formData.balance|formatAmount:{currency: $root.currency.name}">\n            </div>\n            <div class="badge badge-secondary" ng-if="$root.settings.expertMode">\n              (<span ng-bind-html=":balance:formData.balance| formatAmount: {useRelative: !$root.settings.useRelative, currency: $root.currency.name} "></span>)\n            </div>\n          </div>\n\n          <span class="item item-divider" ng-if="!loading">\n            {{:locale:\'ACCOUNT.LAST_TX\'|translate}}\n            <a id="helptip-wallet-tx" style="position: relative; bottom: 0; right: 0px">&nbsp;</a>\n          </span>\n\n          <!-- iterate on each TX -->\n          <div ng-repeat="tx in formData.tx.history" class="item item-tx item-icon-left" ng-include="::!tx.isUD ? \'templates/wallet/item_tx.html\' : \'templates/wallet/item_ud.html\'">\n          </div>\n\n          <div class="item item-text-wrap text-center" ng-if="formData.tx.fromTime > 0">\n            <p>\n              <a ng-click="showMoreTx()">{{:locale:\'ACCOUNT.SHOW_MORE_TX\'|translate}}</a>\n              <span class="gray" translate="ACCOUNT.TX_FROM_DATE" translate-values="{fromTime: tx.fromTime}"></span>\n              <span class="gray">|</span>\n              <a ng-click="showMoreTx(-1)" translate>ACCOUNT.SHOW_ALL_TX</a>\n            </p>\n          </div>\n        </div>\n\n        <div class="col col-15 hidden-xs hidden-sm">&nbsp;</div>\n\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/tabs/tab_blocks.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-navicon visible-xs visible-sm" ng-click="toggleCompactMode()">\n      <b class="icon-secondary" ng-class="{\'ion-arrow-down-b\': !compactMode, \'ion-arrow-up-b\': compactMode}" style="top: -12px; left: 11px; font-size: 10px"></b>\n      <b class="icon-secondary" ng-class="{\'ion-arrow-up-b\': !compactMode,\'ion-arrow-down-b\': compactMode}" style="top: 12px; left: 11px; font-size: 10px"></b>\n    </button>\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n  </ion-nav-buttons>\n\n  <ion-content>\n    <div class="item item-divider">\n      <span translate>BLOCKCHAIN.LOOKUP.LAST_BLOCKS</span>\n    </div>\n\n    <cs-extension-point name="buttons"></cs-extension-point>\n\n    <ng-include src="\'templates/blockchain/list_blocks.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/tabs/tab_network.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear" ng-click="showExtendActionsPopover($event)">\n      <i class="icon ion-android-funnel"></i>\n    </button>\n\n  </ion-nav-buttons>\n\n  <ion-content>\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="refreshPeers()">\n    </ion-refresher>\n\n    <div class="list">\n      <ng-include src="\'templates/currency/items_network.html\'"></ng-include>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/tabs/tab_parameters.html",'<ion-view>\n\n  <ion-nav-buttons side="secondary">\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n  </ion-nav-buttons>\n\n  <ion-content>\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="refresh()">\n    </ion-refresher>\n\n    <div class="list">\n      <ng-include src="\'templates/currency/items_parameters.html\'"></ng-include>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("templates/currency/tabs/tab_wot.html",'<ion-view>\n  <ion-content>\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="refresh()">\n    </ion-refresher>\n    <div class="list">\n      <ng-include src="\'templates/currency/items_wot.html\'"></ng-include>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("templates/wallet/slides/slides_recoverID_1.html",'<ion-content class="has-header padding">\n  <h3 translate>ACCOUNT.SECURITY.RECOVER_ID</h3>\n\n  <div dropzone="recoverContent(file)">\n    <div ng-if="!hasContent" onclick="angular.element(document.querySelector(\'#saveIdFile\'))[0].click();">\n      <h2 class="gray" translate>COMMON.CHOOSE_FILE</h2>\n      <input type="file" id="saveIdFile" accept=".txt" style="visibility:hidden; position:absolute" on-read-file="recoverContent(file)">\n    </div>\n\n    <div ng-if="hasContent" class="item row item-icon-left no-padding">\n     <i class="icon ion-document-text gray"></i>\n     <div class="col">\n       <span>{{fileData.name}}</span>\n       <br>\n       <small>{{fileData.size}} Ko</small>\n     </div>\n     <div class="col-10">\n       <b ng-class="{\'ion-android-done balanced\': isValidFile,\'ion-close-circled assertive\': !isValidFile}" style="font-size: 28px; position: relative; top: 6px"></b>\n        <button class="button-icon ion-close-round gray pull-right" style="font-size:10px" ng-click="restore()"></button>\n     </div>\n   </div>\n  </div>\n\n  <div class="padding hidden-xs text-right">\n   <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n   </button>\n   <button class="button button-calm icon-right ion-chevron-right ink" ng-click="doNext()" translate>\n     COMMON.BTN_NEXT\n     <i class="icon ion-arrow-right-a"></i>\n   </button>\n  </div>\n</ion-content>\n\n\n'),e.put("templates/wallet/slides/slides_recoverID_2.html",'  <ion-content class="has-header padding">\n    <h3 translate>ACCOUNT.SECURITY.RECOVER_ID</h3>\n\n    <form name="recoverForm" novalidate ng-submit="recoverId()">\n      <div class="list" ng-init="setForm(recoverForm, \'recoverForm\')">\n        <ng-repeat ng-repeat="question in recover.questions ">\n          <label class="item item-input {{smallscreen ? \'item-stacked-label\' : \'item-floating-label\'}}" ng-class="{\'item-input-error\': recoverForm.$submitted && recoverForm[\'question{{$index}}\'].$invalid}">\n            <span class="input-label" style="{{smallscreen ? \'white-space: normal\' : \'\'}}">{{question.value }}</span>\n            <input type="text" name="question{{$index}}" placeholder="{{smallscreen ? \'\' : question.value }}" ng-model="question.answer" required>\n          </label>\n          <div class="form-errors" ng-show="recoverForm.$submitted && recoverForm[\'question{{$index}}\'].$error" ng-messages="recoverForm[\'question{{$index}}\'].$error">\n            <div class="form-error" ng-message="required">\n              <span translate="ERROR.FIELD_REQUIRED"></span>\n            </div>\n          </div>\n        </ng-repeat>\n        <div class="padding hidden-xs text-right">\n          <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n          </button>\n          <button class="button button-clear button-dark" ng-click="restore()" type="button" translate>ACCOUNT.SECURITY.BTN_CLEAN\n          </button>\n          <button class="button button-calm icon-right ion-chevron-right ink" type="submit" translate>\n            COMMON.BTN_NEXT\n            <i class="icon ion-arrow-right-a"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  </ion-content>\n\n'),e.put("templates/wallet/slides/slides_recoverID_3.html",'  <ion-content class="has-header padding">\n    <h3 translate>ACCOUNT.SECURITY.RECOVER_ID</h3>\n\n\n    <div class="item item-input">\n      <span class="input-label">{{\'LOGIN.SALT\' | translate}} :</span>\n      <span>{{recover.salt}}</span>\n    </div>\n\n    <div class="item item-input">\n      <span class="input-label">{{\'LOGIN.PASSWORD\' | translate}} :</span>\n      <span>{{recover.pwd}}</span>\n    </div>\n\n    <div class="padding hidden-xs text-right">\n          <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CLOSE\n          </button>\n    </div>\n  </ion-content>\n\n'),e.put("templates/wallet/slides/slides_revocation_file.html",'<ion-content class="has-header padding">\n  <p translate>ACCOUNT.SECURITY.REVOCATION_WITH_FILE_HELP</p>\n\n  <div dropzone="recoverContent(file)">\n    <div ng-if="!hasContent" onclick="angular.element(document.querySelector(\'#revocationFile\'))[0].click();">\n      <h2 class="gray" translate>COMMON.CHOOSE_FILE</h2>\n      <input type="file" id="revocationFile" accept=".txt" style="visibility:hidden; position:absolute" on-read-file="recoverContent(file)">\n    </div>\n\n    <div ng-if="hasContent" class="item row item-icon-left no-padding">\n      <i class="icon ion-document-text gray"></i>\n      <div class="col">\n        <span>{{fileData.name}}</span>\n        <br>\n        <small>{{fileData.size}} Ko</small>\n      </div>\n      <div class="col-10">\n        <b ng-class="{\'ion-android-done balanced\': isValidFile,\'ion-close-circled assertive\': !isValidFile}" style="font-size: 28px; position: relative; top: 6px"></b>\n        <button class="button-icon ion-close-round gray pull-right" style="font-size:10px" ng-click="restore()"></button>\n      </div>\n    </div>\n  </div>\n\n  <div class="padding hidden-xs text-right">\n    <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n    </button>\n    <button class="button button-calm icon-right ion-chevron-right ink" ng-click="revokeWithFile()" translate>\n      COMMON.BTN_NEXT\n      <i class="icon ion-arrow-right-a"></i>\n    </button>\n  </div>\n</ion-content>\n\n\n'),e.put("templates/wallet/slides/slides_saveID_1.html",'  <ion-content class="has-header padding">\n    <h3 translate>ACCOUNT.SECURITY.SAVE_ID</h3>\n    <label class="item item-input item-select">\n      <div class="input-label" translate>\n        ACCOUNT.SECURITY.LEVEL\n      </div>\n      <select ng-model="formData.level">\n        <option value="2" ng-bind-html="\'ACCOUNT.SECURITY.LOW_LEVEL\' | translate"></option>\n        <option value="4" translate>ACCOUNT.SECURITY.MEDIUM_LEVEL</option>\n        <option value="6" translate>ACCOUNT.SECURITY.STRONG_LEVEL</option>\n      </select>\n    </label>\n    <div class="padding-top" translate="ACCOUNT.SECURITY.HELP_LEVEL" translate-values="{nb: {{formData.level}}}"></div>\n    <form name="questionsForm" novalidate ng-submit="doNext(\'questionsForm\')">\n      <div class="list" ng-init="setForm(questionsForm, \'questionsForm\')">\n\n        <ion-checkbox ng-repeat="question in formData.questions" ng-model="question.checked" ng-required="isRequired()">\n          <span style="white-space: normal">{{question.value | translate}}</span>\n        </ion-checkbox>\n        <div class="item item-icon-right no-padding-top">\n          <a class="dark"><i class="icon ion-android-add" ng-click="addQuestion()"></i></a>\n          <div class="list list-inset">\n            <label class="item item-input">\n              <input type="text" placeholder="{{\'ACCOUNT.SECURITY.ADD_QUESTION\' | translate}}" ng-model="formData.addQuestion">\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="padding hidden-xs text-right">\n        <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n        </button>\n        <button class="button button-clear button-dark" ng-click="restore()" type="button" translate>ACCOUNT.SECURITY.BTN_RESET\n        </button>\n        <button class="button button-calm icon-right ion-chevron-right ink" ng-disabled="questionsForm.$invalid" type="submit" translate>\n          COMMON.BTN_NEXT\n          <i class="icon ion-arrow-right-a"></i>\n        </button>\n      </div>\n    </form>\n\n  </ion-content>\n'),e.put("templates/wallet/slides/slides_saveID_2.html",'  <ion-content class="has-header padding">\n    <h3 translate>ACCOUNT.SECURITY.SAVE_ID</h3>\n\n    <form name="answersForm" novalidate ng-submit="doNext(\'answersForm\')">\n      <div class="list" ng-init="setForm(answersForm, \'answersForm\')">\n        <ng-repeat ng-repeat="question in formData.questions |filter:true:checked">\n          <label class="item item-input item-text-wrap {{smallscreen ? \'item-stacked-label\' : \'item-floating-label\'}}" ng-class="{\'item-input-error\': answersForm.$submitted && answersForm[\'question{{$index}}\'].$invalid}">\n            <span class="input-label" style="width: 100%; max-width: inherit">{{question.value | translate}}</span>\n            <input type="text" name="question{{$index}}" placeholder="{{smallscreen ? \'\' : question.value | translate}}" ng-model="question.answer" required>\n          </label>\n          <div class="form-errors" ng-show="answersForm.$submitted && answersForm[\'question{{$index}}\'].$error" ng-messages="answersForm[\'question{{$index}}\'].$error">\n            <div class="form-error" ng-message="required">\n              <span translate="ERROR.FIELD_REQUIRED"></span>\n            </div>\n          </div>\n        </ng-repeat>\n        <div class="padding hidden-xs text-right">\n          <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>COMMON.BTN_CANCEL\n          </button>\n          <button class="button button-clear button-dark" ng-click="restore()" type="button" translate>ACCOUNT.SECURITY.BTN_CLEAN\n          </button>\n          <button class="button button-positive ink" type="submit" translate>\n            COMMON.BTN_CONTINUE\n            <i class="icon ion-android-archive"></i>\n          </button>\n        </div>\n      </div>\n\n    </form>\n  </ion-content>\n'),e.put("templates/wot/tabs/tab_given_certifications.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-loop" ng-click="doUpdate()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content ng-init="motions.receivedCertifications=false; motions.avatar=false">\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <ng-include src="\'templates/wot/items_given_certifications.html\'"></ng-include>\n  </ion-content>\n\n  <!-- fab button -->\n  <div class="visible-xs visible-sm">\n    <button id="fab-select-certify" class="button button-fab button-fab-bottom-right button-energized-900 spin" ng-if="canSelectAndCertify || $root.tour" ng-click="selectAndCertify()">\n      <i class="icon ion-plus"></i>\n    </button>\n  </div>\n</ion-view>\n'),e.put("templates/wot/tabs/tab_lookup.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n\n    <button class="button button-icon button-clear" ng-click="showActionsPopover($event)">\n      <i class="icon ion-android-funnel"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content>\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}" on-refresh="doSearch()">\n    </ion-refresher>\n\n    <cs-extension-point name="buttons"></cs-extension-point>\n\n    <ng-include src="\'templates/wot/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),
e.put("templates/wot/tabs/tab_received_certifications.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-loop" ng-click="doUpdate()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content ng-init="motions.givenCertifications=false; motions.avatar=false;" class="has-header">\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <ng-include src="\'templates/wot/items_received_certifications.html\'"></ng-include>\n  </ion-content>\n\n  <!-- fab button -->\n  <div class="visible-xs visible-sm">\n    <button id="fab-certify" class="button button-fab button-fab-bottom-right button-energized-900 spin" ng-click="certify()" ng-if="(formData.hasSelf && canCertify && !alreadyCertified) || $root.tour">\n      <i class="icon ion-ribbon-b"></i>\n    </button>\n  </div>\n</ion-view>\n')}]),angular.module("cesium.translations",[]).config(["$translateProvider",function(e){e.translations("en-GB",{COMMON:{APP_NAME:"Cesium",APP_VERSION:"v{{version}}",APP_BUILD:"build {{build}}",PUBKEY:"Public key",MEMBER:"Member",BLOCK:"Block",BTN_OK:"OK",BTN_YES:"Yes",BTN_NO:"No",BTN_SEND:"Send",BTN_SEND_MONEY:"Transfer money",BTN_SEND_MONEY_SHORT:"Transfer",BTN_SAVE:"Save",BTN_YES_SAVE:"Yes, Save",BTN_YES_CONTINUE:"Yes, Continue",BTN_SHOW:"Show",BTN_SHOW_PUBKEY:"Show key",BTN_RELATIVE_UNIT:"Use relative unit",BTN_BACK:"Back",BTN_NEXT:"Next",BTN_CANCEL:"Cancel",BTN_CLOSE:"Close",BTN_LATER:"Later",BTN_LOGIN:"Sign In",BTN_LOGOUT:"Logout",BTN_ADD_ACCOUNT:"New Account",BTN_SHARE:"Share",BTN_EDIT:"Edit",BTN_DELETE:"Delete",BTN_ADD:"Add",BTN_SEARCH:"Search",BTN_REFRESH:"Refresh",BTN_RETRY:"Retry",BTN_START:"Start",BTN_CONTINUE:"Continue",BTN_CREATE:"Create",BTN_UNDERSTOOD:"I understood",BTN_OPTIONS:"Options",BTN_HELP_TOUR:"Features tour",BTN_HELP_TOUR_SCREEN:"Discover this screen",BTN_DOWNLOAD:"Download",BTN_DOWNLOAD_ACCOUNT_STATEMENT:"Download account statement",BTN_MODIFY:"Modify",CHOOSE_FILE:"Drag your file<br/>or click to select",DAYS:"days",NO_ACCOUNT_QUESTION:"Not a member yet? Register now!",SEARCH_NO_RESULT:"No result found",LOADING:"Loading...",SEARCHING:"Searching...",FROM:"From",TO:"To",COPY:"Copy",LANGUAGE:"Language",UNIVERSAL_DIVIDEND:"Universal dividend",UD:"UD",DATE_PATTERN:"DD/MM/YYYY HH:mm",DATE_FILE_PATTERN:"YYYY-MM-DD",DATE_SHORT_PATTERN:"DD/MM/YY",DATE_MONTH_YEAR_PATTERN:"MM/YYYY",EMPTY_PARENTHESIS:"(empty)",UID:"Pseudonym",ENABLE:"Enabled",DISABLE:"Disabled",RESULTS_LIST:"Results:",RESULTS_COUNT:"{{count}} results",EXECUTION_TIME:"executed in {{duration|formatDurationMs}}",SHOW_VALUES:"Display values openly?",POPOVER_ACTIONS_TITLE:"Options",POPOVER_FILTER_TITLE:"Filters",SHOW_MORE:"Show more",SHOW_MORE_COUNT:"(current limit at {{limit}})",POPOVER_SHARE:{TITLE:"Share",SHARE_ON_TWITTER:"Share on Twitter",SHARE_ON_FACEBOOK:"Share on Facebook",SHARE_ON_DIASPORA:"Share on Diaspora*",SHARE_ON_GOOGLEPLUS:"Share on Google+"}},SYSTEM:{PICTURE_CHOOSE_TYPE:"Choose source:",BTN_PICTURE_GALLERY:"Gallery",BTN_PICTURE_CAMERA:"<b>Camera</b>"},MENU:{HOME:"Home",WOT:"Registry",CURRENCY:"Currency",ACCOUNT:"My Account",TRANSFER:"Transfer",SCAN:"Scan",SETTINGS:"Settings",NETWORK:"Network",TRANSACTIONS:"My transactions"},ABOUT:{TITLE:"About",LICENSE:"<b>Free/libre software</b> (License GNU GPLv3).",LATEST_RELEASE:"There is a <b>newer version</ b> of {{'COMMON.APP_NAME' | translate}} (<b>v{{version}}</b>)",PLEASE_UPDATE:"Please update {{'COMMON.APP_NAME' | translate}} (latest version: <b>v{{version}}</b>)",CODE:"Source code:",DEVELOPERS:"Developers:",FORUM:"Forum:",PLEASE_REPORT_ISSUE:"Please report any issue to us!",REPORT_ISSUE:"Report an issue"},HOME:{TITLE:"Cesium",WELCOME:"Welcome to the Cesium Application!",MESSAGE:"Follow your {{currency|abbreviate}} wallets easily",BTN_CURRENCY:"Explore currency",BTN_ABOUT:"about",BTN_HELP:"Help",REPORT_ISSUE:"Report an issue",NOT_YOUR_ACCOUNT_QUESTION:'You do not own the account <b><i class="ion-key"></i> {{pubkey|formatPubkey}}</b>?',BTN_CHANGE_ACCOUNT:"Disconnect this account",CONNECTION_ERROR:'Peer <b>{{server}}</b> unreachable or invalid address.<br/><br/>Check your Internet connection, or change node <a class="positive" ng-click="doQuickFix(\'settings\')">in the settings</a>.'},SETTINGS:{TITLE:"Settings",NETWORK_SETTINGS:"Network",PEER:"Duniter peer address",PEER_CHANGED_TEMPORARY:"Address used temporarily",USE_LOCAL_STORAGE:"Enable local storage",USE_LOCAL_STORAGE_HELP:"Allows you to save your settings",ENABLE_HELPTIP:"Enable contextual help tips",ENABLE_UI_EFFECTS:"Enable visual effects",HISTORY_SETTINGS:"Account operations",DISPLAY_UD_HISTORY:"Display produced dividends?",AUTHENTICATION_SETTINGS:"Authentication",KEEP_AUTH:"Expiration of authentication",KEEP_AUTH_HELP:"Define when authentication is cleared from memory",KEEP_AUTH_OPTION:{NEVER:"After each operation",SECONDS:"After {{value}}s of inactivity",MINUTE:"After {{value}}min of inactivity",MINUTES:"After {{value}}min of inactivity",HOUR:"After {{value}}h of inactivity",ALWAYS:"At the end of the session"},REMEMBER_ME:"Remember me ?",REMEMBER_ME_HELP:"Allows to remain identified from one session to another, keeping the public key locally.",PLUGINS_SETTINGS:"Extensions",BTN_RESET:"Restore default values",EXPERT_MODE:"Enable expert mode",EXPERT_MODE_HELP:"Allow to see more details",POPUP_PEER:{TITLE:"Duniter peer",HOST:"Address",HOST_HELP:"Address: server:port",USE_SSL:"Secured?",USE_SSL_HELP:"(SSL Encryption)",BTN_SHOW_LIST:"Peer's list"}},BLOCKCHAIN:{HASH:"Hash: {{hash}}",VIEW:{HEADER_TITLE:"Block #{{number}}-{{hash|formatHash}}",TITLE_CURRENT:"Current block",TITLE:"Block #{{number|formatInteger}}",COMPUTED_BY:"Computed by",SHOW_RAW:"Show raw data",TECHNICAL_DIVIDER:"Technical informations",VERSION:"Format version",HASH:"Computed hash",UNIVERSAL_DIVIDEND_HELP:"Money co-produced by each of the {{membersCount}} members",EMPTY:"Aucune donne dans ce bloc",POW_MIN:"Minimal difficulty",POW_MIN_HELP:"Difficulty imposed in calculating hash",DATA_DIVIDER:"Data",IDENTITIES_COUNT:"New identities",JOINERS_COUNT:"Joiners",ACTIVES_COUNT:"Renewals",ACTIVES_COUNT_HELP:"Members having renewed their membership",LEAVERS_COUNT:"Leavers",LEAVERS_COUNT_HELP:"Members that now refused certification",EXCLUDED_COUNT:"Excluded members",EXCLUDED_COUNT_HELP:"Old members, excluded because missing membreship renewal or certifications",REVOKED_COUNT:"Revoked identities",REVOKED_COUNT_HELP:"These accounts may no longer be member",TX_COUNT:"Transactions",CERT_COUNT:"Certifications",TX_TO_HIMSELF:"Change",TX_OUTPUT_UNLOCK_CONDITIONS:"Unlock conditions",TX_OUTPUT_OPERATOR:{AND:"and",OR:"or"},TX_OUTPUT_FUNCTION:{SIG:"<b>Sign</b> of the public key",XHX:"<b>Password</b>, including SHA256 =",CSV:"Blocked during",CLTV:"Bloqu until"}},LOOKUP:{TITLE:"Blocks",NO_BLOCK:"No bloc",LAST_BLOCKS:"Last blocks:",BTN_COMPACT:"Compact"}},CURRENCY:{VIEW:{TITLE:"Currency",TAB_CURRENCY:"Currency",TAB_WOT:"Web of trust",TAB_NETWORK:"Network",TAB_BLOCKS:"Blocks",CURRENCY_SHORT_DESCRIPTION:"{{currency|capitalize}} is a <b>libre money</b>, started {{firstBlockTime | formatFromNow}}. It currently counts <b>{{N}} members </b>, who produce and collect a <a ng-click=\"showHelpModal('ud')\">Universal Dividend</a> (DU), each {{dt | formatPeriod}}.",NETWORK_RULES_DIVIDER:"Network rules",CURRENCY_NAME:"Currency name",MEMBERS:"Members count",MEMBERS_VARIATION:"Variation since {{duration|formatDuration}} (since last UD)",MONEY_DIVIDER:"Money",MASS:"Monetary mass",SHARE:"Money share",UD:"Universal Dividend",C_ACTUAL:"Current growth",MEDIAN_TIME:"Current blockchain time",POW_MIN:"Common difficulty",MONEY_RULES_DIVIDER:"Rules of currency",C_RULE:"Theoretical growth target",UD_RULE:"Universal dividend (formula)",DT_REEVAL:"Period between two re-evaluation of the UD",REEVAL_SYMBOL:"reeval",DT_REEVAL_VALUE:"Every <b>{{dtReeval|formatDuration}}</b> ({{dtReeval/86400}} {{'COMMON.DAYS'|translate}})",UD_REEVAL_TIME0:"Date of first reevaluation of the UD",SIG_QTY_RULE:"Required number of certifications to become a member",SIG_STOCK:"Maximum number of certifications sent by a member",SIG_PERIOD:"Minimum delay between 2 certifications sent by one and the same issuer.",SIG_WINDOW:"Maximum delay before a certification will be treated",SIG_VALIDITY:"Lifetime of a certification that has been treated",MS_WINDOW:"Maximum delay before a pending membership will be treated",MS_VALIDITY:"Lifetime of a membership that has been treated",STEP_MAX:"Maximum distance between a newcomer and each referring members.",WOT_RULES_DIVIDER:"Rules for web of trust",SENTRIES:"Required number of certifications (given <b>and</b> received) to become a referring member",SENTRIES_FORMULA:"Required number of certifications to become a referring member (formula)",XPERCENT:"Minimum percent of referring member to reach to match the distance rule",AVG_GEN_TIME:"The average time between 2 blocks",CURRENT:"current",MATH_CEILING:"CEILING",DISPLAY_ALL_RULES:"Display all rules?",BTN_SHOW_LICENSE:"Show license",WOT_DIVIDER:"Web of trust"},LICENSE:{TITLE:"Currency license",BTN_DOWNLOAD:"Download file",NO_LICENSE_FILE:"License file not found."}},NETWORK:{VIEW:{MEDIAN_TIME:"Blockchain time",LOADING_PEERS:"Loading peers...",NODE_ADDRESS:"Address:",SOFTWARE:"Software:",WARN_PRE_RELEASE:"Pre-release (latest stable: <b>{{version}}</b>)",WARN_NEW_RELEASE:"Version <b>{{version}}</b> available",WS2PID:"Identifier:",PRIVATE_ACCESS:"Private access",POW_PREFIX:"Proof of work prefix:",ENDPOINTS:{BMAS:"Secure endpoint (SSL)",BMATOR:"TOR endpoint",WS2P:"WS2P endpoint",ES_USER_API:"Cesium+ data node"}},INFO:{ONLY_SSL_PEERS:"Non-SSL nodes have a degraded display because Cesium works in HTTPS mode."}},PEER:{PEERS:"Peers",SIGNED_ON_BLOCK:"Signed on block",MIRROR:"mirror",MIRRORS:"Mirror peers",PEER_LIST:"Peer's list",MEMBERS:"Member peers",ALL_PEERS:"All peers",DIFFICULTY:"Difficulty",API:"API",CURRENT_BLOCK:"Block #",POPOVER_FILTER_TITLE:"Filter",OFFLINE:"Offline peers",BTN_SHOW_PEER:"Show peer",VIEW:{TITLE:"Peer",OWNER:"Owned by ",SHOW_RAW_PEERING:"See peering document",SHOW_RAW_CURRENT_BLOCK:"See current block (raw format)",LAST_BLOCKS:"Last blocks",KNOWN_PEERS:"Known peers :",GENERAL_DIVIDER:"General information",ERROR:{LOADING_TOR_NODE_ERROR:"Could not get peer data, using the TOR network.",LOADING_NODE_ERROR:"Could not get peer data"}}},WOT:{SEARCH_HELP:"Search (member or public key)",SEARCH_INIT_PHASE_WARNING:"During the pre-registration phase, the search for pending registrations <b>may be long</b>. Please wait ...",REGISTERED_SINCE:"Registered on",REGISTERED_SINCE_BLOCK:"Registered since block #",NO_CERTIFICATION:"No validated certification",NO_GIVEN_CERTIFICATION:"No given certification",NOT_MEMBER_PARENTHESIS:"(non-member)",IDENTITY_REVOKED_PARENTHESIS:"(identity revoked)",MEMBER_PENDING_REVOCATION_PARENTHESIS:"(being revoked)",EXPIRE_IN:"Expires",NOT_WRITTEN_EXPIRE_IN:"Deadline<br/>treatment",EXPIRED:"Expired",PSEUDO:"Pseudonym",SIGNED_ON_BLOCK:"Emitted on block #{{block}}",WRITTEN_ON_BLOCK:"Written on block #{{block}}",GENERAL_DIVIDER:"General information",NOT_MEMBER_ACCOUNT:"Non-member account",NOT_MEMBER_ACCOUNT_HELP:"This is a simple wallet, with no pending membership application.",TECHNICAL_DIVIDER:"Technical data",BTN_CERTIFY:"Certify",BTN_YES_CERTIFY:"Yes, certify",BTN_SELECT_AND_CERTIFY:"New certification",ACCOUNT_OPERATIONS:"Account operations",VIEW:{POPOVER_SHARE_TITLE:"Identity {{title}}"},LOOKUP:{TITLE:"Registry",NEWCOMERS:"New members:",NEWCOMERS_COUNT:"{{count}} members",PENDING:"Pending registrations:",PENDING_COUNT:"{{count}} pending registrations",REGISTERED:"Registered {{sigDate | formatFromNow}}",MEMBER_FROM:"Member since {{memberDate|formatFromNowShort}}",BTN_NEWCOMERS:"Latest members",BTN_PENDING:"Pending registrations",SHOW_MORE:"Show more",SHOW_MORE_COUNT:"(current limit to {{limit}})",NO_PENDING:"No pending registrations.",NO_NEWCOMERS:"No members."},CONTACTS:{TITLE:"Contacts"},MODAL:{TITLE:"Search"},CERTIFICATIONS:{TITLE:"{{uid}} - Certifications",SUMMARY:"Received certifications",LIST:"Details of received certifications",PENDING_LIST:"Pending certifications",RECEIVED:"Received certifications",RECEIVED_BY:"Certifications received by {{uid}}",ERROR:"Received certifications in error",SENTRY_MEMBER:"Referring member"},OPERATIONS:{TITLE:"{{uid}} - Operations"},GIVEN_CERTIFICATIONS:{TITLE:"{{uid}} - Certifications sent",SUMMARY:"Sent certifications",LIST:"Details of sent certifications",PENDING_LIST:"Pending certifications",SENT:"Sent certifications",SENT_BY:"Certifications sent by {{uid}}",ERROR:"Sent certifications with error"}},LOGIN:{TITLE:'<i class="icon ion-log-in"></i> Login',SCRYPT_FORM_HELP:"Please enter your credentials. <br> Remember to check the public key for your account.",PUBKEY_FORM_HELP:"Please enter a public account key:",FILE_FORM_HELP:"Choose the keychain file to use:",SALT:"Secret identifier",SALT_HELP:"Secret identifier",SHOW_SALT:"Display secret identifier?",PASSWORD:"Password",PASSWORD_HELP:"Password",PUBKEY_HELP:"Example:  AbsxSY4qoZRzyV2irfep1V9xw1EMNyKJw2TkuVD4N1mv ",NO_ACCOUNT_QUESTION:"Don't have an account yet?",CREATE_ACCOUNT:"Create an account",FORGOTTEN_ID:"Forgot password?",ASSOCIATED_PUBKEY:"Public key :",BTN_METHODS:"Other methods",BTN_METHODS_DOTS:"Change method...",METHOD_POPOVER_TITLE:"Methods",MEMORIZE_AUTH_FILE:"Memorize this keychain during the navigation session",SCRYPT_PARAMETERS:"Paramtres (Scrypt) :",AUTO_LOGOUT:{TITLE:"Information",MESSAGE:'<i class="ion-android-time"></i> You were <b>logout</ b> automatically, due to prolonged inactivity.',BTN_RELOGIN:"Sign In",IDLE_WARNING:"You will be logout... {{countdown}}"},METHOD:{SCRYPT_DEFAULT:"Standard salt (default)",SCRYPT_ADVANCED:"Advanced salt",FILE:"Keychain file",PUBKEY:"Public key only"},SCRYPT:{SIMPLE:"Light salt",DEFAULT:"Standard salt",SECURE:"Secure salt",HARDEST:"Hardest salt",EXTREME:"Extreme salt",USER:"Personal value",N:"N (Loop):",r:"r (RAM):",p:"p (CPU):"},FILE:{DATE:"Date:",TYPE:"Type:",SIZE:"Size:",VALIDATING:"Validating...",HELP:"Expected file format: <b>.dunikey</b> (type PubSec). Other formats are under development (EWIF, WIF)."}},AUTH:{TITLE:'<i class="icon ion-locked"></i> Authentication',METHOD_LABEL:"Authentication method",BTN_AUTH:"Authenticate",SCRYPT_FORM_HELP:"Please authenticate yourself:"},ACCOUNT:{TITLE:"My Account",BALANCE:"Balance",LAST_TX:"Latest transactions",BALANCE_ACCOUNT:"Account balance",NO_TX:"No transaction",SHOW_MORE_TX:"Show more",SHOW_ALL_TX:"Show all",TX_FROM_DATE:"(current limit to {{fromTime|formatFromNowShort}})",PENDING_TX:"Pending transactions",ERROR_TX:"Transaction not executed",ERROR_TX_SENT:"Sent transactions",PENDING_TX_RECEIVED:"Transactions awaiting receipt",EVENTS:"Events",WAITING_MEMBERSHIP:"Membership application sent. Waiting validation.",WAITING_CERTIFICATIONS:"You need {{needCertificationCount}} certification(s) to become a member",WILL_MISSING_CERTIFICATIONS:"You will <b>lack certifications</b> soon (at least {{willNeedCertificationCount}} more are needed)",WILL_NEED_RENEW_MEMBERSHIP:"Your membership <b>will expire {{membershipExpiresIn|formatDurationTo}}</b>. Remember to <a ng-click=\"doQuickFix('renew')\">renew your membership</a> before then.",NEED_RENEW_MEMBERSHIP:"You are no longer a member because your membership <b>has expired</b>. Remember to <a ng-click=\"doQuickFix('renew')\">renew your membership</a>.",NO_WAITING_MEMBERSHIP:"No membership application pending. If you'd like to <b>become a member</ b>, please <a ng-click=\"doQuickFix('membership')\">send the membership application</a>.",CERTIFICATION_COUNT:"Received certifications",CERTIFICATION_COUNT_SHORT:"Certifications",SIG_STOCK:"Stock of certifications to give",BTN_RECEIVE_MONEY:"Receive",BTN_SELECT_ALTERNATIVES_IDENTITIES:"Switch to another identity...",BTN_MEMBERSHIP_RENEW:"Renew membership",BTN_MEMBERSHIP_RENEW_DOTS:"Renew membership...",BTN_MEMBERSHIP_OUT_DOTS:"Revoke membership...",BTN_SECURITY_DOTS:"Sign-in and security...",BTN_SHOW_DETAILS:"Display technical data",LOCKED_OUTPUTS_POPOVER:{TITLE:"Locked amount",DESCRIPTION:"Here are the conditions for unlocking this amount:",DESCRIPTION_MANY:"This transaction consists of several parts, of which the unlock conditions are:",LOCKED_AMOUNT:"Conditions for the amount:"},NEW:{TITLE:"Registration",INTRO_WARNING_TIME:"Creating an account on {{name|capitalize}} is very simple. Please take sufficient time to do this correctly (not to forget the usernames, passwords, etc.).",INTRO_WARNING_SECURITY:"Check that the hardware you are currently using (computer, tablet, phone) <b>is secure and trustworthy </b>.",INTRO_WARNING_SECURITY_HELP:"Up-to-date anti-virus, firewall enabled, session protected by password or pin code...",INTRO_HELP:"Click <b> {{'COMMON.BTN_START'|translate}}</b> to begin creating an account. You will be guided step by step.",REGISTRATION_NODE:"Your registration will be registered via the Duniter peer <b>{{server}}</b> node, which will then be distributed to the rest of the currency network.",REGISTRATION_NODE_HELP:"If you do not trust this peer, please change <a ng-click=\"doQuickFix('settings')\">in the settings</a> of Cesium.",SELECT_ACCOUNT_TYPE:"Choose the type of account to create:",MEMBER_ACCOUNT:"Member account",MEMBER_ACCOUNT_TITLE:"Create a member account",MEMBER_ACCOUNT_HELP:"If you are not yet registered as an individual (one account possible per individual).",WALLET_ACCOUNT:"Simple wallet",WALLET_ACCOUNT_TITLE:"Create a wallet",WALLET_ACCOUNT_HELP:"If you represent a company, association, etc. or simply need an additional wallet. No universal dividend will be created by this account.",SALT_WARNING:"Choose a secret identifier.<br/>You need it for each connection to this account.<br/><br/><b>Make sure to remember this identifier</b>.<br/>If lost, there are no means to retrieve it!",PASSWORD_WARNING:"Choose a password.<br/>You need it for each connection to this account.<br/><br/><b>Make sure to remember this password</b>.<br/>If lost, there are no means to retrieve it!",PSEUDO_WARNING:"Choose a pseudonym.<br/>It may be used by other people to find you more easily.<br/><br/>.Use of <b>commas, spaces and accents</b> is not allowed.<br/><div class='hidden-xs'><br/>Example: <span class='gray'>JohnDalton, JackieChan, etc.</span>",PSEUDO:"Pseudonym",PSEUDO_HELP:"joe123",SALT_CONFIRM:"Confirm",SALT_CONFIRM_HELP:"Confirm the secret identifier",PASSWORD_CONFIRM:"Confirm",PASSWORD_CONFIRM_HELP:"Confirm the password",SLIDE_6_TITLE:"Confirmation:",COMPUTING_PUBKEY:"Computing...",LAST_SLIDE_CONGRATULATION:"You completed all required fields.<br/><b>You can send the account creation request</b>.<br/><br/>For information, the public key below identifies your future account.<br/>It can be communicated to third parties to receive their payment.<br/>Once your account has been approved, you can find this key under <b>{{'ACCOUNT.TITLE'|translate}}</b>.",CONFIRMATION_MEMBER_ACCOUNT:'<b class="assertive">Warning:</b> your secret identifier, password and pseudonym can not be changed.<br/><b>Make sure you always remember it!</b><br/><b>Are you sure</b> you want to send this account creation request?',CONFIRMATION_WALLET_ACCOUNT:'<b class="assertive">Warning:</b> your password and pseudonym can not be changed.<br/><b>Make sure you always remember it!</b><br/><b>Are you sure</b> you want to continue?',CHECKING_PSEUDO:"Checking...",PSEUDO_AVAILABLE:"This pseudonym is available",PSEUDO_NOT_AVAILABLE:"This pseudonym is not available",INFO_LICENSE:"To be able to adhere to the currency, we ask you to kindly read and accept this license.",BTN_ACCEPT:"I accept",BTN_ACCEPT_LICENSE:"I accept the license"},POPUP_REGISTER:{TITLE:"Enter a pseudonym",HELP:"A pseudonym is needed to let other members find you."},SELECT_IDENTITY_MODAL:{TITLE:"Identity selection",HELP:'Several <b>different identities</b> have been sent, for the public key <span class="gray"> <i class="ion-key"></i> {{pubkey | formatPubkey}}</span>.<br/>Please select the identity to use:'},SECURITY:{ADD_QUESTION:"Add custom question",BTN_CLEAN:"Clean",BTN_RESET:"Reset",DOWNLOAD_REVOKE:"Save a revocation file",DOWNLOAD_REVOKE_HELP:"Having a revocation file is important, for example in case of loss of identifiers. It allows you to <b>get this account out of the Web Of Trust</b>, thus becoming a simple wallet.",MEMBERSHIP_IN:"Register as member...",MEMBERSHIP_IN_HELP:"Allows you to <b>transform </b> a simple wallet account <b>into a member account</b>, by sending a membership request. Useful only if you do not already have another member account.",SEND_IDENTITY:"Publish identity...",SEND_IDENTITY_HELP:"Allows you to associate a pseudonym to this account, but <b>without applying for membership</b> to become a member. This is not very useful because the validity of this pseudonym association is limited in time.",HELP_LEVEL:"Choose <strong> at least {{nb}} questions </strong> :",LEVEL:"Security level",LOW_LEVEL:'Low <span class="hidden-xs">(2 questions minimum)</span>',MEDIUM_LEVEL:'Medium <span class="hidden-xs">(4 questions minimum)</span>',QUESTION_1:"What was your best friend's name when you were a teen ?",QUESTION_2:"What was the name of your first pet ?",QUESTION_3:"What is the first meal you have learned to cook ?",QUESTION_4:"What is the first movie you saw in the cinema?",QUESTION_5:"Where did you go the first time you flew ?",QUESTION_6:"What was your favorite elementary school teacher's name  ?",QUESTION_7:"What would you consider the ideal job ?",QUESTION_8:"Which children's book do you prefer?",QUESTION_9:"What was the model of your first vehicle?",QUESTION_10:"What was your nickname when you were a child ?",QUESTION_11:"What was your favorite movie character or actor when you were a student ?",QUESTION_12:"What was your favorite singer or band when you were a student ?",QUESTION_13:"In which city did your parents meet ?",QUESTION_14:"What was the name of your first boss ?",QUESTION_15:"What is the name of the street where you grew up ?",QUESTION_16:"What is the name of the first beach where you go swim ?",QUESTION_17:"QWhat is the first album you bought ?",QUESTION_18:"What is the name of your favorite sport team ?",QUESTION_19:"What was your grand-father's job ?",RECOVER_ID:"Recover my password...",RECOVER_ID_HELP:"If you have a <b>backup file of your identifiers</b>, you can find them by answering your personal questions correctly.",REVOCATION_WITH_FILE:"Rekoke my member account...",REVOCATION_WITH_FILE_DESCRIPTION:"If you have <b>permanently lost your member account credentials (or if account security is compromised), you can use <b>the revocation file</b> of the account <b>to quit the Web Of Trust</b>.",REVOCATION_WITH_FILE_HELP:"To <b>permanently revoke</ b> a member account, please drag the revocation file in the box below, or click in the box to search for a file.",REVOCATION_WALLET:"Revoke this account immediately",REVOCATION_WALLET_HELP:"Requesting revocation of your identity causes <b>will revoke your membership</ b> (definitely for the associated pseudonym and public key). The account will no longer be able to produce a Universal Dividend.<br/>However, you can still use it as a simple wallet.",REVOCATION_FILENAME:"revocation-{{uid}}-{{pubkey|formatPubkey}}-{{currency}}.txt",SAVE_ID:"Save my credentials...",SAVE_ID_HELP:"Creating a backup file, to <b>retrieve your password</b> (and the secret identifier) <b> in case of forgetting</b>. The file is <b>secured</ b> (encrypted) using personal questions.",STRONG_LEVEL:'Strong <span class="hidden-xs ">(6 questions minimum)</span>',TITLE:"Account and security"},FILE_NAME:"{{currency}} - Account statement {{pubkey|formatPubkey}} to {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Date",AMOUNT:"Amount",COMMENT:"Comment"}},TRANSFER:{TITLE:"Transfer",SUB_TITLE:"Transfer money",FROM:"From",TO:"To",AMOUNT:"Amount",AMOUNT_HELP:"Amount",COMMENT:"Comment",COMMENT_HELP:"Comment (optional)",BTN_SEND:"Send",BTN_ADD_COMMENT:"Add a comment",WARN_COMMENT_IS_PUBLIC:"Please note that <b>comments are public</b> (not encrypted).",MODAL:{TITLE:"Transfer"}},ERROR:{POPUP_TITLE:"Error",UNKNOWN_ERROR:"Unknown error",CRYPTO_UNKNOWN_ERROR:"Your browser is not compatible with cryptographic features.",EQUALS_TO_PSEUDO:"Must be different from pseudonym",EQUALS_TO_SALT:"Must be different from secret identifier",FIELD_REQUIRED:"This field is required.",FIELD_TOO_SHORT:"This field value is too short.",FIELD_TOO_SHORT_WITH_LENGTH:"Value is too short (min {{minLength]] characters).",FIELD_TOO_LONG:"Value is exceeding max length.",FIELD_TOO_LONG_WITH_LENGTH:"Value is too long (max {{maxLength}} characters).",FIELD_MIN:"Minimum value: {{min}}",FIELD_MAX:"Maximal value: {{max}}",FIELD_ACCENT:"Commas and accent characters not allowed",FIELD_NOT_NUMBER:"Value is not a number",FIELD_NOT_INT:"Value is not an integer",FIELD_NOT_EMAIL:"Email adress not valid",PASSWORD_NOT_CONFIRMED:"Must match previous password.",SALT_NOT_CONFIRMED:"Must match previous identifier.",SEND_IDENTITY_FAILED:"Error while trying to register.",SEND_CERTIFICATION_FAILED:"Could not certify identity.",NEED_MEMBER_ACCOUNT_TO_CERTIFY:"You could not send certification, because your account is <b>not a member account</b>.",NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF:"You could not send certification now, because your are <b>not a member</b> yet.<br/><br/>You still need certification to become a member.",NOT_MEMBER_FOR_CERTIFICATION:"Your account is not a member account yet.",IDENTITY_TO_CERTIFY_HAS_NO_SELF:"This account could not be certified. No registration found, or need to renew.",LOGIN_FAILED:"Error while sign in.",LOAD_IDENTITY_FAILED:"Could not load identity.",LOAD_REQUIREMENTS_FAILED:"Could not load identity requirements.",SEND_MEMBERSHIP_IN_FAILED:"Error while sending registration as member.",SEND_MEMBERSHIP_OUT_FAILED:"Error while sending membership revocation.",REFRESH_WALLET_DATA:"Could not refresh wallet.",GET_CURRENCY_PARAMETER:"Could not get currency parameters.",GET_CURRENCY_FAILED:"Could not load currency. Please retry later.",SEND_TX_FAILED:"Could not send transaction.",ALL_SOURCES_USED:"Please wait the next block computation (All transaction sources has been used).",NOT_ENOUGH_SOURCES:"Not enough changes to send this amount in one time.<br/>Maximum amount: {{amount}} {{unit}}<sub>{{subUnit}}</sub>.",ACCOUNT_CREATION_FAILED:"Error while creating your member account.",RESTORE_WALLET_DATA_ERROR:"Error while reloading settings from local storage",LOAD_WALLET_DATA_ERROR:"Error while loading wallet data.",COPY_CLIPBOARD_FAILED:"Could not copy to clipboard",TAKE_PICTURE_FAILED:"Could not get picture.",SCAN_FAILED:"Could not scan QR code.",SCAN_UNKNOWN_FORMAT:"Code not recognized.",WOT_LOOKUP_FAILED:"Search failed.",LOAD_PEER_DATA_FAILED:"Duniter peer not accessible. Please retry later.",NEED_LOGIN_FIRST:"Please sign in first.",AMOUNT_REQUIRED:"Amount is required.",AMOUNT_NEGATIVE:"Negative amount not allowed.",NOT_ENOUGH_CREDIT:"Not enough credit.",INVALID_NODE_SUMMARY:"Unreachable peer or invalid address",INVALID_USER_ID:"Field 'pseudonym' must not contains spaces or special characters.",INVALID_COMMENT:"Field 'reference' has a bad format.",INVALID_PUBKEY:"Public key has a bad format.",IDENTITY_REVOKED:"This identity <b>has been revoked {{revocationTime|formatFromNow}}</b> ({{revocationTime|formatDate}}). It can no longer become a member.",IDENTITY_PENDING_REVOCATION:"The <b>revocation of this identity</b> has been requested and is awaiting processing. Certification is therefore disabled.",IDENTITY_INVALID_BLOCK_HASH:"This membership application is no longer valid (because it references a block that network peers are cancelled): the person must renew its application for membership <b>before</b> being certified.",IDENTITY_EXPIRED:"This identity has expired: this person must re-apply <b>before</b> being certified.",IDENTITY_SANDBOX_FULL:"Could not register, because peer's sandbox is full.<br/><br/>Please retry later or choose another Duniter peer (in <b>Settings</b>).",IDENTITY_NOT_FOUND:"Identity not found",IDENTITY_TX_FAILED:"Error while getting identity's transactions",WOT_PENDING_INVALID_BLOCK_HASH:"Membership not valid.",WALLET_INVALID_BLOCK_HASH:"Your membership application is no longer valid (because it references a block that network peers are cancelled).<br/>You must <a ng-click=\"doQuickFix('renew')\">renew your application for membership</a> to fix this issue.",WALLET_IDENTITY_EXPIRED:"The publication of your identity <b>has expired</b>.<br/>You must <a ng-click=\"doQuickFix('fixIdentity')\">re-issue your identity</a> to resolve this issue.",WALLET_REVOKED:"Your identity has been <b>revoked</b>: neither your pseudonym nor your public key will be used in the future for a member account.",WALLET_HAS_NO_SELF:"Your identity must first have been published, and not expired.",AUTH_REQUIRED:"Authentication required.",AUTH_INVALID_PUBKEY:"The public key does not match the connected account.",AUTH_INVALID_SCRYPT:"Invalid username or password.",AUTH_INVALID_FILE:"Invalid keychain file.",AUTH_FILE_ERROR:"Failed to open keychain file",IDENTITY_ALREADY_CERTIFY:"You have <b>already certified</b> that identity.<br/><br/>Your certificate is still valid (expires {{expiresIn|formatDuration}}).",IDENTITY_ALREADY_CERTIFY_PENDING:"You have <b>already certified</b> that identity.<br/><br/>Your certification is still pending (Deadline for treatment {{expiresIn|formatDuration}}).",UNABLE_TO_CERTIFY_TITLE:"Unable to certify",LOAD_NEWCOMERS_FAILED:"Unable to load new members.",LOAD_PENDING_FAILED:"Unable to load pending registrations.",ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION:"You must <b>be a member</b> in order to perform this action.",ONLY_SELF_CAN_EXECUTE_THIS_ACTION:"You must have <b>published your identity</b> in order to perform this action.",GET_BLOCK_FAILED:"Error while getting block",INVALID_BLOCK_HASH:"Block not found (incorrect hash)",DOWNLOAD_REVOCATION_FAILED:"Error while downloading revocation file.",REVOCATION_FAILED:"Error while trying to revoke the identity.",SALT_OR_PASSWORD_NOT_CONFIRMED:"Wrong secret identifier or password ",RECOVER_ID_FAILED:"Could not recover password",LOAD_FILE_FAILED:"Unable to load file",NOT_VALID_REVOCATION_FILE:"Invalid revocation file (wrong file format)",NOT_VALID_SAVE_ID_FILE:"Invalid credentials backup file (wrong file format)",NOT_VALID_KEY_FILE:"Invalid keychain file (unrecognized format)",EXISTING_ACCOUNT:"Your identifiers correspond to an already existing account, whose <a ng-click=\"showHelpModal('pubkey')\">public key</a> is:",EXISTING_ACCOUNT_REQUEST:"Please modify your credentials so that they correspond to an unused account.",GET_LICENSE_FILE_FAILED:"Unable to get license file",CHECK_NETWORK_CONNECTION:"No peer appears to be accessible.<br/><br/>Please <b>check your Internet connection</b>.",ISSUE_524_TX_FAILED:"Failed to transfer.<br/><br/>A message has been sent to developers to help solve the problem.<b>Thank you for your help</b>."},INFO:{POPUP_TITLE:"Information",CERTIFICATION_DONE:"Identity successfully signed",NOT_ENOUGH_CREDIT:"Not enough credit",TRANSFER_SENT:"Transfer request successfully sent",COPY_TO_CLIPBOARD_DONE:"Copy succeeded",MEMBERSHIP_OUT_SENT:"Membership revocation sent",NOT_NEED_MEMBERSHIP:"Already a member.",IDENTITY_WILL_MISSING_CERTIFICATIONS:"This identity will soon lack certification (at least {{willNeedCertificationCount}}).",IDENTITY_NEED_MEMBERSHIP:"This identity did not send a membership request. She will have to if she wishes to become a member.",REVOCATION_SENT:"Revocation sent successfully",REVOCATION_SENT_WAITING_PROCESS:"Revocation <b>has been sent successfully</b>. It is awaiting processing.",FEATURES_NOT_IMPLEMENTED:"This features is not implemented yet.<br/><br/>Why not to contribute to get it faster? ;)",EMPTY_TX_HISTORY:"No operations to export"},CONFIRM:{POPUP_TITLE:"<b>Confirmation</b>",POPUP_WARNING_TITLE:"<b>Warning</b>",
POPUP_SECURITY_WARNING_TITLE:'<i class="icon ion-alert-circled"></i> <b>Security warning</b>',CERTIFY_RULES_TITLE_UID:"Certify {{uid}}",CERTIFY_RULES:'<b class="assertive">Don\'t certify an account</b> if you believe that: <ul><li>1.) the issuers identity might be faked.<li>2.) the issuer already has another certified account.<li>3.) the issuer purposely or carelessly violates rule 1 or 2 (he certifies faked or double accounts).</ul></small><br/>Are you sure you want to certify this identity?',TRANSFER:"<b>Transfer summary:</b><br/><br/><ul><li> - From: <b>{{from}}</b></li><li> - To: <b>{{to}}</b></li><li> - Amount: <b>{{amount}} {{unit}}</b></li><li> - Comment: <i>{{comment}}</i></li></ul><br/><b>Are-you sure you want to do this transfer?</b>",MEMBERSHIP_OUT:"This operation is <b>irreversible</b>.<br/></br/><b>Are you sure you want to terminate your membership?</b>",MEMBERSHIP_OUT_2:"This operation is <b>irreversible</b>!<br/><br/>Are you sure you want to <b>terminate your membership</b>?",LOGIN_UNUSED_WALLET_TITLE:"Typing error?",LOGIN_UNUSED_WALLET:"The account seems to be <b>inactive</b>.<br/><br/>It's probably a <b>typing error</b> when sign in. Please try again, checking that <b>public key is yours<b/>.",FIX_IDENTITY:"The pseudonym <b>{{uid}}</b> will be published again, replacing the old publication that has expired.<br/></br/><b>Are you sure</b> you want to continue?",FIX_MEMBERSHIP:"Your application for membership will be sent.<br/></br/><b>Are you sure?</b>",MEMBERSHIP:"Your membership request will be sent. <br/></br/><b>Are you sure?</b>",RENEW_MEMBERSHIP:"Your membership will be renewed.<br/></br/><b>Are you sure?</b>",REVOKE_IDENTITY:"You will <b>definitely revoke this identity</b>.<br/><br/>The public key and the associated pseudonym <b>will never be used again</b> (for a member account).<br/></br/><b>Are you sure</b> you want to revoke this identity?",REVOKE_IDENTITY_2:"This operation is <b>irreversible</b>!<br/><br/>Are you sure you want to <b>revoke this identity</b>?",NOT_NEED_RENEW_MEMBERSHIP:"Your membership does not need to be renewed (it will only expire in {{membershipExpiresIn|formatDuration}}).<br/></br/><b>Are you sure you</b> want to renew your membership?",SAVE_BEFORE_LEAVE:"Do you want to <b>save your changes</b> before leaving the page?",SAVE_BEFORE_LEAVE_TITLE:"Changes not saved",LOGOUT:"Are you sure you want to logout?",USE_FALLBACK_NODE:"Peer <b>{{old}}</b> unreachable or invalid address.<br/><br/>Do you want to temporarily use the <b>{{new}}</b> node?",ISSUE_524_SEND_LOG:"The transaction was rejected because of a known problem (issue #524) but not reproduced.<br/><br/>To help developers correct this error, do you accept <b>the transmission of your logs</b> per message?<br/><small>(No confidential data is sent)</small>"},DOWNLOAD:{POPUP_TITLE:"<b>Revocation file</b>",POPUP_REVOKE_MESSAGE:"To safeguard your account, please download the <b>account revocation document</b>. It will allow you to cancel your account (in case of account theft, ID, an incorrectly created account, etc.).<br/><br/><b>Please store it in a safe place.</b>"},HELP:{TITLE:"Online help",JOIN:{SECTION:"Join",SALT:'The secret identifier is very important. It is used to hash you password, which in turn is used to calculate your <span class="text-italic">public account key</span> (its number) and the private key to access it.<br/><b>Please remeber this identifier well</b>, because there is no way to recover it when lost.<br/>Furthermore, it cannot be changed without having to create a new account.<br/><br/>A good secret identifier must be sufficiently long (8 characters at the very least) and as original as possible.',PASSWORD:"The password is very important. Together with the secret identifier, it is use to calculate your account number (pblic key) and the private key to access it.<br/><b>Please remember it well</b>, because there is no way to recover it when lost.<br/>Furthermore, it cannot be changed without having to create a new account.<br/><br/>A good password is made (ideally) of at least 8 characters, with at least one capital and one number.",PSEUDO:'A pseudonym is used only when joining as <span class="text-italic">member</span>. It is always associated with a wallet (by its <span class="text-italic">public key</span>).<br/>It is published on the network so that other users may identify it, certify or send money to the account.<br/>A pseudonym must be unique among all members (current and past).'},LOGIN:{SECTION:"Log in",PUBKEY:"Account public key",PUBKEY_DEF:'The public key of the keychain is generated from the entered identifiers (any), but does not correspond to an account already used.<br/><b>Make sure your public key is the same as your account</b>. Otherwise, you will be logged into an account that is probably never used, as the risk of collision with an existing account is very small.<br/><a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography" target="_ system">Learn more about cryptography</a> by public key.',METHOD:"Connection methods",METHOD_DEF:"Several options are available to connect to a portfolios: <br/> - The connection <b>with salt (simple or advanced)</b> mixes your password with the secret identifier, to limit the attempts of piracy<br/> - The connection <b>using public key</b> prevents you from entering your credentials, which you will be asked only when an operation need it.<br/> - The connection <b>using keychain file</b> will read the public and private keys of the account from a file without the need to enter credentials. Several file formats are possible."},GLOSSARY:{SECTION:"Glossary",PUBKEY_DEF:"A public key always identifies a wallet. It may identify a member. In Cesium it is calculated using the secret identifier and the password.",MEMBER:"Member",MEMBER_DEF:'A member is a real and living human, wishing to participate freely to the monitary community. The member will receive universal dividend, according to the period and amount as defined in the <span class="text-italic">currency parameters</span>.',CURRENCY_RULES:"Currency rules",CURRENCY_RULES_DEF:'The currency rules are defined only once, and for all. They set the parameters under which the currency will perform: universal dividend calculation, the amount of certifications needed to become a member, the maximum amount of certifications a member can send, etc.<br/><br/>The parameters cannot be modified because of the use of a <span class="text-italic">Blockchain</span> which carries and executes these rules, and constantly verifies their correct application. <a href="#/app/currency">See current parameters</a>.',BLOCKCHAIN:"Blockchain",BLOCKCHAIN_DEF:'The Blockchain is a decentralised system which, in case of Duniter, serves to carry and execute the <span class="text-italic">currency rules</span>.<br/><a href="http://en.duniter.org/presentation/" target="_blank">Read more about Duniter</a> and the working of its blockchain.',UNIVERSAL_DIVIDEND_DEF:'The Universal Dividend (UD) is the quantity of money co-created by each member, according to the period and the calculation defined in the <span class="text-italic">currency rules</span>.<br/>Every term, the members receive an equal amount of new money on their account.<br/><br/>The UD undergoes a steady growth, to remain fair under its members (current and future), calculated by an average life expectancy, as demonstrated in the Relative Theory of Money (RTM).<br/><a href="http://trm.creationmonetaire.info" target="_system">Read more about RTM</a> and open money.'},TIP:{MENU_BTN_CURRENCY:"Menu <b>{{'MENU.CURRENCY'|translate}}</b> allows discovery of <b>currency parameters</b> and its state.",CURRENCY_WOT:"The <b>member count</b> shows the <b>community's weight and evolution</b>.",CURRENCY_MASS:"Shown here is the <b>total amount</b> currently in circulation and its <b>average distribution</b> per member.<br/><br/>This allows to estimate the <b>worth of any amount</b>, in respect to what <b>others own</b> on their account (on average).",CURRENCY_UNIT_RELATIVE:"The unit used here (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amounts in {{currency|capitalize}} have been devided by the <b>Universal Dividend</b> (UD).<br/><br/><small>This relative unit is <b>relevant</b> because it is stable in contrast to the permanently growing monitary mass.</small>",CURRENCY_CHANGE_UNIT:"The option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> allows to <b>switch the unit</b> to show amounts in <b>{{currency|capitalize}}</b>, undevided by the Universal Dividend (instead of in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;).",CURRENCY_CHANGE_UNIT_TO_RELATIVE:"The option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> allows to <b>switch the unit</b> to show amounts in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;, which is relative to the Universal Dividend (the amount co-produced by each member).",CURRENCY_RULES:"The <b>rules</b> of the currency determine its <b>exact and predictible</b> performance.<br/><br/>As a true DNA of the currency these rules make the monetary code <b>transparent and understandable</b>.",MENU_BTN_NETWORK:"Menu <b>{{'MENU.NETWORK'|translate}}</b> allows discovery of <b>network's state<b>.",NETWORK_BLOCKCHAIN:"All monetary transactions are recoded in a <b>public and tamper proof</b> ledger, generally referred to as the <b>blockchain</b>.",NETWORK_PEERS:"The <b>peers</b> shown here correspond to <b>computers that update and check</b> the blockchain.<br/><br/>The more active peers there are, the more <b>decentralised</b> and therefore trustworhty the currency becomes.",NETWORK_PEERS_BLOCK_NUMBER:"This <b>number</b> (in green) indicates the peer's <b>latest validated block</b> (last page written in the ledger).<br/><br/>Green indicates that the block was equally validated by the <b>majority of other peers</b>.",NETWORK_PEERS_PARTICIPATE:'<b>Each member</b>, equiped with a computer with Internet, <b>can participate, adding a peer</b> simply by <b>installing the Duniter software</b> (free/libre). <a target="_new" href="{{installDocUrl}}" target="_system">Read the installation manual &gt;&gt;</a>.',MENU_BTN_ACCOUNT:"<b>{{'ACCOUNT.TITLE'|translate}}</b> allows access to your account balance and transaction history.",MENU_BTN_ACCOUNT_MEMBER:"Here you can consult your account status, transaction history and your certifications.",WALLET_CERTIFICATIONS:"Click here to reveiw the details of your certifications (given and received).",WALLET_RECEIVED_CERTIFICATIONS:"Click here to review the details of your <b>received certifications</b>.",WALLET_GIVEN_CERTIFICATIONS:"Click here to review the details of your <b>given certifications</b>.",WALLET_BALANCE:"Your account <b>balance</b> is shown here.",WALLET_BALANCE_RELATIVE:"{{'HELP.TIP.WALLET_BALANCE'|translate}}<br/><br/>The used unit (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amount in {{currency|capitalize}} has been divided by the <b>Universal Dividend</b> (UD) co-created by each member.<br/>At this moment, 1 UD equals {{currentUD}} {{currency|capitalize}}.",WALLET_BALANCE_CHANGE_UNIT:"You can <b>change the unit</b> in which amounts are shown in <b><i class=\"icon ion-android-settings\"></i>&nbsp;{{'MENU.SETTINGS'|translate}}</b>.<br/><br/>For example, to display amounts <b>directly in {{currency|capitalize}}</b> instead of relative amounts.",WALLET_PUBKEY:"This is your account public key. You can communicate it to a third party so that it more easily identifies your account.",WALLET_SEND:"Issue a payment in just a few clicks.",WALLET_SEND_NO_MONEY:"Issue a payment in just a few clicks.<br/>(Your balance does not allow this yet)",WALLET_OPTIONS:"Please note that this button allows access to <b>other, less used actions</b>.<br/><br/>Don't forget to take a quick look, when you have a moment!",WALLET_RECEIVED_CERTS:"This shows the list of persons that certified you.",WALLET_CERTIFY:"The button <b>{{'WOT.BTN_SELECT_AND_CERTIFY'|translate}}</b> allows selecting an identity and certifying it.<br/><br/>Only users that are <b>already member</b> may certify others.",WALLET_CERT_STOCK:"Your supply of certifications (to send) is limited to <b>{{sigStock}} certifications</b>.<br/><br/>This supply will replete itself over time, as and when earlier certifications expire.",MENU_BTN_TX_MEMBER:"<b>{{'MENU.TRANSACTIONS'|translate}}</b> allow access to transactions history, and send new payments.",MENU_BTN_TX:"View the history of <b>your transactions</b> here and send new payments.",MENU_BTN_WOT:"The menu <b>{{'MENU.WOT'|translate}}</b> allows searching <b>users</b> of the currency (member or not).",WOT_SEARCH_TEXT_XS:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>The search will start automatically.",WOT_SEARCH_TEXT:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>Then hit <b>Enter</b> to start the search.",WOT_SEARCH_RESULT:"Simply click a user row to view the details sheet.",WOT_VIEW_CERTIFICATIONS:"The row <b>{{'ACCOUNT.CERTIFICATION_COUNT'|translate}}</b> shows how many members members validated this identity.<br/><br/>These certifications testify that the account belongs to <b>a living human</b> and this person has <b>no other member account</b>.",WOT_VIEW_CERTIFICATIONS_COUNT:"There are at least <b>{{sigQty}} certifications</b> needed to become a member and receive the <b>Universal Dividend</b>.",WOT_VIEW_CERTIFICATIONS_CLICK:"Click here to open <b>a list of all certifications</b> given to and by this identity.",WOT_VIEW_CERTIFY:"The button <b>{{'WOT.BTN_CERTIFY'|translate}}</b> allows to add your certification to this identity.",CERTIFY_RULES:"<b>Attention:</b> Only certify <b>real and living persons</b> that do not own any other certified account.<br/><br/>The trust carried by the currency depends on each member's vigilance!",MENU_BTN_SETTINGS:"The <b>{{'MENU.SETTINGS'|translate}}</b> allow you to configure the Cesium application.<br/><br/>For example, you can <b>change the unit</b> in which the currency will be shown.",HEADER_BAR_BTN_PROFILE:"Click here to access your <b>user profile</b>",SETTINGS_CHANGE_UNIT:"You can <b>change the display unit</b> of amounts by clicking here.<br/><br/>- Deactivate the option to show amounts in {{currency|capitalize}}.<br/>- Activate the option for relative amounts in {{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub> (<b>divided</b> by the current Universal Dividend).",END_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>Welcome to the <b>free economy</b>!",END_NOT_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>If you wish to join the currency {{currency|capitalize}}, simply click <b>{{'LOGIN.CREATE_ACCOUNT'|translate}}</b> below."}},API:{COMMON:{LINK_DOC:"API documentation",LINK_DOC_HELP:"API documentation for developers",LINK_STANDARD_APP:"Standard version",LINK_STANDARD_APP_HELP:"Open standard version of {{'COMMON.APP_NAME'|translate}}"},HOME:{TITLE:"{{'COMMON.APP_NAME'|translate}} API Documentation",MESSAGE:'Welcome to the {{\'COMMON.APP_NAME\'|translate}} <b>API documentation </b>.<br/>Connect your web site to <a href="http://duniter.org" target="_system">Duniter</a> very easily!',MESSAGE_SHORT:'Connect your websites to <a href="http://duniter.org" target="_system">Duniter</a> very easily!',DOC_HEADER:"Available services:"},TRANSFER:{TITLE:"{{'COMMON.APP_NAME'|translate}} - Online payment",TITLE_SHORT:"Online payment",SUMMARY:"Order summary:",AMOUNT:"Amount:",NAME:"Name:",PUBKEY:"Public key of the recipient:",COMMENT:"Order reference:",DEMO:{SALT:"demo",PASSWORD:"demo",PUBKEY:"3G28bL6deXQBYpPBpLFuECo46d3kfYMJwst7uhdVBnD1",HELP:"<b>Demonstration mode</b>: No payment will actually be sent during this simulation.<br/>Please use credentials: <b>{{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}</b>",BAD_CREDENTIALS:"Invalid credentials.<br/>In demonstration mode, credentials should be: {{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}"},INFO:{SUCCESS_REDIRECTING_WITH_NAME:"Payment sent.<br/>Redirect to <b>{{name}}</b>...",SUCCESS_REDIRECTING:"Payment sent.<br/>Redirect to the seller's website...",CANCEL_REDIRECTING_WITH_NAME:"Payment cancelled.<br/>Redirect to <b>{{name}}</b>...",CANCEL_REDIRECTING:"Payment cancelled.<br/>Redirect to the seller's website..."},ERROR:{TRANSFER_FAILED:"Payment failed"}},DOC:{DESCRIPTION_DIVIDER:"Description",URL_DIVIDER:"Calling address",PARAMETERS_DIVIDER:"Parameters",AVAILABLE_PARAMETERS:"Here is the list of al available parameters:",DEMO_DIVIDER:"Try it !",DEMO_HELP:"To test this service, click on this button. The result content will be display below.",DEMO_RESULT:"Result returned by call:",DEMO_SUCCEED:'<i class="icon ion-checkmark"></i> Success!',DEMO_CANCELLED:'<i class="icon ion-close"></i> Canceled by user',INTEGRATE_DIVIDER:"Website integration",INTEGRATE_CODE:"Code:",INTEGRATE_RESULT:"Result preview:",INTEGRATE_PARAMETERS:"Parameters",TRANSFER:{TITLE:"Payments",DESCRIPTION:"From a site (eg online marketplace) you can delegate payment in free currency to Cesium API. To do this, simply open a page at the following address:",PARAM_PUBKEY:"Recipient's public key",PARAM_PUBKEY_HELP:"Recipient's public key (required)",PARAM_AMOUNT:"Amount",PARAM_AMOUNT_HELP:"Transaction amount (required)",PARAM_COMMENT:"Reference (or comment)",PARAM_COMMENT_HELP:"Reference or comment. You will allow for example to identify the payment in the BlockChain.",PARAM_NAME:"Name (of recipient or website)",PARAM_NAME_HELP:'The name of your website. This can be a readable name (eg "My online site"), or a web address (eg "www.MySite.com").',PARAM_REDIRECT_URL:"URL redirection",PARAM_REDIRECT_URL_HELP:'URL redirection after sending payment, after the payment has been sent. Can contain the following strings, which will be replaced by the values of the transaction: "{tx}", "{hash}", "{comment}", "{amount}" and "{pubkey}".',PARAM_CANCEL_URL:"URL if cancelled",PARAM_CANCEL_URL_HELP:'URL in case of cancellation.  Can contain the following strings, which will be replaced: "{comment}", "{amount}" and "{pubkey}".',EXAMPLES_HELP:"Examples of integration:",EXAMPLE_BUTTON:"HTML Button",EXAMPLE_BUTTON_DEFAULT_TEXT:"Pay in {{currency|abbreviate}}",EXAMPLE_BUTTON_DEFAULT_STYLE:"Custom style",EXAMPLE_BUTTON_TEXT_HELP:"Button text",EXAMPLE_BUTTON_BG_COLOR:"Background color",EXAMPLE_BUTTON_BG_COLOR_HELP:"eg: #fbc14c, yellow, lightgrey, rgb(180,180,180)",EXAMPLE_BUTTON_FONT_COLOR:"Font color",EXAMPLE_BUTTON_FONT_COLOR_HELP:"eg: black, orange, rgb(180,180,180)",EXAMPLE_BUTTON_TEXT_ICON:"Icon",EXAMPLE_BUTTON_TEXT_WIDTH:"Width",EXAMPLE_BUTTON_TEXT_WIDTH_HELP:"eg: 200px, 50%",EXAMPLE_BUTTON_ICON_NONE:"No icon",EXAMPLE_BUTTON_ICON_DUNITER:"Duniter logo",EXAMPLE_BUTTON_ICON_CESIUM:"Cesium logo",EXAMPLE_BUTTON_ICON_G1_COLOR:"1 logo",EXAMPLE_BUTTON_ICON_G1_BLACK:"1 logo (outline)"}}}}),e.translations("en",{COMMON:{APP_NAME:"Cesium",APP_VERSION:"v{{version}}",APP_BUILD:"build {{build}}",PUBKEY:"Public key",MEMBER:"Member",BLOCK:"Block",BTN_OK:"OK",BTN_YES:"Yes",BTN_NO:"No",BTN_SEND:"Send",BTN_SEND_MONEY:"Transfer money",BTN_SEND_MONEY_SHORT:"Transfer",BTN_SAVE:"Save",BTN_YES_SAVE:"Yes, Save",BTN_YES_CONTINUE:"Yes, Continue",BTN_SHOW:"Show",BTN_SHOW_PUBKEY:"Show key",BTN_RELATIVE_UNIT:"Use relative unit",BTN_BACK:"Back",BTN_NEXT:"Next",BTN_CANCEL:"Cancel",BTN_CLOSE:"Close",BTN_LATER:"Later",BTN_LOGIN:"Sign In",BTN_LOGOUT:"Logout",BTN_ADD_ACCOUNT:"New Account",BTN_SHARE:"Share",BTN_EDIT:"Edit",BTN_DELETE:"Delete",BTN_ADD:"Add",BTN_SEARCH:"Search",BTN_REFRESH:"Refresh",BTN_RETRY:"Retry",BTN_START:"Start",BTN_CONTINUE:"Continue",BTN_CREATE:"Create",BTN_UNDERSTOOD:"I understood",BTN_OPTIONS:"Options",BTN_HELP_TOUR:"Features tour",BTN_HELP_TOUR_SCREEN:"Discover this screen",BTN_DOWNLOAD:"Download",BTN_DOWNLOAD_ACCOUNT_STATEMENT:"Download account statement",BTN_MODIFY:"Modify",CHOOSE_FILE:"Drag your file<br/>or click to select",DAYS:"days",NO_ACCOUNT_QUESTION:"Not a member yet? Register now!",SEARCH_NO_RESULT:"No result found",LOADING:"Loading...",SEARCHING:"Searching...",FROM:"From",TO:"To",COPY:"Copy",LANGUAGE:"Language",UNIVERSAL_DIVIDEND:"Universal dividend",UD:"UD",DATE_PATTERN:"MM/DD/YYYY HH:mm",DATE_FILE_PATTERN:"YYYY-MM-DD",DATE_SHORT_PATTERN:"MM/DD/YY",DATE_MONTH_YEAR_PATTERN:"MM/YYYY",EMPTY_PARENTHESIS:"(empty)",UID:"Pseudonym",ENABLE:"Enabled",DISABLE:"Disabled",RESULTS_LIST:"Results:",RESULTS_COUNT:"{{count}} results",EXECUTION_TIME:"executed in {{duration|formatDurationMs}}",SHOW_VALUES:"Display values openly?",POPOVER_ACTIONS_TITLE:"Options",POPOVER_FILTER_TITLE:"Filters",SHOW_MORE:"Show more",SHOW_MORE_COUNT:"(current limit at {{limit}})",POPOVER_SHARE:{TITLE:"Share",SHARE_ON_TWITTER:"Share on Twitter",SHARE_ON_FACEBOOK:"Share on Facebook",SHARE_ON_DIASPORA:"Share on Diaspora*",SHARE_ON_GOOGLEPLUS:"Share on Google+"}},SYSTEM:{PICTURE_CHOOSE_TYPE:"Choose source:",BTN_PICTURE_GALLERY:"Gallery",BTN_PICTURE_CAMERA:"<b>Camera</b>"},MENU:{HOME:"Home",WOT:"Registry",CURRENCY:"Currency",ACCOUNT:"My Account",TRANSFER:"Transfer",SCAN:"Scan",SETTINGS:"Settings",NETWORK:"Network",TRANSACTIONS:"My transactions"},ABOUT:{TITLE:"About",LICENSE:"<b>Free/libre software</b> (License GNU GPLv3).",LATEST_RELEASE:"There is a <b>newer version</ b> of {{'COMMON.APP_NAME' | translate}} (<b>v{{version}}</b>)",PLEASE_UPDATE:"Please update {{'COMMON.APP_NAME' | translate}} (latest version: <b>v{{version}}</b>)",CODE:"Source code:",DEVELOPERS:"Developers:",FORUM:"Forum:",PLEASE_REPORT_ISSUE:"Please report any issue to us!",REPORT_ISSUE:"Report an issue"},HOME:{TITLE:"Cesium",WELCOME:"Welcome to the Cesium Application!",MESSAGE:"Follow your {{currency|abbreviate}} wallets easily",BTN_CURRENCY:"Explore currency",BTN_ABOUT:"about",BTN_HELP:"Help",REPORT_ISSUE:"Report an issue",NOT_YOUR_ACCOUNT_QUESTION:'You do not own the account <b><i class="ion-key"></i> {{pubkey|formatPubkey}}</b>?',BTN_CHANGE_ACCOUNT:"Disconnect this account",CONNECTION_ERROR:'Peer <b>{{server}}</b> unreachable or invalid address.<br/><br/>Check your Internet connection, or change node <a class="positive" ng-click="doQuickFix(\'settings\')">in the settings</a>.'},SETTINGS:{TITLE:"Settings",NETWORK_SETTINGS:"Network",PEER:"Duniter peer address",PEER_CHANGED_TEMPORARY:"Address used temporarily",USE_LOCAL_STORAGE:"Enable local storage",USE_LOCAL_STORAGE_HELP:"Allows you to save your settings",ENABLE_HELPTIP:"Enable contextual help tips",ENABLE_UI_EFFECTS:"Enable visual effects",HISTORY_SETTINGS:"Account operations",DISPLAY_UD_HISTORY:"Display produced dividends?",AUTHENTICATION_SETTINGS:"Authentication",KEEP_AUTH:"Expiration of authentication",KEEP_AUTH_HELP:"Define when authentication is cleared from memory",KEEP_AUTH_OPTION:{NEVER:"After each operation",SECONDS:"After {{value}}s of inactivity",MINUTE:"After {{value}}min of inactivity",MINUTES:"After {{value}}min of inactivity",HOUR:"After {{value}}h of inactivity",ALWAYS:"At the end of the session"},REMEMBER_ME:"Remember me ?",REMEMBER_ME_HELP:"Allows to remain identified from one session to another, keeping the public key locally.",PLUGINS_SETTINGS:"Extensions",BTN_RESET:"Restore default values",EXPERT_MODE:"Enable expert mode",EXPERT_MODE_HELP:"Allow to see more details",POPUP_PEER:{TITLE:"Duniter peer",HOST:"Address",HOST_HELP:"Address: server:port",USE_SSL:"Secured?",USE_SSL_HELP:"(SSL Encryption)",BTN_SHOW_LIST:"Peer's list"}},BLOCKCHAIN:{HASH:"Hash: {{hash}}",VIEW:{HEADER_TITLE:"Block #{{number}}-{{hash|formatHash}}",TITLE_CURRENT:"Current block",TITLE:"Block #{{number|formatInteger}}",COMPUTED_BY:"Computed by",SHOW_RAW:"Show raw data",TECHNICAL_DIVIDER:"Technical informations",VERSION:"Format version",HASH:"Computed hash",UNIVERSAL_DIVIDEND_HELP:"Money co-produced by each of the {{membersCount}} members",EMPTY:"Aucune donne dans ce bloc",POW_MIN:"Minimal difficulty",POW_MIN_HELP:"Difficulty imposed in calculating hash",DATA_DIVIDER:"Data",IDENTITIES_COUNT:"New identities",JOINERS_COUNT:"Joiners",ACTIVES_COUNT:"Renewals",ACTIVES_COUNT_HELP:"Members having renewed their membership",LEAVERS_COUNT:"Leavers",LEAVERS_COUNT_HELP:"Members that now refused certification",EXCLUDED_COUNT:"Excluded members",EXCLUDED_COUNT_HELP:"Old members, excluded because missing membreship renewal or certifications",REVOKED_COUNT:"Revoked identities",REVOKED_COUNT_HELP:"These accounts may no longer be member",TX_COUNT:"Transactions",CERT_COUNT:"Certifications",TX_TO_HIMSELF:"Change",TX_OUTPUT_UNLOCK_CONDITIONS:"Unlock conditions",TX_OUTPUT_OPERATOR:{AND:"and",OR:"or"},TX_OUTPUT_FUNCTION:{SIG:"<b>Sign</b> of the public key",XHX:"<b>Password</b>, including SHA256 =",CSV:"Blocked during",CLTV:"Bloqu until"}},LOOKUP:{TITLE:"Blocks",NO_BLOCK:"No bloc",LAST_BLOCKS:"Last blocks:",BTN_COMPACT:"Compact"}},CURRENCY:{VIEW:{TITLE:"Currency",TAB_CURRENCY:"Currency",TAB_WOT:"Web of trust",TAB_NETWORK:"Network",TAB_BLOCKS:"Blocks",CURRENCY_SHORT_DESCRIPTION:"{{currency|capitalize}} is a <b>libre money</b>, started {{firstBlockTime | formatFromNow}}. It currently counts <b>{{N}} members </b>, who produce and collect a <a ng-click=\"showHelpModal('ud')\">Universal Dividend</a> (DU), each {{dt | formatPeriod}}.",NETWORK_RULES_DIVIDER:"Network rules",CURRENCY_NAME:"Currency name",MEMBERS:"Members count",MEMBERS_VARIATION:"Variation since {{duration|formatDuration}} (since last UD)",MONEY_DIVIDER:"Money",MASS:"Monetary mass",SHARE:"Money share",UD:"Universal Dividend",C_ACTUAL:"Current growth",MEDIAN_TIME:"Current blockchain time",POW_MIN:"Common difficulty",MONEY_RULES_DIVIDER:"Rules of currency",C_RULE:"Theoretical growth target",UD_RULE:"Universal dividend (formula)",DT_REEVAL:"Period between two re-evaluation of the UD",REEVAL_SYMBOL:"reeval",DT_REEVAL_VALUE:"Every <b>{{dtReeval|formatDuration}}</b> ({{dtReeval/86400}} {{'COMMON.DAYS'|translate}})",UD_REEVAL_TIME0:"Date of first reevaluation of the UD",SIG_QTY_RULE:"Required number of certifications to become a member",SIG_STOCK:"Maximum number of certifications sent by a member",SIG_PERIOD:"Minimum delay between 2 certifications sent by one and the same issuer.",SIG_WINDOW:"Maximum delay before a certification will be treated",SIG_VALIDITY:"Lifetime of a certification that has been treated",MS_WINDOW:"Maximum delay before a pending membership will be treated",MS_VALIDITY:"Lifetime of a membership that has been treated",STEP_MAX:"Maximum distance between a newcomer and each referring members.",WOT_RULES_DIVIDER:"Rules for web of trust",SENTRIES:"Required number of certifications (given <b>and</b> received) to become a referring member",SENTRIES_FORMULA:"Required number of certifications to become a referring member (formula)",XPERCENT:"Minimum percent of referring member to reach to match the distance rule",AVG_GEN_TIME:"The average time between 2 blocks",CURRENT:"current",MATH_CEILING:"CEILING",DISPLAY_ALL_RULES:"Display all rules?",BTN_SHOW_LICENSE:"Show license",WOT_DIVIDER:"Web of trust"},LICENSE:{TITLE:"Currency license",BTN_DOWNLOAD:"Download file",NO_LICENSE_FILE:"License file not found."}},NETWORK:{VIEW:{MEDIAN_TIME:"Blockchain time",LOADING_PEERS:"Loading peers...",NODE_ADDRESS:"Address:",SOFTWARE:"Software:",WARN_PRE_RELEASE:"Pre-release (latest stable: <b>{{version}}</b>)",WARN_NEW_RELEASE:"Version <b>{{version}}</b> available",WS2PID:"Identifier:",PRIVATE_ACCESS:"Private access",POW_PREFIX:"Proof of work prefix:",ENDPOINTS:{BMAS:"Secure endpoint (SSL)",BMATOR:"TOR endpoint",WS2P:"WS2P endpoint",ES_USER_API:"Cesium+ data node"}},INFO:{ONLY_SSL_PEERS:"Non-SSL nodes have a degraded display because Cesium works in HTTPS mode."}},PEER:{PEERS:"Peers",SIGNED_ON_BLOCK:"Signed on block",MIRROR:"mirror",MIRRORS:"Mirror peers",PEER_LIST:"Peer's list",MEMBERS:"Member peers",ALL_PEERS:"All peers",DIFFICULTY:"Difficulty",API:"API",CURRENT_BLOCK:"Block #",POPOVER_FILTER_TITLE:"Filter",OFFLINE:"Offline peers",BTN_SHOW_PEER:"Show peer",VIEW:{TITLE:"Peer",OWNER:"Owned by ",SHOW_RAW_PEERING:"See peering document",SHOW_RAW_CURRENT_BLOCK:"See current block (raw format)",LAST_BLOCKS:"Last blocks",KNOWN_PEERS:"Known peers :",GENERAL_DIVIDER:"General information",ERROR:{LOADING_TOR_NODE_ERROR:"Could not get peer data, using the TOR network.",LOADING_NODE_ERROR:"Could not get peer data"}}},WOT:{SEARCH_HELP:"Search (member or public key)",SEARCH_INIT_PHASE_WARNING:"During the pre-registration phase, the search for pending registrations <b>may be long</b>. Please wait ...",REGISTERED_SINCE:"Registered on",REGISTERED_SINCE_BLOCK:"Registered since block #",NO_CERTIFICATION:"No validated certification",NO_GIVEN_CERTIFICATION:"No given certification",NOT_MEMBER_PARENTHESIS:"(non-member)",IDENTITY_REVOKED_PARENTHESIS:"(identity revoked)",MEMBER_PENDING_REVOCATION_PARENTHESIS:"(being revoked)",EXPIRE_IN:"Expires",NOT_WRITTEN_EXPIRE_IN:"Deadline<br/>treatment",EXPIRED:"Expired",PSEUDO:"Pseudonym",SIGNED_ON_BLOCK:"Emitted on block #{{block}}",WRITTEN_ON_BLOCK:"Written on block #{{block}}",GENERAL_DIVIDER:"General information",NOT_MEMBER_ACCOUNT:"Non-member account",NOT_MEMBER_ACCOUNT_HELP:"This is a simple wallet, with no pending membership application.",TECHNICAL_DIVIDER:"Technical data",BTN_CERTIFY:"Certify",BTN_YES_CERTIFY:"Yes, certify",BTN_SELECT_AND_CERTIFY:"New certification",ACCOUNT_OPERATIONS:"Account operations",VIEW:{POPOVER_SHARE_TITLE:"Identity {{title}}"},LOOKUP:{TITLE:"Registry",NEWCOMERS:"New members:",NEWCOMERS_COUNT:"{{count}} members",PENDING:"Pending registrations:",PENDING_COUNT:"{{count}} pending registrations",REGISTERED:"Registered {{sigDate | formatFromNow}}",MEMBER_FROM:"Member since {{memberDate|formatFromNowShort}}",BTN_NEWCOMERS:"Latest members",BTN_PENDING:"Pending registrations",SHOW_MORE:"Show more",SHOW_MORE_COUNT:"(current limit to {{limit}})",NO_PENDING:"No pending registrations.",NO_NEWCOMERS:"No members."},CONTACTS:{TITLE:"Contacts"},MODAL:{TITLE:"Search"},CERTIFICATIONS:{TITLE:"{{uid}} - Certifications",SUMMARY:"Received certifications",LIST:"Details of received certifications",PENDING_LIST:"Pending certifications",RECEIVED:"Received certifications",RECEIVED_BY:"Certifications received by {{uid}}",ERROR:"Received certifications in error",SENTRY_MEMBER:"Referring member"},OPERATIONS:{TITLE:"{{uid}} - Operations"},GIVEN_CERTIFICATIONS:{TITLE:"{{uid}} - Certifications sent",SUMMARY:"Sent certifications",LIST:"Details of sent certifications",PENDING_LIST:"Pending certifications",SENT:"Sent certifications",SENT_BY:"Certifications sent by {{uid}}",ERROR:"Sent certifications with error"}},LOGIN:{TITLE:'<i class="icon ion-log-in"></i> Login',SCRYPT_FORM_HELP:"Please enter your credentials. <br> Remember to check the public key for your account.",PUBKEY_FORM_HELP:"Please enter a public account key:",FILE_FORM_HELP:"Choose the keychain file to use:",SALT:"Secret identifier",SALT_HELP:"Secret identifier",SHOW_SALT:"Display secret identifier?",PASSWORD:"Password",PASSWORD_HELP:"Password",PUBKEY_HELP:"Example:  AbsxSY4qoZRzyV2irfep1V9xw1EMNyKJw2TkuVD4N1mv ",NO_ACCOUNT_QUESTION:"Don't have an account yet?",CREATE_ACCOUNT:"Create an account",FORGOTTEN_ID:"Forgot password?",ASSOCIATED_PUBKEY:"Public key :",BTN_METHODS:"Other methods",BTN_METHODS_DOTS:"Change method...",METHOD_POPOVER_TITLE:"Methods",MEMORIZE_AUTH_FILE:"Memorize this keychain during the navigation session",SCRYPT_PARAMETERS:"Paramtres (Scrypt) :",AUTO_LOGOUT:{TITLE:"Information",MESSAGE:'<i class="ion-android-time"></i> You were <b>logout</ b> automatically, due to prolonged inactivity.',BTN_RELOGIN:"Sign In",IDLE_WARNING:"You will be logout... {{countdown}}"},METHOD:{SCRYPT_DEFAULT:"Standard salt (default)",SCRYPT_ADVANCED:"Advanced salt",FILE:"Keychain file",PUBKEY:"Public key only"},SCRYPT:{SIMPLE:"Light salt",DEFAULT:"Standard salt",
SECURE:"Secure salt",HARDEST:"Hardest salt",EXTREME:"Extreme salt",USER:"Personal value",N:"N (Loop):",r:"r (RAM):",p:"p (CPU):"},FILE:{DATE:"Date:",TYPE:"Type:",SIZE:"Size:",VALIDATING:"Validating...",HELP:"Expected file format: <b>.dunikey</b> (type PubSec). Other formats are under development (EWIF, WIF)."}},AUTH:{TITLE:'<i class="icon ion-locked"></i> Authentication',METHOD_LABEL:"Authentication method",BTN_AUTH:"Authenticate",SCRYPT_FORM_HELP:"Please authenticate yourself:"},ACCOUNT:{TITLE:"My Account",BALANCE:"Balance",LAST_TX:"Latest transactions",BALANCE_ACCOUNT:"Account balance",NO_TX:"No transaction",SHOW_MORE_TX:"Show more",SHOW_ALL_TX:"Show all",TX_FROM_DATE:"(current limit to {{fromTime|formatFromNowShort}})",PENDING_TX:"Pending transactions",ERROR_TX:"Transaction not executed",ERROR_TX_SENT:"Sent transactions",PENDING_TX_RECEIVED:"Transactions awaiting receipt",EVENTS:"Events",WAITING_MEMBERSHIP:"Membership application sent. Waiting validation.",WAITING_CERTIFICATIONS:"You need {{needCertificationCount}} certification(s) to become a member",WILL_MISSING_CERTIFICATIONS:"You will <b>lack certifications</b> soon (at least {{willNeedCertificationCount}} more are needed)",WILL_NEED_RENEW_MEMBERSHIP:"Your membership <b>will expire {{membershipExpiresIn|formatDurationTo}}</b>. Remember to <a ng-click=\"doQuickFix('renew')\">renew your membership</a> before then.",NEED_RENEW_MEMBERSHIP:"You are no longer a member because your membership <b>has expired</b>. Remember to <a ng-click=\"doQuickFix('renew')\">renew your membership</a>.",NO_WAITING_MEMBERSHIP:"No membership application pending. If you'd like to <b>become a member</ b>, please <a ng-click=\"doQuickFix('membership')\">send the membership application</a>.",CERTIFICATION_COUNT:"Received certifications",CERTIFICATION_COUNT_SHORT:"Certifications",SIG_STOCK:"Stock of certifications to give",BTN_RECEIVE_MONEY:"Receive",BTN_SELECT_ALTERNATIVES_IDENTITIES:"Switch to another identity...",BTN_MEMBERSHIP_RENEW:"Renew membership",BTN_MEMBERSHIP_RENEW_DOTS:"Renew membership...",BTN_MEMBERSHIP_OUT_DOTS:"Revoke membership...",BTN_SECURITY_DOTS:"Sign-in and security...",BTN_SHOW_DETAILS:"Display technical data",LOCKED_OUTPUTS_POPOVER:{TITLE:"Locked amount",DESCRIPTION:"Here are the conditions for unlocking this amount:",DESCRIPTION_MANY:"This transaction consists of several parts, of which the unlock conditions are:",LOCKED_AMOUNT:"Conditions for the amount:"},NEW:{TITLE:"Registration",INTRO_WARNING_TIME:"Creating an account on {{name|capitalize}} is very simple. Please take sufficient time to do this correctly (not to forget the usernames, passwords, etc.).",INTRO_WARNING_SECURITY:"Check that the hardware you are currently using (computer, tablet, phone) <b>is secure and trustworthy </b>.",INTRO_WARNING_SECURITY_HELP:"Up-to-date anti-virus, firewall enabled, session protected by password or pin code...",INTRO_HELP:"Click <b> {{'COMMON.BTN_START'|translate}}</b> to begin creating an account. You will be guided step by step.",REGISTRATION_NODE:"Your registration will be registered via the Duniter peer <b>{{server}}</b> node, which will then be distributed to the rest of the currency network.",REGISTRATION_NODE_HELP:"If you do not trust this peer, please change <a ng-click=\"doQuickFix('settings')\">in the settings</a> of Cesium.",SELECT_ACCOUNT_TYPE:"Choose the type of account to create:",MEMBER_ACCOUNT:"Member account",MEMBER_ACCOUNT_TITLE:"Create a member account",MEMBER_ACCOUNT_HELP:"If you are not yet registered as an individual (one account possible per individual).",WALLET_ACCOUNT:"Simple wallet",WALLET_ACCOUNT_TITLE:"Create a wallet",WALLET_ACCOUNT_HELP:"If you represent a company, association, etc. or simply need an additional wallet. No universal dividend will be created by this account.",SALT_WARNING:"Choose a secret identifier.<br/>You need it for each connection to this account.<br/><br/><b>Make sure to remember this identifier</b>.<br/>If lost, there are no means to retrieve it!",PASSWORD_WARNING:"Choose a password.<br/>You need it for each connection to this account.<br/><br/><b>Make sure to remember this password</b>.<br/>If lost, there are no means to retrieve it!",PSEUDO_WARNING:"Choose a pseudonym.<br/>It may be used by other people to find you more easily.<br/><br/>.Use of <b>commas, spaces and accents</b> is not allowed.<br/><div class='hidden-xs'><br/>Example: <span class='gray'>JohnDalton, JackieChan, etc.</span>",PSEUDO:"Pseudonym",PSEUDO_HELP:"joe123",SALT_CONFIRM:"Confirm",SALT_CONFIRM_HELP:"Confirm the secret identifier",PASSWORD_CONFIRM:"Confirm",PASSWORD_CONFIRM_HELP:"Confirm the password",SLIDE_6_TITLE:"Confirmation:",COMPUTING_PUBKEY:"Computing...",LAST_SLIDE_CONGRATULATION:"You completed all required fields.<br/><b>You can send the account creation request</b>.<br/><br/>For information, the public key below identifies your future account.<br/>It can be communicated to third parties to receive their payment.<br/>Once your account has been approved, you can find this key under <b>{{'ACCOUNT.TITLE'|translate}}</b>.",CONFIRMATION_MEMBER_ACCOUNT:'<b class="assertive">Warning:</b> your secret identifier, password and pseudonym can not be changed.<br/><b>Make sure you always remember it!</b><br/><b>Are you sure</b> you want to send this account creation request?',CONFIRMATION_WALLET_ACCOUNT:'<b class="assertive">Warning:</b> your password and pseudonym can not be changed.<br/><b>Make sure you always remember it!</b><br/><b>Are you sure</b> you want to continue?',CHECKING_PSEUDO:"Checking...",PSEUDO_AVAILABLE:"This pseudonym is available",PSEUDO_NOT_AVAILABLE:"This pseudonym is not available",INFO_LICENSE:"To be able to adhere to the currency, we ask you to kindly read and accept this license.",BTN_ACCEPT:"I accept",BTN_ACCEPT_LICENSE:"I accept the license"},POPUP_REGISTER:{TITLE:"Enter a pseudonym",HELP:"A pseudonym is needed to let other members find you."},SELECT_IDENTITY_MODAL:{TITLE:"Identity selection",HELP:'Several <b>different identities</b> have been sent, for the public key <span class="gray"> <i class="ion-key"></i> {{pubkey | formatPubkey}}</span>.<br/>Please select the identity to use:'},SECURITY:{ADD_QUESTION:"Add custom question",BTN_CLEAN:"Clean",BTN_RESET:"Reset",DOWNLOAD_REVOKE:"Save a revocation file",DOWNLOAD_REVOKE_HELP:"Having a revocation file is important, for example in case of loss of identifiers. It allows you to <b>get this account out of the Web Of Trust</b>, thus becoming a simple wallet.",MEMBERSHIP_IN:"Register as member...",MEMBERSHIP_IN_HELP:"Allows you to <b>transform </b> a simple wallet account <b>into a member account</b>, by sending a membership request. Useful only if you do not already have another member account.",SEND_IDENTITY:"Publish identity...",SEND_IDENTITY_HELP:"Allows you to associate a pseudonym to this account, but <b>without applying for membership</b> to become a member. This is not very useful because the validity of this pseudonym association is limited in time.",HELP_LEVEL:"Choose <strong> at least {{nb}} questions </strong> :",LEVEL:"Security level",LOW_LEVEL:'Low <span class="hidden-xs">(2 questions minimum)</span>',MEDIUM_LEVEL:'Medium <span class="hidden-xs">(4 questions minimum)</span>',QUESTION_1:"What was your best friend's name when you were a teen ?",QUESTION_2:"What was the name of your first pet ?",QUESTION_3:"What is the first meal you have learned to cook ?",QUESTION_4:"What is the first movie you saw in the cinema?",QUESTION_5:"Where did you go the first time you flew ?",QUESTION_6:"What was your favorite elementary school teacher's name  ?",QUESTION_7:"What would you consider the ideal job ?",QUESTION_8:"Which children's book do you prefer?",QUESTION_9:"What was the model of your first vehicle?",QUESTION_10:"What was your nickname when you were a child ?",QUESTION_11:"What was your favorite movie character or actor when you were a student ?",QUESTION_12:"What was your favorite singer or band when you were a student ?",QUESTION_13:"In which city did your parents meet ?",QUESTION_14:"What was the name of your first boss ?",QUESTION_15:"What is the name of the street where you grew up ?",QUESTION_16:"What is the name of the first beach where you go swim ?",QUESTION_17:"QWhat is the first album you bought ?",QUESTION_18:"What is the name of your favorite sport team ?",QUESTION_19:"What was your grand-father's job ?",RECOVER_ID:"Recover my password...",RECOVER_ID_HELP:"If you have a <b>backup file of your identifiers</b>, you can find them by answering your personal questions correctly.",REVOCATION_WITH_FILE:"Rekoke my member account...",REVOCATION_WITH_FILE_DESCRIPTION:"If you have <b>permanently lost your member account credentials (or if account security is compromised), you can use <b>the revocation file</b> of the account <b>to quit the Web Of Trust</b>.",REVOCATION_WITH_FILE_HELP:"To <b>permanently revoke</ b> a member account, please drag the revocation file in the box below, or click in the box to search for a file.",REVOCATION_WALLET:"Revoke this account immediately",REVOCATION_WALLET_HELP:"Requesting revocation of your identity causes <b>will revoke your membership</ b> (definitely for the associated pseudonym and public key). The account will no longer be able to produce a Universal Dividend.<br/>However, you can still use it as a simple wallet.",REVOCATION_FILENAME:"revocation-{{uid}}-{{pubkey|formatPubkey}}-{{currency}}.txt",SAVE_ID:"Save my credentials...",SAVE_ID_HELP:"Creating a backup file, to <b>retrieve your password</b> (and the secret identifier) <b> in case of forgetting</b>. The file is <b>secured</ b> (encrypted) using personal questions.",STRONG_LEVEL:'Strong <span class="hidden-xs ">(6 questions minimum)</span>',TITLE:"Account and security"},FILE_NAME:"{{currency}} - Account statement {{pubkey|formatPubkey}} to {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Date",AMOUNT:"Amount",COMMENT:"Comment"}},TRANSFER:{TITLE:"Transfer",SUB_TITLE:"Transfer money",FROM:"From",TO:"To",AMOUNT:"Amount",AMOUNT_HELP:"Amount",COMMENT:"Comment",COMMENT_HELP:"Comment (optional)",BTN_SEND:"Send",BTN_ADD_COMMENT:"Add a comment",WARN_COMMENT_IS_PUBLIC:"Please note that <b>comments are public</b> (not encrypted).",MODAL:{TITLE:"Transfer"}},ERROR:{POPUP_TITLE:"Error",UNKNOWN_ERROR:"Unknown error",CRYPTO_UNKNOWN_ERROR:"Your browser is not compatible with cryptographic features.",EQUALS_TO_PSEUDO:"Must be different from pseudonym",EQUALS_TO_SALT:"Must be different from secret identifier",FIELD_REQUIRED:"This field is required.",FIELD_TOO_SHORT:"This field value is too short.",FIELD_TOO_SHORT_WITH_LENGTH:"Value is too short (min {{minLength]] characters).",FIELD_TOO_LONG:"Value is exceeding max length.",FIELD_TOO_LONG_WITH_LENGTH:"Value is too long (max {{maxLength}} characters).",FIELD_MIN:"Minimum value: {{min}}",FIELD_MAX:"Maximal value: {{max}}",FIELD_ACCENT:"Commas and accent characters not allowed",FIELD_NOT_NUMBER:"Value is not a number",FIELD_NOT_INT:"Value is not an integer",FIELD_NOT_EMAIL:"Email adress not valid",PASSWORD_NOT_CONFIRMED:"Must match previous password.",SALT_NOT_CONFIRMED:"Must match previous identifier.",SEND_IDENTITY_FAILED:"Error while trying to register.",SEND_CERTIFICATION_FAILED:"Could not certify identity.",NEED_MEMBER_ACCOUNT_TO_CERTIFY:"You could not send certification, because your account is <b>not a member account</b>.",NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF:"You could not send certification now, because your are <b>not a member</b> yet.<br/><br/>You still need certification to become a member.",NOT_MEMBER_FOR_CERTIFICATION:"Your account is not a member account yet.",IDENTITY_TO_CERTIFY_HAS_NO_SELF:"This account could not be certified. No registration found, or need to renew.",LOGIN_FAILED:"Error while sign in.",LOAD_IDENTITY_FAILED:"Could not load identity.",LOAD_REQUIREMENTS_FAILED:"Could not load identity requirements.",SEND_MEMBERSHIP_IN_FAILED:"Error while sending registration as member.",SEND_MEMBERSHIP_OUT_FAILED:"Error while sending membership revocation.",REFRESH_WALLET_DATA:"Could not refresh wallet.",GET_CURRENCY_PARAMETER:"Could not get currency parameters.",GET_CURRENCY_FAILED:"Could not load currency. Please retry later.",SEND_TX_FAILED:"Could not send transaction.",ALL_SOURCES_USED:"Please wait the next block computation (All transaction sources has been used).",NOT_ENOUGH_SOURCES:"Not enough changes to send this amount in one time.<br/>Maximum amount: {{amount}} {{unit}}<sub>{{subUnit}}</sub>.",ACCOUNT_CREATION_FAILED:"Error while creating your member account.",RESTORE_WALLET_DATA_ERROR:"Error while reloading settings from local storage",LOAD_WALLET_DATA_ERROR:"Error while loading wallet data.",COPY_CLIPBOARD_FAILED:"Could not copy to clipboard",TAKE_PICTURE_FAILED:"Could not get picture.",SCAN_FAILED:"Could not scan QR code.",SCAN_UNKNOWN_FORMAT:"Code not recognized.",WOT_LOOKUP_FAILED:"Search failed.",LOAD_PEER_DATA_FAILED:"Duniter peer not accessible. Please retry later.",NEED_LOGIN_FIRST:"Please sign in first.",AMOUNT_REQUIRED:"Amount is required.",AMOUNT_NEGATIVE:"Negative amount not allowed.",NOT_ENOUGH_CREDIT:"Not enough credit.",INVALID_NODE_SUMMARY:"Unreachable peer or invalid address",INVALID_USER_ID:"Field 'pseudonym' must not contains spaces or special characters.",INVALID_COMMENT:"Field 'reference' has a bad format.",INVALID_PUBKEY:"Public key has a bad format.",IDENTITY_REVOKED:"This identity <b>has been revoked {{revocationTime|formatFromNow}}</b> ({{revocationTime|formatDate}}). It can no longer become a member.",IDENTITY_PENDING_REVOCATION:"The <b>revocation of this identity</b> has been requested and is awaiting processing. Certification is therefore disabled.",IDENTITY_INVALID_BLOCK_HASH:"This membership application is no longer valid (because it references a block that network peers are cancelled): the person must renew its application for membership <b>before</b> being certified.",IDENTITY_EXPIRED:"This identity has expired: this person must re-apply <b>before</b> being certified.",IDENTITY_SANDBOX_FULL:"Could not register, because peer's sandbox is full.<br/><br/>Please retry later or choose another Duniter peer (in <b>Settings</b>).",IDENTITY_NOT_FOUND:"Identity not found",IDENTITY_TX_FAILED:"Error while getting identity's transactions",WOT_PENDING_INVALID_BLOCK_HASH:"Membership not valid.",WALLET_INVALID_BLOCK_HASH:"Your membership application is no longer valid (because it references a block that network peers are cancelled).<br/>You must <a ng-click=\"doQuickFix('renew')\">renew your application for membership</a> to fix this issue.",WALLET_IDENTITY_EXPIRED:"The publication of your identity <b>has expired</b>.<br/>You must <a ng-click=\"doQuickFix('fixIdentity')\">re-issue your identity</a> to resolve this issue.",WALLET_REVOKED:"Your identity has been <b>revoked</b>: neither your pseudonym nor your public key will be used in the future for a member account.",WALLET_HAS_NO_SELF:"Your identity must first have been published, and not expired.",AUTH_REQUIRED:"Authentication required.",AUTH_INVALID_PUBKEY:"The public key does not match the connected account.",AUTH_INVALID_SCRYPT:"Invalid username or password.",AUTH_INVALID_FILE:"Invalid keychain file.",AUTH_FILE_ERROR:"Failed to open keychain file",IDENTITY_ALREADY_CERTIFY:"You have <b>already certified</b> that identity.<br/><br/>Your certificate is still valid (expires {{expiresIn|formatDuration}}).",IDENTITY_ALREADY_CERTIFY_PENDING:"You have <b>already certified</b> that identity.<br/><br/>Your certification is still pending (Deadline for treatment {{expiresIn|formatDuration}}).",UNABLE_TO_CERTIFY_TITLE:"Unable to certify",LOAD_NEWCOMERS_FAILED:"Unable to load new members.",LOAD_PENDING_FAILED:"Unable to load pending registrations.",ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION:"You must <b>be a member</b> in order to perform this action.",ONLY_SELF_CAN_EXECUTE_THIS_ACTION:"You must have <b>published your identity</b> in order to perform this action.",GET_BLOCK_FAILED:"Error while getting block",INVALID_BLOCK_HASH:"Block not found (incorrect hash)",DOWNLOAD_REVOCATION_FAILED:"Error while downloading revocation file.",REVOCATION_FAILED:"Error while trying to revoke the identity.",SALT_OR_PASSWORD_NOT_CONFIRMED:"Wrong secret identifier or password ",RECOVER_ID_FAILED:"Could not recover password",LOAD_FILE_FAILED:"Unable to load file",NOT_VALID_REVOCATION_FILE:"Invalid revocation file (wrong file format)",NOT_VALID_SAVE_ID_FILE:"Invalid credentials backup file (wrong file format)",NOT_VALID_KEY_FILE:"Invalid keychain file (unrecognized format)",EXISTING_ACCOUNT:"Your identifiers correspond to an already existing account, whose <a ng-click=\"showHelpModal('pubkey')\">public key</a> is:",EXISTING_ACCOUNT_REQUEST:"Please modify your credentials so that they correspond to an unused account.",GET_LICENSE_FILE_FAILED:"Unable to get license file",CHECK_NETWORK_CONNECTION:"No peer appears to be accessible.<br/><br/>Please <b>check your Internet connection</b>.",ISSUE_524_TX_FAILED:"Failed to transfer.<br/><br/>A message has been sent to developers to help solve the problem.<b>Thank you for your help</b>."},INFO:{POPUP_TITLE:"Information",CERTIFICATION_DONE:"Identity successfully signed",NOT_ENOUGH_CREDIT:"Not enough credit",TRANSFER_SENT:"Transfer request successfully sent",COPY_TO_CLIPBOARD_DONE:"Copy succeeded",MEMBERSHIP_OUT_SENT:"Membership revocation sent",NOT_NEED_MEMBERSHIP:"Already a member.",IDENTITY_WILL_MISSING_CERTIFICATIONS:"This identity will soon lack certification (at least {{willNeedCertificationCount}}).",IDENTITY_NEED_MEMBERSHIP:"This identity did not send a membership request. She will have to if she wishes to become a member.",REVOCATION_SENT:"Revocation sent successfully",REVOCATION_SENT_WAITING_PROCESS:"Revocation <b>has been sent successfully</b>. It is awaiting processing.",FEATURES_NOT_IMPLEMENTED:"This features is not implemented yet.<br/><br/>Why not to contribute to get it faster? ;)",EMPTY_TX_HISTORY:"No operations to export"},CONFIRM:{POPUP_TITLE:"<b>Confirmation</b>",POPUP_WARNING_TITLE:"<b>Warning</b>",POPUP_SECURITY_WARNING_TITLE:'<i class="icon ion-alert-circled"></i> <b>Security warning</b>',CERTIFY_RULES_TITLE_UID:"Certify {{uid}}",CERTIFY_RULES:'<b class="assertive">Don\'t certify an account</b> if you believe that: <ul><li>1.) the issuers identity might be faked.<li>2.) the issuer already has another certified account.<li>3.) the issuer purposely or carelessly violates rule 1 or 2 (he certifies faked or double accounts).</ul></small><br/>Are you sure you want to certify this identity?',TRANSFER:"<b>Transfer summary:</b><br/><br/><ul><li> - From: <b>{{from}}</b></li><li> - To: <b>{{to}}</b></li><li> - Amount: <b>{{amount}} {{unit}}</b></li><li> - Comment: <i>{{comment}}</i></li></ul><br/><b>Are-you sure you want to do this transfer?</b>",MEMBERSHIP_OUT:"This operation is <b>irreversible</b>.<br/></br/><b>Are you sure you want to terminate your membership?</b>",MEMBERSHIP_OUT_2:"This operation is <b>irreversible</b>!<br/><br/>Are you sure you want to <b>terminate your membership</b>?",LOGIN_UNUSED_WALLET_TITLE:"Typing error?",LOGIN_UNUSED_WALLET:"The account seems to be <b>inactive</b>.<br/><br/>It's probably a <b>typing error</b> when sign in. Please try again, checking that <b>public key is yours<b/>.",FIX_IDENTITY:"The pseudonym <b>{{uid}}</b> will be published again, replacing the old publication that has expired.<br/></br/><b>Are you sure</b> you want to continue?",FIX_MEMBERSHIP:"Your application for membership will be sent.<br/></br/><b>Are you sure?</b>",MEMBERSHIP:"Your membership request will be sent. <br/></br/><b>Are you sure?</b>",RENEW_MEMBERSHIP:"Your membership will be renewed.<br/></br/><b>Are you sure?</b>",REVOKE_IDENTITY:"You will <b>definitely revoke this identity</b>.<br/><br/>The public key and the associated pseudonym <b>will never be used again</b> (for a member account).<br/></br/><b>Are you sure</b> you want to revoke this identity?",REVOKE_IDENTITY_2:"This operation is <b>irreversible</b>!<br/><br/>Are you sure you want to <b>revoke this identity</b>?",NOT_NEED_RENEW_MEMBERSHIP:"Your membership does not need to be renewed (it will only expire in {{membershipExpiresIn|formatDuration}}).<br/></br/><b>Are you sure you</b> want to renew your membership?",SAVE_BEFORE_LEAVE:"Do you want to <b>save your changes</b> before leaving the page?",SAVE_BEFORE_LEAVE_TITLE:"Changes not saved",LOGOUT:"Are you sure you want to logout?",USE_FALLBACK_NODE:"Peer <b>{{old}}</b> unreachable or invalid address.<br/><br/>Do you want to temporarily use the <b>{{new}}</b> node?",ISSUE_524_SEND_LOG:"The transaction was rejected because of a known problem (issue #524) but not reproduced.<br/><br/>To help developers correct this error, do you accept <b>the transmission of your logs</b> per message?<br/><small>(No confidential data is sent)</small>"},DOWNLOAD:{POPUP_TITLE:"<b>Revocation file</b>",POPUP_REVOKE_MESSAGE:"To safeguard your account, please download the <b>account revocation document</b>. It will allow you to cancel your account (in case of account theft, ID, an incorrectly created account, etc.).<br/><br/><b>Please store it in a safe place.</b>"},HELP:{TITLE:"Online help",JOIN:{SECTION:"Join",SALT:'The secret identifier is very important. It is used to hash you password, which in turn is used to calculate your <span class="text-italic">public account key</span> (its number) and the private key to access it.<br/><b>Please remeber this identifier well</b>, because there is no way to recover it when lost.<br/>Furthermore, it cannot be changed without having to create a new account.<br/><br/>A good secret identifier must be sufficiently long (8 characters at the very least) and as original as possible.',PASSWORD:"The password is very important. Together with the secret identifier, it is use to calculate your account number (pblic key) and the private key to access it.<br/><b>Please remember it well</b>, because there is no way to recover it when lost.<br/>Furthermore, it cannot be changed without having to create a new account.<br/><br/>A good password is made (ideally) of at least 8 characters, with at least one capital and one number.",PSEUDO:'A pseudonym is used only when joining as <span class="text-italic">member</span>. It is always associated with a wallet (by its <span class="text-italic">public key</span>).<br/>It is published on the network so that other users may identify it, certify or send money to the account.<br/>A pseudonym must be unique among all members (current and past).'},LOGIN:{SECTION:"Log in",PUBKEY:"Account public key",PUBKEY_DEF:'The public key of the keychain is generated from the entered identifiers (any), but does not correspond to an account already used.<br/><b>Make sure your public key is the same as your account</b>. Otherwise, you will be logged into an account that is probably never used, as the risk of collision with an existing account is very small.<br/><a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography" target="_ system">Learn more about cryptography</a> by public key.',METHOD:"Connection methods",METHOD_DEF:"Several options are available to connect to a portfolios: <br/> - The connection <b>with salt (simple or advanced)</b> mixes your password with the secret identifier, to limit the attempts of piracy<br/> - The connection <b>using public key</b> prevents you from entering your credentials, which you will be asked only when an operation need it.<br/> - The connection <b>using keychain file</b> will read the public and private keys of the account from a file without the need to enter credentials. Several file formats are possible."},GLOSSARY:{SECTION:"Glossary",PUBKEY_DEF:"A public key always identifies a wallet. It may identify a member. In Cesium it is calculated using the secret identifier and the password.",MEMBER:"Member",MEMBER_DEF:'A member is a real and living human, wishing to participate freely to the monitary community. The member will receive universal dividend, according to the period and amount as defined in the <span class="text-italic">currency parameters</span>.',CURRENCY_RULES:"Currency rules",CURRENCY_RULES_DEF:'The currency rules are defined only once, and for all. They set the parameters under which the currency will perform: universal dividend calculation, the amount of certifications needed to become a member, the maximum amount of certifications a member can send, etc.<br/><br/>The parameters cannot be modified because of the use of a <span class="text-italic">Blockchain</span> which carries and executes these rules, and constantly verifies their correct application. <a href="#/app/currency">See current parameters</a>.',BLOCKCHAIN:"Blockchain",BLOCKCHAIN_DEF:'The Blockchain is a decentralised system which, in case of Duniter, serves to carry and execute the <span class="text-italic">currency rules</span>.<br/><a href="http://en.duniter.org/presentation/" target="_blank">Read more about Duniter</a> and the working of its blockchain.',UNIVERSAL_DIVIDEND_DEF:'The Universal Dividend (UD) is the quantity of money co-created by each member, according to the period and the calculation defined in the <span class="text-italic">currency rules</span>.<br/>Every term, the members receive an equal amount of new money on their account.<br/><br/>The UD undergoes a steady growth, to remain fair under its members (current and future), calculated by an average life expectancy, as demonstrated in the Relative Theory of Money (RTM).<br/><a href="http://trm.creationmonetaire.info" target="_system">Read more about RTM</a> and open money.'},TIP:{MENU_BTN_CURRENCY:"Menu <b>{{'MENU.CURRENCY'|translate}}</b> allows discovery of <b>currency parameters</b> and its state.",CURRENCY_WOT:"The <b>member count</b> shows the <b>community's weight and evolution</b>.",CURRENCY_MASS:"Shown here is the <b>total amount</b> currently in circulation and its <b>average distribution</b> per member.<br/><br/>This allows to estimate the <b>worth of any amount</b>, in respect to what <b>others own</b> on their account (on average).",CURRENCY_UNIT_RELATIVE:"The unit used here (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amounts in {{currency|capitalize}} have been devided by the <b>Universal Dividend</b> (UD).<br/><br/><small>This relative unit is <b>relevant</b> because it is stable in contrast to the permanently growing monitary mass.</small>",CURRENCY_CHANGE_UNIT:"The option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> allows to <b>switch the unit</b> to show amounts in <b>{{currency|capitalize}}</b>, undevided by the Universal Dividend (instead of in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;).",CURRENCY_CHANGE_UNIT_TO_RELATIVE:"The option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> allows to <b>switch the unit</b> to show amounts in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;, which is relative to the Universal Dividend (the amount co-produced by each member).",CURRENCY_RULES:"The <b>rules</b> of the currency determine its <b>exact and predictible</b> performance.<br/><br/>As a true DNA of the currency these rules make the monetary code <b>transparent and understandable</b>.",MENU_BTN_NETWORK:"Menu <b>{{'MENU.NETWORK'|translate}}</b> allows discovery of <b>network's state<b>.",NETWORK_BLOCKCHAIN:"All monetary transactions are recoded in a <b>public and tamper proof</b> ledger, generally referred to as the <b>blockchain</b>.",NETWORK_PEERS:"The <b>peers</b> shown here correspond to <b>computers that update and check</b> the blockchain.<br/><br/>The more active peers there are, the more <b>decentralised</b> and therefore trustworhty the currency becomes.",NETWORK_PEERS_BLOCK_NUMBER:"This <b>number</b> (in green) indicates the peer's <b>latest validated block</b> (last page written in the ledger).<br/><br/>Green indicates that the block was equally validated by the <b>majority of other peers</b>.",NETWORK_PEERS_PARTICIPATE:'<b>Each member</b>, equiped with a computer with Internet, <b>can participate, adding a peer</b> simply by <b>installing the Duniter software</b> (free/libre). <a target="_new" href="{{installDocUrl}}" target="_system">Read the installation manual &gt;&gt;</a>.',MENU_BTN_ACCOUNT:"<b>{{'ACCOUNT.TITLE'|translate}}</b> allows access to your account balance and transaction history.",MENU_BTN_ACCOUNT_MEMBER:"Here you can consult your account status, transaction history and your certifications.",WALLET_CERTIFICATIONS:"Click here to reveiw the details of your certifications (given and received).",WALLET_RECEIVED_CERTIFICATIONS:"Click here to review the details of your <b>received certifications</b>.",WALLET_GIVEN_CERTIFICATIONS:"Click here to review the details of your <b>given certifications</b>.",WALLET_BALANCE:"Your account <b>balance</b> is shown here.",WALLET_BALANCE_RELATIVE:"{{'HELP.TIP.WALLET_BALANCE'|translate}}<br/><br/>The used unit (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amount in {{currency|capitalize}} has been divided by the <b>Universal Dividend</b> (UD) co-created by each member.<br/>At this moment, 1 UD equals {{currentUD}} {{currency|capitalize}}.",WALLET_BALANCE_CHANGE_UNIT:"You can <b>change the unit</b> in which amounts are shown in <b><i class=\"icon ion-android-settings\"></i>&nbsp;{{'MENU.SETTINGS'|translate}}</b>.<br/><br/>For example, to display amounts <b>directly in {{currency|capitalize}}</b> instead of relative amounts.",WALLET_PUBKEY:"This is your account public key. You can communicate it to a third party so that it more easily identifies your account.",WALLET_SEND:"Issue a payment in just a few clicks.",WALLET_SEND_NO_MONEY:"Issue a payment in just a few clicks.<br/>(Your balance does not allow this yet)",WALLET_OPTIONS:"Please note that this button allows access to <b>other, less used actions</b>.<br/><br/>Don't forget to take a quick look, when you have a moment!",WALLET_RECEIVED_CERTS:"This shows the list of persons that certified you.",WALLET_CERTIFY:"The button <b>{{'WOT.BTN_SELECT_AND_CERTIFY'|translate}}</b> allows selecting an identity and certifying it.<br/><br/>Only users that are <b>already member</b> may certify others.",WALLET_CERT_STOCK:"Your supply of certifications (to send) is limited to <b>{{sigStock}} certifications</b>.<br/><br/>This supply will replete itself over time, as and when earlier certifications expire.",MENU_BTN_TX_MEMBER:"<b>{{'MENU.TRANSACTIONS'|translate}}</b> allow access to transactions history, and send new payments.",MENU_BTN_TX:"View the history of <b>your transactions</b> here and send new payments.",MENU_BTN_WOT:"The menu <b>{{'MENU.WOT'|translate}}</b> allows searching <b>users</b> of the currency (member or not).",WOT_SEARCH_TEXT_XS:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>The search will start automatically.",WOT_SEARCH_TEXT:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>Then hit <b>Enter</b> to start the search.",WOT_SEARCH_RESULT:"Simply click a user row to view the details sheet.",WOT_VIEW_CERTIFICATIONS:"The row <b>{{'ACCOUNT.CERTIFICATION_COUNT'|translate}}</b> shows how many members members validated this identity.<br/><br/>These certifications testify that the account belongs to <b>a living human</b> and this person has <b>no other member account</b>.",WOT_VIEW_CERTIFICATIONS_COUNT:"There are at least <b>{{sigQty}} certifications</b> needed to become a member and receive the <b>Universal Dividend</b>.",WOT_VIEW_CERTIFICATIONS_CLICK:"Click here to open <b>a list of all certifications</b> given to and by this identity.",WOT_VIEW_CERTIFY:"The button <b>{{'WOT.BTN_CERTIFY'|translate}}</b> allows to add your certification to this identity.",CERTIFY_RULES:"<b>Attention:</b> Only certify <b>real and living persons</b> that do not own any other certified account.<br/><br/>The trust carried by the currency depends on each member's vigilance!",
MENU_BTN_SETTINGS:"The <b>{{'MENU.SETTINGS'|translate}}</b> allow you to configure the Cesium application.<br/><br/>For example, you can <b>change the unit</b> in which the currency will be shown.",HEADER_BAR_BTN_PROFILE:"Click here to access your <b>user profile</b>",SETTINGS_CHANGE_UNIT:"You can <b>change the display unit</b> of amounts by clicking here.<br/><br/>- Deactivate the option to show amounts in {{currency|capitalize}}.<br/>- Activate the option for relative amounts in {{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub> (<b>divided</b> by the current Universal Dividend).",END_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>Welcome to the <b>free economy</b>!",END_NOT_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>If you wish to join the currency {{currency|capitalize}}, simply click <b>{{'LOGIN.CREATE_ACCOUNT'|translate}}</b> below."}},API:{COMMON:{LINK_DOC:"API documentation",LINK_DOC_HELP:"API documentation for developers",LINK_STANDARD_APP:"Standard version",LINK_STANDARD_APP_HELP:"Open standard version of {{'COMMON.APP_NAME'|translate}}"},HOME:{TITLE:"{{'COMMON.APP_NAME'|translate}} API Documentation",MESSAGE:'Welcome to the {{\'COMMON.APP_NAME\'|translate}} <b>API documentation </b>.<br/>Connect your web site to <a href="http://duniter.org" target="_system">Duniter</a> very easily!',MESSAGE_SHORT:'Connect your websites to <a href="http://duniter.org" target="_system">Duniter</a> very easily!',DOC_HEADER:"Available services:"},TRANSFER:{TITLE:"{{'COMMON.APP_NAME'|translate}} - Online payment",TITLE_SHORT:"Online payment",SUMMARY:"Order summary:",AMOUNT:"Amount:",NAME:"Name:",PUBKEY:"Public key of the recipient:",COMMENT:"Order reference:",DEMO:{SALT:"demo",PASSWORD:"demo",PUBKEY:"3G28bL6deXQBYpPBpLFuECo46d3kfYMJwst7uhdVBnD1",HELP:"<b>Demonstration mode</b>: No payment will actually be sent during this simulation.<br/>Please use credentials: <b>{{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}</b>",BAD_CREDENTIALS:"Invalid credentials.<br/>In demonstration mode, credentials should be: {{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}"},INFO:{SUCCESS_REDIRECTING_WITH_NAME:"Payment sent.<br/>Redirect to <b>{{name}}</b>...",SUCCESS_REDIRECTING:"Payment sent.<br/>Redirect to the seller's website...",CANCEL_REDIRECTING_WITH_NAME:"Payment cancelled.<br/>Redirect to <b>{{name}}</b>...",CANCEL_REDIRECTING:"Payment cancelled.<br/>Redirect to the seller's website..."},ERROR:{TRANSFER_FAILED:"Payment failed"}},DOC:{DESCRIPTION_DIVIDER:"Description",URL_DIVIDER:"Calling address",PARAMETERS_DIVIDER:"Parameters",AVAILABLE_PARAMETERS:"Here is the list of al available parameters:",DEMO_DIVIDER:"Try it !",DEMO_HELP:"To test this service, click on this button. The result content will be display below.",DEMO_RESULT:"Result returned by call:",DEMO_SUCCEED:'<i class="icon ion-checkmark"></i> Success!',DEMO_CANCELLED:'<i class="icon ion-close"></i> Canceled by user',INTEGRATE_DIVIDER:"Website integration",INTEGRATE_CODE:"Code:",INTEGRATE_RESULT:"Result preview:",INTEGRATE_PARAMETERS:"Parameters",TRANSFER:{TITLE:"Payments",DESCRIPTION:"From a site (eg online marketplace) you can delegate payment in free currency to Cesium API. To do this, simply open a page at the following address:",PARAM_PUBKEY:"Recipient's public key",PARAM_PUBKEY_HELP:"Recipient's public key (required)",PARAM_AMOUNT:"Amount",PARAM_AMOUNT_HELP:"Transaction amount (required)",PARAM_COMMENT:"Reference (or comment)",PARAM_COMMENT_HELP:"Reference or comment. You will allow for example to identify the payment in the BlockChain.",PARAM_NAME:"Name (of recipient or website)",PARAM_NAME_HELP:'The name of your website. This can be a readable name (eg "My online site"), or a web address (eg "www.MySite.com").',PARAM_REDIRECT_URL:"URL redirection",PARAM_REDIRECT_URL_HELP:'URL redirection after sending payment, after the payment has been sent. Can contain the following strings, which will be replaced by the values of the transaction: "{tx}", "{hash}", "{comment}", "{amount}" and "{pubkey}".',PARAM_CANCEL_URL:"URL if cancelled",PARAM_CANCEL_URL_HELP:'URL in case of cancellation.  Can contain the following strings, which will be replaced: "{comment}", "{amount}" and "{pubkey}".',EXAMPLES_HELP:"Examples of integration:",EXAMPLE_BUTTON:"HTML Button",EXAMPLE_BUTTON_DEFAULT_TEXT:"Pay in {{currency|abbreviate}}",EXAMPLE_BUTTON_DEFAULT_STYLE:"Custom style",EXAMPLE_BUTTON_TEXT_HELP:"Button text",EXAMPLE_BUTTON_BG_COLOR:"Background color",EXAMPLE_BUTTON_BG_COLOR_HELP:"eg: #fbc14c, yellow, lightgrey, rgb(180,180,180)",EXAMPLE_BUTTON_FONT_COLOR:"Font color",EXAMPLE_BUTTON_FONT_COLOR_HELP:"eg: black, orange, rgb(180,180,180)",EXAMPLE_BUTTON_TEXT_ICON:"Icon",EXAMPLE_BUTTON_TEXT_WIDTH:"Width",EXAMPLE_BUTTON_TEXT_WIDTH_HELP:"eg: 200px, 50%",EXAMPLE_BUTTON_ICON_NONE:"No icon",EXAMPLE_BUTTON_ICON_DUNITER:"Duniter logo",EXAMPLE_BUTTON_ICON_CESIUM:"Cesium logo",EXAMPLE_BUTTON_ICON_G1_COLOR:"1 logo",EXAMPLE_BUTTON_ICON_G1_BLACK:"1 logo (outline)"}}}}),e.translations("es-ES",{COMMON:{APP_NAME:"Cesium",APP_VERSION:"v{{version}}",APP_BUILD:"fecha : {{build}}",PUBKEY:"Llave publica",MEMBER:"Miembro",BLOCK:"Bloque",BTN_OK:"OK",BTN_YES:"Si",BTN_NO:"No",BTN_SEND:"Mandar",BTN_SEND_MONEY:"Hacer una transferencia",BTN_SEND_MONEY_SHORT:"Transferencia",BTN_SAVE:"Registrar",BTN_YES_SAVE:"Si, Registrar",BTN_YES_CONTINUE:"Si, Continuar",BTN_SHOW:"Ver",BTN_SHOW_PUBKEY:"Ver la llave",BTN_RELATIVE_UNIT:"Visualizar en unidad relativa ?",BTN_BACK:"Regreso",BTN_NEXT:"Siguiente",BTN_CANCEL:"Anular",BTN_CLOSE:"Cerrar",BTN_LATER:"Ms tarde",BTN_LOGIN:"Connectarse",BTN_LOGOUT:"Desconexin",BTN_ADD_ACCOUNT:"Nueva cuenta",BTN_SHARE:"Compartir",BTN_EDIT:"Modificar",BTN_DELETE:"Suprimir",BTN_ADD:"Aadir",BTN_SEARCH:"Buscar",BTN_REFRESH:"Actualisar",BTN_RETRY:"Empezar de nuevo",BTN_START:"Empezar",BTN_CONTINUE:"Continuar",BTN_CREATE:"Crear",BTN_UNDERSTOOD:"He entendido",BTN_OPTIONS:"Opcines",BTN_HELP_TOUR:"Visita guiada",BTN_HELP_TOUR_SCREEN:"Descubrir esta pantalla",BTN_DOWNLOAD:"Descargar",BTN_DOWNLOAD_ACCOUNT_STATEMENT:"Descargar el estado de cuenta",BTN_MODIFY:"Cambio",CHOOSE_FILE:"Publique archivo<br/>o haga clic para seleccionar la",DAYS:"Dias",NO_ACCOUNT_QUESTION:"Todava no miembre ? Creer una cuenta !",SEARCH_NO_RESULT:"Ninguno resultado encontrado",LOADING:"Espera por favor...",SEARCHING:"Bsqueda en proceso...",FROM:"De",TO:"A",COPY:"Copiar",LANGUAGE:"Idioma",UNIVERSAL_DIVIDEND:"Dividendo universal",UD:"DU",DATE_PATTERN:"DD/MM/YYYY HH:mm",DATE_FILE_PATTERN:"YYYY-MM-DD",DATE_SHORT_PATTERN:"DD/MM/YY",DATE_MONTH_YEAR_PATTERN:"MM/YYYY",EMPTY_PARENTHESIS:"(vaco)",UID:"Seudnimo",ENABLE:"Activado",DISABLE:"Desactivado",RESULTS_LIST:"Resultados :",RESULTS_COUNT:"{{count}} resultados",EXECUTION_TIME:"ejecutado en {{duration|formatDurationMs}}",SHOW_VALUES:"Publicar los valores no codificados ?",POPOVER_ACTIONS_TITLE:"Opcines",POPOVER_FILTER_TITLE:"Filtros",SHOW_MORE:"Publicar ms",SHOW_MORE_COUNT:"(lmite actual a {{limit}})",POPOVER_SHARE:{TITLE:"Compartir",SHARE_ON_TWITTER:"Compartir sobre Twitter",SHARE_ON_FACEBOOK:"Compartir sobre Facebook",SHARE_ON_DIASPORA:"Compartir sobre Diaspora*",SHARE_ON_GOOGLEPLUS:"Compartir sobre Google+"}},SYSTEM:{PICTURE_CHOOSE_TYPE:"Eligir la fuente :",BTN_PICTURE_GALLERY:"Galera",BTN_PICTURE_CAMERA:"<b>Cmara</b>"},MENU:{HOME:"Recepcin",WOT:"Anuario",CURRENCY:"Moneda",ACCOUNT:"Mi cuenta",TRANSFER:"Transferencia",SCAN:"Escner",SETTINGS:"Configuracines",NETWORK:"Red",TRANSACTIONS:"Mis operacines"},ABOUT:{TITLE:"A propsito ",LICENSE:"Aplicacin <b>libre</b> (licencia GNU GPLv3).",LATEST_RELEASE:"Hay una <b>versin ms nueva</b> de {{'COMMON.APP_NAME' | translate}} (<b>v{{version}}</b>)",PLEASE_UPDATE:"Por favor actualice {{'COMMON.APP_NAME' | translate}} (ltima versin: <b>v{{version}}</b>)",CODE:"Codigo fuente :",DEVELOPERS:"Desarrollado por :",FORUM:"Foro :",PLEASE_REPORT_ISSUE:"No duda a informarnos de las anomalas encontradas",REPORT_ISSUE:"Informar de un problema"},HOME:{TITLE:"Cesium",WELCOME:"Bienvenida en la aplicacin Cesium !",MESSAGE:"Sigue sus cuentas de {{currency|abbreviate}} con facilidad",BTN_CURRENCY:"Explorar la moneda",BTN_ABOUT:"A propsito",BTN_HELP:"Ayuda en lnea",REPORT_ISSUE:"anomala",NOT_YOUR_ACCOUNT_QUESTION:'Usted no es dueo de la cuenta <<b><i class="ion-key"></i> {{pubkey|formatPubkey}}</b>?',BTN_CHANGE_ACCOUNT:"Desconectar esta cuenta",CONNECTION_ERROR:'Nodo <b>{{servidor}}</b> inalcanzable o direccin no vlida.<br/><br/>Compruebe su conexin a Internet, o nodo de conmutacin <a class="positive" ng-click="doQuickFix(\'settings\')">en los parmetros</a>.'},SETTINGS:{TITLE:"Configuracines",NETWORK_SETTINGS:"Red",PEER:"Direccin del nodo Duniter",PEER_CHANGED_TEMPORARY:"Direccin utiliza temporalmente",USE_LOCAL_STORAGE:"Activar el almacenamiento local",USE_LOCAL_STORAGE_HELP:"Permitir el ahorro de almacenamiento local",ENABLE_HELPTIP:"Activar bocadillos contextuales de ayuda",ENABLE_UI_EFFECTS:"Activar los efectos visuales",HISTORY_SETTINGS:"Operaciones de cuentas",DISPLAY_UD_HISTORY:"Publicar los dividendos producidos ?",AUTHENTICATION_SETTINGS:"Autenticacin",KEEP_AUTH:"Caducidad de la autenticacin",KEEP_AUTH_HELP:"Definir cundo se borra la autenticacin de la memoria",KEEP_AUTH_OPTION:{NEVER:"Despues de cada operacion",SECONDS:"Despus de {{value}} segundos de inactividad",MINUTE:"Despus de {{value}} minuto de inactividad",MINUTES:"Despus de {{value}} minutos de inactividad",HOUR:"Despus de {{value}} hora de inactividad",ALWAYS:"Al final de la sesin"},REMEMBER_ME:"Recordarme",REMEMBER_ME_HELP:"Siempre mantenerse conectado (no recomendado).",PLUGINS_SETTINGS:"Extensines",BTN_RESET:"Restaurar los valores por defecto",EXPERT_MODE:"Activar el modo experto",EXPERT_MODE_HELP:"Permite una visualizacin ms detallada",POPUP_PEER:{TITLE:"Nodo Duniter",HOST:"Direccin",HOST_HELP:"Direccin : servidor:puerto",USE_SSL:"Segura ?",USE_SSL_HELP:"(Cifrado SSL)",BTN_SHOW_LIST:"Lista de nodos"}},BLOCKCHAIN:{HASH:"Hash : {{hash}}",VIEW:{HEADER_TITLE:"Bloque #{{number}}-{{hash|formatHash}}",TITLE_CURRENT:"Bloque corriente",TITLE:"Bloque #{{number|formatInteger}}",COMPUTED_BY:"Calculado por el nodo de",SHOW_RAW:"Ver el fichero en bruto",TECHNICAL_DIVIDER:"Informacines tcnicas",VERSION:"Versin del formato",HASH:"Hash calculado",UNIVERSAL_DIVIDEND_HELP:"Moneda co-producida por cada uno de los {{membersCount}} miembros",EMPTY:"Ninguno dato en este bloque",POW_MIN:"Dificultad mnima",POW_MIN_HELP:"Dificultad impuesta por el clculo del hash",DATA_DIVIDER:"Datos",IDENTITIES_COUNT:"Nuevas identidades",JOINERS_COUNT:"Nuevos miembros",ACTIVES_COUNT:"Renovacines",ACTIVES_COUNT_HELP:"Miembros que han renovado sus adhesines ",LEAVERS_COUNT:"Miembros salientes",LEAVERS_COUNT_HELP:"Miembros que no quieran certificacin",EXCLUDED_COUNT:"Miembros excluidos",EXCLUDED_COUNT_HELP:"Antiguos miembros excluidos por no renovacin o falta de certificacines",REVOKED_COUNT:"Identidades revocadas",REVOKED_COUNT_HELP:"Estas cuentas no podrn estar miembros",TX_COUNT:"Transaccines",CERT_COUNT:"Certificacines",TX_TO_HIMSELF:"Operacin de cambio",TX_OUTPUT_UNLOCK_CONDITIONS:"Condicines de desbloqueo",TX_OUTPUT_OPERATOR:{AND:"y",OR:"o"},TX_OUTPUT_FUNCTION:{SIG:"<b>Firma</b> de ",XHX:"<b>Contrasea</b>, dont SHA256 =",CSV:"Bloqueado durante",CLTV:"Bloqueado hasta"}},LOOKUP:{TITLE:"Bloques",NO_BLOCK:"Ningun bloque",LAST_BLOCKS:"ltimos bloques :",BTN_COMPACT:"Compactar"}},CURRENCY:{VIEW:{TITLE:"Moneda",TAB_CURRENCY:"Moneda",TAB_WOT:"Red de confianza",TAB_NETWORK:"Red",TAB_BLOCKS:"Bloques",CURRENCY_SHORT_DESCRIPTION:"{{currency|capitalizar}} es un <b>moneda libre</b>, iniciado {{firstBlockTime|formatFromNow}}. Ella actualmente <b>{{N}} miembros</b>, que producen y recibir un <a ng-click=\"showHelpModal('ud')\">Dividendo universal</a> (DU), cada {{dt|formatPeriod}}.",NETWORK_RULES_DIVIDER:"Reglas de la red",CURRENCY_NAME:"Nombre de la moneda",MEMBERS:"Nmero de miembros",MEMBERS_VARIATION:"variacines el ltimo DU",MONEY_DIVIDER:"Moneda",MASS:"Masa monetaria",SHARE:"Masa por miembro",UD:"Dividendo universal",C_ACTUAL:"Crecimiento actual",MEDIAN_TIME:"Hora de la blockchain",POW_MIN:"Nivel mnimo de dificultad de clculo",MONEY_RULES_DIVIDER:"Reglas de la moneda",C_RULE:"Crecimiento terico objetivo",UD_RULE:"Clculo del dividendo universal",DT_REEVAL:"Periodo de revalorizacin del DU",REEVAL_SYMBOL:"reval",DT_REEVAL_VALUE:"Todos los <b>{{dtReeval|formatDuration}}</b> ({{dtReeval/86400}} {{'COMMON.DAYS'|translate}})",UD_REEVAL_TIME0:"Fecha de la primera revalorizacin",SIG_QTY_RULE:"Nmero de certificacines requeridas para estar miembro",SIG_STOCK:"Nmero mximo de certificacines emitidas por miembros",SIG_PERIOD:"Plazo mnimo de espera entre 2 certificacines sucesivas emitidas por la misma persona",SIG_WINDOW:"Plazo lmite para toma en cuenta de una certificacin",SIG_VALIDITY:"Duracin de una certificacin que se ha tenido en cuenta.",MS_WINDOW:"Duracin lmite para toma en cuenta de una adhesin",MS_VALIDITY:"Duracin de una adhesin que se ha tenido en cuenta",STEP_MAX:"Distancia mxima entre un nuevo entrante y los miembros referentes",WOT_RULES_DIVIDER:"Regla de la red de confianza",SENTRIES:"Nmero de certificacines necesarias para hacerse miembro referente",SENTRIES_FORMULA:"Nmero de certificacines necesarias para hacerse miembro referente (frmula)",XPERCENT:"Porcentaje mnimo de miembros referentes a alcanzar para respetar la regla de distancia",AVG_GEN_TIME:"Tiempo medio entre dos bloques",CURRENT:"actual",MATH_CEILING:"TECHO",DISPLAY_ALL_RULES:"Ver todas las reglas?",BTN_SHOW_LICENSE:"Ver la licencia",WOT_DIVIDER:"Red de confianza"},LICENSE:{TITLE:"License de la monnaie",BTN_DOWNLOAD:"Tlcharger le fichier",NO_LICENSE_FILE:"Fichier de license non trouv."}},NETWORK:{VIEW:{MEDIAN_TIME:"Hora de la blockchain",LOADING_PEERS:"Carga de los nodos...",NODE_ADDRESS:"Direccin :",SOFTWARE:"Software :",WARN_PRE_RELEASE:"prelanzamiento (ltima versin estable : <b>{{version}}</b>)",WARN_NEW_RELEASE:"Versin <b>{{version}}</b> disponible",WS2PID:"ID :",POW_PREFIX:"Prfixe de preuve de travail :",ENDPOINTS:{BMAS:"Endpoint seguro (SSL)",BMATOR:"TOR endpoint",WS2P:"WS2P endpoint",ES_USER_API:"Nodo de datos Cesium+"}},INFO:{ONLY_SSL_PEERS:"La visualizacin de los nodos no SSL es deteriorada, porque Cesium funciona en modo HTTPS."}},PEER:{PEERS:"Nodos",SIGNED_ON_BLOCK:"Firmado sobre el bloque",MIRROR:"espejo",MIRRORS:"Nodos espejos",PEER_LIST:"Lista de nodos",MEMBERS:"Nodos miembros",ALL_PEERS:"Todos los nodos",DIFFICULTY:"Dificultad",API:"API",CURRENT_BLOCK:"Bloque #",POPOVER_FILTER_TITLE:"Filtro",OFFLINE:"Nodos fuera de lnea",BTN_SHOW_PEER:"Ver nodo",VIEW:{TITLE:"Nodo",OWNER:"Propiedad de ",SHOW_RAW_PEERING:"Ver la tarjeta de red",SHOW_RAW_CURRENT_BLOCK:"Ver el ltimo bloque (formato sin formato)",LAST_BLOCKS:"Bloques recientes",KNOWN_PEERS:"Nodos conocidos :",GENERAL_DIVIDER:"Informacines generales",ERROR:{LOADING_TOR_NODE_ERROR:"Could not get peer data, using the TOR network.",LOADING_NODE_ERROR:"Could not get peer data"}}},WOT:{SEARCH_HELP:"Bsqueda (seudnimo o llave publica)",SEARCH_INIT_PHASE_WARNING:"Durante la etapa de preinscripcin, la bsqueda de las inscripcines en espera <b>puede ser largo</b>. Gracias por su paciencia...",REGISTERED_SINCE:"Registrado en",REGISTERED_SINCE_BLOCK:"Registrado al bloque #",NO_CERTIFICATION:"Ninguna certificacin validada",NO_GIVEN_CERTIFICATION:"Ninguna certificacin emitida",NOT_MEMBER_PARENTHESIS:"(no miembro)",IDENTITY_REVOKED_PARENTHESIS:"(identidad revocada)",MEMBER_PENDING_REVOCATION_PARENTHESIS:"(revocacin en proceso)",EXPIRE_IN:"Expiracin",NOT_WRITTEN_EXPIRE_IN:"Fecha lmite<br/>de tratamiento",EXPIRED:"Expirado",PSEUDO:"Seudnimo",SIGNED_ON_BLOCK:"Emitida al bloque #{{block}}",WRITTEN_ON_BLOCK:"Escrita al bloque #{{block}}",GENERAL_DIVIDER:"Informacines generales",NOT_MEMBER_ACCOUNT:"Cuenta no miembro",NOT_MEMBER_ACCOUNT_HELP:"Se trata de un simple monedero, sin solicitud de adhesin en espera.",TECHNICAL_DIVIDER:"Informacines tcnicas",BTN_CERTIFY:"Certificar",BTN_YES_CERTIFY:"Si, certificar",BTN_SELECT_AND_CERTIFY:"Nueva certificacin",ACCOUNT_OPERATIONS:"Operaciones de cuenta",VIEW:{POPOVER_SHARE_TITLE:"Identidad {{title}}"},LOOKUP:{TITLE:"Anuario",NEWCOMERS:"Nuevos miembros :",NEWCOMERS_COUNT:"{{count}} miembros",PENDING:"Inscripcines en espera :",PENDING_COUNT:"{{count}} inscripcines en espera",REGISTERED:"Inscrito {{sigDate | formatFromNow}}",MEMBER_FROM:"Miembro desde {{memberDate|formatFromNowShort}}",BTN_NEWCOMERS:"Nuevos miembros",BTN_PENDING:"Inscripcines en espera",SHOW_MORE:"Publicar ms",SHOW_MORE_COUNT:"(lmite actual a {{limit}})",NO_PENDING:"Ninguna inscripcin en espera.",NO_NEWCOMERS:"Ningun miembro."},CONTACTS:{TITLE:"Contactos"},MODAL:{TITLE:"Bsqueda"},CERTIFICATIONS:{TITLE:"{{uid}} - Certificacines",SUMMARY:"Certificacines recibidas",LIST:"Detalle de las certificacines recibidas",PENDING_LIST:"Certificacines en espera de tratamiento",RECEIVED:"Certificacines recibidas",RECEIVED_BY:"Certificacines recibidas por {{uid}}",ERROR:"Certificacines recibidas por error",SENTRY_MEMBER:"Miembro referente"},OPERATIONS:{TITLE:"{{uid}} - Operaciones"},GIVEN_CERTIFICATIONS:{TITLE:"{{uid}} - Certificacines emitidas",SUMMARY:"Certificacines emitidas",LIST:"Detalle de las certificacines emitidas",PENDING_LIST:"Certificacines en espera de tratamiento",SENT:"Certificacines emitidas",SENT_BY:"Certificacines emitidas por {{uid}}",ERROR:"Certificacines emitidas por error"}},LOGIN:{TITLE:'<i class="icon ion-locked"></i> Conexin',SALT:"Identificador secreto",SALT_HELP:"Identificador secreto",SHOW_SALT:"Visualizar el identificador secreto ?",PASSWORD:"Contrasea",PASSWORD_HELP:"Contrasea",PUBKEY_HELP:"Ejemplo :  AbsxSY4qoZRzyV2irfep1V9xw1EMNyKJw2TkuVD4N1mv ",NO_ACCOUNT_QUESTION:"Ahora no tiene cuenta ?",CREATE_ACCOUNT:"Creer una cuenta",FORGOTTEN_ID:"Contrasea olvidada ?",AUTO_LOGOUT:{TITLE:"Informacin",MESSAGE:'<i class="ion-android-time"></i> Has sido <b>fuera de lnea</b> de forma automtica, despus de una inactividad prolongada.',BTN_RELOGIN:"Me vuelva a conectar",IDLE_WARNING:"Se le desconectar... {{countdown}}"}},AUTH:{TITLE:'<i class="icon ion-locked"></i> AAutenticacin',METHOD_LABEL:"Mtodo de autenticacin",BTN_AUTH:"Autenticar",SCRYPT_FORM_HELP:"Por favor autentcate :"},ACCOUNT:{TITLE:"Mi cuenta",BALANCE:"Saldo",LAST_TX:"ltima transaccin",BALANCE_ACCOUNT:"Saldo de la cuenta",NO_TX:"Ninguna transaccin",SHOW_MORE_TX:"Publicar ms",SHOW_ALL_TX:"Publicar todo",TX_FROM_DATE:"(lmite actual a {{fromTime|formatFromNowShort}})",PENDING_TX:"Transaccines en proceso de tratamiento",ERROR_TX:"Transaccines no ejecutadas",ERROR_TX_SENT:"Transaccines mandadas",PENDING_TX_RECEIVED:"Tansacciones en espera de la recepcin",EVENTS:"Eventos",WAITING_MEMBERSHIP:"Solicitud de adhesin mandada. En espera de aceptacin.",WAITING_CERTIFICATIONS:"Debe obtener {{needCertificationCount}} certificacin(es) para estar miembro.",WILL_MISSING_CERTIFICATIONS:"Pronto, va a <b>faltar certificacin</b> (al menos {{willNeedCertificationCount}} es necesario)",WILL_NEED_RENEW_MEMBERSHIP:"Su adhesin como miembro <b>va a expirar {{membershipExpiresIn|formatDurationTo}}</b>. Piensa a <a ng-click=\"doQuickFix('renew')\">renovar su adhesin</a> mientras tanto.",NEED_RENEW_MEMBERSHIP:"No esta miembro, porque su adhesin <b>ha expirado</b>. Pensez  <a ng-click=\"doQuickFix('renew')\">renovar su adhesin</a>.",NO_WAITING_MEMBERSHIP:"No hay adhesin como miembro en espera. Si desea <b>convertirse en miembro</b>, por favor <a ng-click=\"doQuickFix('membership')\">enve su adhesin como miembro</a>.",CERTIFICATION_COUNT:"Certificacins recibidas",CERTIFICATION_COUNT_SHORT:"Certificacins",SIG_STOCK:"Certificacins mandadas",BTN_RECEIVE_MONEY:"Cobrar",BTN_SELECT_ALTERNATIVES_IDENTITIES:"Cambiar a otra identidad ...",BTN_MEMBERSHIP_IN_DOTS:"Estar miembro...",BTN_MEMBERSHIP_RENEW:"Renovar la adhesin",BTN_MEMBERSHIP_RENEW_DOTS:"Renovar la adhesin...",BTN_MEMBERSHIP_OUT_DOTS:"Parar la adhesin...",BTN_SEND_IDENTITY_DOTS:"Publicar su identidad...",BTN_SECURITY_DOTS:"Cuenta y securidad...",BTN_SHOW_DETAILS:"Publicar las infos tcnicas",LOCKED_OUTPUTS_POPOVER:{TITLE:"Importe bloqueado",DESCRIPTION:"Aqu est las condicines de desbloqueo de este importe :",DESCRIPTION_MANY:"Esta transaccin es compuesta de varias partes, cuyas tiene las condicines de desbloqueo :",LOCKED_AMOUNT:"Condicines por el importe :"},NEW:{TITLE:"Inscripcin",INTRO_WARNING_TIME:"Crear una cuenta en {{name|capitalize}} es muy simple. Sin embargo, por favor tome el tiempo suficiente para tomar correctamente este paso (no olvidar los identificadores, contraseas, etc.).",INTRO_WARNING_SECURITY:"Asegrate de que el equipo que se utiliza actualmente (ordenador, tableta, telfono) <b>es seguro y digno de confianza</b>.",INTRO_WARNING_SECURITY_HELP:"Actualizaciones de antivirus, firewall activado, sesin protegidos por contrasea o cdigo PIN, etc.",INTRO_HELP:"Haga clic en <b>{{'COMMON.BTN_START'|translate}}</b> para iniciar la creacin de la cuenta. Se le guiar paso a paso.",REGISTRATION_NODE:"Su registro ser grabado a travs del nodo Duniter <b>{{server}}</b>, que luego se transmiti al resto del sistema de moneda.",REGISTRATION_NODE_HELP:"Si usted no confa en este nodo, <a ng-click=\"doQuickFix('settings')\">cambie la configuracin</a> de Cesium.",SELECT_ACCOUNT_TYPE:"Elegir el tipo de cuenta para crear:",MEMBER_ACCOUNT:"Cuenta miembro",MEMBER_ACCOUNT_TITLE:"Crear de un cuenta de miembro",MEMBER_ACCOUNT_HELP:"Si ya no est inscrito como un individuo (Solamente una cuenta posible por individuo).",WALLET_ACCOUNT:"Simple monedero",WALLET_ACCOUNT_TITLE:"Crear de un simple cuenta",WALLET_ACCOUNT_HELP:"Simple cartera por todos otros casos, por ejemplo si necesita una cuenta suplementaria.<br/>No Dividendo Universal sera creido por esta cuenta.",SALT_WARNING:"Elige su identificador secreto.<br/>Se solicitar cada vez se conectar con esta cuenta.<br/><br/><b>Retiene bien este identificador secreto</b>.<br/>En caso de prdida, nadie podr acceder su cuenta !",PASSWORD_WARNING:"Elige su contrasea.<br/>Se solicitar cada vez se conectar con esta cuenta.<br/><br/><b>Retiene bien esta contrasea</b>.<br/>En caso de prdida, nadie podr acceder su cuenta !",PSEUDO_WARNING:"Elige un seudnimo.<br/>Sirbe a los otros miembros para encontrarse ms fcilmente.<br/><br/>No debe contener <b>nni espacio ni carcter accentuado</b>.<div class='hidden-xs'><br/>Exemple : <span class='gray'>SophieDupond, MarcelChemin, etc.</span>",PSEUDO:"Seudnimo",PSEUDO_HELP:"Seudnimo",SALT_CONFIRM:"Confirmacin",SALT_CONFIRM_HELP:"Confirmacin de el identificador secreto",PASSWORD_CONFIRM:"Confirmacin",PASSWORD_CONFIRM_HELP:"Confirmacin de la contrasea",SLIDE_6_TITLE:"Confirmacin :",COMPUTING_PUBKEY:"Clculo en proceso...",LAST_SLIDE_CONGRATULATION:"<b>Bravo !</b> Ha introducido todas las informacines necesarias.<br/><b>Puede mandar la solicitud</b> de creacin de su cuenta.</b><br/><br/>Por su informacin, la llave pblica ms abajo identificar su cuenta futura.<br/>Podr estar comunicada a terceros para recibir sus pagos.<br/>Sin embargo, <b>no es til</b> anotarla aqu.",CONFIRMATION_MEMBER_ACCOUNT:'<b class="assertive">Advertencia :</b> el identificador secreto, la contrasea y el seudnimo no podrn estar modificados.<br/><b>Asegurase siempre se los recordar !</b><br/><br/><b>Est usted seguro</b> querer mandar esta solicitud de inscripcin ?',CONFIRMATION_WALLET_ACCOUNT:'<b class="assertive">Advertencia :</b> el identificador secreto y la contrasea no podrn estar modificados.<br/><b>Asegurase siempre se los recordar !</b><br/><br/><b>Est usted seguro</b> querer continuar con estos identificadores ?',CHECKING_PSEUDO:"Comprobacin de disponibilidad...",PSEUDO_AVAILABLE:"Este nombre est disponible",PSEUDO_NOT_AVAILABLE:"Este nombre de usuario no est disponible",INFO_LICENSE:"Para unirse a la moneda, le pedimos que leer y aceptar esta licencia.",BTN_ACCEPT:"Acepto",BTN_ACCEPT_LICENSE:"Acepto la licencia"},POPUP_REGISTER:{TITLE:"Elige un seudnimo",HELP:"Un seudnimo es obligatorio para estar membre."},SELECT_IDENTITY_MODAL:{TITLE:"Seleccin de identidad",HELP:'Se han enviado varias <b>identidades diferentes</b> para la clave pblica <span class="gray"><i class="ion-key"></i>{{pubkey | formatPubkey}}</span>.<br/>Por favor, selecciona la carpeta para usar:'},SECURITY:{ADD_QUESTION:"Aadir una pregunta personalizada ",BTN_CLEAN:"Vaciar",BTN_RESET:"Reinicializar",DOWNLOAD_REVOKE:"Salvar un fichero de revocacin",HELP_LEVEL:"Para generar un fichero de salvaguarda de sus identificadores, elige <strong> al menos {{nb}} preguntas :</strong>",LEVEL:"Nivel de seguridad",LOW_LEVEL:'Bajo <span class="hidden-xs">(2 preguntas mnimo)</span>',MEDIUM_LEVEL:'Medio <span class="hidden-xs">(4 preguntas mnimo)</span>',QUESTION_1:"Como se llamaba su mejor amigo cuando estuvo adolescente ?",QUESTION_2:"Como se llamaba su primer animal de compaa ?",QUESTION_3:"Cul es el primer plato ha aprendido a cocinar ?",QUESTION_4:"Cul es la primera pelcula ha visto al cine ?",QUESTION_5:"Adonde fue la primera vez ha cogido el avin ?",QUESTION_6:"Como se llamaba su preferido maestro a la escuela primaria ?",QUESTION_7:"Cul sera para usted lo mejor oficio ?",QUESTION_8:"Cul es el libro para nios usted prefiere ?",QUESTION_9:"Cul fue el modelo de su primero vehculo ?",QUESTION_10:"Cul fue su sobrenombre cuando estuvo nio/a ?",QUESTION_11:"Cul fue su personaje o actor/actriz preferido/a cuando estuvo estudiante ?",QUESTION_12:" Cul fue su cantante o grupo preferido/a cuando estuvo estudiante ?",QUESTION_13:"En qu ciudad sus padres se han encontrado ?",QUESTION_14:"Como se llamaba su primero/a jefe ?",QUESTION_15:"Como se llama la calle donde creci ?",QUESTION_16:"Como se llama la primera playa donde se ba ?",QUESTION_17:"Cul es el primero lbum se compr ?",QUESTION_18:"Cul es el nombre de su equipo de deporte preferido ?",QUESTION_19:"Cul fue el oficio de su abuelo ?",RECOVER_ID:"Recuperar sus identificadores",REVOCATION_WITH_FILE:"Revocar una identidad a partir de un fichero",REVOCATION_WITH_FILE_DESCRIPTION:"Si ha perdido las credenciales de su cuenta de miembro de forma permanente (o la seguridad de la cuenta se ve comprometida), puede usar <b>el archivo de revocacin de la cuenta</b> para forzar publicacin final de la web de confianza.",REVOCATION_WITH_FILE_HELP:"Para <b>revocar permanentemente</b> una cuenta de miembro, arrastre el archivo de revocacin en el cuadro siguiente o haga clic en el cuadro para buscar un archivo.",REVOCATION_FILENAME:"revocation-{{uid}}-{{pubkey|formatPubkey}}-{{currency}}.txt",REVOCATION_WALLET:"Revocar esta identidad",SAVE_ID:"Salvar sus identificadores",STRONG_LEVEL:'Alto <span class="hidden-xs ">(6 preguntas mnimo)</span>',TITLE:"Cuenta y seguridad"},FILE_NAME:"{{currency}} - Encuesta cuenta {{pubkey|formatPubkey}} a {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Fecha",AMOUNT:"Cantidad",COMMENT:"Comentario"}},TRANSFER:{TITLE:"Transferencia",SUB_TITLE:"Hacer una transferencia",FROM:"De",TO:"A",AMOUNT:"Importe",AMOUNT_HELP:"Importe",COMMENT:"Comentario",COMMENT_HELP:"Comentario",BTN_SEND:"Mandar",BTN_ADD_COMMENT:"Aadir un comentario",WARN_COMMENT_IS_PUBLIC:"Tenga en cuenta que los <b>comentarios son pblicos</b> (sin encriptar).",MODAL:{TITLE:"Transferencia"}},ERROR:{POPUP_TITLE:"Error",UNKNOWN_ERROR:"Error desconocida",CRYPTO_UNKNOWN_ERROR:"Su navegador parece incompatible con las funcionalidades de cryptografa.",EQUALS_TO_PSEUDO:"Debe ser diferente del seudnimo.",EQUALS_TO_SALT:"Debe ser diferente del identificador secreto.",FIELD_REQUIRED:"Campo obligatorio.",FIELD_TOO_SHORT:"Valor demasiado corta.",FIELD_TOO_SHORT_WITH_LENGTH:"Valor demasiado corta ({{minLength}} carcteres mn)",FIELD_TOO_LONG:"Valor demasiado larga",FIELD_TOO_LONG_WITH_LENGTH:"Valor demasiado larga ({{maxLength}} carcteres mx)",FIELD_MIN:"Valor mnimo : {{min}}",FIELD_MAX:"Valor mximo : {{max}}",FIELD_ACCENT:"Carcteres acentuados y comas no autorizados",FIELD_NOT_NUMBER:"Valor numrica esperada",FIELD_NOT_INT:"Valor entera esperada",FIELD_NOT_EMAIL:"Email no es vlida",PASSWORD_NOT_CONFIRMED:"No corresponde a la contrasea.",SALT_NOT_CONFIRMED:"No corresponde al identificador secreto.",SEND_IDENTITY_FAILED:"Fracaso de la inscripcin.",SEND_CERTIFICATION_FAILED:"Fracaso de la certificacin.",NEED_MEMBER_ACCOUNT_TO_CERTIFY:"No puede realizar certificacin, porque su cuenta no <b>est miembro</b>.",NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF:"No puede realizar certificacin, porque su cuenta ya no est miembro.<br/><br/>Todava se falta certificacines, o ahora no estn validada.",NOT_MEMBER_FOR_CERTIFICATION:"Su cuenta todava no est miembro.",IDENTITY_TO_CERTIFY_HAS_NO_SELF:"Cuenta no certificable. Ninguna solicitud de adhesin fue hecho, o no fue renovada.",LOGIN_FAILED:"Error durante la authentificacin.",LOAD_IDENTITY_FAILED:"Error de carga de la identidad.",LOAD_REQUIREMENTS_FAILED:"Error de carga de las condicines de la identidad.",SEND_MEMBERSHIP_IN_FAILED:"Fracaso en el intento de entrada en la comunidad.",SEND_MEMBERSHIP_OUT_FAILED:"Fracaso en la interrupcin de adhesin.",REFRESH_WALLET_DATA:"Fracaso en la actualizacin del monedero.",GET_CURRENCY_PARAMETER:"Fracaso en la recuperacin de las reglas de moneda.",GET_CURRENCY_FAILED:"Carga de la moneda imposible. Por favor, intenta ms tarde.",SEND_TX_FAILED:"Fracaso en la transferencia.",ALL_SOURCES_USED:"Por favor, espera el clculo del bloque siguiente (Todas sus fuentes de moneda fueron utilizada).",NOT_ENOUGH_SOURCES:"No lo bastante cambio para mandar este importe en una sola transaccin.<br/>Importe mximo : {{amount}} {{unit}}<sub>{{subUnit}}</sub>.",ACCOUNT_CREATION_FAILED:"Fracaso en la creacin de la cuenta miembro.",RESTORE_WALLET_DATA_ERROR:"Fracaso en la recarga de las configuracin desde el almacenamiento local",LOAD_WALLET_DATA_ERROR:"Fracaso en la carga de los datos del monedero.",COPY_CLIPBOARD_FAILED:"Copia de la valor imposible.",TAKE_PICTURE_FAILED:"Fracaso en la recuperacin de la foto.",SCAN_FAILED:"Fracaso en el escn del Codigo QR",SCAN_UNKNOWN_FORMAT:"Codigo no reconocido.",WOT_LOOKUP_FAILED:"Fracaso en la bsqueda",LOAD_PEER_DATA_FAILED:"Lectura del nodo Duniter imposible. Por favor, intenta ulteriormente.",NEED_LOGIN_FIRST:"Por favor, en primer lugar conectase.",AMOUNT_REQUIRED:"El importe es obligatorio.",AMOUNT_NEGATIVE:"Importe negativo no autorizado.",NOT_ENOUGH_CREDIT:"Crdito insuficiente.",INVALID_NODE_SUMMARY:"Nodo ilocalizable o direccin invlida.",INVALID_USER_ID:"El seudnimo no debe contener ni espacio ni carcter especial o acentuado.",INVALID_COMMENT:"El campo 'referencia no debe contener carcteres acentuados.",INVALID_PUBKEY:"La llave pblica no tiene el formato esperado.",IDENTITY_REVOKED:"Esta identidad <b>fue revocada {{revocationTime|formatFromNow}}</b> ({{revocationTime|formatDate}}). No puede estar miembro.",IDENTITY_PENDING_REVOCATION:"La <b>revocacin de esta identidad</b> fue solicitado y esta en espera de tratamiento. Por lo que, la certificacin es desactivada.",IDENTITY_INVALID_BLOCK_HASH:"Esta solicitud de adhesin no es valida (porque denomina un bloque los nodos de la red han anulado) : esta persona debe renovelar su solicitud de adhesin <b>antes que</b> estar certificada.",IDENTITY_EXPIRED:"La publicacin de esta identidad ha caducada : esta persona debe realizar una nueva solicitud de adhesin <b>antes que</b> estar certificada.",IDENTITY_SANDBOX_FULL:"EL nodo Duniter utilizado por Cesium ya no puede recibir ms nuevas identidades, porque la fila de espera es llena.<br/><br/>Por favor, intenta ulteriormente o cambia de nodo (va el men <b>Paramtres</b>).",IDENTITY_NOT_FOUND:"Identidad no encontrada",IDENTITY_TX_FAILED:"Las operaciones de carga fallidos",
WOT_PENDING_INVALID_BLOCK_HASH:"Adhesin no validada.",WALLET_INVALID_BLOCK_HASH:"Su solicitud de adhesin ya no est validada (porque denomina un bloque los nodos de la red han anulado).<br/>Debe <a ng-click=\"doQuickFix('fixMembership')\">mandar una nueva solicitud</a> para resolver este problema.",WALLET_IDENTITY_EXPIRED:"La publicacin de <b>su identidad ha caducada</b>.<br/>Debe <a ng-click=\"doQuickFix('fixIdentity')\">publicar une outra vez su identidad</a> para resolver este problema.",WALLET_REVOKED:"Su identidad fue <b>revocada</b> : ni su seudnimo ni su llave pblica podrn estar utilizados en el futuro por una cuenta miembro.",WALLET_HAS_NO_SELF:"Su identidad debe en primer lugar haber estado publicado, y no estar caducada.",AUTH_REQUIRED:"Autenticacin requerida.",AUTH_INVALID_PUBKEY:"La llave pblica no se corresponde con la cuenta conectada",AUTH_INVALID_SCRYPT:"De usuario o contrasea no vlidos.",AUTH_INVALID_FILE:"archivo de llave no vlido.",AUTH_FILE_ERROR:"No se pudo abrir el archivo de llave",IDENTITY_ALREADY_CERTIFY:"Ha <b>ya certificado</b> esta identidad.<br/><br/>Esta certificacin todava es valida (expiration {{expiresIn|formatDurationTo}}).",IDENTITY_ALREADY_CERTIFY_PENDING:"Ha <b>ya certificado</b> esta identidad.<br/><br/>Esta certificacin est en espera de tratamiento (fecha lmite de tratamiento {{expiresIn|formatDurationTo}}).",UNABLE_TO_CERTIFY_TITLE:"Certificacin imposible",LOAD_NEWCOMERS_FAILED:"Fracaso el la carga de los miembros nuevos.",LOAD_PENDING_FAILED:"Fracaso el la carga de las inscripcines en espera.",ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION:"Debe <b>estar miembro</b> para poder realizar esta accin.",ONLY_SELF_CAN_EXECUTE_THIS_ACTION:"Debe haber <b>publicado su identidad</b> para poder realizar esta accin.",GET_BLOCK_FAILED:"Fracaso en la recuperacin del bloque",INVALID_BLOCK_HASH:"Bloque no encontrado (hash diferente)",DOWNLOAD_REVOCATION_FAILED:"Debe seleccionar un fichero texto",REVOCATION_FAILED:"Fracas en la revocacin.",SALT_OR_PASSWORD_NOT_CONFIRMED:"Identificador secreto o contrasea incorrectos",RECOVER_ID_FAILED:"Fracaso en la recuperacin de los identificadores",LOAD_FILE_FAILED:"Fracaso en la carga del fichero",NOT_VALID_REVOCATION_FILE:"Revocacin archivo no vlido (formato de archivo malo)",NOT_VALID_SAVE_ID_FILE:"Archivo no vlido (formato de archivo malo)",NOT_VALID_KEY_FILE:"Archivo no vlido (formato de archivo malo)",EXISTING_ACCOUNT:"Su contrasea corresponde a una cuenta existente, la <a ng-click=\"showHelpModal('pubkey')\">clave pblica</a> es:",EXISTING_ACCOUNT_REQUEST:"Por favor, cambie su contrasea para que coincida con una cuenta sin usar.",GET_LICENSE_FILE_FAILED:"Obtener el archivo de licencia no puede",CHECK_NETWORK_CONNECTION:"Sin nodo parece alcanzable.<br/><br/><b>Comprobar la conexin a Internet</b>."},INFO:{POPUP_TITLE:"Informacin",CERTIFICATION_DONE:"Certificacin mandada",NOT_ENOUGH_CREDIT:"Crdito insuficiente",TRANSFER_SENT:"Transferencia mandada",COPY_TO_CLIPBOARD_DONE:"Copia realizada",MEMBERSHIP_OUT_SENT:"Rescisin mandada",NOT_NEED_MEMBERSHIP:"Ya est miembro.",IDENTITY_WILL_MISSING_CERTIFICATIONS:"Esta identidad pronto va a faltar certificacin (al menos {{willNeedCertificationCount}}).",REVOCATION_SENT:"Revocacin mandada",REVOCATION_SENT_WAITING_PROCESS:"La <b>revocacin de esta identidad</b> fue solicitada y est en espera de tratamiento.",FEATURES_NOT_IMPLEMENTED:"Esta funcionalidad todava est en proceso de desarrollo.<br/><br/>Porque no <b>contribuir ahora a Cesium</b>, para obtenerla ms rpidamente ? ;)",EMPTY_TX_HISTORY:"Sin exportacin operacin"},CONFIRM:{POPUP_TITLE:"<b>Confirmacin</b>",POPUP_WARNING_TITLE:"<b>Advertencia</b>",POPUP_SECURITY_WARNING_TITLE:'<i class="icon ion-alert-circled"></i> <b>Advertencia de seguridad</b>',CERTIFY_RULES_TITLE_UID:"Certificar {{uid}}",CERTIFY_RULES:'<b class="assertive">NO CERTIFICAR</b> una cuenta si piense que :<br/><br/><ul><li>1.) no corresponde a una persona <b>fsica y viva</b>.<li>2.) su propietario <b>posee una otra cuenta</b> ya certificada.<li>3.) su propietario viola (voluntariamente o no) la regla 1 o 2 (por ejemplo certificando cuentas falsas o en doble).</ul><br/><b>Est usted seguro</b> sin embargo querer certificar esta identidad ?',TRANSFER:"<b>Recapitulativo de la transferencia</b> :<br/><br/><ul><li> - De : {{from}}</li><li> - A : <b>{{to}}</b></li><li> - Importe : <b>{{amount}} {{unit}}</b></li><li> - Comentario : <i>{{comment}}</i></li></ul><br/><b>Est usted seguro querer realizar esta transferencia ?</b>",MEMBERSHIP_OUT:"Esta operacin es <b>irreversible</b>.<br/></br/>Est usted seguro querer <b>rescindir su cuenta miembro</b> ?",MEMBERSHIP_OUT_2:"Esta operacin es <b>irreversible</b> !<br/><br/>Est usted seguro querer <b>rescindir su adhesin</b> como miembro ?",LOGIN_UNUSED_WALLET_TITLE:"Fracaso de introduccin de datos ?",LOGIN_UNUSED_WALLET:"Est usted conectado a une cuenta que parece <b>inactivo</b>.<br/><br/>Si esta cuenta n corresponde a el suyo, se trata probablemente de un <b>error en la introduccin de datos</b> de sus identificadores de conexin.<br/></br/><b>Quiere usted sin embargo continuar con esta cuenta ?</b>",FIX_IDENTITY:"El seudnimo <b>{{uid}}</b> va a estar publicado de nuevo, en reemplazo del antiguo quien caduc.<br/></br/><b>Est usted seguro</b> querer continuar ?",FIX_MEMBERSHIP:"Su solicitud de adhesin como miembro va a estar mandado de nuevo.<br/></br/><b>Est usted seguro</b> querer continuar ?",RENEW_MEMBERSHIP:"Su adhesin como miembro va a estar renovada.<br/></br/><b>Est usted seguro</b> querer continuar ?",REVOKE_IDENTITY:"Va a <b>revocar definitivamente esta identidad</b>.<br/><br/>La llave pblica y el seudnimo asociados <b>jams no podrn estar utilizado</b> (para una cuenta miembro). <br/></br/><b>Est usted seguro</b> querer revocar definitivamente esta cuenta ?",REVOKE_IDENTITY_2:"Esta operacin es <b>irreversible</b> !<br/><br/>Est usted seguro querer <b>revocar definitivamente</b> esta cuenta ?",NOT_NEED_RENEW_MEMBERSHIP:"Su adhesin no necesita estar renovada (solo va a caducar en {{membershipExpiresIn|formatDuration}}).<br/></br/><b>Est usted seguro</b> querer renovar su adhesin ?",SAVE_BEFORE_LEAVE:"Quiere usted <b>guardar sus modificacines</b> antes dejar la pgina ?",SAVE_BEFORE_LEAVE_TITLE:"Modificacines no registradas",LOGOUT:"Est usted seguro querer desconectarse ?",USE_FALLBACK_NODE:"Nodo <b>{{edad}}</ b> direccin inalcanzable o no vlido.<br/><br/>Se desea utilizar temporalmente el nodo <b>{{nuevo}}</b> ?"},DOWNLOAD:{POPUP_TITLE:"<b>Revocacin del archivo</b>",POPUP_REVOKE_MESSAGE:"Para proteger su cuenta, descargar el <b>documento de revocacin cuenta</b>. Usted si es necesario cancelar su cuenta (en caso de robo de cuenta, un cambio de identificador, una cuenta falsa creada, etc.).<br/><br/><b>Por favor, almacenarlo en un lugar seguro.</b>"},HELP:{TITLE:"Ayuda en lnea",JOIN:{SECTION:"Inscripcin",SALT:'El identificador secreto es muy importante. Sirbe a mezclar la contrasea, antes que sirbe a calcular la <span class="text-italic">llave pblica</span> de su cuenta (su nmero) y la llave secreta para acceder a l.<br/><b>Por favor, memorizala mur bien</b>, porque actualmente no existe ninguna manera para encontrarla en caso de prdida.<br/>Por otra parte, no puede estar modificado sin deber creer una nueva cuenta.<br/><br/>Un buen identificador secreto debe estar suficiente largo (al menos 8 carcteres) y lo ms original posible.',PASSWORD:"La contrasea es muy importante. Con el identificador secreto, sirbe a calcular el nmero (la llave pblica) de su cuenta, y la llave secreta para acceder a l.<br/><b>Por favor, memorizala mur bien</b>, porque actualmente no existe ninguna manera para encontrarlo en caso de prdida (excepto generar un fichero de guarda).<br/>Por otra parte, no puede estar modificado sin deber creer una nueva cuenta.<br/><br/>Una buena contrasea contiene (idealmente) al menos 8 carcteres, del que al menos una mayscula y una cifra.",PSEUDO:'El seudnimo es solamente utilizado en caso de inscripcin como <span class="text-italic">miembro</span>. Siempre es asociado a un monedero (va su <span class="text-italic">llave pblica</span>).<br/>Es pblicado en la red, para que los otros usuarios puedan identificarlo, certificarlo o mandar moneda en la cuenta.<br/>Un seudnimo debe estar nico dentro de los miembros (<u>actuales</u> y antiguos).'},GLOSSARY:{SECTION:"Glosario",PUBKEY_DEF:"Una llave pblica identifica un monedero. Puede identificar un miembro. En Cesium se calcula con el identificador y la contrasea secreta.",MEMBER:"Miembro",MEMBER_DEF:'Un miembro es una persona humana fsica y viva, deseosa de participar libremente a la comunidad monetaria. Percibe un dividendo universal, dependiendo de un perodo y un importe como definido en las <span class="text-italic">reglas de la moneda</span>',CURRENCY_RULES:"Reglas de la moneda",CURRENCY_RULES_DEF:'Las reglas de la moneda son definido una vez por todas. Fija el funcionamiento de la moneda : el clculo del dividendo universal, el nmero de certificacins necesarias para ser miembro, el nmero de certificacines mximo que un miembro puede dar, etc. <a href="#/app/currency">Ver las reglas actuales</a>.<br/>La no modificacin de las reglas en el tiempo es posible por el uso de una <span class="text-italic">BlockChain</span> que sostiene et ejecuta estas reglas, y verifica continuamente sus buena aplicacin.',BLOCKCHAIN:'Cadena de bloques (<span class="text-italic">Blockchain</span>)',BLOCKCHAIN_DEF:'La BlockChain es un sistema descentralizado, que, por el caso de Duniter, sirve a sostener y ejecutar las <span class="text-italic">reglas de la moneda</span>.<br/><a href="http://duniter.org" target="_system">Saber ms a proposito de Duniter</a> y el funcionamiento de su Blockchain.',UNIVERSAL_DIVIDEND_DEF:'El Dividendo Universal (DU) es la cantidad de moneda co-creda por cada uno miembro, dependiendo del perodo y del clculo como definido en las <span class="text-italic">reglas de la moneda</span>.<br/>A cada plazo, los miembros reciben en sus cuentas la misma cantidad de moneda nueva.<br/><br/>El DU sube un crecimiento regular, para quedar justo entre los miembros (actuales y futuros), calculado en funcin de la esperanza de vida media, como demostrado en la Thorie Relative de la Monnaie (TRM) = Teora Relativa de la Moneda, ya no est traducida en espaol, contactarnos para contribuir a su traduccin.<br/><a href="http://trm.creationmonetaire.info">Saber ms a propsito de la TRM</a> y las monedas libres.'},TIP:{MENU_BTN_CURRENCY:"El men <b>{{'MENU.CURRENCY'|translate}}</b> permite la consulta de las <b>reglas de la moneda</b> et de su estado.",CURRENCY_WOT:"El <b>nmero de miembros</b> demostra la importancia de la comunidad y permite de <b>seguir su evolucin</b>.",CURRENCY_MASS:"Sigue aqu la <b>cantidad total de moneda</b> existente y su <b>distribucin mediana</b> por miembro.<br/><br/>Este permite a juzgar la<b>importancia de un importe</b>, en relacin con lo que <b>poseen los otros</b> en sus cuentas (como media).",CURRENCY_UNIT_RELATIVE:"La unidad utilizada (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) significa que los importes en {{currency|capitalize}} son divido por el <b>Dividendo Universal</b> (DU).<br/><br/><small> Esta unidad relativa es <b>pertinente</b>, porque estable a pesar de la cantidad de moneda que aumenta en permanencia.</small>",CURRENCY_CHANGE_UNIT:"Este botn permite de <b>cambiar la unidad</b>, para visualizar los importes <b>directamente en {{currency|capitalize}}</b> (ms bien que en &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;).",CURRENCY_CHANGE_UNIT_TO_RELATIVE:"Este botn permite de <b>cambiar la unidad</b>, para visualizar los importes en &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;, es decir relativamente al Dividendo Universal (el importe co-producto por cada uno miembro).",CURRENCY_RULES:"Las <b>reglas</b> de la moneda fijan su funcionamiento <b>exacto y previsible</b>.<br/><br/>Verdadero ADN de la moneda, hacen su cdigo monetario <b>legible y transparente</b>.",MENU_BTN_NETWORK:"El men <b>{{'MENU.NETWORK'|translate}}</b> permite la consulta del estato de la red.",NETWORK_BLOCKCHAIN:"Todas las operacines de la moneda estn registradas dentro un grande libro de cuenta <b>pblico y infalsificable</b>, tambin llamado <b>cadena de bloques</b> (<em>BlockChain</em> en ingls).",NETWORK_PEERS:"Los <b>nodos</b> visibles aqu corresponden a los <b>ordenadores que actualizan y controlan</b> la cadena de bloques.<br/><br/>Lo ms hay nodos, ms la moneda tiene una gestin <b>descentralizada</b> y digna de confianza.",NETWORK_PEERS_BLOCK_NUMBER:"Este <b>nmero</b> (en verde) indica el <b>ltimo bloque validado</b> por este nodo (ltima pagina escrita dentro el grande libro de cuentas).<br/><br/>El color verde indica que este bloque es tambin validado por <b>la mayora de los otros nodos</b>.",NETWORK_PEERS_PARTICIPATE:'<b>Cada miembro</b>, equipado de un ordenador con internet, <b>puede participar aando un nodo</b>. Necesito <b>instalar el programa Duniter</b> (libre y gratis). <a href="{{installDocUrl}}" target="_system">Ver el manual de uso &gt;&gt;</a>.',MENU_BTN_ACCOUNT:"El men <b>{{'ACCOUNT.TITLE'|translate}}</b> permite acceder a la gestin de su cuenta.",MENU_BTN_ACCOUNT_MEMBER:"Consulta aqu el estado de su cuenta y las informacines sobre sus certificacines.",WALLET_CERTIFICATIONS:"Hace un clic aqu para consultar el detalle de sus certificacines (recibidas y emitidas).",WALLET_RECEIVED_CERTIFICATIONS:"Hace un clic aqu para consultar el detalle de sus <b>certificacines recibidas</b>.",WALLET_GIVEN_CERTIFICATIONS:"Hace un clic aqu para consultar el detalle de sus <b>certificacines emitidas</b>.",WALLET_BALANCE:"El <b>sueldo</b> de su cuenta se visualiza aqu.",WALLET_BALANCE_RELATIVE:"{{'HELP.TIP.WALLET_BALANCE'|translate}}<br/><br/>L'unit utilise (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) significa que el importe en {{currency|capitalize}} fue dividido por el <b>Dividendo Universal</b> (DU) co-credo por cada uno miembro.<br/><br/>Actualmente 1 DU vale {{currentUD|formatInteger}} {{currency|capitalize}}s.",WALLET_BALANCE_CHANGE_UNIT:"Podr <b>cambiar la unidad</b> de visualizacin de los importes en los <b><i class=\"icon ion-android-settings\"></i>&nbsp;{{'MENU.SETTINGS'|translate}}</b>.<br/><br/>Por ejemplo, para visualizar los importes <b>directamente en {{currency|capitalize}}</b>, ms bien que en unidad relativa.",WALLET_PUBKEY:"Este es la llave pblica de su cuenta. Puede comunicarla a un tercero con el fin de que identifique ms simplemente su cuenta.",WALLET_SEND:"Realizar un pago en algunos clics",WALLET_SEND_NO_MONEY:"Realizar un pago en algunos clics.<br/>(Su sueldo ya no lo permite)",WALLET_OPTIONS:"Este botn permite acceder a las <b>accines de adhesin</b> y de seguridad.<br/><br/>No olvida echar un vistazo !",WALLET_RECEIVED_CERTS:"Se exhibir aqu la lista de las personas que le han certificado.",WALLET_CERTIFY:"El botn <b>{{'WOT.BTN_SELECT_AND_CERTIFY'|translate}}</b> permite seleccionar una identidad y certificarla.<br/><br/>Slo usuarios <b>ya miembros</b> pueden certificar otros.",WALLET_CERT_STOCK:"Su stock de certificacines (emitidas) es limitado a <b>{{sigStock}} certificacines</b>.<br/><br/>Este stock se renueva con el tiempo, a medida que las certificacines se invalidan.",MENU_BTN_TX_MEMBER:"El men <b>{{'MENU.TRANSACTIONS'|translate}}</b> permite consultar su sueldo, el historial de sus transaccines y mandar un pago.",MENU_BTN_TX:"Consultar aqu <b>el historial de sus transaccines</b> y efectuar nuevas operacines.",MENU_BTN_WOT:"El men <b>{{'MENU.WOT'|translate}}</b> permite buscar entre los <b>usuarios</b> de la moneda (miembro o no).",WOT_SEARCH_TEXT_XS:"Para buscar en el anuario, toca las <b>primeras letras de un seudnimo</b> (o de una llave pblica).<br/><br/>La bsqueda se iniciar automticamente.",WOT_SEARCH_TEXT:"Para buscar en el anuario, toca las <b>primeras letras de un seudnimo</b> (o de una llave pblica). <br/><br/>Luego, apoya en <b>Entrada</b> para iniciar la bsqueda.",WOT_SEARCH_RESULT:"Visualisa la ficha detallada simplemente <b>haciendo un clic</b> sobre una lnea.",WOT_VIEW_CERTIFICATIONS:"La lnea <b>{{'ACCOUNT.CERTIFICATION_COUNT'|translate}}</b> demostra cuntos miembros han validado esta identidad.<br/><br/>Estas certificacines atestiguan que la cuenta pertenece a <b>una persona humana viva</b> que no tenga <b>ningna otra cuenta miembro</b>.",WOT_VIEW_CERTIFICATIONS_COUNT:"Necesita al menos <b>{{sigQty}} certificacines</b> para estar miembro y recibir el <b>Dividendo Universal</b>.",WOT_VIEW_CERTIFICATIONS_CLICK:"Un clic aqu permite abrir <b>la lista de todas las certificacines</b> de la identidad (recibidas y emitidas).",WOT_VIEW_CERTIFY:"El botn <b>{{'WOT.BTN_CERTIFY'|translate}}</b> permite aadir su certificacin a esta identidad.",CERTIFY_RULES:"<b>Atencin :</b> Certificar solamente <b>personas fsicas vivas</b>, que no posean ningna otra cuenta miembro.<br/><br/>La seguridad de la moneda depende de la vigilancia de cada uno !",MENU_BTN_SETTINGS:"Los <b>{{'MENU.SETTINGS'|translate}}</b> l permitirn configurar la aplicacin.",HEADER_BAR_BTN_PROFILE:"Hace un clic aqu para acceder a su <b>perfil de usuario</b>",SETTINGS_CHANGE_UNIT:"Podr <b>cambiar la unidad de visualizacin</b> de los importes haciendo un clic ms arriba.<br/><br/>- Desactiva la opcin por una visualizacin de los importes en {{currency|capitalize}}.<br/>- Activa la opcin por una visualizacin relativa en {{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub> (todos los importes sern <b>dividido</b> por el Dividendo Universal corriente).",END_LOGIN:"Esta Visita Guiada es <b>terminada</b> !<br/><br/>Buena continuacin en este mundo nuevo de la <b>economia libre</b> !",END_NOT_LOGIN:"Esta Visita Guiada es <b>terminada</b> !<br/><br/>Si quiere utilizar la moneda {{currency|capitalize}}, tiene que hacer un clic sobre <b>{{'LOGIN.CREATE_ACCOUNT'|translate}}</b> ms abajo."}}}),e.translations("fr-FR",{COMMON:{APP_NAME:"Cesium",APP_VERSION:"v{{version}}",APP_BUILD:"date : {{build}}",PUBKEY:"Cl publique",MEMBER:"Membre",BLOCK:"Bloc",BTN_OK:"OK",BTN_YES:"Oui",BTN_NO:"Non",BTN_SEND:"Envoyer",BTN_SEND_MONEY:"Faire un virement",BTN_SEND_MONEY_SHORT:"Virement",BTN_SAVE:"Enregistrer",BTN_YES_SAVE:"Oui, Enregistrer",BTN_YES_CONTINUE:"Oui, Continuer",BTN_SHOW:"Voir",BTN_SHOW_PUBKEY:"Afficher la cl publique",BTN_RELATIVE_UNIT:"Afficher en unit relative ?",BTN_BACK:"Retour",BTN_NEXT:"Suivant",BTN_CANCEL:"Annuler",BTN_CLOSE:"Fermer",BTN_LATER:"Plus tard",BTN_LOGIN:"Se connecter",BTN_LOGOUT:"Dconnexion",BTN_ADD_ACCOUNT:"Nouveau compte",BTN_SHARE:"Partager",BTN_EDIT:"Modifier",BTN_DELETE:"Supprimer",BTN_ADD:"Ajouter",BTN_SEARCH:"Rechercher",BTN_REFRESH:"Actualiser",BTN_RETRY:"Recommencer",BTN_START:"Commencer",BTN_CONTINUE:"Continuer",BTN_CREATE:"Crer",BTN_UNDERSTOOD:"J'ai compris",BTN_OPTIONS:"Options",BTN_HELP_TOUR:"Visite guide",BTN_HELP_TOUR_SCREEN:"Dcouvrir cet cran",BTN_DOWNLOAD:"Tlcharger",BTN_DOWNLOAD_ACCOUNT_STATEMENT:"Tlcharger le relev du compte",BTN_MODIFY:"Modifier",CHOOSE_FILE:"Dposez votre fichier <br/>ou cliquez pour le slectionner",DAYS:"jours",NO_ACCOUNT_QUESTION:"Pas de encore membre ? Crer un compte !",SEARCH_NO_RESULT:"Aucun rsultat trouv",LOADING:"Veuillez patienter...",SEARCHING:"Recherche en cours...",FROM:"De",TO:"",COPY:"Copier",LANGUAGE:"Langue",UNIVERSAL_DIVIDEND:"Dividende universel",UD:"DU",DATE_PATTERN:"DD/MM/YY HH:mm",DATE_FILE_PATTERN:"YYYY-MM-DD",DATE_SHORT_PATTERN:"DD/MM/YY",DATE_MONTH_YEAR_PATTERN:"MM/YYYY",EMPTY_PARENTHESIS:"(vide)",UID:"Pseudonyme",ENABLE:"Activ",DISABLE:"Dsactiv",RESULTS_LIST:"Rsultats",RESULTS_COUNT:"{{count}} rsultats",EXECUTION_TIME:"execut en {{duration|formatDurationMs}}",SHOW_VALUES:"Afficher les valeurs en clair ?",POPOVER_ACTIONS_TITLE:"Options",POPOVER_FILTER_TITLE:"Filtres",SHOW_MORE:"Afficher plus",SHOW_MORE_COUNT:"(limite actuelle  {{limit}})",POPOVER_SHARE:{TITLE:"Partager",SHARE_ON_TWITTER:"Partager sur Twitter",SHARE_ON_FACEBOOK:"Partager sur Facebook",SHARE_ON_DIASPORA:"Partager sur Diaspora*",SHARE_ON_GOOGLEPLUS:"Partager sur Google+"}},SYSTEM:{PICTURE_CHOOSE_TYPE:"Choisir la source :",BTN_PICTURE_GALLERY:"Galerie",BTN_PICTURE_CAMERA:"<b>Camra</b>"},MENU:{HOME:"Accueil",WOT:"Annuaire",CURRENCY:"Monnaie",ACCOUNT:"Mon compte",TRANSFER:"Virement",SCAN:"Scanner",SETTINGS:"Paramtres",NETWORK:"Rseau",TRANSACTIONS:"Mes oprations"},ABOUT:{TITLE:" propos",LICENSE:"Application <b>libre</b> (licence GNU GPLv3).",LATEST_RELEASE:"Il existe une <b>version plus rcente</b> de {{'COMMON.APP_NAME'|translate}} (<b>v{{version}}</b>)",PLEASE_UPDATE:"Veuillez mettre  jour {{'COMMON.APP_NAME'|translate}} (dernire version : <b>v{{version}}</b>)",CODE:"Code source :",DEVELOPERS:"Dvelopp par :",FORUM:"Forum :",PLEASE_REPORT_ISSUE:"N'hsitez pas  nous remonter les anomalies rencontres",REPORT_ISSUE:"Remonter un problme"},HOME:{TITLE:"Cesium",WELCOME:"Bienvenue dans l'application Cesium !",MESSAGE:"Suivez vos comptes {{currency|abbreviate}} en toute simplicit",BTN_CURRENCY:"Explorer la monnaie {{name|abbreviate}}",BTN_ABOUT:" propos",BTN_HELP:"Aide en ligne",REPORT_ISSUE:"anomalie",NOT_YOUR_ACCOUNT_QUESTION:'Vous n\'tes pas propritaire du compte <b><i class="ion-key"></i> {{pubkey|formatPubkey}}</b> ?',BTN_CHANGE_ACCOUNT:"Dconnecter ce compte",CONNECTION_ERROR:'Nud <b>{{server}}</b> injoignable ou adresse invalide.<br/><br/>Vrifiez votre connection Internet, ou changer de nud <a class="positive" ng-click="doQuickFix(\'settings\')">dans les paramtres</a>.'},SETTINGS:{TITLE:"Paramtres",NETWORK_SETTINGS:"Rseau",PEER:"Adresse du nud Duniter",PEER_CHANGED_TEMPORARY:"Adresse utilise temporairement",USE_LOCAL_STORAGE:"Activer le stockage local",USE_LOCAL_STORAGE_HELP:"Permet de sauvegarder vos paramtres",ENABLE_HELPTIP:"Activer les bulles d'aide contextuelles",ENABLE_UI_EFFECTS:"Activer les effets visuels",HISTORY_SETTINGS:"Liste des oprations",DISPLAY_UD_HISTORY:"Afficher les dividendes produits ?",AUTHENTICATION_SETTINGS:"Authentification",KEEP_AUTH:"Expiration de l'authentification",KEEP_AUTH_HELP:"Dfini le moment o l'authentification est nettoye de la mmoire",KEEP_AUTH_OPTION:{NEVER:"Aprs chaque opration",SECONDS:"Aprs {{value}}s d'inactivit",MINUTE:"Aprs {{value}}min d'inactivit",MINUTES:"Aprs {{value}}min d'inactivit",HOUR:"Aprs {{value}}h d'inactivit",ALWAYS:"A la fin de la session"},REMEMBER_ME:"Se souvenir de moi ?",REMEMBER_ME_HELP:"Permet de rester identifi d'une session  l'autre, en conservant localement la cl publique.",PLUGINS_SETTINGS:"Extensions",BTN_RESET:"Restaurer les valeurs par dfaut",EXPERT_MODE:"Activer le mode expert",EXPERT_MODE_HELP:"Permet un affichage plus dtaill",POPUP_PEER:{TITLE:"Nud Duniter",HOST:"Adresse",HOST_HELP:"Adresse : serveur:port",USE_SSL:"Scuris ?",USE_SSL_HELP:"(Chiffrement SSL)",BTN_SHOW_LIST:"Liste des noeuds"}},BLOCKCHAIN:{HASH:"Hash : {{hash}}",VIEW:{HEADER_TITLE:"Bloc #{{number}}-{{hash|formatHash}}",TITLE_CURRENT:"Bloc courant",TITLE:"Bloc #{{number|formatInteger}}",COMPUTED_BY:"Calcul par le noeud de",SHOW_RAW:"Voir le fichier brut",TECHNICAL_DIVIDER:"Informations techniques",VERSION:"Version du format",HASH:"Hash calcul",UNIVERSAL_DIVIDEND_HELP:"Monnaie co-produite par chacun des {{membersCount}} membres",EMPTY:"Aucune donne dans ce bloc",POW_MIN:"Difficult minimale",POW_MIN_HELP:"Difficult impose pour le calcul du hash",DATA_DIVIDER:"Donnes",IDENTITIES_COUNT:"Nouvelles identits",JOINERS_COUNT:"Nouveaux membres",ACTIVES_COUNT:"Renouvellements",ACTIVES_COUNT_HELP:"Membres ayant renouvells leur adhsion",LEAVERS_COUNT:"Membres sortants",LEAVERS_COUNT_HELP:"Membres ne souhaitant plus de certification",EXCLUDED_COUNT:"Membres exclus",EXCLUDED_COUNT_HELP:"Anciens membres exclus par non renouvellement ou manque de certifications",REVOKED_COUNT:"Identits revoques",REVOKED_COUNT_HELP:"Ces comptes ne pourront plus tre membres",TX_COUNT:"Transactions",CERT_COUNT:"Certifications",TX_TO_HIMSELF:"Opration de change",TX_OUTPUT_UNLOCK_CONDITIONS:"Conditions de dblocage",TX_OUTPUT_OPERATOR:{AND:"et",OR:"ou"},TX_OUTPUT_FUNCTION:{SIG:"<b>Signature</b> de ",XHX:"<b>Mot de passe</b>, dont SHA256 =",CSV:"Bloqu pendant",CLTV:"Bloqu jusqu'"}},LOOKUP:{TITLE:"Blocs",NO_BLOCK:"Aucun bloc",LAST_BLOCKS:"Derniers blocs :",BTN_COMPACT:"Compacter"}},CURRENCY:{VIEW:{TITLE:"Monnaie",TAB_CURRENCY:"Monnaie",TAB_WOT:"Toile de confiance",TAB_NETWORK:"Rseau",TAB_BLOCKS:"Blocs",CURRENCY_SHORT_DESCRIPTION:"{{currency|abbreviate}} est une <b>monnaie libre</b>, dmarre {{firstBlockTime|formatFromNow}}. Elle compte actuellement <b>{{N}} membres</b>, qui produisent et peroivent un <a ng-click=\"showHelpModal('ud')\">Dividende Universel</a> (DU), chaque {{dt|formatPeriod}}.",NETWORK_RULES_DIVIDER:"Rgles du rseau",CURRENCY_NAME:"Nom de la monnaie",MEMBERS:"Nombre de membres",MEMBERS_VARIATION:"Variation depuis le dernier DU",MONEY_DIVIDER:"Monnaie",MASS:"Masse montaire",SHARE:"Masse par membre",UD:"Dividende universel",C_ACTUAL:"Croissance actuelle",MEDIAN_TIME:"Heure de la blockchain",POW_MIN:"Niveau minimal de difficult de calcul",MONEY_RULES_DIVIDER:"Rgles de la monnaie",C_RULE:"Croissance thorique cible",UD_RULE:"Calcul du dividende universel",DT_REEVAL:"Priode de revalorisation du DU",REEVAL_SYMBOL:"reval",DT_REEVAL_VALUE:"Tous les <b>{{dtReeval|formatDuration}}</b> ({{dtReeval/86400}} {{'COMMON.DAYS'|translate}})",UD_REEVAL_TIME0:"Date de la 1re revalorisation",SIG_QTY_RULE:"Nombre de certifications requises pour devenir membre",SIG_STOCK:"Nombre maximal de certifications mises par membre",SIG_PERIOD:"Dlai minimal d'attente entre 2 certifications successives mises par une mme personne",SIG_WINDOW:"Dlai limite de prise en compte d'une certification",SIG_VALIDITY:"Dure de vie d'une certification qui a t prise en compte",MS_WINDOW:"Dlai limite de prise en compte d'une demande d'adhsion comme membre",MS_VALIDITY:"Dure de vie d'une adhsion qui a t prise en compte",STEP_MAX:"Distance maximale, par les certifications, entre un nouvel entrant et les membres rfrents",WOT_RULES_DIVIDER:"Rgles de la toile de confiance",SENTRIES:"Nombre de certifications (mises <b>et</b> reues) pour devenir membre rfrent",SENTRIES_FORMULA:"Nombre de certification (mises <b>et</b> reues) pour devenir membre rfrent (formule)",XPERCENT:"Pourcentage minimum de membres rfrents  atteindre pour respecter la rgle de distance",AVG_GEN_TIME:"Temps moyen entre deux blocs",CURRENT:"actuel",MATH_CEILING:"PLAFOND",DISPLAY_ALL_RULES:"Afficher toutes les rgles ?",BTN_SHOW_LICENSE:"Voir la licence",WOT_DIVIDER:"Toile de confiance"},LICENSE:{TITLE:"Licence de la monnaie",BTN_DOWNLOAD:"Tlcharger le fichier",NO_LICENSE_FILE:"Fichier de licence non trouv."}},NETWORK:{VIEW:{MEDIAN_TIME:"Heure de la blockchain",LOADING_PEERS:"Chargement des noeuds...",NODE_ADDRESS:"Adresse :",SOFTWARE:"Logiciel",WARN_PRE_RELEASE:"Pr-version (dernire version stable : <b>{{version}}</b>)",WARN_NEW_RELEASE:"Version <b>{{version}}</b> disponible",WS2PID:"Identifiant :",PRIVATE_ACCESS:"Accs priv",POW_PREFIX:"Prfixe de preuve de travail :",ENDPOINTS:{BMAS:"Interface scurise (SSL)",BMATOR:"Interface rseau TOR",WS2P:"Interface WS2P",ES_USER_API:"Noeud de donnes Cesium+"}},INFO:{ONLY_SSL_PEERS:"Les noeuds non SSL ont un affichage dgrad, car Cesium fonctionne en mode HTTPS."}},PEER:{PEERS:"Nuds",SIGNED_ON_BLOCK:"Sign sur le bloc",MIRROR:"miroir",MIRRORS:"Nuds miroirs",PEER_LIST:"Liste des nuds",MEMBERS:"Nuds membres",ALL_PEERS:"Tous les nuds",DIFFICULTY:"Difficult",API:"API",CURRENT_BLOCK:"Bloc #",POPOVER_FILTER_TITLE:"Filtre",OFFLINE:"Nuds hors ligne",BTN_SHOW_PEER:"Voir le nud",VIEW:{TITLE:"Nud",OWNER:"Appartient ",SHOW_RAW_PEERING:"Voir la fiche de pair",SHOW_RAW_CURRENT_BLOCK:"Voir le dernier bloc (format brut)",LAST_BLOCKS:"Derniers blocs connus",KNOWN_PEERS:"Nuds connus :",GENERAL_DIVIDER:"Informations gnrales",ERROR:{LOADING_TOR_NODE_ERROR:"Rcupration des informations du noeud impossible. Le dlai d'attente est dpass.",LOADING_NODE_ERROR:"Rcupration des informations du noeud impossible"}}},WOT:{SEARCH_HELP:"Recherche (pseudo ou cl publique)",SEARCH_INIT_PHASE_WARNING:"Durant la phase de pr-inscription, la recherche des inscriptions en attente <b>peut-tre longue</b>. Merci de patienter...",REGISTERED_SINCE:"Inscrit le",REGISTERED_SINCE_BLOCK:"Inscrit au block #",NO_CERTIFICATION:"Aucune certification valide",NO_GIVEN_CERTIFICATION:"Aucune certification mise",NOT_MEMBER_PARENTHESIS:"(non membre)",IDENTITY_REVOKED_PARENTHESIS:"(identit revoque)",MEMBER_PENDING_REVOCATION_PARENTHESIS:"(en cours de rvocation)",EXPIRE_IN:"Expiration",NOT_WRITTEN_EXPIRE_IN:"Date limite<br/>de traitement",EXPIRED:"Expir",PSEUDO:"Pseudonyme",SIGNED_ON_BLOCK:"Emise au bloc #{{block}}",WRITTEN_ON_BLOCK:"Ecrite au bloc #{{block}}",GENERAL_DIVIDER:"Informations gnrales",NOT_MEMBER_ACCOUNT:"Compte simple (non membre)",NOT_MEMBER_ACCOUNT_HELP:"Il s'agit d'un simple portefeuille, sans demande d'adhsion en attente.",TECHNICAL_DIVIDER:"Informations techniques",BTN_CERTIFY:"Certifier",BTN_YES_CERTIFY:"Oui, certifier",BTN_SELECT_AND_CERTIFY:"Nouvelle certification",ACCOUNT_OPERATIONS:"Oprations sur le compte",VIEW:{POPOVER_SHARE_TITLE:"Identit {{title}}"},LOOKUP:{TITLE:"Toile de confiance",NEWCOMERS:"Nouveaux membres",NEWCOMERS_COUNT:"{{count}} membres",PENDING:"Inscriptions en attente",PENDING_COUNT:"{{count}} inscriptions en attente",REGISTERED:"Inscrit {{sigDate | formatFromNow}}",MEMBER_FROM:"Membre depuis {{memberDate|formatFromNowShort}}",BTN_NEWCOMERS:"Nouveaux membres",BTN_PENDING:"Inscriptions en attente",SHOW_MORE:"Afficher plus",SHOW_MORE_COUNT:"(limite actuelle  {{limit}})",NO_PENDING:"Aucune inscription en attente.",NO_NEWCOMERS:"Aucun membre."},CONTACTS:{TITLE:"Contacts"},MODAL:{TITLE:"Recherche"},CERTIFICATIONS:{TITLE:"{{uid}} - Certifications",SUMMARY:"Certifications reues",LIST:"Dtail des certifications reues",PENDING_LIST:"Certifications en attente de traitement",RECEIVED:"Certifications reues",RECEIVED_BY:"Certifications reues par {{uid}}",ERROR:"Certifications reues en erreur",SENTRY_MEMBER:"Membre rfrent"},OPERATIONS:{TITLE:"{{uid}} - Oprations"},GIVEN_CERTIFICATIONS:{TITLE:"{{uid}} - Certifications mises",SUMMARY:"Certifications mises",LIST:"Dtail des certifications mises",PENDING_LIST:"Certifications en attente de traitement",SENT:"Certifications mises",SENT_BY:"Certifications mises par {{uid}}",ERROR:"Certifications mises en erreur"}},LOGIN:{TITLE:'<i class="icon ion-log-in"></i> Connexion',SCRYPT_FORM_HELP:"Veuillez saisir vos identifiants.<br>Pensez  vrifier que la cl publique est celle de votre compte.",PUBKEY_FORM_HELP:"Veuillez saisir une cl publique de compte :",FILE_FORM_HELP:"Choisissez le fichier de trousseau  utiliser :",SALT:"Identifiant secret",SALT_HELP:"Identifiant secret",SHOW_SALT:"Afficher l'identifiant secret ?",PASSWORD:"Mot de passe",PASSWORD_HELP:"Mot de passe",PUBKEY_HELP:"Exemple :  AbsxSY4qoZRzyV2irfep1V9xw1EMNyKJw2TkuVD4N1mv ",NO_ACCOUNT_QUESTION:"Vous n'avez pas encore de compte ?",CREATE_ACCOUNT:"Crer un compte...",FORGOTTEN_ID:"Mot de passe oubli ?",ASSOCIATED_PUBKEY:"Cl publique du trousseau :",BTN_METHODS:"Autres mthodes",BTN_METHODS_DOTS:"Changer de mthode...",METHOD_POPOVER_TITLE:"Mthodes",MEMORIZE_AUTH_FILE:"Mmoriser ce trousseau le temps de la session de navigation",SCRYPT_PARAMETERS:"Paramtres (Scrypt) :",AUTO_LOGOUT:{TITLE:"Information",MESSAGE:'<i class="ion-android-time"></i> Vous avez t <b>dconnect</b> automatiquement, suite  une inactivit prolonge.',
BTN_RELOGIN:"Me reconnecter",IDLE_WARNING:"Vous allez tre dconnect... {{countdown}}"},METHOD:{SCRYPT_DEFAULT:"Sallage standard (par dfaut)",SCRYPT_ADVANCED:"Sallage avanc",FILE:"Fichier de trousseau",PUBKEY:"Cl publique seule"},SCRYPT:{SIMPLE:"Sallage lger",DEFAULT:"Sallage standard",SECURE:"Sallage sr",HARDEST:"Sallage le plus sr",EXTREME:"Sallage extrme",USER:"Sallage personnalis",N:"N (Loop):",r:"r (RAM):",p:"p (CPU):"},FILE:{DATE:"Date :",TYPE:"Type :",SIZE:"Taille :",VALIDATING:"Validation...",HELP:"Format de fichier attendu : <b>.dunikey</b> (type PubSec). D'autres formats sont en cours de dveloppement (EWIF, WIF)."}},AUTH:{TITLE:'<i class="icon ion-locked"></i> Authentification',METHOD_LABEL:"Mthode d'authentification",BTN_AUTH:"S'authentifier",SCRYPT_FORM_HELP:"Veuillez vous authentifier :"},ACCOUNT:{TITLE:"Mon compte",BALANCE:"Solde",LAST_TX:"Dernires transactions",BALANCE_ACCOUNT:"Solde du compte",NO_TX:"Aucune transaction",SHOW_MORE_TX:"Afficher plus",SHOW_ALL_TX:"Afficher tout",TX_FROM_DATE:"(limite actuelle  {{fromTime|formatFromNowShort}})",PENDING_TX:"Transactions en cours de traitement",ERROR_TX:"Transactions non executes",ERROR_TX_SENT:"Transactions envoyes en chec",PENDING_TX_RECEIVED:"Transactions en attente de rception",EVENTS:"Evnements",WAITING_MEMBERSHIP:"Demande d'adhsion envoye. En attente d'acceptation.",WAITING_CERTIFICATIONS:"Vous devez obtenir {{needCertificationCount}} certification(s) pour devenir membre.",WILL_MISSING_CERTIFICATIONS:"Vous allez bientt <b>manquer de certification</b> (au moins {{willNeedCertificationCount}} sont requises)",WILL_NEED_RENEW_MEMBERSHIP:"Votre adhsion comme membre <b>va expirer {{membershipExpiresIn|formatDurationTo}}</b>. Pensez  <a ng-click=\"doQuickFix('renew')\">renouveler votre adhsion</a> d'ici l.",NEED_RENEW_MEMBERSHIP:"Vous n'tes plus membre, car votre adhsion <b>a expir</b>. Pensez  <a ng-click=\"doQuickFix('renew')\">renouveler votre adhsion</a>.",NO_WAITING_MEMBERSHIP:"Aucune demande d'adhsion en attente. Si vous souhaitez <b>devenir membre</b>, pensez  <a ng-click=\"doQuickFix('membership')\">envoyer la demande d'adhsion</a>.",CERTIFICATION_COUNT:"Certifications reues",CERTIFICATION_COUNT_SHORT:"Certifications",SIG_STOCK:"Certifications envoyes",BTN_RECEIVE_MONEY:"Encaisser",BTN_SELECT_ALTERNATIVES_IDENTITIES:"Basculer vers une autre identit...",BTN_MEMBERSHIP_RENEW:"Renouveler l'adhsion",BTN_MEMBERSHIP_RENEW_DOTS:"Renouveler l'adhsion...",BTN_MEMBERSHIP_OUT_DOTS:"Arrter l'adhsion...",BTN_SECURITY_DOTS:"Compte et scurit...",BTN_SHOW_DETAILS:"Afficher les infos techniques",LOCKED_OUTPUTS_POPOVER:{TITLE:"Montant verrouill",DESCRIPTION:"Voici les conditions de dverrouillage de ce montant :",DESCRIPTION_MANY:"Cette transaction est compos de plusieurs parties, dont voici les conditions de dverrouillage :",LOCKED_AMOUNT:"Conditions pour le montant :"},NEW:{TITLE:"Cration de compte",INTRO_WARNING_TIME:"La cration d'un compte sur {{name|capitalize}} est trs simple. Veuillez nanmoins prendre suffisament de temps pour faire correctement cette formalit (pour ne pas oublier les identifiants, mots de passe, etc.).",INTRO_WARNING_SECURITY:"Vrifier que le matriel que vous utilisez actuellement (ordinateur, tablette, tlphone) <b>est scuris et digne de confiance</b>.",INTRO_WARNING_SECURITY_HELP:"Anti-virus  jour, pare-feu activ, session protge par mot de passe ou code pin, etc.",INTRO_HELP:"Cliquez sur <b>{{'COMMON.BTN_START'|translate}}</b> pour dbuter la cration de compte. Vous serez guid tape par tape.",REGISTRATION_NODE:"Votre inscription sera enregistre via le noeud Duniter <b>{{server}}</b>, qui le diffusera ensuite au reste du rseau de la monnaie.",REGISTRATION_NODE_HELP:"Si vous ne faites pas confiance en ce noeud, veuillez en changer <a ng-click=\"doQuickFix('settings')\">dans les paramtres</a> de Cesium.",SELECT_ACCOUNT_TYPE:"Choisissez le type de compte  crer :",MEMBER_ACCOUNT:"Compte membre",MEMBER_ACCOUNT_TITLE:"Cration d'un compte membre",MEMBER_ACCOUNT_HELP:"Si vous n'tes pas encore inscrit en tant qu'individu (un seul compte possible par individu). Ce compte permet de co-produire la monnaie, en recevant un <b>dividende universel</b> chaque {{parameters.dt|formatPeriod}}.",WALLET_ACCOUNT:"Simple portefeuille",WALLET_ACCOUNT_TITLE:"Cration d'un portefeuille",WALLET_ACCOUNT_HELP:"Pour tous les autres cas, par exemple si vous avez besoin d'un compte supplmentaire.<br/>Aucun dividende universel ne sera cr par ce compte.",SALT_WARNING:"Choisissez votre identifiant secret.<br/>Il vous sera demand  chaque connexion sur ce compte.<br/><br/><b>Retenez le bien</b> : en cas de perte, plus personne ne pourra accder  votre compte !",PASSWORD_WARNING:"Choisissez un mot de passe.<br/>Il vous sera demand  chaque connexion sur ce compte.<br/><br/><b>Retenez bien ce mot de passe</b : en cas de perte, plus personne ne pourra accder  votre compte !",PSEUDO_WARNING:"Choisissez un pseudonyme.<br/>Il sert aux autres membres, pour vous identifier plus facilement.<div class='hidden-xs'><br/>Il <b>ne pourra pas tre modifi</b>, sans refaire un compte.</div><br/><br/>Il ne doit contenir <b>ni espace, ni de caractre accentu</b>.<div class='hidden-xs'><br/>Exemple : <span class='gray'>SophieDupond, MarcelChemin, etc.</span>",PSEUDO:"Pseudonyme",PSEUDO_HELP:"Pseudonyme",SALT_CONFIRM:"Confirmation",SALT_CONFIRM_HELP:"Confirmation de l'identifiant secret",PASSWORD_CONFIRM:"Confirmation",PASSWORD_CONFIRM_HELP:"Confirmation du mot de passe",SLIDE_6_TITLE:"Confirmation :",COMPUTING_PUBKEY:"Calcul en cours...",LAST_SLIDE_CONGRATULATION:"Vous avez saisi toutes les informations ncessaires : Bravo !<br/>Vous pouvez maintenant <b>envoyer la demande de cration</b> de compte.</b><br/><br/>Pour information, la cl publique ci-dessous identifiera votre futur compte.<br/>Elle pourra tre communique  des tiers pour recevoir leur paiement.<br/><b>Il n'est pas obligatoire</b> de la noter ici, vous pourrez galement le faire plus tard.",CONFIRMATION_MEMBER_ACCOUNT:"<b class=\"assertive\">Avertissement :</b> l'identifiant secret, le mot de passe et le pseudonyme ne pourront plus tre modifis.<br/><br/><b>Assurez-vous de toujours vous en rappeller !</b><br/><br/><b>Etes-vous sr</b> de vouloir envoyer cette demande d'inscription ?",CONFIRMATION_WALLET_ACCOUNT:'<b class="assertive">Avertissement :</b> l\'identifiant secret et le mot de passe ne pourront plus tre modifis.<br/><br/><b>Assurez-vous de toujours vous en rappeller !</b><br/><br/><b>Etes-vous sr</b> de vouloir continuer avec ces identifiants ?',CHECKING_PSEUDO:"Vrification...",PSEUDO_AVAILABLE:"Pseudonyme disponible",PSEUDO_NOT_AVAILABLE:"Pseudonyme non disponible",INFO_LICENSE:"Avant de crer un compte membre, <b>veuillez lire et accepter la licence</b> d'usage de la monnaie :",BTN_ACCEPT:"J'accepte",BTN_ACCEPT_LICENSE:"J'accepte la licence"},POPUP_REGISTER:{TITLE:"Choisissez un pseudonyme",HELP:"Un pseudonyme est obligatoire pour devenir membre."},SELECT_IDENTITY_MODAL:{TITLE:"Slection de l'identit",HELP:'Plusieurs <b>identits diffrentes</b> ont t envoyes, pour la cl publique <span class="gray"><i class="ion-key"></i> {{pubkey|formatPubkey}}</span>.<br/>Veuillez slectionner le dossier  utiliser :'},SECURITY:{ADD_QUESTION:"Ajouter une question personnalise ",BTN_CLEAN:"Vider",BTN_RESET:"Rinitialiser",DOWNLOAD_REVOKE:"Sauvegarder mon fichier de rvocation",DOWNLOAD_REVOKE_HELP:"Disposer d'un fichier de rvocation est important, par exemple en cas de perte de vos identifiants. Il vous permet de <b>sortir ce compte de la toile de confiance</b>, en redevenant ainsi un simple portefeuille.",MEMBERSHIP_IN:"Transformer en compte membre...",MEMBERSHIP_IN_HELP:"Permet de <b>transformer</b> un compte simple portefeuille <b>en compte membre</b>, en envoyant une demande d'adhsion. Utile uniquement si vous n'avez pas dj une autre compte membre.",SEND_IDENTITY:"Publier son identit...",SEND_IDENTITY_HELP:"Permet d'associer un pseudonyme  ce compte, mais <b>sans faire de demande d'adhsion</b> pour devenir membre. Cette association n'est gnralement pas utile, car la validit de cette association de pseudonyme est limite dans le temps.",HELP_LEVEL:"Pour gnrer un fichier de sauvegarde de vos identifiants, choisissez <strong> au moins {{nb}} questions :</strong>",LEVEL:"Niveau de scurit",LOW_LEVEL:'Faible <span class="hidden-xs">(2 questions minimum)</span>',MEDIUM_LEVEL:'Moyen <span class="hidden-xs">(4 questions minimum)</span>',QUESTION_1:"Comment s'appelait votre meilleur ami lorsque vous tiez adolescent ?",QUESTION_2:"Comment s'appelait votre premier animal de compagnie ?",QUESTION_3:"Quel est le premier plat que vous avez appris  cuisiner ?",QUESTION_4:"Quel est le premier film que vous avez vu au cinma ?",QUESTION_5:"O tes-vous all la premire fois que vous avez pris l'avion ?",QUESTION_6:"Comment s'appelait votre instituteur prfr  l'cole primaire ?",QUESTION_7:"Quel serait selon vous le mtier idal ?",QUESTION_8:"Quel est le livre pour enfants que vous prfrez ?",QUESTION_9:"Quel tait le modle de votre premier vhicule ?",QUESTION_10:"Quel tait votre surnom lorsque vous tiez enfant ?",QUESTION_11:"Quel tait votre personnage ou acteur de cinma prfr lorsque vous tiez tudiant ?",QUESTION_12:"Quel tait votre chanteur ou groupe prfr lorsque vous tiez tudiant ?",QUESTION_13:"Dans quelle ville vos parents se sont-ils rencontrs ?",QUESTION_14:"Comment s'appelait votre premier patron ?",QUESTION_15:"Quel est le nom de la rue o vous avez grandi ?",QUESTION_16:"Quel est le nom de la premire plage o vous vous tes baign ?",QUESTION_17:"Quel est le premier album que vous avez achet ?",QUESTION_18:"Quel est le nom de votre quipe de sport prfre ?",QUESTION_19:"Quel tait le mtier de votre grand-pre ?",RECOVER_ID:"Retrouver mon mot de passe...",RECOVER_ID_HELP:"Si vous disposez d'un <b>fichier de sauvegarde de vos identifiants</b>, vous pouvez les retrouver en rpondant correctement  vos questions personnelles.",REVOCATION_WITH_FILE:"Rvoquer mon compte membre...",REVOCATION_WITH_FILE_DESCRIPTION:"Si vous avez <b>dfinitivement perdus vos identifiants</b> de compte membre (ou que la scurit du compte est compromise), vous pouvez utiliser <b>le fichier de rvocation</b> du compte pour <b>forcer sa sortie dfinitive de la toile de confiance</b>.",REVOCATION_WITH_FILE_HELP:"Pour <b>rvoquer dfinitivement</b> un compte membre, veuillez glisser dans la zone ci-dessous votre fichier de rvocation, ou bien cliquer dans la zone pour rechercher un fichier.",REVOCATION_WALLET:"Rvoquer immdiatement ce compte",REVOCATION_WALLET_HELP:"Demander la rvocation de votre identit entraine la <b>sortie de la toile de confiance</b> (dfinitive pour le pseudonyme et la cl publique associs). Le compte ne pourra plus produire de Dividende Universel.<br/>Vous pourrez toutefois encore vous y connecter, comme  un simple portefeuille.",REVOCATION_FILENAME:"revocation-{{uid}}-{{pubkey|formatPubkey}}-{{currency}}.txt",SAVE_ID:"Sauvegarder mes identifiants...",SAVE_ID_HELP:"Cration d'un fichier de sauvegarde, pour <b>retrouver votre mot de passe</b> (et l'identifiant secret) <b>en cas de d'oubli</b>. Le fichier est <b>scuris</b> (chiffr)  l'aide de questions personnelles.",STRONG_LEVEL:'Fort <span class="hidden-xs ">(6 questions minimum)</span>',TITLE:"Compte et scurit"},FILE_NAME:"{{currency}} - Relev du compte {{pubkey|formatPubkey}} au {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Date",AMOUNT:"Montant",COMMENT:"Commentaire"}},TRANSFER:{TITLE:"Virement",SUB_TITLE:"Faire un virement",FROM:"De",TO:"",AMOUNT:"Montant",AMOUNT_HELP:"Montant",COMMENT:"Commentaire",COMMENT_HELP:"Commentaire",BTN_SEND:"Envoyer",BTN_ADD_COMMENT:"Ajouter un commentaire",WARN_COMMENT_IS_PUBLIC:"Veuillez noter que <b>les commentaires sont publiques</b> (non chiffr).",MODAL:{TITLE:"Virement"}},ERROR:{POPUP_TITLE:"Erreur",UNKNOWN_ERROR:"Erreur inconnue",CRYPTO_UNKNOWN_ERROR:"Votre navigateur ne semble pas compatible avec les fonctionnalits de cryptographie.",EQUALS_TO_PSEUDO:"Doit tre diffrent du pseudonyme",EQUALS_TO_SALT:"Doit tre diffrent de l'identifiant secret",FIELD_REQUIRED:"Champ obligatoire.",FIELD_TOO_SHORT:"Valeur trop courte.",FIELD_TOO_SHORT_WITH_LENGTH:"Valeur trop courte ({{minLength}} caractres min)",FIELD_TOO_LONG:"Valeur trop longue",FIELD_TOO_LONG_WITH_LENGTH:"Valeur trop longue ({{maxLength}} caractres max)",FIELD_MIN:"Valeur minimale : {{min}}",FIELD_MAX:"Valeur maximale : {{max}}",FIELD_ACCENT:"Caractres accentus et virgules non autoriss",FIELD_NOT_NUMBER:"Valeur numrique attendue",FIELD_NOT_INT:"Valeur entire attendue",FIELD_NOT_EMAIL:"Adresse email non valide",PASSWORD_NOT_CONFIRMED:"Ne correspond pas au mot de passe.",SALT_NOT_CONFIRMED:"Ne correspond pas  l'identifiant secret.",SEND_IDENTITY_FAILED:"Echec de l'inscription.",SEND_CERTIFICATION_FAILED:"Echec de la certification.",NEED_MEMBER_ACCOUNT_TO_CERTIFY:"Vous ne pouvez pas effectuer de certification, car votre compte n'est <b>pas membre</b>.",NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF:"Vous ne pouvez pas effectuer de certification, car votre compte n'est pas encore membre.<br/><br/>Il vous manque encore des certifications, ou bien celles-ci n'ont pas encore t valides.",NOT_MEMBER_FOR_CERTIFICATION:"Votre compte n'est pas encore membre.",IDENTITY_TO_CERTIFY_HAS_NO_SELF:"Compte non certifiable. Aucune demande d'adhsion n'a t faite, ou bien elle n'a pas t renouvelle.",LOGIN_FAILED:"Erreur lors de la connexion.",LOAD_IDENTITY_FAILED:"Erreur de chargement de l'identit.",LOAD_REQUIREMENTS_FAILED:"Erreur de chargement des prrequis de l'identit.",SEND_MEMBERSHIP_IN_FAILED:"Echec de la tentative d'entre dans la communaut.",SEND_MEMBERSHIP_OUT_FAILED:"Echec de l'arret de l'adhsion.",REFRESH_WALLET_DATA:"Echec du rafraichissement du portefeuille.",GET_CURRENCY_PARAMETER:"Echec de la rcupration des rgles de la monnaie.",GET_CURRENCY_FAILED:"Chargement de la monnaie impossible. Veuillez ressayer plus tard.",SEND_TX_FAILED:"Echec du virement.",ALL_SOURCES_USED:"Veuillez attendre le calcul du prochain bloc (Toutes vos sources de monnaie ont t utilises).",NOT_ENOUGH_SOURCES:"Pas assez de change pour envoyer ce montant en une seule transaction.<br/>Montant maximum : {{amount}} {{unit}}<sub>{{subUnit}}</sub>.",ACCOUNT_CREATION_FAILED:"Echec de la cration du compte membre.",RESTORE_WALLET_DATA_ERROR:"Echec du rechargement des paramtres depuis le stockage local",LOAD_WALLET_DATA_ERROR:"Echec du chargement des donnes du portefeuille.",COPY_CLIPBOARD_FAILED:"Copie de la valeur impossible.",TAKE_PICTURE_FAILED:"Echec de la rcupration de la photo.",SCAN_FAILED:"Echec du scan de QR Code",SCAN_UNKNOWN_FORMAT:"Code non reconnu.",WOT_LOOKUP_FAILED:"Echec de la recherche",LOAD_PEER_DATA_FAILED:"Lecture du nud Duniter impossible. Veuillez ressayer ultrieurement.",NEED_LOGIN_FIRST:"Veuillez d'abord vous connecter.",AMOUNT_REQUIRED:"Le montant est obligatoire.",AMOUNT_NEGATIVE:"Montant ngatif non autoris.",NOT_ENOUGH_CREDIT:"Crdit insufisant.",INVALID_NODE_SUMMARY:"Nud injoignable ou adresse invalide.",INVALID_USER_ID:"Le pseudonyme ne doit contenir ni espace ni caractre spcial ou accentu.",INVALID_COMMENT:"Le champ 'rfrence' ne doit pas contenir de caractres accentus.",INVALID_PUBKEY:"La cl publique n'a pas le format attendu.",IDENTITY_REVOKED:"Cette identit <b>a t rvoque {{revocationTime|formatFromNow}}</b> ({{revocationTime|formatDate}}). Elle ne peut plus devenir membre.",IDENTITY_PENDING_REVOCATION:"La <b>rvocation de cette identit</b> a t demande et est en attente de traitement. La certification est donc dsactive.",IDENTITY_INVALID_BLOCK_HASH:"Cette demande d'adhsion n'est plus valide (car elle rfrence un bloc que les nuds du rseau ont annul) : cette personne doit renouveler sa demande d'adhsion <b>avant</b> d'tre certifie.",IDENTITY_EXPIRED:"La publication de cette identit a expire : cette personne doit effectuer une nouvelle demande d'adhsion <b>avant</b> d'tre certifie.",IDENTITY_SANDBOX_FULL:"Le nud Duniter utilis par Cesium ne peut plus recevoir de nouvelles identits, car sa file d'attente est pleine.<br/><br/>Veuillez ressayer ultrieurement ou changer de nud (via le menu <b>Paramtres</b>).",IDENTITY_NOT_FOUND:"Identit non trouve",IDENTITY_TX_FAILED:"Echec du chargement des oprations",WOT_PENDING_INVALID_BLOCK_HASH:"Adhsion non valide.",WALLET_INVALID_BLOCK_HASH:"Votre demande d'adhsion n'est plus valide (car elle rfrence un bloc que les nuds du rseau ont annul).<br/>Vous devez <a ng-click=\"doQuickFix('fixMembership')\">envoyer une nouvelle demande</a> pour rsoudre ce problme.",WALLET_IDENTITY_EXPIRED:"La publication de <b>votre identit a expire</b>.<br/>Vous devez <a ng-click=\"doQuickFix('fixIdentity')\">publier  nouveau votre identit</a> pour rsoudre ce problme.",WALLET_REVOKED:"Votre identit a t <b>rvoque</b> : ni votre pseudonyme ni votre clef publique ne pourront tre utiliss  l'avenir pour un compte membre.",WALLET_HAS_NO_SELF:"Votre identit doit d'abord avoir t publie, et ne pas tre expire.",AUTH_REQUIRED:"Authentification requise.",AUTH_INVALID_PUBKEY:'La clef attendue est <i class="ion-key"></i> {{pubkey|formatPubkey}}...',AUTH_INVALID_SCRYPT:"Identifiant ou mot de passe invalide.",AUTH_INVALID_FILE:"Fichier de trousseau invalide.",AUTH_FILE_ERROR:"Echec de l'ouverture du fichier de trousseau",IDENTITY_ALREADY_CERTIFY:"Vous avez <b>dj certifi</b> cette identit.<br/><br/>Cette certification est encore valide (expiration {{expiresIn|formatDurationTo}}).",IDENTITY_ALREADY_CERTIFY_PENDING:"Vous avez <b>dj certifi</b> cette identit.<br/><br/>Cette certification est en attente de traitement (date limite de traitement {{expiresIn|formatDurationTo}}).",UNABLE_TO_CERTIFY_TITLE:"Certification impossible",LOAD_NEWCOMERS_FAILED:"Echec du chargement des nouveaux membres.",LOAD_PENDING_FAILED:"Echec du chargement des inscriptions en attente.",ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION:"Vous devez <b>tre membre</b> pour pouvoir effectuer cette action.",ONLY_SELF_CAN_EXECUTE_THIS_ACTION:"Vous devez avoir <b>publi votre identit</b> pour pouvoir effectuer cette action.",GET_BLOCK_FAILED:"Echec de la rcupration du bloc",INVALID_BLOCK_HASH:"Bloc non trouv (hash diffrent)",DOWNLOAD_REVOCATION_FAILED:"Echec du tlchargement du fichier de rvocation.",REVOCATION_FAILED:"Echec de la rvocation.",SALT_OR_PASSWORD_NOT_CONFIRMED:"Identifiant secret ou mot de passe incorrects",RECOVER_ID_FAILED:"Echec de la rcupration des identifiants",LOAD_FILE_FAILED:"Echec du chargement du fichier",NOT_VALID_REVOCATION_FILE:"Fichier de revocation non valide (mauvais format de fichier)",NOT_VALID_SAVE_ID_FILE:"Fichier de rcupration non valide (mauvais format de fichier)",NOT_VALID_KEY_FILE:"Fichier de trousseau non valide (format non reconnu)",EXISTING_ACCOUNT:"Vos identifiants correspondent  un compte dj existant, dont la <a ng-click=\"showHelpModal('pubkey')\">clef publique</a> est :",EXISTING_ACCOUNT_REQUEST:"Veuillez modifier vos identifiants afin qu'ils correspondent  un compte non utilis.",GET_LICENSE_FILE_FAILED:"Rcuprer du fichier de licence impossible",CHECK_NETWORK_CONNECTION:"Aucun nud ne semble accessible.<br/><br/>Veuillez <b>vrifier votre connection Internet</b>.",ISSUE_524_TX_FAILED:"Echec du virement.<br/><br/>Un message a t envoy aux dveloppeurs pour faciliter la rsolution du problme. <b>Merci de votre aide</b>."},INFO:{POPUP_TITLE:"Information",CERTIFICATION_DONE:"Certification envoye",NOT_ENOUGH_CREDIT:"Crdit insuffisant",TRANSFER_SENT:"Virement envoy",COPY_TO_CLIPBOARD_DONE:"Copi dans le presse-papier",MEMBERSHIP_OUT_SENT:"Rsiliation envoye",NOT_NEED_MEMBERSHIP:"Vous tes dj membre.",IDENTITY_WILL_MISSING_CERTIFICATIONS:"Cette identit va bientt manquer de certification (au moins {{willNeedCertificationCount}}).",IDENTITY_NEED_MEMBERSHIP:"Cette identit n'a pas envoye de demande d'adhsion. Elle devra si elle souhaite devenir membre.",REVOCATION_SENT:"Revocation envoye",REVOCATION_SENT_WAITING_PROCESS:"La <b>rvocation de cette identit</b> a t demande et est en attente de traitement.",FEATURES_NOT_IMPLEMENTED:"Cette fonctionnalit est encore en cours de dveloppement.<br/>Pourquoi ne pas <b>contribuer  Cesium</b>, pour l'obtenir plus rapidement ? ;)",EMPTY_TX_HISTORY:"Aucune opration  exporter"},CONFIRM:{POPUP_TITLE:"<b>Confirmation</b>",POPUP_WARNING_TITLE:"<b>Avertissement</b>",POPUP_SECURITY_WARNING_TITLE:'<i class="icon ion-alert-circled"></i> <b>Avertissement de scurit</b>',CERTIFY_RULES_TITLE_UID:"Certifier {{uid}}",CERTIFY_RULES:'<b class="assertive">Ne PAS certifier</b> un compte si vous pensez que :<br/><br/><ul><li>1.) il ne correspond pas  une personne <b>physique et vivante</b>.<li>2.) son propritaire <b>possde un autre compte</b> dj certifi.<li>3.) son propritaire viole (volontairement ou non) la rgle 1 ou 2 (par exemple en certifiant des comptes factices ou en double).</ul><br/><b>Etes-vous sr</b> de vouloir nanmoins certifier cette identit ?',TRANSFER:"<b>Rcapitulatif du virement</b> :<br/><br/><ul><li> - De : {{from}}</li><li> - A : <b>{{to}}</b></li><li> - Montant : <b>{{amount}} {{unit}}</b></li><li> - Commentaire : <i>{{comment}}</i></li></ul><br/><b>Etes-vous sr de vouloir effectuer ce virement ?</b>",MEMBERSHIP_OUT:"Cette opration est <b>irrversible</b>.<br/></br/>Etes-vous sr de vouloir <b>rsilier votre compte membre</b> ?",MEMBERSHIP_OUT_2:"Cette opration est <b>irreversible</b> !<br/><br/>Etes-vous vraiment sr de vouloir <b>rsilier votre adhsion</b> comme membre ?",LOGIN_UNUSED_WALLET_TITLE:"Erreur de saisie ?",LOGIN_UNUSED_WALLET:"Le compte connect semble <b>inactif</b>.<br/><br/>Il s'agit probablement d'une <b>erreur de saisie</b> dans vos identifiants de connexion. Veuillez recommencer, en vrifiant que <b>la cl publique est celle de votre compte</b>.",FIX_IDENTITY:"Le pseudonyme <b>{{uid}}</b> va tre publie  nouveau, en remplacement de l'ancienne publication qui a expire.<br/></br/><b>Etes-vous sr</b> de vouloir continuer ?",FIX_MEMBERSHIP:"Votre demande d'adhsion comme membre va tre renvoye.<br/></br/><b>Etes-vous sr</b> de vouloir continuer ?",MEMBERSHIP:"Votre demande d'adhsion comme membre va tre envoye.<br/></br/><b>Etes-vous sr</b> de vouloir continuer ?",RENEW_MEMBERSHIP:"Votre adhsion comme membre va tre renouvelle.<br/></br/><b>Etes-vous sr</b> de vouloir continuer ?",REVOKE_IDENTITY:"Vous allez <b>revoquer dfinitivement cette identit</b>.<br/><br/>La cl publique et le pseudonyme associs <b>ne pourront plus jamais tre utiliss</b> (pour un compte membre). <br/></br/><b>Etes-vous sr</b> de vouloir rvoquer dfinitivement ce compte ?",REVOKE_IDENTITY_2:"Cette opration est <b>irreversible</b> !<br/><br/>Etes-vous vraiment sr de vouloir <b>rvoquer dfinitivement</b> ce compte ?",NOT_NEED_RENEW_MEMBERSHIP:"Votre adhsion n'a pas besoin d'tre renouvelle (elle n'expirera que dans {{membershipExpiresIn|formatDuration}}).<br/></br/><b>Etes-vous sr</b> de vouloir renouveler votre adhsion ?",SAVE_BEFORE_LEAVE:"Voulez-vous <b>sauvegarder vos modifications</b> avant de quitter la page ?",SAVE_BEFORE_LEAVE_TITLE:"Modifications non enregistres",LOGOUT:"Etes-vous sr de vouloir vous dconnecter ?",USE_FALLBACK_NODE:"Nud <b>{{old}}</b> injoignable ou adresse invalide.<br/><br/>Voulez-vous temporairement utiliser le nud <b>{{new}}</b> ?",ISSUE_524_SEND_LOG:"La transaction a t rejette,  cause d'une anomalie connue (ticket #524) mais <b>non reproduite</b>.<br/><br/>Pour nous aider les dveloppeurs  corriger cette erreur, <b>acceptez-vous la transmission de vos logs</b> par message ?<br/><small>(Aucune donne confidentielle n'est envoye)</small>."},DOWNLOAD:{POPUP_TITLE:"<b>Fichier de rvocation</b>",POPUP_REVOKE_MESSAGE:"Pour scuriser votre compte, veuillez tlcharger le <b>document de rvocation de compte</b>. Il vous permettra le cas chant d'annuler votre compte (en cas d'un vol de compte, d'un changement d'identifiant, d'un compte cr  tort, etc.).<br/><br/><b>Veuillez le stocker en lieu sr.</b>"},HELP:{TITLE:"Aide en ligne",JOIN:{SECTION:"Inscription",SALT:"L'identifiant secret est trs important. Il sert  mlanger le mot de passe, avant qu'il ne servent  calculer la <span class=\"text-italic\">cl publique</span> de votre compte (son numro) et la cl secrte pour y accder.<br/><b>Veuillez  bien la mmoriser</b>, car aucun moyen n'est actuellement prvu pour la retrouver en cas de perte.<br/>Par ailleurs, il ne peut pas tre modifi sans devoir crer un nouveau compte.<br/><br/>Un bon identifiant secret doit tre suffisamment long (au moins 8 caractres) et le plus original possible.",PASSWORD:"Le mot de passe est trs important. Avec l'identifiant secret, il sert   calculer le numro (la cl publique) de votre compte, et la cl secrte pour y accder.<br/><b>Veuillez  bien le mmoriser</b>, car aucun moyen n'est de le retrouver en cas de perte (sauf  gnrer un fichier de sauvegarde).<br/>Par ailleurs, il ne peut pas tre modifi sans devoir crer un nouveau compte.<br/><br/>Un bon mot de passe contient (idalement) au moins 8 caractres, dont au moins une majuscule et un chiffre.",PSEUDO:'Le pseudonyme utilis uniquement dans le cas d\'inscription comme <span class="text-italic">membre</span>. Il est toujours associ  un portefeuille (via sa <span class="text-italic">cl publique</span>).<br/>Il est publi sur le rseau, afin que les autres utilisateurs puisse l\'identifier, le certifier ou envoyer de la monnaie sur le compte.<br/>Un pseudonyme doit tre unique au sein des membres (<u>actuels</u> et anciens).'},LOGIN:{SECTION:"Connexion",PUBKEY:"Cl publique du trousseau",PUBKEY_DEF:'La clef publique du trousseau est gnre  partir des identifiants saisis (n\'importe lesquels), sans pour autant qu\'ils correspondent  un compte dj utilis.<br/><b>Vrifiez attentivement que la cl publique est celle de votre compte</b>. Dans le cas contraire, vous serez connect  un compte probablement jamais utilis, le risque de collision avec un compte existant tant infime.<br/><a href="https://fr.wikipedia.org/wiki/Cryptographie_asym%C3%A9trique" target="_system">En savoir plus sur la cryptographie</a> par cl publique.',METHOD:"Mthodes de connexion",METHOD_DEF:'Plusieurs options sont disponibles pour vous connecter  un portfeuille :<br/> - La connexion <b>par sallage (simple ou avanc)</b> mlange votre mot de passe grce  l\'identifiant secret, pour limiter les tentatives de <a href="https://fr.wikipedia.org/wiki/Attaque_par_force_brute" target="_system">piratage par force brute</a> (par exemple  partir de mots connus).<br/> - La connexion <b>par cl publique</b> vite de saisir vos identifiants, qui vous seront demand seulement le moment venu lors d\'une opration sur le compte.<br/> - La connexion <b>par fichier de trousseau</b> va lire les cls (publique et prive) du compte, depuis un fichier, sans besoin de saisir d\'identifiants. Plusieurs formats de fichier sont possibles.'},GLOSSARY:{SECTION:"Glossaire",PUBKEY_DEF:'Une cl publique identifie un portefeuille de monnaie, qui peut identifier un membre ou correspondre  un portefeuille anonyme. Dans Cesium la cl publique est calcule (par dfaut) grce  l\'identifiant secret et au mot de passe.<br/><a href="https://fr.wikipedia.org/wiki/Cryptographie_asym%C3%A9trique" target="_system">En savoir plus sur la cryptographie</a> par cl publique.',MEMBER:"Membre",MEMBER_DEF:'Un membre est une personne humaine physique et vivante, dsireuse de participer librement  la communaut montaire. Elle percoit un dividende universel, suivant une priode et un montant tels que dfinis dans les <span class="text-italic">rgles de la monnaie</span>',CURRENCY_RULES:"Rgles de la monnaie",CURRENCY_RULES_DEF:'Les rgles de la monnaie sont dfinies une fois pour toute. Elle fixe le fonctionnement de la monnaie : le calcul du dividend universel, le nombre de certifications ncessaire pour tre membre, le nombre de certification maximum qu\'un membre peut donner, etc. <a href="#/app/currency">Voir les rgles actuelles</a>.<br/>La non modification des rgles dans le temps est possible par l\'utilisation d\'une <span class="text-italic">BlockChain</span> qui porte et execute ces rgles, et en vrifie constamment la bonne application.',BLOCKCHAIN:'Chane de blocs (<span class="text-italic">Blockchain</span>)',BLOCKCHAIN_DEF:'La BlockChain est un systme dcentralis, qui, dans le cas de Duniter, sert  porter et executer les <span class="text-italic">rgles de la monnaie</span>.<br/><a href="https://duniter.org/fr/comprendre/" target="_system">En savoir plus sur Duniter</a> et le fonctionnement de sa blockchain.',UNIVERSAL_DIVIDEND_DEF:'Le Dividende Universel (DU) est la quantit de monnaie co-cre par chaque membre, suivant la priode et le calcul dfinie dans les <span class="text-italic">rgles de la monnaie</span>.<br/>A chaque chance, les membres recoivent sur leur compte la meme quantit de nouvelle monnaie.<br/><br/>Le DU subit une croissance rgulire, pour rester juste entre les membres (actuels et  venir), calcule en fonction de l\'esprance de vie moyenne, telle que dmontr dans la Throrie Relative de la Monnaie (TRM).<br/><a href="http://trm.creationmonetaire.info" target="_system">En savoir plus sur la TRM</a> et les monnaies libres.'},TIP:{MENU_BTN_CURRENCY:"Le menu <b>{{'MENU.CURRENCY'|translate}}</b> permet la consultation des <b>rgles de la monnaie</b> et de son tat.",CURRENCY_WOT:"Le <b>nombre de membres</b> montre l'importance de la communaut et permet de <b>suivre son volution</b>.",CURRENCY_MASS:"Suivez ici la <b>quantit totale de monnaie</b> existante et sa <b>rpartition moyenne</b> par membre.<br/><br/>Ceci permet de juger de l'<b>importance d'un montant</b>, vis  vis de ce que <b>possde les autres</b> sur leur compte (en moyenne).",CURRENCY_UNIT_RELATIVE:"L'unit utilise (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifie que les montants en {{currency|capitalize}} ont t diviss par le <b>Dividende Universel</b> (DU).<br/><br/><small>Cette unit relative est <b>pertinente</b>, car stable malgr la quantiti de monnaie qui augmente en permanence.</small>",CURRENCY_CHANGE_UNIT:"L'option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> permet de <b>changer d'unit</b>, pour visualiser les montants <b>directement en {{currency|capitalize}}</b> (plutt qu'en &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;).",CURRENCY_CHANGE_UNIT_TO_RELATIVE:"L'option <b>{{'COMMON.BTN_RELATIVE_UNIT'|translate}}</b> permet de <b>changer d'unit</b>, pour visualiser les montants en &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;, c'est  dire relativement au Dividende Universel (le montant co-produit par chaque membre).",CURRENCY_RULES:"Les <b>rgles</b> de la monnaie fixent son fonctionnement <b>exact et prvisible</b>.<br/><br/>Vritable ADN de la monnaie, elles rendent son code montaire <b>lisible et transparent</b>.",MENU_BTN_NETWORK:"Le menu <b>{{'MENU.NETWORK'|translate}}</b> permet la consultation de l'tat du rseau.",NETWORK_BLOCKCHAIN:"Toutes les oprations de la monnaie sont enregistres dans un grand livre de compte <b>public et infalsifiable</b>, appell aussi <b>chaine de blocs</b> (<em>BlockChain</em> en anglais).",NETWORK_PEERS:"Les <b>nuds</b> visibles ici correspondent aux <b>ordinateurs qui actualisent et contrlent</b> la chaine de blocs.<br/><br/>Plus il y a de nuds, plus la monnaie  une gestion <b>dcentralise</b> et digne de confiance.",NETWORK_PEERS_BLOCK_NUMBER:"Ce <b>numro</b> (en vert) indique le <b>dernier bloc valid</b> pour ce nud (dernire page crite dans le grand livre de comptes).<br/><br/>La couleur verte indique que ce bloc est galement valid par <b>la plupart des autres nuds</b>.",
NETWORK_PEERS_PARTICIPATE:'<b>Chaque membre</b>, quip d\'un ordinateur avec Internet, <b>peut participer en ajoutant un nud</b>. Il suffit d\'<b>installer le logiciel Duniter</b> (libre et gratuit). <a href="{{installDocUrl}}" target="_system">Voir le manuel d\'installation &gt;&gt;</a>.',MENU_BTN_ACCOUNT:"Le menu <b>{{'ACCOUNT.TITLE'|translate}}</b> permet d'accder  la gestion de votre compte.",MENU_BTN_ACCOUNT_MEMBER:"Consultez ici l'tat de votre compte et les informations sur vos certifications.",WALLET_CERTIFICATIONS:"Cliquez ici pour consulter le dtail de vos certifications (reues et mises).",WALLET_RECEIVED_CERTIFICATIONS:"Cliquez ici pour consulter le dtail de vos <b>certifications reues</b>.",WALLET_GIVEN_CERTIFICATIONS:"Cliquez ici pour consulter le dtail de vos <b>certifications mises</b>.",WALLET_BALANCE:"Le <b>solde</b> de votre compte s'affiche ici.",WALLET_BALANCE_RELATIVE:"{{'HELP.TIP.WALLET_BALANCE'|translate}}<br/><br/>L'unit utilise (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifie que le montant en {{currency|capitalize}} a t divis par le <b>Dividende Universel</b> (DU) co-cr par chaque membre.<br/><br/>Actuellement 1 DU vaut {{currentUD|formatInteger}} {{currency|capitalize}}s.",WALLET_BALANCE_CHANGE_UNIT:"Vous pourrez <b>changer l'unit</b> d'affichage des montants dans les <b><i class=\"icon ion-android-settings\"></i>&nbsp;{{'MENU.SETTINGS'|translate}}</b>.<br/><br/>Par exemple pour visualiser les montants <b>directement en {{currency|capitalize}}</b>, plutt qu'en unit relative.",WALLET_PUBKEY:"Voici la cl publique de votre compte. Vous pouvez la communiquer  un tiers afin qu'il identifie plus simplement votre compte.",WALLET_SEND:"Effectuer un paiement en quelques clics",WALLET_SEND_NO_MONEY:"Effectuer un paiement en quelques clics.<br/>(Votre solde ne le permet pas encore)",WALLET_OPTIONS:"Ce bouton permet l'accs aux <b>actions d'adhsion</b> et de scurit.<br/><br/>N'oubliez pas d'y jeter un oeil !",WALLET_RECEIVED_CERTS:"S'affichera ici la liste des personnes qui vous ont certifi.",WALLET_CERTIFY:"Le bouton <b>{{'WOT.BTN_SELECT_AND_CERTIFY'|translate}}</b> permet de slectionner une identiti et de la certifier.<br/><br/>Seuls des utilisateurs <b>dj membre</b> peuvent en certifier d'autres.",WALLET_CERT_STOCK:"Votre stock de certification (mises) est limit  <b>{{sigStock}} certifications</b>.<br/><br/>Ce stock se renouvelle avec le temps, au fur et  mesure que les certifications s'invalident.",MENU_BTN_TX_MEMBER:"Le menu <b>{{'MENU.TRANSACTIONS'|translate}}</b> permet de consulter votre solde, l'historique vos transactions et d'envoyer un paiement.",MENU_BTN_TX:"Consultez ici <b>l'historique de vos transactions</b> et effectuer de nouvelles oprations.",MENU_BTN_WOT:"Le menu <b>{{'MENU.WOT'|translate}}</b> permet de rechercher parmi les <b>utilisateurs</b> de la monnaie (membre ou non).",WOT_SEARCH_TEXT_XS:"Pour rechercher dans l'annuaire, tapez les <b>premires lettres d'un pseudonyme</b> (ou d'une cl publique).<br/><br/>La recherche se lancera automatiquement.",WOT_SEARCH_TEXT:"Pour rechercher dans l'annuaire, tapez les <b>premires lettres d'un pseudonyme</b> (ou d'une cl publique). <br/><br/>Appuyer ensuite sur <b>Entre</b> pour lancer la recherche.",WOT_SEARCH_RESULT:"Visualisez la fiche dtaille simplement en <b>cliquant</b> sur une ligne.",WOT_VIEW_CERTIFICATIONS:"La ligne <b>{{'ACCOUNT.CERTIFICATION_COUNT'|translate}}</b> montre combien de membres ont valids cette identit.<br/><br/>Ces certifications attestent que le compte appartient  <b>une personne humaine vivante</b> n'ayant <b>aucun autre compte membre</b>.",WOT_VIEW_CERTIFICATIONS_COUNT:"Il faut au moins <b>{{sigQty}} certifications</b> pour devenir membre et recevoir le <b>Dividende Universel</b>.",WOT_VIEW_CERTIFICATIONS_CLICK:"Un clic ici permet d'ouvrir <b>la liste de toutes les certifications</b> de l'identit (reues et mises).",WOT_VIEW_CERTIFY:"Le bouton <b>{{'WOT.BTN_CERTIFY'|translate}}</b> permet d'ajouter votre certification  cette identit.",CERTIFY_RULES:"<b>Attention :</b> Ne certifier que des <b>personnes physiques vivantes</b>, ne possdant aucun autre compte membre.<br/><br/>La scurit de la monnaie dpend de la vigilance de chacun !",MENU_BTN_SETTINGS:"Les <b>{{'MENU.SETTINGS'|translate}}</b> vous permettront de configurer l'application.",HEADER_BAR_BTN_PROFILE:"Cliquez ici pour accder  votre <b>profil utilisateur</b>",SETTINGS_CHANGE_UNIT:"Vous pourrez <b>changer d'unit d'affichage</b> des montants en cliquant ci-dessus.<br/><br/>- Dsactivez l'option pour un affichage des montants en {{currency|capitalize}}.<br/>- Activez l'option pour un affichage relatif en {{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub> (tous les montants seront <b>diviss</b> par le Dividende Universel courant).",END_LOGIN:"Cette visite guide est <b>termine</b> !<br/><br/>Bonne continuation  vous, dans le nouveau monde de l'<b>conomie libre</b> !",END_NOT_LOGIN:"Cette visite guide est <b>termine</b> !<br/><br/>Si vous souhaitez rejoindre la monnaie {{currency|capitalize}}, il vous suffira de cliquer sur <b>{{'LOGIN.CREATE_ACCOUNT'|translate}}</b> ci-dessous."}},API:{COMMON:{LINK_DOC:"documentation API",LINK_DOC_HELP:"Documentation pour les dveloppeurs",LINK_STANDARD_APP:"version classique",LINK_STANDARD_APP_HELP:"Ouvrir la version classique de {{'COMMON.APP_NAME'|translate}}"},HOME:{TITLE:"Documentation API {{'COMMON.APP_NAME'|translate}}",MESSAGE:'Bienvenue dans la <b>documentation de l\'API</b> {{\'COMMON.APP_NAME\'|translate}}.<br/>Connecter vos sites web  <a href="http://duniter.org" target="_system">Duniter</a> trs simplement !',MESSAGE_SHORT:'Connecter vos sites  <a href="http://duniter.org" target="_system">Duniter</a> trs simplement !',DOC_HEADER:"Services disponibles :"},TRANSFER:{TITLE:"{{'COMMON.APP_NAME'|translate}} - Paiement en ligne",TITLE_SHORT:"Paiement en ligne",SUMMARY:"Rcapitulatif de la commande :",AMOUNT:"Montant :",NAME:"Nom :",PUBKEY:"Cl publique du destinaire :",COMMENT:"Rfrence de la commande :",DEMO:{SALT:"demo",PASSWORD:"demo",PUBKEY:"3G28bL6deXQBYpPBpLFuECo46d3kfYMJwst7uhdVBnD1",HELP:"<b>Mode dmonstration</b> : Aucun paiement ne sera rellement envoy pendant cette simulation.<br/>Veuillez utiliser les identifiants : <b>{{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}</b>",BAD_CREDENTIALS:"Vrifiez votre saisie.<br/>En mode dmonstration, les identifiants sont : {{'API.TRANSFER.DEMO.SALT'|translate}} / {{'API.TRANSFER.DEMO.PASSWORD'|translate}}"},INFO:{SUCCESS_REDIRECTING_WITH_NAME:"Paiement envoy.<br/>Redirection vers <b>{{name}}</b>...",SUCCESS_REDIRECTING:"Paiement envoy.<br/>Redirection vers le site du vendeur...",CANCEL_REDIRECTING_WITH_NAME:"Paiement annul.<br/>Redirection vers <b>{{name}}</b>...",CANCEL_REDIRECTING:"Paiement annul.<br/>Redirection vers le site du vendeur..."},ERROR:{TRANSFER_FAILED:"Echec du paiement"}},DOC:{DESCRIPTION_DIVIDER:"Description",URL_DIVIDER:"Adresse d'appel",PARAMETERS_DIVIDER:"Paramtres",AVAILABLE_PARAMETERS:"Voici la liste des paramtres possibles :",DEMO_DIVIDER:"Tester",DEMO_HELP:"Pour tester ce service, cliquez sur le bouton ci-contre. Le rsultat s'affichera en dessous.",DEMO_RESULT:"Rsultat retourn par l'appel :",DEMO_SUCCEED:'<i class="icon ion-checkmark"></i> Succs !',DEMO_CANCELLED:'<i class="icon ion-close"></i> Annul par l\'utilisateur',INTEGRATE_DIVIDER:"Intgrer",INTEGRATE_CODE:"Code :",INTEGRATE_RESULT:"Prvisualisation du rsultat :",INTEGRATE_PARAMETERS:"Paramtres",TRANSFER:{TITLE:"Paiements",DESCRIPTION:"Depuis un site (ex: vente en ligne) vous pouvez dlguer le paiement en monnaie libre  Cesium API. Pour cela, il vous suffit de dclencher l'ouveture d'un page sur l'adresse suivante :",PARAM_PUBKEY:"Cl publique du destinataire",PARAM_PUBKEY_HELP:"Cl publique du destinataire (obligatoire)",PARAM_AMOUNT:"Montant",PARAM_AMOUNT_HELP:"Montant de la transaction (obligatoire)",PARAM_COMMENT:"Rfrence (ou commentaire)",PARAM_COMMENT_HELP:"Rfrence ou commentaire. Vous permettra par exemple d'identifier le paiement dans la BlockChain.",PARAM_NAME:"Nom (du destinataire ou du site web)",PARAM_NAME_HELP:'Le nom du destinataire, ou du site web appellant. Cela peut-etre un nom lisible ("Mon site en ligne"), ou encore une pseudo-adresse web ("MonSite.com").',PARAM_REDIRECT_URL:"Adresse web de redirection",PARAM_REDIRECT_URL_HELP:'Adresse web (URL) de redirection, appell quand le paiement a t envoy. Peut contenir les chaines suivantes, qui seront remplace par les valeurs de la transaction : "{tx}", "{hash}", "{comment}", "{amount}" et {pubkey}.',PARAM_CANCEL_URL:"Adresse web d'annulation",PARAM_CANCEL_URL_HELP:'Adresse web (URL) en cas d\'annulation du paiement, par l\'utilisateur. Peut contenir les chaines suivantes, qui seront remplace dynamiquement: "{comment}", "{amount}" et {pubkey}.',EXAMPLES_HELP:"Voici des exemples d'intgration :",EXAMPLE_BUTTON:"Bouton HTML",EXAMPLE_BUTTON_DEFAULT_TEXT:"Payer en {{currency|currencySymbol}}",EXAMPLE_BUTTON_DEFAULT_STYLE:"Style personnalis",EXAMPLE_BUTTON_TEXT_HELP:"Texte du bouton",EXAMPLE_BUTTON_BG_COLOR:"Couleur du fond",EXAMPLE_BUTTON_BG_COLOR_HELP:"Exemple: #fbc14c, black, lightgrey, rgb(180,180,180)",EXAMPLE_BUTTON_FONT_COLOR:"Couleur du texte",EXAMPLE_BUTTON_FONT_COLOR_HELP:"Exemple: black, orange, rgb(180,180,180)",EXAMPLE_BUTTON_TEXT_ICON:"Icne",EXAMPLE_BUTTON_TEXT_WIDTH:"Largeur",EXAMPLE_BUTTON_TEXT_WIDTH_HELP:"Exemple: 200px, 50%",EXAMPLE_BUTTON_ICON_NONE:"Aucune",EXAMPLE_BUTTON_ICON_DUNITER:"Logo Duniter",EXAMPLE_BUTTON_ICON_CESIUM:"Logo Cesium",EXAMPLE_BUTTON_ICON_G1_COLOR:"Logo 1",EXAMPLE_BUTTON_ICON_G1_BLACK:"Logo 1 (noir)"}}}}),e.translations("nl-NL",{COMMON:{APP_NAME:"Cesium",APP_VERSION:"v{{version}}",APP_BUILD:"build {{build}}",PUBKEY:"Publieke sleutel",MEMBER:"Lid",BLOCK:"Blok",BTN_OK:"OK",BTN_YES:"Ja",BTN_NO:"Nee",BTN_SEND:"Verzenden",BTN_SEND_MONEY:"Verstuur geld",BTN_SEND_MONEY_SHORT:"Versturen",BTN_SAVE:"Opslaan",BTN_YES_SAVE:"Ja, opslaan",BTN_YES_CONTINUE:"Ja, doorgaan",BTN_SHOW:"Tonen",BTN_SHOW_PUBKEY:"Toon sleutel",BTN_RELATIVE_UNIT:"Gebruik relatieve eenheid",BTN_BACK:"Terug",BTN_NEXT:"Volgende",BTN_CANCEL:"Annuleer",BTN_CLOSE:"Sluit",BTN_LATER:"Later",BTN_LOGIN:"Aanmelden",BTN_LOGOUT:"Uitloggen",BTN_ADD_ACCOUNT:"Nieuwe Rekening",BTN_SHARE:"Delen",BTN_EDIT:"Bewerken",BTN_DELETE:"Wissen",BTN_ADD:"Toevoegen",BTN_SEARCH:"Zoeken",BTN_REFRESH:"Verwezenlijken",BTN_START:"Beginnen",BTN_CONTINUE:"Doorgaan",BTN_UNDERSTOOD:"Ik heb het begrepen",BTN_OPTIONS:"Opties",BTN_HELP_TOUR:"Rondleiding",BTN_HELP_TOUR_SCREEN:"Ontdek dit scherm",BTN_DOWNLOAD:"Downloaden",BTN_DOWNLOAD_ACCOUNT_STATEMENT:"Downloaden het rekeningoverzicht",BTN_MODIFY:"Bewerken",DAYS:"dagen",NO_ACCOUNT_QUESTION:"Nog geen lid? Registreer nu!",SEARCH_NO_RESULT:"Geen resultaten",LOADING:"Even geduld...",SEARCHING:"Zoeken...",FROM:"Van",TO:"Aan",COPY:"Kopieren",LANGUAGE:"Taal",UNIVERSAL_DIVIDEND:"Universeel dividend",UD:"UD",DATE_PATTERN:"DD-MM-YYYY HH:mm",DATE_FILE_PATTERN:"YYYY-MM-DD",DATE_SHORT_PATTERN:"DD-MM-YY",DATE_MONTH_YEAR_PATTERN:"MM-YYYY",EMPTY_PARENTHESIS:"(leeg)",UID:"Pseudoniem",ENABLE:"Geactiveerd",DISABLE:"Gedeactiveerd",RESULTS_LIST:"Resultaten:",RESULTS_COUNT:"{{count}} uitslagen",EXECUTION_TIME:"uitgevoerd in {{duration|formatDurationMs}}",SHOW_VALUES:"Toon waarden openlijk?",POPOVER_ACTIONS_TITLE:"Opties",POPOVER_FILTER_TITLE:"Filters",SHOW_MORE:"Toon meer",SHOW_MORE_COUNT:"(huidig limiet op {{limit}})",POPOVER_SHARE:{TITLE:"Delen",SHARE_ON_TWITTER:"Deel op Twitter",SHARE_ON_FACEBOOK:"Deel op Facebook",SHARE_ON_DIASPORA:"Deel op Diaspora*",SHARE_ON_GOOGLEPLUS:"Deel op Google+"}},SYSTEM:{PICTURE_CHOOSE_TYPE:"Selecteer bron:",BTN_PICTURE_GALLERY:"Gallerij",BTN_PICTURE_CAMERA:"<b>Camera</b>"},MENU:{HOME:"Welkom",WOT:"Register",CURRENCY:"Valuta",CURRENCIES:"Valuta's",ACCOUNT:"Mijn rekening",TRANSFER:"Overmaken",SCAN:"Scannen",SETTINGS:"Instellingen",NETWORK:"Netwerk",TRANSACTIONS:"Mijn transacties"},ABOUT:{TITLE:"Over",LICENSE:"<b>Vrije</b> software (GNU GPLv3 licentie).",CODE:"Broncode:",DEVELOPERS:"Ontwikkelaars:",FORUM:"Forum:",DEV_WARNING:"Waarschuwing",DEV_WARNING_MESSAGE:"Deze applicatie is nog in actieve onwikkeling.<br/>Meld ons elk pobleem!",DEV_WARNING_MESSAGE_SHORT:"Deze App is nog instabiel (in ontwikkeling).",REPORT_ISSUE:"Meld een probleem"},HOME:{TITLE:"Cesium",WELCOME:"Welkom bij de Cesium Applicatie!",MESSAGE:"Bekijk je {{currency|abbreviate}} portefeilles in real time.",BTN_REGISTRY:"Register",BTN_CURRENCY:"Verken valuta",BTN_ABOUT:"over",BTN_HELP:"Help",REPORT_ISSUE:"Meld een probleem",NOT_YOUR_ACCOUNT_QUESTION:'Je hoeft niet de rekening <b><i class="ion-key"></i> {{pubkey|formatPubkey}}</b> in uw bezit?',BTN_CHANGE_ACCOUNT:"Dit account ontkoppelen",CONNECTION_ERROR:'Node <b>{{server}}</b> onbereikbaar of ongeldig adres.<br/><br/>Controleer de internetverbinding, of schakel knooppunt <a class="positive" ng-click="doQuickFix(\'settings\')">in parameters</a>.'},SETTINGS:{TITLE:"Instellingen",NETWORK_SETTINGS:"Netwerk",PEER:"Duniter knooppunt adres",PEER_CHANGED_TEMPORARY:"Adres tijdelijk worden gebruikt",USE_LOCAL_STORAGE:"Lokale opslag inschakelen",USE_LOCAL_STORAGE_HELP:"Slaat uw instellingen",ENABLE_HELPTIP:"Contextgebonden hulp inschakelen",ENABLE_UI_EFFECTS:"Schakel visuele effecten",HISTORY_SETTINGS:"Mijn rekening",DISPLAY_UD_HISTORY:"Toon geproduceerde dividenden?",AUTHENTICATION_SETTINGS:"Authentificatie",REMEMBER_ME:"Onthoud mij",REMEMBER_ME_HELP:"Hiermee kunt u blijven altijd aangesloten (niet aanbevolen).",PLUGINS_SETTINGS:"Uitbreidingen",BTN_RESET:"Herstel standaardinstellingen",EXPERT_MODE:"Geavanceerde modus inschakelen",EXPERT_MODE_HELP:"Toon meer details",POPUP_PEER:{TITLE:"Duniter Knooppunt",HOST:"Adres",HOST_HELP:"Aadres: server:poort",USE_SSL:"Secure?",USE_SSL_HELP:"(SSL-encryptie)",BTN_SHOW_LIST:"Lijst van knooppunten"}},BLOCKCHAIN:{HASH:"Hachee : {{hash}}",VIEW:{HEADER_TITLE:"Blok #{{number}}-{{hash|formatHash}}",TITLE_CURRENT:"Huidige blok",TITLE:"Blok #{{number|formatInteger}}",COMPUTED_BY:"Berekend door het knooppunt",SHOW_RAW:"Bekijk RAW-bestand",TECHNICAL_DIVIDER:"Technische informatie",VERSION:"Format versie",HASH:"Hash berekend",UNIVERSAL_DIVIDEND_HELP:"Munt gecoproduceerd door elk van de {{membersCount}} ledental",EMPTY:"Er zijn geen gegevens in dit blok",POW_MIN:"Mminimum moeilijkheid",POW_MIN_HELP:"Moeilijkheid opgelegd hash te berekenen",DATA_DIVIDER:"Gegevens",IDENTITIES_COUNT:"Nieuwe identiteiten",JOINERS_COUNT:"Nieuwe leden",ACTIVES_COUNT:"Verlengingen",ACTIVES_COUNT_HELP:"Leden die hun lidmaatschap te vernieuwen",LEAVERS_COUNT:"Verlaters",LEAVERS_COUNT_HELP:"Leden die niet langer wenst certificering",EXCLUDED_COUNT:"Uitgesloten leden",EXCLUDED_COUNT_HELP:"Oud-leden uitgesloten door niet-verlenging of gebrek aan certificeringen",REVOKED_COUNT:"Identiteiten ingetrokken",REVOKED_COUNT_HELP:"Deze rekeningen zullen niet langer leden",TX_COUNT:"Transacties",CERT_COUNT:"Certificeringen",TX_TO_HIMSELF:"Ruil deal",TX_OUTPUT_UNLOCK_CONDITIONS:"Omstandigheden van de introductie",TX_OUTPUT_OPERATOR:{AND:"en",OR:"of"},TX_OUTPUT_FUNCTION:{SIG:"<b>handtekening</b> ",XHX:"<b>Wachtwoord</b>, wiens SHA256 =",CSV:"Geblokkeerd",CLTV:"Opgesloten"}},LOOKUP:{TITLE:"Blokken",NO_BLOCK:"Geen blok",LAST_BLOCKS:"Recente blokken :",BTN_COMPACT:"Compact"}},CURRENCY:{SELECT:{TITLE:"Valuta's",CURRENCIES:"Bekende valuta's",MEMBERS_COUNT:"{{membersCount}} leden"},VIEW:{TITLE:"Valuta",TAB_CURRENCY:"Valuta",TAB_WOT:"Gemeenschap",TAB_NETWORK:"Netwerk",CURRENCY_NAME:"Valuta naam",MEMBERS:"Ledental",MEMBERS_VARIATION:"Variatie since {{duration | formatDuration}}",MONEY_DIVIDER:"Geld",MASS:"Monetaire massa",SHARE:"Aandeel per lid",UD:"Universeel Dividend",C_ACTUAL:"Huidige toename",MEDIAN_TIME:"Blockchain tijd",POW_MIN:"Algemene moeilijkheidsgraad",MONEY_RULES_DIVIDER:"Monetaire regels",C_RULE:"Toename",UD_RULE:"Universeel dividend (formule)",SIG_QTY_RULE:"Benodigd aantal certificaties om lid te worden",SIG_STOCK:"Maximum aantal certificaties te versturen per lid",SIG_PERIOD:"Minimum vertraging tussen 2 certificaties verzonden door n en dezelfde persoon.",SIG_WINDOW:"Maximum vertraging voor een certificatie in behandeling wordt genomen",STEP_MAX:"Maximum afstand tussen elk WoT lid en een nieuw lid.",WOT_RULES_DIVIDER:"Lidmaatschapseisen",XPERCENT:"Minimum percentage schildwachten te bereiken om de afstandsregel te respecteren"}},NETWORK:{VIEW:{MEDIAN_TIME:"Blockchain tijd",LOADING_PEERS:"Even geduld...",NODE_ADDRESS:"Adres :",ENDPOINTS:{BMAS:"Endpoint (SSL)",BMATOR:"Endpoint TOR",ES_USER_API:"Knoop Cesium+"}},INFO:{ONLY_SSL_PEERS:"Les noeuds non SSL ont un affichage dgrad, car Cesium fonctionne en mode HTTPS."}},PEER:{PEERS:"Knopen",SIGNED_ON_BLOCK:"Getekend op blok",MIRROR:"spiegel",CURRENT_BLOCK:"Blok #",VIEW:{TITLE:"Knoop",OWNER:"Maakt deel uit van",SHOW_RAW_PEERING:"Zie netwerkdocument",KNOWN_PEERS:"Bekende knopen :",GENERAL_DIVIDER:"Algemene informatie",ERROR:{LOADING_TOR_NODE_ERROR:"Kan knooppunt niet worden opgehaald. De wachttijd wordt overschreden.",LOADING_NODE_ERROR:"Kan knooppunt niet worden opgehaald"}}},WOT:{SEARCH_HELP:"Zoeken (lid of publieke sleutel)",SEARCH_INIT_PHASE_WARNING:"Tijdens de pre-registratiefase, het zoeken van lopende registraties <b>kan lang</b> zijn. Dank je wel geduld...",REGISTERED_SINCE:"Registratie",REGISTERED_SINCE_BLOCK:"Geregistreerd op blok #",NO_CERTIFICATION:"Geen gevalideerde certificaties",NO_GIVEN_CERTIFICATION:"Geen uitgegeven certificaties",NOT_MEMBER_PARENTHESIS:"(niet-lid)",IDENTITY_REVOKED_PARENTHESIS:"(ingetrokken identiteit)",MEMBER_PENDING_REVOCATION_PARENTHESIS:"(en cours de rvocation)",EXPIRE_IN:"Verloopt",NOT_WRITTEN_EXPIRE_IN:"Uiterlijke<br/>behandeling",EXPIRED:"Verlopen",PSEUDO:"Pseudoniem",SIGNED_ON_BLOCK:"Uitgegeven op block #{{block}}",WRITTEN_ON_BLOCK:"Geschreven op block #{{block}}",GENERAL_DIVIDER:"Algemene informatie",NOT_MEMBER_ACCOUNT:"Geen lidaccount",NOT_MEMBER_ACCOUNT_HELP:"Dit is een eenvoudige account zonder te wachten lidmaatschap aanvragen.",TECHNICAL_DIVIDER:"Technishe informatie",BTN_CERTIFY:"Certificeren",BTN_YES_CERTIFY:"Ja, Certificeren",BTN_SELECT_AND_CERTIFY:"Nieuwe certificatie",ACCOUNT_OPERATIONS:"Operaties op de rekening",VIEW:{POPOVER_SHARE_TITLE:"Identiteit {{title}}"},LOOKUP:{TITLE:"Register",NEWCOMERS:"Nieuwe leden:",PENDING:"Aspirant leden:",REGISTERED:"Geregistreerd {{sigDate | formatFromNow}}",MEMBER_FROM:"Lid sinds {{memberDate|formatFromNowShort}}",BTN_NEWCOMERS:"Nieuwste leden",BTN_PENDING:"Registraties in afwachting",SHOW_MORE:"Toon meer",SHOW_MORE_COUNT:"(huidige limiet op {{limit}})",NO_PENDING:"Er zijn geen registraties in afwachting gevonden.",NO_NEWCOMERS:"Er zijn geen nieuwe leden gevonden."},MODAL:{TITLE:"Zoeken"},CERTIFICATIONS:{TITLE:"{{uid}} - Certificaties",SUMMARY:"Ontvangen certificaties",LIST:"Details van ontvangen certificaties",PENDING_LIST:"Certificaties in afwachting",RECEIVED:"Ontvangen certificaties",RECEIVED_BY:"Certificaties ontvanged door {{uid}}",ERROR:"Ontvangen vertificaties met fout",SENTRY_MEMBER:"Referent lid"},GIVEN_CERTIFICATIONS:{TITLE:"{{uid}} - Verzonden certificaties",SUMMARY:"Verzonden certificaties",LIST:"Details van verzonden certificaties",PENDING_LIST:"Certificaties in afwachting",SENT:"Verzonden certificaties",SENT_BY:"Certificaties verzonden door {{uid}}",ERROR:"Verzonden certificaties met fout"}},LOGIN:{TITLE:'<i class="icon ion-locked"></i> Inloggen',SALT:"Beveiligingszin",SALT_HELP:"Zin ter beveiliging van uw rekening",SHOW_SALT:"Toon de beveiligingszin",PASSWORD:"Wachtwoord",PASSWORD_HELP:"Wachtwoord ter beveiliging van uw rekening",NO_ACCOUNT_QUESTION:"Nog geen rekening?",CREATE_ACCOUNT:"Open een rekening",FORGOTTEN_ID:"Wachtwoord vergeten?"},ACCOUNT:{TITLE:"Mijn rekening",BALANCE:"Saldo",LAST_TX:"Recente transacties",BALANCE_ACCOUNT:"Rekeningsaldo",NO_TX:"Geen transacties",SHOW_MORE_TX:"Show more",SHOW_ALL_TX:"Show all",TX_FROM_DATE:"(huidige limiet op {{fromTime|formatFromNowShort}})",PENDING_TX:"Transacties in afwachting",ERROR_TX:"Niet uitgevoerde transacties",ERROR_TX_SENT:"Verzonden transacties",ERROR_TX_RECEIVED:"Ontvangen transacties",EVENTS:"Gebeurtenissen",WAITING_MEMBERSHIP:"Lidmaatschapsverzoek verzonden. In afwachting van validatie.",WAITING_CERTIFICATIONS:"Je hebt {{needCertificationCount}} certificatie(s) nodig om lid te worden",WILL_MISSING_CERTIFICATIONS:"Je heeft binnenkort <b>onvoldoende certificaties</b> (ten minste {{willNeedCertificationCount}} benodigd)",WILL_NEED_RENEW_MEMBERSHIP:"Je lidmaatschap <b>gaat verlopen op {{membershipExpiresIn|formatDurationTo}}</b>. Vergeet niet <a ng-click=\"doQuickFix('renew')\">je lidmaatschap te vernieuwen</a> voor die tijd.",CERTIFICATION_COUNT:"Aantal certificaties",CERTIFICATION_COUNT_SHORT:"Certificaties",SIG_STOCK:"Voorraad uit te geven certificaties",BTN_RECEIVE_MONEY:"Ontvangen",BTN_MEMBERSHIP_IN_DOTS:"Lidmaatschap aanvragen...",BTN_MEMBERSHIP_RENEW:"Lidmaatschap verlengen",BTN_MEMBERSHIP_RENEW_DOTS:"Lidmaatschap verlengen...",BTN_MEMBERSHIP_OUT_DOTS:"Lidmaatschap opzeggen...",BTN_SEND_IDENTITY_DOTS:"Identiteit publiceren...",BTN_SECURITY_DOTS:"Account en veiligheid...",BTN_SHOW_DETAILS:"Tonen technische informatie",BTN_REVOKE:"Deze identiteit<span class='hidden-xs hidden-sm'> definitief</span> opzeggen...",NEW:{TITLE:"Registratie",SLIDE_1_TITLE:"Selecteer een valuta:",SLIDE_2_TITLE:"Soort rekening:",MEMBER_ACCOUNT:"Persoonlijke rekening (lidmaatschap)",MEMBER_ACCOUNT_HELP:"Als je nog niet als individu geregistreerd bent (n rekening per individu mogelijk).",WALLET_ACCOUNT:"Eenvoudige portefeille",WALLET_ACCOUNT_HELP:"Als je een onderneming, stichting etc. vertegenwoordigd of eenvoudigweg een additionele portefeille nodig hebt. Geen individueel universeel dividend zal door deze rekening gecreerd worden.",SALT_WARNING:"Kies een beveiligingszin.<br/>Deze heb je nodig voor ieder verbinding met je account.<br/><br/><b>Zorg dat je deze zin goed onthoud</b>.<br/>Eenmaal verloren, is er geen mogelijkheid om hem te achterhalen!",PASSWORD_WARNING:"Kies een wachtwoord.<br/>Deze heb je nodig voor ieder verbinding met je account.<br/><br/><b>Zorg dat je dit woord goed onthoud</b>.<br/>Eenmaal verloren, is er geen mogelijkheid om hem te achterhalen!",PSEUDO_WARNING:"Kies een pseudoniem.<br/>Het dient om makkelijker gevonden te worden door anderen.<br/><br/>.Gebruik van spaties, komma's en accenten is niet toegestaan.<br/><div class='hidden-xs'><br/>Voorbeeld: <span class='gray'>JulesDeelder, JohanVermeer, etc.</span>",PSEUDO:"Pseudoniem",PSEUDO_HELP:"joe123",SALT_CONFIRM:"Bevestig",SALT_CONFIRM_HELP:"Bevestig de beveiligingszin",PASSWORD_CONFIRM:"Bevestig",PASSWORD_CONFIRM_HELP:"Bevestig het wachtwoord",SLIDE_6_TITLE:"Bevestiging:",COMPUTING_PUBKEY:"Berekening...",LAST_SLIDE_CONGRATULATION:"Bravo! Je hebt alle verplichte velden ingevuld.<br/>Je kunt je <b>rekeningaanvraag verzenden</b>.<br/><br/>Ter informatie, de publieke sleutel hieronder identificeert je toekomstige rekening.<br/>Je kunt deze aan derde partijen communiceren om geld te ontvangen. Zodra je rekening geopend is, kun je de sleutel terugvinden onder <b>{{'ACCOUNT.TITLE'|translate}}</b>.",CONFIRMATION_MEMBER_ACCOUNT:'<b class="assertive">Waarschuwing:</b> je beveiligingszin, wachtwoord en pseudoniem kunnen hierna niet gewijzigd worden.<br/><b>Zorg dat ze goed onthoudt!</b><br/><b>Weet je zeker</b> dat je je persoonlijke rekeningaanvraag wil verzenden?',CONFIRMATION_WALLET_ACCOUNT:'<b class="assertive">Waarschuwing:</b> je wachtwoord en pseudoniem kunnen hierna niet gewijzigd worden.<br/><b>Zorg dat ze goed onthoudt!</b><br/><b>Weet je zeker</b> dat je deze portefeilleaanvraag wil verzenden?',PSEUDO_AVAILABLE:"Deze naam is beschikbaar",PSEUDO_NOT_AVAILABLE:"Deze gebruikersnaam is niet beschikbaar",INFO_LICENSE:"Om de valuta te sluiten, vragen wij u om te lezen en deze licentie te accepteren.",BTN_ACCEPT:"Ik accepteer",BTN_ACCEPT_LICENSE:"Ik ga akkoord met de licentie"},POPUP_REGISTER:{TITLE:"Voer een pseudoniem in",HELP:"Een pseudoniem is nodig voor anderen om je te kunnen vinden."},FILE_NAME:"{{currency}} - Rekeningafschrift {{pubkey|formatPubkey}} {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Datum",AMOUNT:"Bedrag",COMMENT:"Commentaar"}},TRANSFER:{TITLE:"Overboeken",SUB_TITLE:"Geld overboeken",FROM:"Van",TO:"Aan",AMOUNT:"Bedrag",AMOUNT_HELP:"Bedrag",COMMENT:"Opmerking",COMMENT_HELP:"Opmerking (optioneel)",BTN_SEND:"Verzenden",BTN_ADD_COMMENT:"Opmerking toevoegen",WARN_COMMENT_IS_PUBLIC:"Houd er rekening mee dat <b>reacties openbaar zijn </b> (niet-versleuteld).",MODAL:{TITLE:"Overboeking"}},ERROR:{POPUP_TITLE:"Error",UNKNOWN_ERROR:"Unknown error",CRYPTO_UNKNOWN_ERROR:"Your browser is not compatible with cryptographic features.",FIELD_REQUIRED:"This field is required.",FIELD_TOO_SHORT:"Value is too short (min {{minLength]] characters).",FIELD_TOO_SHORT_WITH_LENGTH:"This field value is too short.",FIELD_TOO_LONG:"Value is exceeding max length.",FIELD_TOO_LONG_WITH_LENGTH:"Value is too long (max {{maxLength}} characters).",FIELD_ACCENT:"Commas and accent characters not allowed",FIELD_NOT_NUMBER:"Value is not a number",FIELD_NOT_INT:"Value is not an integer",PASSWORD_NOT_CONFIRMED:"Must match previous password.",SALT_NOT_CONFIRMED:"Must match previous phrase.",SEND_IDENTITY_FAILED:"Error while trying to register.",SEND_CERTIFICATION_FAILED:"Could not certify identity.",NEED_MEMBER_ACCOUNT_TO_CERTIFY:"You could not send certification, because your account is <b>not a member account</b>.",NEED_MEMBER_ACCOUNT_TO_CERTIFY_HAS_SELF:"You could not send certification now, because your are <b>not a member</b> yet.<br/><br/>You still need certification to become a member.",NOT_MEMBER_FOR_CERTIFICATION:"Your account is not a member account yet.",IDENTITY_TO_CERTIFY_HAS_NO_SELF:"This account could not be certified. No registration found, or need to renew.",LOGIN_FAILED:"Error while sign in.",LOAD_IDENTITY_FAILED:"Could not load identity.",LOAD_REQUIREMENTS_FAILED:"Could not load identity requirements.",SEND_MEMBERSHIP_IN_FAILED:"Error while sending registration as member.",SEND_MEMBERSHIP_OUT_FAILED:"Error while sending membership revocation.",REFRESH_WALLET_DATA:"Could not refresh wallet.",GET_CURRENCY_PARAMETER:"Could not get currency parameters.",GET_CURRENCY_FAILED:"Could not load currency.",SEND_TX_FAILED:"Could not send transaction.",ALL_SOURCES_USED:"Please wait the next block computation (All transaction sources has been used).",NOT_ENOUGH_SOURCES:"Not enough changes to send this amount in one time.<br/>Maximum amount: {{amount}} {{unit}}<sub>{{subUnit}}</sub>.",ACCOUNT_CREATION_FAILED:"Error while creating your member account.",RESTORE_WALLET_DATA_ERROR:"Error while reloading settings from local storage",LOAD_WALLET_DATA_ERROR:"Error while loading wallet data.",COPY_CLIPBOARD_FAILED:"Could not copy to clipboard",TAKE_PICTURE_FAILED:"Could not get picture.",SCAN_FAILED:"Could not scan QR code.",SCAN_UNKNOWN_FORMAT:"Code not recognized.",WOT_LOOKUP_FAILED:"Search failed.",LOAD_PEER_DATA_FAILED:"Duniter peer not accessible. Please retry later.",NEED_LOGIN_FIRST:"Please sign in first.",AMOUNT_REQUIRED:"Amount is required.",AMOUNT_NEGATIVE:"Negative amount not allowed.",NOT_ENOUGH_CREDIT:"Not enough credit.",INVALID_NODE_SUMMARY:"Unreachable peer or invalid address",INVALID_USER_ID:"Field 'pseudonym' must not contains spaces or special characters.",INVALID_COMMENT:"Field 'reference' has a bad format.",INVALID_PUBKEY:"Public key has a bad format.",IDENTITY_INVALID_BLOCK_HASH:"This membership application is no longer valid (because it references a block that network peers are cancelled): the person must renew its application for membership <b>before</b> being certified.",IDENTITY_EXPIRED:"This identity has expired: this person must re-apply <b>before</b> being certified.",IDENTITY_SANDBOX_FULL:"Could not register, because peer's sandbox is full.<br/><br/>Please retry later or choose another Duniter peer (in <b>Settings</b>).",WOT_PENDING_INVALID_BLOCK_HASH:"Membership not valid.",WALLET_INVALID_BLOCK_HASH:"Your membership application is no longer valid (because it references a block that network peers are cancelled).<br/>You must <a ng-click=\"doQuickFix('renew')\">renew your application for membership</a> to fix this issue.",WALLET_IDENTITY_EXPIRED:"The publication of your identity <b>has expired</b>.<br/>You must <a ng-click=\"doQuickFix('fixIdentity')\">re-issue your identity</a> to resolve this issue.",WALLET_HAS_NO_SELF:"Your identity must first have been published, and not expired.",IDENTITY_ALREADY_CERTIFY:"You have <b>already certified</b> that identity.<br/><br/>Your certificate is still valid (expires {{expiresIn|formatDuration}}).",IDENTITY_ALREADY_CERTIFY_PENDING:"You have <b>already certified</b> that identity.<br/><br/>Your certification is still pending (Deadline for treatment {{expiresIn|formatDuration}}).",UNABLE_TO_CERTIFY_TITLE:"Unable to certify",LOAD_NEWCOMERS_FAILED:"Unable to load new members.",LOAD_PENDING_FAILED:"Unable to load pending registrations.",ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION:"You must <b>be a member</b> in order to perform this action.",ONLY_SELF_CAN_EXECUTE_THIS_ACTION:"You must have <b>published your identity</b> in order to perform this action.",EXISTING_ACCOUNT:"Uw wachtwoord overeenkomen met een bestaande account, de <a ng-click=\"showHelpModal('pubkey')\">publieke sleutel</a> is:",EXISTING_ACCOUNT_REQUEST:"Gelieve uw wachtwoord wijzigen om een ongebruikte account."},INFO:{POPUP_TITLE:"Informatie",CERTIFICATION_DONE:"Identiteit succesvol getekend",NOT_ENOUGH_CREDIT:"Niet genoeg krediet",TRANSFER_SENT:"Verzoek tot overboeken succesvol verzonden",COPY_TO_CLIPBOARD_DONE:"Kopie geslaagd",MEMBERSHIP_OUT_SENT:"Opzegging lidmaatschap succesvol verzonden",NOT_NEED_MEMBERSHIP:"Je bent al lid.",IDENTITY_WILL_MISSING_CERTIFICATIONS:"Deze identiteit heeft binnenkort onvoldoende certificaties (ten minste {{willNeedCertificationCount}} nodig)."},CONFIRM:{POPUP_TITLE:"<b>Bevestiging</b>",POPUP_WARNING_TITLE:"<b>Waarschuwing</b>",CERTIFY_RULES_TITLE_UID:"Certificeer {{uid}}",CERTIFY_RULES:'<b>Beveiligingswaarschuwing:</b><br/><br/><b class="assertive">Certificeer een rekening niet</b> als je gelooft dat: <ul><li>1.) de aanvrager niet echt is.<li>2.) de aanvrager al een andere gecertificeerde rekening heeft.<li>3.) de aanvrager opzettelijk of door onzorgvuldigheid regel 1 of 2 overtreedt bij het verzenden van certificaten.</ul></small><br/>Weet je zeker dat je deze identieit wilt certificeren?',TRANSFER:"<b>Samenvatting van de overboeking:</b><br/><br/><ul><li> - Van: <b>{{from}}</b></li><li> - Aan: <b>{{to}}</b></li><li> - Bedrag: <b>{{amount}} {{unit}}</b></li><li> - Opmerking: <i>{{comment}}</i></li></ul><br/><b>Weet je zeker dat je deze overboeking wil doen?</b>",MEMBERSHIP_OUT:"<b>Waarschuwing</b>:<br/>Je staat op het punt je lidmaatschap te beindigen. Dit kan <b>niet ongedaan</b> worden gemaakt.<br/></br/><b>Weet je zeker dat je door wil gaan?</b>",LOGIN_UNUSED_WALLET_TITLE:"Typefout?",LOGIN_UNUSED_WALLET:"Je bent ingelogged op een rekening die <b>inactief</b> lijkt te zijn.<br/><br/>Als deze rekening niet met de uwe overeenkomt, komt dat waarschijnlijk door een <b>typefout</b> bij het inloggen.<br/><br/><b>Wilt u toch doorgaan met deze rekening?</b>",FIX_IDENTITY:"De pseudoniem <b>{{uid}}</b> zal opnieuw gepubliceerd worden, waarmee de oude verlopen publicatie wordt vervangen.<br/></br/><bWeet je zeker</b> dat je door wil gaan?",FIX_MEMBERSHIP:"Je verzoek to lidmaatschap zal verstuurd worden.<br/></br/><b>Weet je het zeker?</b>",RENEW_MEMBERSHIP:"Je lidmaatschap zal verlengd worden.<br/></br/><b>Weet je het zeker?</b>",REVOKE_IDENTITY:"<b>Beveiligingswaarschuwing:</b><br/>You will <b>definitely revoke this identity</b>.<br/><br/>The public key and the associated nickname <b>will never be used again</b> (for a member account).<br/></br/><b>Are you sure</b> you want to continue?",
REVOKE_IDENTITY_2:"Deze handeling is <b>niet terug te draaien</b>!<br/><br/><b>Weet je zeker</b> dat je door wil gaan?",NOT_NEED_RENEW_MEMBERSHIP:"Je lidmaatschap hoeft niet verlengd te worden (het zal pas verlopen na {{membershipExpiresIn|formatDuration}}).<br/></br/><b>Weet je zeker</b> dat je een verlengingsaanvraag wil versturen?",SAVE_BEFORE_LEAVE:"Wil je <b>je wijzigingen opslaan</b> voor je de pagina verlaat?",SAVE_BEFORE_LEAVE_TITLE:"Wijzigingen niet opgeslagen",LICENCE:"Ik heb gelezen en geaccepteerd de voorwaarden van de vergunning G1"},DOWNLOAD:{POPUP_TITLE:"<b>Intrekking File</b>",POPUP_REVOKE_MESSAGE:"Om uw account te beveiligen, het downloaden van de <b>Account intrekking document</b>. U zult indien nodig om uw account (annuleren in het geval van de rekening van diefstal, een verandering van de identifier, een ten onrechte gemaakte account, etc.).<br/><br/><b>Bewaar deze op een veilige plaats.</b>"},HELP:{TITLE:"Online help",JOIN:{SECTION:"Join",SALT:'The protection phrase is very important. It is used to hash you password, which in turn is used to calculate your <span class="text-italic">public account key</span> (its number) and the private key to access it. <b>Please remeber this phrase well</b>, because there is no way to recover it when lost. What\'s more, it cannot be changed without having to create a new account.<br/><br/>A good protection phrase must be sufficiently long (8 characters at the very least) and as original as possible.',PASSWORD:"The password is very important. Together with the protection phrase, it is use to calculate your account number (public key) and the private key to access it. <b>Please remember it well</b>, because there is no way to recover it when lost. What's more, it cannot be changed without having to create a new account.<br/><br/>A good password is made (ideally) of at least 8 characters, with at least one capital and one number.",PSEUDO:'A pseudonym is used only when joining as <span class="text-italic">member</span>. It is always associated with a wallet (by its <span class="text-italic">public key</span>). It is published on the network so that other users may identify it, certify or send money to the account. A pseudonym must be unique among all members (current and past).'},GLOSSARY:{SECTION:"Glossary",PUBKEY_DEF:"Een publieke sleutel identificeert altijd een portemonnee. Het kan een lid identificeren. In Cesium wordt berekend met de geheime ID en wachtwoord.",MEMBER:"Member",MEMBER_DEF:'A member is a real and living human, wishing to participate freely to the monitary community. The member will receive universal dividend, according to the period and amount as defined in the <span class="text-italic">currency parameters</span>.',CURRENCY_RULES:"Currency rules",CURRENCY_RULES_DEF:'The currency rules are defined only once, and for all. They set the parameters under which the currency will perform: universal dividend calculation, the amount of certifications needed to become a member, the maximum amount of certifications a member can send, etc.<br/><br/>The parameters cannot be modified because of the use of a <span class="text-italic">Blockchain</span> which carries and executes these rules, and constantly verifies their correct application. <a href="#/app/currency">See current parameters</a>.',BLOCKCHAIN:"Blockchain",BLOCKCHAIN_DEF:'The Blockchain is a decentralised system which, in case of Duniter, serves to carry and execute the <span class="text-italic">currency rules</span>.<br/><a href="http://en.duniter.org/presentation/" target="_blank">Read more about Duniter</a> and the working of its blockchain.',UNIVERSAL_DIVIDEND_DEF:'The Universal Dividend (UD) is the quantity of money co-created by each member, according to the period and the calculation defined in the <span class="text-italic">currency rules</span>.<br/>Every term, the members receive an equal amount of new money on their account.<br/><br/>The UD undergoes a steady growth, to remain fair under its members (current and future), calculated by an average life expectancy, as demonstrated in the Relative Theory of Money (RTM).<br/><a href="http://trm.creationmonetaire.info" target="_system">Read more about RTM</a> and open money.'},TIP:{MENU_BTN_CURRENCY:"Menu <b>{{'MENU.CURRENCY'|translate}}</b> allows discovery of <b>currency parameters</b> and its state.",CURRENCY_WOT:"The <b>member count</b> shows the <b>community's weight and evolution</b>.",CURRENCY_MASS:"Shown here is the <b>total amount</b> currently in circulation and its <b>average distribution</b> per member.<br/><br/>This allows to estimate the <b>worth of any amount</b>, in respect to what <b>others own</b> on their account (on average).",CURRENCY_UNIT_RELATIVE:"The unit used here (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amounts in {{currency|capitalize}} have been devided by the <b>Universal Dividend</b> (UD).<br/><br/><small>This relative unit is <b>relevant</b> because it is stable in contrast to the permanently growing monitary mass.</small>",CURRENCY_CHANGE_UNIT:"This button allows to <b>switch the unit</b> to show amounts in <b>{{currency|capitalize}}</b>, undevided by the Universal Dividend (instead of in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;).",CURRENCY_CHANGE_UNIT_TO_RELATIVE:"This button allows to <b>switch the unit</b> to show amounts in &ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;, which is relative to the Universal Dividend (the amount co-produced by each member).",CURRENCY_RULES:"The <b>rules</b> of the currency determine its <b>exact and predictible</b> performance.<br/><br/>As a true DNA of the currency these rules make the monetary code <b>transparent and understandable</b>.",NETWORK_BLOCKCHAIN:"All monetary transactions are recoded in a <b>public and tamper proof</b> ledger, generally referred to as the <b>blockchain</b>.",NETWORK_PEERS:"The <b>peers</b> shown here correspond to <b>computers that update and check</b> the blockchain.<br/><br/>The more active peers there are, the more <b>decentralised</b> and therefore trustworhty the currency becomes.",NETWORK_PEERS_BLOCK_NUMBER:"This <b>number</b> indicates the peer's <b>latest validated block</b> (last page written in the ledger).<br/><br/>Green indicates that the block was equally validated by the <b>majority of other peers</b>.",NETWORK_PEERS_PARTICIPATE:'<b>Each member</b>, equiped with a computer with Internet, <b>can participate, adding a peer</b> simply by <b>installing the Duniter software</b> (free/libre and open source). <a href="{{installDocUrl}}" target="_system">Read the installation manual &gt;&gt;</a>.',MENU_BTN_ACCOUNT:"<b>{{'ACCOUNT.TITLE'|translate}}</b> allows access to your account balance and transaction history.",MENU_BTN_ACCOUNT_MEMBER:"Here you can consult your account status, transaction history and your certifications.",WALLET_CERTIFICATIONS:"Click here to reveiw the details of your certifications (given and received).",WALLET_BALANCE:"Your account <b>balance</b> is shown here.",WALLET_BALANCE_RELATIVE:"{{'HELP.TIP.WALLET_BALANCE'|translate}}<br/><br/>The used unit (&ldquo;<b>{{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub></b>&rdquo;) signifies that the amount in {{currency|capitalize}} has been divided by the <b>Universal Dividend</b> (UD) co-created by each member.<br/>At this moment, 1 UD equals {{currentUD}} {{currency|capitalize}}.",WALLET_BALANCE_CHANGE_UNIT:"You can <b>change the unit</b> in which amounts are shown in <b><i class=\"icon ion-android-settings\"></i>&nbsp;{{'MENU.SETTINGS'|translate}}</b>.<br/><br/>For example, to display amounts <b>directly in {{currency|capitalize}}</b> instead of relative amounts.",WALLET_SEND:"Issue a payment in just a few clicks.",WALLET_SEND_NO_MONEY:"Issue a payment in just a few clicks.<br/>(Your balance does not allow this yet)",WALLET_OPTIONS:"Please note that this button allows access to <b>other, less used actions</b>.<br/><br/>Don't forget to take a quick look, when you have a moment!",WALLET_RECEIVED_CERTS:"This shows the list of persons that certified you.",WALLET_CERTIFY:"The button <b>{{'WOT.BTN_SELECT_AND_CERTIFY'|translate}}</b> allows selecting an identity and certifying it.<br/><br/>Only users that are <b>already member</b> may certify others.",WALLET_CERT_STOCK:"Your supply of certifications (to send) is limited to <b>{{sigStock}} certifications</b>.<br/><br/>This supply will replete itself over time, as and when earlier certifications expire.",MENU_BTN_WOT:"The menu <b>{{'MENU.WOT'|translate}}</b> allows searching <b>users</b> of the currency (member or not).",WOT_SEARCH_TEXT_XS:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>The search will start automatically.",WOT_SEARCH_TEXT:"To search in the registry, type the <b>first letters of a users pseudonym or public key</b>.<br/><br/>Then hit <b>Enter</b> to start the search.",WOT_SEARCH_RESULT:"Simply click a user row to view the details sheet.",WOT_VIEW_CERTIFICATIONS:"The row <b>{{'ACCOUNT.CERTIFICATION_COUNT'|translate}}</b> shows how many members members validated this identity.<br/><br/>These certifications testify that the account belongs to <b>a living human</b> and this person has <b>no other member account</b>.",WOT_VIEW_CERTIFICATIONS_COUNT:"There are at least <b>{{sigQty}} certifications</b> needed to become a member and receive the <b>Universal Dividend</b>.",WOT_VIEW_CERTIFICATIONS_CLICK:"Click here to open <b>a list of all certifications</b> given to and by this identity.",WOT_VIEW_CERTIFY:"The button <b>{{'WOT.BTN_CERTIFY'|translate}}</b> allows to add your certification to this identity.",CERTIFY_RULES:"<b>Attention:</b> Only certify <b>real and living persons</b> that do not own any other certified account.<br/><br/>The trust carried by the currency depends on each member's vigilance!",MENU_BTN_SETTINGS:"The <b>{{'MENU.SETTINGS'|translate}}</b> allow you to configure the Cesium application.<br/><br/>For example, you can <b>change the unit</b> in which the currency will be shown.",HEADER_BAR_BTN_PROFILE:"Click here to access your <b>user profile</b>",SETTINGS_CHANGE_UNIT:"You can <b>change the display unit</b> of amounts by clicking here.<br/><br/>- Deactivate the option to show amounts in {{currency|capitalize}}.<br/>- Activate the option for relative amounts in {{'COMMON.UD'|translate}}<sub>{{currency|abbreviate}}</sub> (<b>divided</b> by the current Universal Dividend).",END_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>Welcome to the <b>free economy</b>!",END_NOT_LOGIN:"This guided visit has <b>ended</b>.<br/><br/>If you wish to join the currency {{currency|capitalize}}, simply click <b>{{'LOGIN.CREATE_ACCOUNT'|translate}}</b> below."}}})}]),angular.module("cesium.plugins",["cesium.plugins.translations","cesium.plugins.templates","cesium.graph.plugin","cesium.es.plugin","cesium.map.plugin"]),angular.module("cesium.plugins.translations",[]).config(["$translateProvider",function(e){e.translations("en-GB",{COMMON:{CATEGORY:"Category",CATEGORIES:"Categories",CATEGORY_SEARCH_HELP:"Search",LAST_MODIFICATION_DATE:"Updated on ",SUBMIT_BY:"Submitted by",BTN_PUBLISH:"Publish",BTN_PICTURE_DELETE:"Delete",BTN_PICTURE_FAVORISE:"Default",BTN_PICTURE_ROTATE:"Rotate",BTN_ADD_PICTURE:"Add picture",NOTIFICATIONS:{TITLE:"Notifications",MARK_ALL_AS_READ:"Mark all as read",NO_RESULT:"No notification",SHOW_ALL:"Show all",LOAD_NOTIFICATIONS_FAILED:"Could not load notifications"}},MENU:{REGISTRY:"Pages",USER_PROFILE:"My Profile",MESSAGES:"Messages",NOTIFICATIONS:"Notifications",INVITATIONS:"Invitations"},ACCOUNT:{NEW:{ORGANIZATION_ACCOUNT:"Account for an organization",ORGANIZATION_ACCOUNT_HELP:"If you represent a company, association, etc.<br/>No universal dividend will be created by this account."},EVENT:{MEMBER_WITHOUT_PROFILE:'To obtain your certification more quickly, fill in <a ui-sref="app.user_edit_profile">your user profile</a>. Members will more easily put their trust in a verifiable identity.'},ERROR:{WS_CONNECTION_FAILED:"Cesium can not receive notifications because of a technical error (connection to the Cesium + data node).<br/><br/>If the problem persists, please <b>choose another data node</b> in Cesium+ settings."}},WOT:{BTN_SUGGEST_CERTIFICATIONS_DOTS:"Suggest identities to certify...",BTN_ASK_CERTIFICATIONS_DOTS:"Ask members to certify me...",BTN_ASK_CERTIFICATION:"Ask a certification",SUGGEST_CERTIFICATIONS_MODAL:{TITLE:"Suggest certifications",HELP:"Select your suggestions"},ASK_CERTIFICATIONS_MODAL:{TITLE:"Ask certifications",HELP:"Select recipients"},SEARCH:{DIVIDER_PROFILE:"Accounts",DIVIDER_PAGE:"Pages",DIVIDER_GROUP:"Groups"},CONFIRM:{SUGGEST_CERTIFICATIONS:"Are you sure you want <b>to send these certification suggestions</b>?",ASK_CERTIFICATION:"Are you sure you want to <b>send a certification request</b>?",ASK_CERTIFICATIONS:"Are you sure you want to <b>send a certification request</b> to these people?"}},INVITATION:{TITLE:"Invitations",NO_RESULT:"No invitation received",BTN_DELETE_ALL:"Delete all invitations",BTN_DELETE:"Delete invitation",BTN_NEW_INVITATION:"New invitation",ASK_CERTIFICATION:'<a href="#/app/wot/{{pubkey}}/{{::uid}}">{{::name||uid}}</a> asks for your certification',SUGGESTION_CERTIFICATION:'<a href="#/app/wot/{{::pubkey}}/{{::uid}}">{{::name||uid}}</a> is suggested for certification',SUGGESTED_BY:'Suggestion sent by <a class="positive" href="#/app/wot/{{::issuer.pubkey}}/{{::issuer.uid}}">{{::issuer.name||issuer.uid}}</a>',NOTIFICATIONS:{TITLE:"Invitations"},LIST:{TITLE:"Invitations"},NEW:{TITLE:"New invitation",RECIPIENTS:"A",RECIPIENTS_HELP:"Recipients of the invitation",RECIPIENTS_MODAL_TITLE:"Recipients",RECIPIENTS_MODAL_HELP:"Please choose recipients:",SUGGESTION_IDENTITIES:"Suggestions for certification",SUGGESTION_IDENTITIES_HELP:"Certifications to suggest",SUGGESTION_IDENTITIES_MODAL_TITLE:"Suggestions",SUGGESTION_IDENTITIES_MODAL_HELP:"Please choose your suggestions:"},CONFIRM:{DELETE_ALL_CONFIRMATION:"Removing invitations is <b>an irreversible operation</b>.<br/><br/><b>Are you sure</b> you want to continue",SEND_INVITATIONS_TO_CERTIFY:"<b>Are you sure</b> you want <b>to sent this invitation to certify</b> ?"},INFO:{INVITATION_SENT:"Invitation sent"},ERROR:{LOAD_INVITATIONS_FAILED:"Error while loading invitations",REMOVE_INVITATION_FAILED:"Error while deleting the invitation",REMOVE_ALL_INVITATIONS_FAILED:"Error while deleting invitations",SEND_INVITATION_FAILED:"Error while sending invitation",BAD_INVITATION_FORMAT:'<span class="assertive"><i class="ion-close-circled"></i> Invitation unreadable (format unknown)</span> - sent by <a ui-sref="app.wot_identity({pubkey: \'{{::pubkey}}\', uid: \'{{::uid}}\' })">{{::name||uid}}</a>'}},COMMENTS:{DIVIDER:"Comments",SHOW_MORE_COMMENTS:"Show previous comments",COMMENT_HELP:"Your comment, question...",COMMENT_HELP_REPLY_TO:"Your answer...",BTN_SEND:"Send",POPOVER_SHARE_TITLE:"Message #{{number}}",REPLY:"Reply",REPLY_TO:"Respond to:",REPLY_TO_LINK:"In response to ",REPLY_TO_DELETED_COMMENT:"In response to a deleted comment",REPLY_COUNT:"{{replyCount}} responses",DELETED_COMMENT:"Comment deleted",ERROR:{FAILED_SAVE_COMMENT:"Saving comment failed",FAILED_REMOVE_COMMENT:"Deleting comment failed"}},MESSAGE:{REPLY_TITLE_PREFIX:"Re: ",FORWARD_TITLE_PREFIX:"Fw: ",BTN_REPLY:"Reply",BTN_COMPOSE:"New message",BTN_WRITE:"Write",NO_MESSAGE_INBOX:"No message received",NO_MESSAGE_OUTBOX:"No message sent",NOTIFICATIONS:{TITLE:"Messages",MESSAGE_RECEIVED:"You <b>received a message</b><br/>from"},LIST:{INBOX:"Inbox",OUTBOX:"Outbox",LAST_INBOX:"New messages",LAST_OUTBOX:"Sent messages",BTN_LAST_MESSAGES:"Recent messages",TITLE:"Private messages",SEARCH_HELP:"Search in messages",POPOVER_ACTIONS:{TITLE:"Options",DELETE_ALL:"Delete all messages"}},COMPOSE:{TITLE:"New message",TITLE_REPLY:"Reply",SUB_TITLE:"New message",TO:"To",OBJECT:"Object",OBJECT_HELP:"Object",ENCRYPTED_HELP:"Please note this message will be encrypted before sending so that only the recipient can read it and be sure you are the author.",MESSAGE:"Message",MESSAGE_HELP:"Message content",CONTENT_CONFIRMATION:"No message content.<br/><br/>Are your sure you want to send this message?"},VIEW:{TITLE:"Message",SENDER:"Sent by",RECIPIENT:"Sent to",NO_CONTENT:"Empty message",DELETE:"Delete the message"},CONFIRM:{REMOVE:"Are you sure you want to <b>delete this message</b>?<br/><br/> This operation is irreversible.",REMOVE_ALL:"Are you sure you want to <b>delete all messages</b>?<br/><br/> This operation is irreversible.",MARK_ALL_AS_READ:"Are you sure you want to <b>mark all message as read</b>?",USER_HAS_NO_PROFILE:"This identity has no Cesium + profile. It may not use the Cesium + extension, so it <b>will not read your message</b>.<br/><br/>Are you sure you want <b>to continue</b>?"},INFO:{MESSAGE_REMOVED:"Message successfully deleted",All_MESSAGE_REMOVED:"Messages successfully deleted",MESSAGE_SENT:"Message sent"},ERROR:{SEND_MSG_FAILED:"Error while sending message.",LOAD_MESSAGES_FAILED:"Error while loading messages.",LOAD_MESSAGE_FAILED:"Error while loading message.",MESSAGE_NOT_READABLE:"Unable to read message.",USER_NOT_RECIPIENT:"You are not the recipient of this message: unable to read it.",NOT_AUTHENTICATED_MESSAGE:"The authenticity of the message is not certain or its content is corrupted.",REMOVE_MESSAGE_FAILED:"Error while deleting message",MESSAGE_CONTENT_TOO_LONG:"Value too long ({{maxLength}} characters max).",MARK_AS_READ_FAILED:"Unable to mark the message as 'read'.",LOAD_NOTIFICATIONS_FAILED:"Error while loading messages notifications.",REMOVE_All_MESSAGES_FAILED:"Error while removing all messages.",MARK_ALL_AS_READ_FAILED:"Error while marking messages as read.",RECIPIENT_IS_MANDATORY:"Recipient is mandatory."}},BLOCKCHAIN:{LOOKUP:{SEARCH_HELP:"Block number, hash...",POPOVER_FILTER_TITLE:"Filter",HEADER_MEDIAN_TIME:"Date / Time",HEADER_BLOCK:"Block #",HEADER_ISSUER:"Peer owner",BTN_LAST:"Last blocks",DISPLAY_QUERY:"View query",HIDE_QUERY:"Hide query",TX_SEARCH_FILTER:{MEMBER_FLOWS:'<b class="ion-person"></b> Members input/output',EXISTING_TRANSACTION:'<b class="ion-card"></b> Having transactions',PERIOD:'<b class="ion-clock"></b> Between <b class="gray">{{params[1]|formatDateShort}}</b> ({{params[1]|formatTime}}) and <b class="gray">{{params[2]|formatDateShort}}</b> ({{params[2]|formatTime}})',ISSUER:'<b class="ion-android-desktop"></b> Computed by {{params[1]|formatPubkey}}',TX_PUBKEY:'<b class="ion-card"></b> Transactions concerning <b class="ion-key"></b> {{params[1]|formatPubkey}}'}},ERROR:{SEARCH_BLOCKS_FAILED:"Error while searching blocks."}},REGISTRY:{CATEGORY:"Main activity",GENERAL_DIVIDER:"Basic information",LOCATION_DIVIDER:"Address",SOCIAL_NETWORKS_DIVIDER:"Social networks, web sites",TECHNICAL_DIVIDER:"Technical data",BTN_SHOW_WOT:"People",BTN_SHOW_WOT_HELP:"Search for people",BTN_SHOW_PAGES:"Pages",BTN_SHOW_PAGES_HELP:"Search for pages",BTN_NEW:"New page",MY_PAGES:"My pages",NO_PAGE:"No page",SEARCH:{TITLE:"Professional Directory",SEARCH_HELP:"What, Who: hairdresser, Lili's restaurant, ...",BTN_ADD:"New",BTN_LAST_RECORDS:"Recent pages",BTN_ADVANCED_SEARCH:"Advanced search",BTN_OPTIONS:"Advanced search",TYPE:"Kind of organization",LOCATION_HELP:"Where: City, Country",RESULTS:"Results",RESULT_COUNT_LOCATION:"{{count}} result{{count>0?'s':''}}, near {{location}}",RESULT_COUNT:"{{count}} result{{count>0?'s':''}}",LAST_RECORDS:"Recent pages",LAST_RECORD_COUNT_LOCATION:"{{count}} recent page{{count>0?'s':''}}, near {{location}}",LAST_RECORD_COUNT:"{{count}} recent page{{count>0?'s':''}}",POPOVER_FILTERS:{BTN_ADVANCED_SEARCH:"Advanced options?"}},VIEW:{TITLE:"Registry",CATEGORY:"Main activity:",LOCATION:"Address:",MENU_TITLE:"Options",POPOVER_SHARE_TITLE:"{{title}}",REMOVE_CONFIRMATION:"Are you sure you want to delete this reference?<br/><br/>This is irreversible."},TYPE:{TITLE:"New reference",SELECT_TYPE:"Kind of organization:",ENUM:{SHOP:"Local shops",COMPANY:"Company",ASSOCIATION:"Association",INSTITUTION:"Institution"}},EDIT:{TITLE:"Edit",TITLE_NEW:"New reference",RECORD_TYPE:"Kind of organization",RECORD_TITLE:"Name",RECORD_TITLE_HELP:"Name",RECORD_DESCRIPTION:"Description",RECORD_DESCRIPTION_HELP:"Describe activity",RECORD_ADDRESS:"Street",RECORD_ADDRESS_HELP:"Street, building...",RECORD_CITY:"City",RECORD_CITY_HELP:"City, Country",RECORD_SOCIAL_NETWORKS:"Social networks and web site",RECORD_PUBKEY:"Public key",RECORD_PUBKEY_HELP:"Public key to receive payments"},WALLET:{REGISTRY_DIVIDER:"Pages",REGISTRY_HELP:"Pages refer to activities accepting money or promoting it: local shops, companies, associations, institutions."},ERROR:{LOAD_CATEGORY_FAILED:"Loading main activities failed",LOAD_RECORD_FAILED:"Loading failed",LOOKUP_RECORDS_FAILED:"Error while loading records.",REMOVE_RECORD_FAILED:"Deleting failed",SAVE_RECORD_FAILED:"Saving failed",RECORD_NOT_EXISTS:"Record not found",GEO_LOCATION_NOT_FOUND:"City or zip code not found"},INFO:{RECORD_REMOVED:"Page successfully deleted",RECORD_SAVED:"Page successfully saved"}},PROFILE:{PROFILE_DIVIDER:"Cesium+ profile",PROFILE_DIVIDER_HELP:"These are ancillary data, stored outside the currency network.",NO_PROFILE_DEFINED:"No Cesium+ profile",BTN_ADD:"Create my profile",BTN_EDIT:"Edit my profile",BTN_DELETE:"Delete my profile",BTN_REORDER:"Reorder",UID:"Pseudonym",TITLE:"Lastname, FirstName",TITLE_HELP:"Name",DESCRIPTION:"About me",DESCRIPTION_HELP:"About me...",SOCIAL_HELP:"http://...",GENERAL_DIVIDER:"General data",SOCIAL_NETWORKS_DIVIDER:"Social networks and web site",TECHNICAL_DIVIDER:"Technical data",MODAL_AVATAR:{TITLE:"Avatar",SELECT_FILE_HELP:"<b>Choose an image file</b>, by clicking on the button below:",BTN_SELECT_FILE:"Choose an image",RESIZE_HELP:"<b>Re-crop the image</b> if necessary. A click on the image allows to move it. Click on the area at the bottom left to zoom in.",RESULT_HELP:"<b>Here is the result</b> as seen on your profile:"},CONFIRM:{DELETE:"Are you sure you want to <b>delete your Cesium+ profile ?</b><br/><br/>This operation is irreversible."},ERROR:{REMOVE_PROFILE_FAILED:"Deleting profile failed",LOAD_PROFILE_FAILED:"Could not load user profile.",SAVE_PROFILE_FAILED:"Saving profile failed",INVALID_SOCIAL_NETWORK_FORMAT:"Invalid format: please fill a valid Internet address.<br/><br/>Examples :<ul><li>- A Facebook page (https://www.facebook.com/user)</li><li>- A web page (http://www.domain.com)</li><li>- An email address (joe@dalton.com)</li></ul>",IMAGE_RESIZE_FAILED:"Error while resizing picture"},INFO:{PROFILE_REMOVED:"Profile deleted",PROFILE_SAVED:"Profile saved"},HELP:{WARNING_PUBLIC_DATA:"Please note that the information published here <b>is public</b>: visible including by <b>not logged in people</b>.<br/>{{'PROFILE.PROFILE_DIVIDER_HELP'|translate}}"}},LOCATION:{BTN_GEOLOC_ADDRESS:"Find my address on the map",USE_GEO_POINT:"Appear on {{'COMMON.APP_NAME'|translate}} maps?",LOADING_LOCATION:"Searching address...",LOCATION_DIVIDER:"Localisation",ADDRESS:"Address",ADDRESS_HELP:"Address (optional)",CITY:"City",CITY_HELP:"City, Country",DISTANCE:"Maximum distance around the city",DISTANCE_UNIT:"mi",DISTANCE_OPTION:"{{value}} {{'LOCATION.DISTANCE_UNIT'|translate}}",SEARCH_HELP:"Ville, Country",MODAL:{TITLE:"Search address",SEARCH_HELP:"City, Country",ALTERNATIVE_RESULT_DIVIDER:"Alternative results for <b>{{address}}</b>:",POSITION:"lat/lon : {{lat}} / {{lon}}"},ERROR:{REQUIRED_FOR_LOCATION:"Required field to appear on the map",INVALID_FOR_LOCATION:"Unknown address",GEO_LOCATION_FAILED:"Unable to retrieve your current position. Please use the search button.",ADDRESS_LOCATION_FAILED:"Unable to retrieve the address position"}},SUBSCRIPTION:{SUBSCRIPTION_DIVIDER:"Online services",SUBSCRIPTION_DIVIDER_HELP:"Online services offer optional additional services, delegated to a third party.",BTN_ADD:"Add a service",BTN_EDIT:"Manage my services",NO_SUBSCRIPTION:"No service defined",SUBSCRIPTION_COUNT:"Services / Subscription",EDIT:{TITLE:"Online services",HELP_TEXT:"Manage your subscriptions and other online services here",PROVIDER:"Provider:"},TYPE:{ENUM:{EMAIL:"Receive email notifications"}},CONFIRM:{DELETE_SUBSCRIPTION:"Are you sur you want to <b>delete this subscription</b>?"},ERROR:{LOAD_SUBSCRIPTIONS_FAILED:"Error while loading online services",ADD_SUBSCRIPTION_FAILED:"Error while adding subscription",UPDATE_SUBSCRIPTION_FAILED:"Error during subscription update",DELETE_SUBSCRIPTION_FAILED:"Error while deleting subscription"},MODAL_EMAIL:{TITLE:"Notification by email",HELP:"Fill out this form to <b>be notified by email</ b> of your account's events. <br/>Your email address will be encrypted only to be visible to the service provider.",EMAIL_LABEL:"Your email:",EMAIL_HELP:"john@domain.com",FREQUENCY_LABEL:"Frequency of notifications:",FREQUENCY_DAILY:"Daily",FREQUENCY_WEEKLY:"Weekly",PROVIDER:"Service Provider:"}},DOCUMENT:{HASH:"Hash: ",LOOKUP:{TITLE:"Document search",BTN_ACTIONS:"Actions",SEARCH_HELP:"issuer:AAA*, time:1508406169",LAST_DOCUMENTS:"Last documents",SHOW_QUERY:"Show query",HIDE_QUERY:"Hide query",HEADER_TIME:"Time/Hour",HEADER_ISSUER:"Issuer",HEADER_RECIPIENT:"Recipient",READ:"Read",BTN_REMOVE:"Delete this document",POPOVER_ACTIONS:{TITLE:"Actions",REMOVE_ALL:"Delete these documents..."}},INFO:{REMOVED:"Deleted document"},CONFIRM:{REMOVE:"Are you sure you want to <b>delete this document</b>?",REMOVE_ALL:"Are you sure you want to <b>delete these documents</b>?"},ERROR:{LOAD_DOCUMENTS_FAILED:"Error searching documents",REMOVE_FAILED:"Error deleting the document",REMOVE_ALL_FAILED:"Error deleting documents"}},ES_SETTINGS:{PLUGIN_NAME:"Cesium+",PLUGIN_NAME_HELP:"User profiles, notifications, private messages",ENABLE_TOGGLE:"Enable extension?",ENABLE_MESSAGE_TOGGLE:"Enable messages?",ENABLE_SETTINGS_TOGGLE:"Enable remote storage for settings?",PEER:"Data peer address",POPUP_PEER:{TITLE:"Data peer",HELP:"Set the address of the peer to use:",PEER_HELP:"server.domain.com:port"},NOTIFICATIONS:{DIVIDER:"Notifications",HELP_TEXT:"Enable the types of notifications you want to receive:",ENABLE_TX_SENT:"Notify the validation of <b>sent payments</b>?",ENABLE_TX_RECEIVED:"Notify the validation of <b>received payments</b>?",ENABLE_CERT_SENT:"Notify the validation of <b>sent certifications</b>?",ENABLE_CERT_RECEIVED:"Notify the validation of <b>received certifications</b>?"},CONFIRM:{ASK_ENABLE_TITLE:"Optional features",ASK_ENABLE:'Cesium+ extension is <b>disabled</b> in your settings, making some features inactive: <ul><li>&nbsp;&nbsp;<b><i class="icon ion-person"></i> user profiles</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-android-notifications"></i> Notifications</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-email"></i> Private messages</b>.</ul><br/><br/><b>Do you want to enable</b> the extension?'}},ES_WALLET:{ERROR:{RECIPIENT_IS_MANDATORY:"A recipient is required for encryption."}},EVENT:{NODE_STARTED:"Your node ES API <b>{{params[0]}}</b> is UP",NODE_BMA_DOWN:"Node <b>{{params[0]}}:{{params[1]}}</b> (used by your ES API) is <b>unreachable</b>.",NODE_BMA_UP:"Node <b>{{params[0]}}:{{params[1]}}</b> is reachable again.",MEMBER_JOIN:"You are now a <b>member</b> of currency <b>{{params[0]}}</b>!",MEMBER_LEAVE:"You are <b>not a member anymore</b> of currency <b>{{params[0]}}</b>!",MEMBER_EXCLUDE:"You are <b>not more member</b> of the currency <b>{{params[0]}}</b>, for lack of renewal or lack of certifications.",MEMBER_REVOKE:"Your account has been revoked. It will no longer be a member of the currency <b>{{params[0]}}</b>.",MEMBER_ACTIVE:"Your membership to <b>{{params[0]}}</b> has been <b>renewed successfully</b>.",TX_SENT:"Your payment to <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> was executed.",TX_SENT_MULTI:"Your payment to <b>{{params[1]}}</b> was executed.",TX_RECEIVED:"You received a payment from <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",TX_RECEIVED_MULTI:"You received a payment from <b>{{params[1]}}</b>.",CERT_SENT:"Your <b>certification</b> to <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> was executed.",CERT_RECEIVED:"You  have <b>received a certification</b> from <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",REGISTRY:{NEW_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has commented on your referencing: <b>{{params[2]}}</b>",UPDATE_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has modified his comment on your referencing: <b>{{params[2]}}</b>",NEW_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has replied to your comment on the referencing: <b>{{params[2]}}</b>",UPDATE_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has modified his answer to your comment, on the referencing: <b>{{params[2]}}</b>"}},CONFIRM:{ES_USE_FALLBACK_NODE:"Data node <b>{{old}}</b> unreachable or invalid address.<br/><br/>Do you want to temporarily use the data node <b>{{new}}</b>?"},ERROR:{ES_CONNECTION_ERROR:'Data node <b>{{server}}</b> unreachable or invalid address.<br/><br/>Cesium will continue to work, <b>without the Cesium+</b> extension (user profiles, private messages, maps and graphics).<br/><br/>Check your Internet connection, or change data node in <a class="positive" ng-click="doQuickFix(\'settings\')">extension settings</a>.',ES_MAX_UPLOAD_BODY_SIZE:"The volume of data to be sent exceeds the limit set by the server.<br/><br/>Please try again after, for example, deleting photos."}}),e.translations("en",{COMMON:{CATEGORY:"Category",CATEGORIES:"Categories",CATEGORY_SEARCH_HELP:"Search",LAST_MODIFICATION_DATE:"Updated on ",SUBMIT_BY:"Submitted by",BTN_PUBLISH:"Publish",BTN_PICTURE_DELETE:"Delete",BTN_PICTURE_FAVORISE:"Default",BTN_PICTURE_ROTATE:"Rotate",BTN_ADD_PICTURE:"Add picture",NOTIFICATIONS:{TITLE:"Notifications",MARK_ALL_AS_READ:"Mark all as read",NO_RESULT:"No notification",SHOW_ALL:"Show all",LOAD_NOTIFICATIONS_FAILED:"Could not load notifications"}},MENU:{REGISTRY:"Pages",USER_PROFILE:"My Profile",MESSAGES:"Messages",NOTIFICATIONS:"Notifications",INVITATIONS:"Invitations"},ACCOUNT:{NEW:{ORGANIZATION_ACCOUNT:"Account for an organization",ORGANIZATION_ACCOUNT_HELP:"If you represent a company, association, etc.<br/>No universal dividend will be created by this account."},EVENT:{MEMBER_WITHOUT_PROFILE:'To obtain your certification more quickly, fill in <a ui-sref="app.user_edit_profile">your user profile</a>. Members will more easily put their trust in a verifiable identity.'},ERROR:{WS_CONNECTION_FAILED:"Cesium can not receive notifications because of a technical error (connection to the Cesium + data node).<br/><br/>If the problem persists, please <b>choose another data node</b> in Cesium+ settings."
}},WOT:{BTN_SUGGEST_CERTIFICATIONS_DOTS:"Suggest identities to certify...",BTN_ASK_CERTIFICATIONS_DOTS:"Ask members to certify me...",BTN_ASK_CERTIFICATION:"Ask a certification",SUGGEST_CERTIFICATIONS_MODAL:{TITLE:"Suggest certifications",HELP:"Select your suggestions"},ASK_CERTIFICATIONS_MODAL:{TITLE:"Ask certifications",HELP:"Select recipients"},SEARCH:{DIVIDER_PROFILE:"Accounts",DIVIDER_PAGE:"Pages",DIVIDER_GROUP:"Groups"},CONFIRM:{SUGGEST_CERTIFICATIONS:"Are you sure you want <b>to send these certification suggestions</b>?",ASK_CERTIFICATION:"Are you sure you want to <b>send a certification request</b>?",ASK_CERTIFICATIONS:"Are you sure you want to <b>send a certification request</b> to these people?"}},INVITATION:{TITLE:"Invitations",NO_RESULT:"No invitation received",BTN_DELETE_ALL:"Delete all invitations",BTN_DELETE:"Delete invitation",BTN_NEW_INVITATION:"New invitation",ASK_CERTIFICATION:'<a href="#/app/wot/{{pubkey}}/{{::uid}}">{{::name||uid}}</a> asks for your certification',SUGGESTION_CERTIFICATION:'<a href="#/app/wot/{{::pubkey}}/{{::uid}}">{{::name||uid}}</a> is suggested for certification',SUGGESTED_BY:'Suggestion sent by <a class="positive" href="#/app/wot/{{::issuer.pubkey}}/{{::issuer.uid}}">{{::issuer.name||issuer.uid}}</a>',NOTIFICATIONS:{TITLE:"Invitations"},LIST:{TITLE:"Invitations"},NEW:{TITLE:"New invitation",RECIPIENTS:"A",RECIPIENTS_HELP:"Recipients of the invitation",RECIPIENTS_MODAL_TITLE:"Recipients",RECIPIENTS_MODAL_HELP:"Please choose recipients:",SUGGESTION_IDENTITIES:"Suggestions for certification",SUGGESTION_IDENTITIES_HELP:"Certifications to suggest",SUGGESTION_IDENTITIES_MODAL_TITLE:"Suggestions",SUGGESTION_IDENTITIES_MODAL_HELP:"Please choose your suggestions:"},CONFIRM:{DELETE_ALL_CONFIRMATION:"Removing invitations is <b>an irreversible operation</b>.<br/><br/><b>Are you sure</b> you want to continue",SEND_INVITATIONS_TO_CERTIFY:"<b>Are you sure</b> you want <b>to sent this invitation to certify</b> ?"},INFO:{INVITATION_SENT:"Invitation sent"},ERROR:{LOAD_INVITATIONS_FAILED:"Error while loading invitations",REMOVE_INVITATION_FAILED:"Error while deleting the invitation",REMOVE_ALL_INVITATIONS_FAILED:"Error while deleting invitations",SEND_INVITATION_FAILED:"Error while sending invitation",BAD_INVITATION_FORMAT:'<span class="assertive"><i class="ion-close-circled"></i> Invitation unreadable (format unknown)</span> - sent by <a ui-sref="app.wot_identity({pubkey: \'{{::pubkey}}\', uid: \'{{::uid}}\' })">{{::name||uid}}</a>'}},COMMENTS:{DIVIDER:"Comments",SHOW_MORE_COMMENTS:"Show previous comments",COMMENT_HELP:"Your comment, question...",COMMENT_HELP_REPLY_TO:"Your answer...",BTN_SEND:"Send",POPOVER_SHARE_TITLE:"Message #{{number}}",REPLY:"Reply",REPLY_TO:"Respond to:",REPLY_TO_LINK:"In response to ",REPLY_TO_DELETED_COMMENT:"In response to a deleted comment",REPLY_COUNT:"{{replyCount}} responses",DELETED_COMMENT:"Comment deleted",ERROR:{FAILED_SAVE_COMMENT:"Saving comment failed",FAILED_REMOVE_COMMENT:"Deleting comment failed"}},MESSAGE:{REPLY_TITLE_PREFIX:"Re: ",FORWARD_TITLE_PREFIX:"Fw: ",BTN_REPLY:"Reply",BTN_COMPOSE:"New message",BTN_WRITE:"Write",NO_MESSAGE_INBOX:"No message received",NO_MESSAGE_OUTBOX:"No message sent",NOTIFICATIONS:{TITLE:"Messages",MESSAGE_RECEIVED:"You <b>received a message</b><br/>from"},LIST:{INBOX:"Inbox",OUTBOX:"Outbox",LAST_INBOX:"New messages",LAST_OUTBOX:"Sent messages",BTN_LAST_MESSAGES:"Recent messages",TITLE:"Private messages",SEARCH_HELP:"Search in messages",POPOVER_ACTIONS:{TITLE:"Options",DELETE_ALL:"Delete all messages"}},COMPOSE:{TITLE:"New message",TITLE_REPLY:"Reply",SUB_TITLE:"New message",TO:"To",OBJECT:"Object",OBJECT_HELP:"Object",ENCRYPTED_HELP:"Please note this message will be encrypted before sending so that only the recipient can read it and be sure you are the author.",MESSAGE:"Message",MESSAGE_HELP:"Message content",CONTENT_CONFIRMATION:"No message content.<br/><br/>Are your sure you want to send this message?"},VIEW:{TITLE:"Message",SENDER:"Sent by",RECIPIENT:"Sent to",NO_CONTENT:"Empty message",DELETE:"Delete the message"},CONFIRM:{REMOVE:"Are you sure you want to <b>delete this message</b>?<br/><br/> This operation is irreversible.",REMOVE_ALL:"Are you sure you want to <b>delete all messages</b>?<br/><br/> This operation is irreversible.",MARK_ALL_AS_READ:"Are you sure you want to <b>mark all message as read</b>?",USER_HAS_NO_PROFILE:"This identity has no Cesium + profile. It may not use the Cesium + extension, so it <b>will not read your message</b>.<br/><br/>Are you sure you want <b>to continue</b>?"},INFO:{MESSAGE_REMOVED:"Message successfully deleted",All_MESSAGE_REMOVED:"Messages successfully deleted",MESSAGE_SENT:"Message sent"},ERROR:{SEND_MSG_FAILED:"Error while sending message.",LOAD_MESSAGES_FAILED:"Error while loading messages.",LOAD_MESSAGE_FAILED:"Error while loading message.",MESSAGE_NOT_READABLE:"Unable to read message.",USER_NOT_RECIPIENT:"You are not the recipient of this message: unable to read it.",NOT_AUTHENTICATED_MESSAGE:"The authenticity of the message is not certain or its content is corrupted.",REMOVE_MESSAGE_FAILED:"Error while deleting message",MESSAGE_CONTENT_TOO_LONG:"Value too long ({{maxLength}} characters max).",MARK_AS_READ_FAILED:"Unable to mark the message as 'read'.",LOAD_NOTIFICATIONS_FAILED:"Error while loading messages notifications.",REMOVE_All_MESSAGES_FAILED:"Error while removing all messages.",MARK_ALL_AS_READ_FAILED:"Error while marking messages as read.",RECIPIENT_IS_MANDATORY:"Recipient is mandatory."}},BLOCKCHAIN:{LOOKUP:{SEARCH_HELP:"Block number, hash...",POPOVER_FILTER_TITLE:"Filter",HEADER_MEDIAN_TIME:"Date / Time",HEADER_BLOCK:"Block #",HEADER_ISSUER:"Peer owner",BTN_LAST:"Last blocks",DISPLAY_QUERY:"View query",HIDE_QUERY:"Hide query",TX_SEARCH_FILTER:{MEMBER_FLOWS:'<b class="ion-person"></b> Members input/output',EXISTING_TRANSACTION:'<b class="ion-card"></b> Having transactions',PERIOD:'<b class="ion-clock"></b> Between <b class="gray">{{params[1]|formatDateShort}}</b> ({{params[1]|formatTime}}) and <b class="gray">{{params[2]|formatDateShort}}</b> ({{params[2]|formatTime}})',ISSUER:'<b class="ion-android-desktop"></b> Computed by {{params[1]|formatPubkey}}',TX_PUBKEY:'<b class="ion-card"></b> Transactions concerning <b class="ion-key"></b> {{params[1]|formatPubkey}}'}},ERROR:{SEARCH_BLOCKS_FAILED:"Error while searching blocks."}},REGISTRY:{CATEGORY:"Main activity",GENERAL_DIVIDER:"Basic information",LOCATION_DIVIDER:"Address",SOCIAL_NETWORKS_DIVIDER:"Social networks, web sites",TECHNICAL_DIVIDER:"Technical data",BTN_SHOW_WOT:"People",BTN_SHOW_WOT_HELP:"Search for people",BTN_SHOW_PAGES:"Pages",BTN_SHOW_PAGES_HELP:"Search for pages",BTN_NEW:"New page",MY_PAGES:"My pages",NO_PAGE:"No page",SEARCH:{TITLE:"Professional Directory",SEARCH_HELP:"What, Who: hairdresser, Lili's restaurant, ...",BTN_ADD:"New",BTN_LAST_RECORDS:"Recent pages",BTN_ADVANCED_SEARCH:"Advanced search",BTN_OPTIONS:"Advanced search",TYPE:"Kind of organization",LOCATION_HELP:"Where: City, Country",RESULTS:"Results",RESULT_COUNT_LOCATION:"{{count}} result{{count>0?'s':''}}, near {{location}}",RESULT_COUNT:"{{count}} result{{count>0?'s':''}}",LAST_RECORDS:"Recent pages",LAST_RECORD_COUNT_LOCATION:"{{count}} recent page{{count>0?'s':''}}, near {{location}}",LAST_RECORD_COUNT:"{{count}} recent page{{count>0?'s':''}}",POPOVER_FILTERS:{BTN_ADVANCED_SEARCH:"Advanced options?"}},VIEW:{TITLE:"Registry",CATEGORY:"Main activity:",LOCATION:"Address:",MENU_TITLE:"Options",POPOVER_SHARE_TITLE:"{{title}}",REMOVE_CONFIRMATION:"Are you sure you want to delete this reference?<br/><br/>This is irreversible."},TYPE:{TITLE:"New reference",SELECT_TYPE:"Kind of organization:",ENUM:{SHOP:"Local shops",COMPANY:"Company",ASSOCIATION:"Association",INSTITUTION:"Institution"}},EDIT:{TITLE:"Edit",TITLE_NEW:"New reference",RECORD_TYPE:"Kind of organization",RECORD_TITLE:"Name",RECORD_TITLE_HELP:"Name",RECORD_DESCRIPTION:"Description",RECORD_DESCRIPTION_HELP:"Describe activity",RECORD_ADDRESS:"Street",RECORD_ADDRESS_HELP:"Street, building...",RECORD_CITY:"City",RECORD_CITY_HELP:"City, Country",RECORD_SOCIAL_NETWORKS:"Social networks and web site",RECORD_PUBKEY:"Public key",RECORD_PUBKEY_HELP:"Public key to receive payments"},WALLET:{REGISTRY_DIVIDER:"Pages",REGISTRY_HELP:"Pages refer to activities accepting money or promoting it: local shops, companies, associations, institutions."},ERROR:{LOAD_CATEGORY_FAILED:"Loading main activities failed",LOAD_RECORD_FAILED:"Loading failed",LOOKUP_RECORDS_FAILED:"Error while loading records.",REMOVE_RECORD_FAILED:"Deleting failed",SAVE_RECORD_FAILED:"Saving failed",RECORD_NOT_EXISTS:"Record not found",GEO_LOCATION_NOT_FOUND:"City or zip code not found"},INFO:{RECORD_REMOVED:"Page successfully deleted",RECORD_SAVED:"Page successfully saved"}},PROFILE:{PROFILE_DIVIDER:"Cesium+ profile",PROFILE_DIVIDER_HELP:"These are ancillary data, stored outside the currency network.",NO_PROFILE_DEFINED:"No Cesium+ profile",BTN_ADD:"Create my profile",BTN_EDIT:"Edit my profile",BTN_DELETE:"Delete my profile",BTN_REORDER:"Reorder",UID:"Pseudonym",TITLE:"Lastname, FirstName",TITLE_HELP:"Name",DESCRIPTION:"About me",DESCRIPTION_HELP:"About me...",SOCIAL_HELP:"http://...",GENERAL_DIVIDER:"General data",SOCIAL_NETWORKS_DIVIDER:"Social networks and web site",TECHNICAL_DIVIDER:"Technical data",MODAL_AVATAR:{TITLE:"Avatar",SELECT_FILE_HELP:"<b>Choose an image file</b>, by clicking on the button below:",BTN_SELECT_FILE:"Choose an image",RESIZE_HELP:"<b>Re-crop the image</b> if necessary. A click on the image allows to move it. Click on the area at the bottom left to zoom in.",RESULT_HELP:"<b>Here is the result</b> as seen on your profile:"},CONFIRM:{DELETE:"Are you sure you want to <b>delete your Cesium+ profile ?</b><br/><br/>This operation is irreversible."},ERROR:{REMOVE_PROFILE_FAILED:"Deleting profile failed",LOAD_PROFILE_FAILED:"Could not load user profile.",SAVE_PROFILE_FAILED:"Saving profile failed",INVALID_SOCIAL_NETWORK_FORMAT:"Invalid format: please fill a valid Internet address.<br/><br/>Examples :<ul><li>- A Facebook page (https://www.facebook.com/user)</li><li>- A web page (http://www.domain.com)</li><li>- An email address (joe@dalton.com)</li></ul>",IMAGE_RESIZE_FAILED:"Error while resizing picture"},INFO:{PROFILE_REMOVED:"Profile deleted",PROFILE_SAVED:"Profile saved"},HELP:{WARNING_PUBLIC_DATA:"Please note that the information published here <b>is public</b>: visible including by <b>not logged in people</b>.<br/>{{'PROFILE.PROFILE_DIVIDER_HELP'|translate}}"}},LOCATION:{BTN_GEOLOC_ADDRESS:"Find my address on the map",USE_GEO_POINT:"Appear on {{'COMMON.APP_NAME'|translate}} maps?",LOADING_LOCATION:"Searching address...",LOCATION_DIVIDER:"Localisation",ADDRESS:"Address",ADDRESS_HELP:"Address (optional)",CITY:"City",CITY_HELP:"City, Country",DISTANCE:"Maximum distance around the city",DISTANCE_UNIT:"mi",DISTANCE_OPTION:"{{value}} {{'LOCATION.DISTANCE_UNIT'|translate}}",SEARCH_HELP:"Ville, Country",MODAL:{TITLE:"Search address",SEARCH_HELP:"City, Country",ALTERNATIVE_RESULT_DIVIDER:"Alternative results for <b>{{address}}</b>:",POSITION:"lat/lon : {{lat}} / {{lon}}"},ERROR:{REQUIRED_FOR_LOCATION:"Required field to appear on the map",INVALID_FOR_LOCATION:"Unknown address",GEO_LOCATION_FAILED:"Unable to retrieve your current position. Please use the search button.",ADDRESS_LOCATION_FAILED:"Unable to retrieve the address position"}},SUBSCRIPTION:{SUBSCRIPTION_DIVIDER:"Online services",SUBSCRIPTION_DIVIDER_HELP:"Online services offer optional additional services, delegated to a third party.",BTN_ADD:"Add a service",BTN_EDIT:"Manage my services",NO_SUBSCRIPTION:"No service defined",SUBSCRIPTION_COUNT:"Services / Subscription",EDIT:{TITLE:"Online services",HELP_TEXT:"Manage your subscriptions and other online services here",PROVIDER:"Provider:"},TYPE:{ENUM:{EMAIL:"Receive email notifications"}},CONFIRM:{DELETE_SUBSCRIPTION:"Are you sur you want to <b>delete this subscription</b>?"},ERROR:{LOAD_SUBSCRIPTIONS_FAILED:"Error while loading online services",ADD_SUBSCRIPTION_FAILED:"Error while adding subscription",UPDATE_SUBSCRIPTION_FAILED:"Error during subscription update",DELETE_SUBSCRIPTION_FAILED:"Error while deleting subscription"},MODAL_EMAIL:{TITLE:"Notification by email",HELP:"Fill out this form to <b>be notified by email</ b> of your account's events. <br/>Your email address will be encrypted only to be visible to the service provider.",EMAIL_LABEL:"Your email:",EMAIL_HELP:"john@domain.com",FREQUENCY_LABEL:"Frequency of notifications:",FREQUENCY_DAILY:"Daily",FREQUENCY_WEEKLY:"Weekly",PROVIDER:"Service Provider:"}},DOCUMENT:{HASH:"Hash: ",LOOKUP:{TITLE:"Document search",BTN_ACTIONS:"Actions",SEARCH_HELP:"issuer:AAA*, time:1508406169",LAST_DOCUMENTS:"Last documents",SHOW_QUERY:"Show query",HIDE_QUERY:"Hide query",HEADER_TIME:"Time/Hour",HEADER_ISSUER:"Issuer",HEADER_RECIPIENT:"Recipient",READ:"Read",BTN_REMOVE:"Delete this document",POPOVER_ACTIONS:{TITLE:"Actions",REMOVE_ALL:"Delete these documents..."}},INFO:{REMOVED:"Deleted document"},CONFIRM:{REMOVE:"Are you sure you want to <b>delete this document</b>?",REMOVE_ALL:"Are you sure you want to <b>delete these documents</b>?"},ERROR:{LOAD_DOCUMENTS_FAILED:"Error searching documents",REMOVE_FAILED:"Error deleting the document",REMOVE_ALL_FAILED:"Error deleting documents"}},ES_SETTINGS:{PLUGIN_NAME:"Cesium+",PLUGIN_NAME_HELP:"User profiles, notifications, private messages",ENABLE_TOGGLE:"Enable extension?",ENABLE_MESSAGE_TOGGLE:"Enable messages?",ENABLE_SETTINGS_TOGGLE:"Enable remote storage for settings?",PEER:"Data peer address",POPUP_PEER:{TITLE:"Data peer",HELP:"Set the address of the peer to use:",PEER_HELP:"server.domain.com:port"},NOTIFICATIONS:{DIVIDER:"Notifications",HELP_TEXT:"Enable the types of notifications you want to receive:",ENABLE_TX_SENT:"Notify the validation of <b>sent payments</b>?",ENABLE_TX_RECEIVED:"Notify the validation of <b>received payments</b>?",ENABLE_CERT_SENT:"Notify the validation of <b>sent certifications</b>?",ENABLE_CERT_RECEIVED:"Notify the validation of <b>received certifications</b>?"},CONFIRM:{ASK_ENABLE_TITLE:"Optional features",ASK_ENABLE:'Cesium+ extension is <b>disabled</b> in your settings, making some features inactive: <ul><li>&nbsp;&nbsp;<b><i class="icon ion-person"></i> user profiles</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-android-notifications"></i> Notifications</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-email"></i> Private messages</b>.</ul><br/><br/><b>Do you want to enable</b> the extension?'}},ES_WALLET:{ERROR:{RECIPIENT_IS_MANDATORY:"A recipient is required for encryption."}},EVENT:{NODE_STARTED:"Your node ES API <b>{{params[0]}}</b> is UP",NODE_BMA_DOWN:"Node <b>{{params[0]}}:{{params[1]}}</b> (used by your ES API) is <b>unreachable</b>.",NODE_BMA_UP:"Node <b>{{params[0]}}:{{params[1]}}</b> is reachable again.",MEMBER_JOIN:"You are now a <b>member</b> of currency <b>{{params[0]}}</b>!",MEMBER_LEAVE:"You are <b>not a member anymore</b> of currency <b>{{params[0]}}</b>!",MEMBER_EXCLUDE:"You are <b>not more member</b> of the currency <b>{{params[0]}}</b>, for lack of renewal or lack of certifications.",MEMBER_REVOKE:"Your account has been revoked. It will no longer be a member of the currency <b>{{params[0]}}</b>.",MEMBER_ACTIVE:"Your membership to <b>{{params[0]}}</b> has been <b>renewed successfully</b>.",TX_SENT:"Your payment to <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> was executed.",TX_SENT_MULTI:"Your payment to <b>{{params[1]}}</b> was executed.",TX_RECEIVED:"You received a payment from <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",TX_RECEIVED_MULTI:"You received a payment from <b>{{params[1]}}</b>.",CERT_SENT:"Your <b>certification</b> to <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> was executed.",CERT_RECEIVED:"You  have <b>received a certification</b> from <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",REGISTRY:{NEW_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has commented on your referencing: <b>{{params[2]}}</b>",UPDATE_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has modified his comment on your referencing: <b>{{params[2]}}</b>",NEW_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has replied to your comment on the referencing: <b>{{params[2]}}</b>",UPDATE_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> has modified his answer to your comment, on the referencing: <b>{{params[2]}}</b>"}},CONFIRM:{ES_USE_FALLBACK_NODE:"Data node <b>{{old}}</b> unreachable or invalid address.<br/><br/>Do you want to temporarily use the data node <b>{{new}}</b>?"},ERROR:{ES_CONNECTION_ERROR:'Data node <b>{{server}}</b> unreachable or invalid address.<br/><br/>Cesium will continue to work, <b>without the Cesium+</b> extension (user profiles, private messages, maps and graphics).<br/><br/>Check your Internet connection, or change data node in <a class="positive" ng-click="doQuickFix(\'settings\')">extension settings</a>.',ES_MAX_UPLOAD_BODY_SIZE:"The volume of data to be sent exceeds the limit set by the server.<br/><br/>Please try again after, for example, deleting photos."}}),e.translations("es-ES",{COMMON:{CATEGORY:"Categora",CATEGORIES:"Categoras",CATEGORY_SEARCH_HELP:"Bsqueda",LAST_MODIFICATION_DATE:"Actualizacin el",SUBMIT_BY:"Sometido por",BTN_PUBLISH:"Publicar",BTN_PICTURE_DELETE:"Suprimir",BTN_PICTURE_FAVORISE:"Principal",BTN_PICTURE_ROTATE:"Girar",BTN_ADD_PICTURE:"Aadir una foto",NOTIFICATIONS:{TITLE:"Notificacines",MARK_ALL_AS_READ:"Marcar todo como ledo",NO_RESULT:"Ningna notificacin",SHOW_ALL:"Ver todo",LOAD_NOTIFICATIONS_FAILED:"Fracaso en la carga de las notificacines"}},MENU:{REGISTRY:"Profesionales",USER_PROFILE:"Mi perfil",MESSAGES:"Mensajes",NOTIFICATIONS:"Notificacines",INVITATIONS:"Invitacines"},ACCOUNT:{NEW:{ORGANIZATION_ACCOUNT:"Cuenta para una organizacin",ORGANIZATION_ACCOUNT_HELP:"Si representa una empresa, una asociacin, etc.<br/>Ningn dividendo universal ser credo por esta cuenta."},EVENT:{MEMBER_WITHOUT_PROFILE:'Para obtener sus certificacines ms rapidamente, completa <a ui-sref="app.user_edit_profile">su perfil usuario</a>. Los miembros concedern ms fcilmente su confianza a una identidad verificable.'},ERROR:{WS_CONNECTION_FAILED:"Cesium no puede recibir las notificacines, a causa de un error tcnico (conexin al nodo de datos Cesium+).<br/><br/>Si el problema persiste, por favor <b>elige un otro nodo de datos</b> en las configuracines Cesium+."}},WOT:{BTN_SUGGEST_CERTIFICATIONS_DOTS:"Sugerir identidad a certificar...",BTN_ASK_CERTIFICATIONS_DOTS:"Solicitar otros miembros a certificarme",BTN_ASK_CERTIFICATION:"Solicitar una certificacin",SUGGEST_CERTIFICATIONS_MODAL:{TITLE:"Sugerir certificacines",HELP:"Selectionar sus sugerencias"},ASK_CERTIFICATIONS_MODAL:{TITLE:"Solicitar certificacines",HELP:"Selectionar los destinatarios"},SEARCH:{DIVIDER_PROFILE:"Cuentas",DIVIDER_PAGE:"Pginas",DIVIDER_GROUP:"Grupos"},CONFIRM:{SUGGEST_CERTIFICATIONS:"Est usted segura/o querer <b>mandar estas sugerencia de certificatin</b> ?",ASK_CERTIFICATION:"Est usted segura/o querer <b>mandar una solicitud de certificacin</b> ?",ASK_CERTIFICATIONS:"Est usted segura/o querer <b>mandar una solicitud de certificacin</b> a estas personas ?"}},INVITATION:{TITLE:"Invitacines",NO_RESULT:"Ningna invitacin en espera",BTN_DELETE_ALL:"Suprimir todas las invitacines",BTN_DELETE:"Suprimir la invitacin",BTN_NEW_INVITATION:"Nueva invitacin",ASK_CERTIFICATION:'<a href="#/app/wot/{{pubkey}}/{{::uid}}">{{::name||uid}}</a> solicita su certificacin',SUGGESTION_CERTIFICATION:'<a href="#/app/wot/{{::pubkey}}/{{::uid}}">{{::name||uid}}</a> l es sugerido por certificacin',SUGGESTED_BY:'Sugerencia mandada por <a class="positive" href="#/app/wot/{{::issuer.pubkey}}/{{::issuer.uid}}">{{::issuer.name||issuer.uid}}</a>',NOTIFICATIONS:{TITLE:"Invitacines"},LIST:{TITLE:"Invitacines"},NEW:{TITLE:"Nueva invitacin",RECIPIENTS:"A",RECIPIENTS_HELP:"Destinatarios de la invitacin",RECIPIENTS_MODAL_TITLE:"Destinatarios",RECIPIENTS_MODAL_HELP:"Por favor, elige los destinatarios :",SUGGESTION_IDENTITIES:"Sugerencia de certificacin",SUGGESTION_IDENTITIES_HELP:"Certificacines a sugerir",SUGGESTION_IDENTITIES_MODAL_TITLE:"Sugerencias",SUGGESTION_IDENTITIES_MODAL_HELP:"Por favor, elige sus sugerencias :"},CONFIRM:{DELETE_ALL_CONFIRMATION:"La supresin de las invitacines es una <b>operacin ireversible</b>.<br/><br/><b>Est usted segura/o </b> querer continuar ?",SEND_INVITATIONS_TO_CERTIFY:"Est usted segura/o querer <b>mandar esta invitacin a certificar</b> ?"},INFO:{INVITATION_SENT:"Invitacin mandada"},ERROR:{LOAD_INVITATIONS_FAILED:"Fracaso en la carga de las invitacines",REMOVE_INVITATION_FAILED:"Fracaso durante la supresin de la invitacin",REMOVE_ALL_INVITATIONS_FAILED:"Fracaso durante la supresin de las invitacines",SEND_INVITATION_FAILED:"Fracaso durante el envo de la invitacin",BAD_INVITATION_FORMAT:'<span class="assertive"><i class="ion-close-circled"></i> Invitacin ilegible (formato desconocido)</span> - mandada por <a ui-sref="app.wot_identity({pubkey: \'{{::pubkey}}\', uid: \'{{::uid}}\' })">{{::name||uid}}</a>'}},COMMENTS:{DIVIDER:"Comentarios",SHOW_MORE_COMMENTS:"Visualizar los comentarios anteriores",COMMENT_HELP:"Su comentario, preguntas, etc.",COMMENT_HELP_REPLY_TO:"Su repuesta",BTN_SEND:"Mandar",POPOVER_SHARE_TITLE:"Mensaje #{{number}}",REPLY:"Responder",REPLY_TO:"Repuesta a :",REPLY_TO_LINK:"En repuesta a ",REPLY_TO_DELETED_COMMENT:"En repuesta a un comentario suprimido",REPLY_COUNT:"{{replyCount}} repuestas",DELETED_COMMENT:"Comentario suprimido",ERROR:{FAILED_SAVE_COMMENT:"Fracaso durante el respaldo del comentario",FAILED_REMOVE_COMMENT:"Fracaso durante la supresin del comentario"}},MESSAGE:{REPLY_TITLE_PREFIX:"Rep: ",FORWARD_TITLE_PREFIX:"Tr: ",BTN_REPLY:"Responder",BTN_COMPOSE:"Nuevo mensaje",BTN_WRITE:"Escribir",NO_MESSAGE_INBOX:"Ningun mensaje recibido",NO_MESSAGE_OUTBOX:"Ningun mensaje mandado",NOTIFICATIONS:{TITLE:"Mensajes",MESSAGE_RECEIVED:"Ha <b>recibido un mensaje</b><br/>de"},LIST:{INBOX:"Bandeja de entrada",OUTBOX:"Mensajes mandados",LAST_INBOX:"Nuevos mensajes",LAST_OUTBOX:"Mensajes enviados",BTN_LAST_MESSAGES:"Mensajes recientes",TITLE:"Mensajes",SEARCH_HELP:"Buscar en mensajes",POPOVER_ACTIONS:{TITLE:"Opcines",DELETE_ALL:"Suprimir todos los mensajes"}},COMPOSE:{TITLE:"Nuevo mensaje",TITLE_REPLY:"Responder",SUB_TITLE:"Nuevo mensaje",TO:"A",OBJECT:"Objeto",OBJECT_HELP:"Objeto",ENCRYPTED_HELP:"Por favor, nota que este mensaje ser cifrado antes envo, a fin que solo el destinatario pueda leerlo, y que est asegurado que usted est bien su autor.",MESSAGE:"Mensaje",MESSAGE_HELP:"Contenido del mensaje",CONTENT_CONFIRMATION:"El contenido del mensaje es vaco.<br/><br/>Sin embargo, quiere mandar el mensaje ?"},VIEW:{TITLE:"Mensaje",SENDER:"Mandado por",RECIPIENT:"Mandado a",NO_CONTENT:"Mensaje vaco",DELETE:"Eliminar el mensaje"},CONFIRM:{REMOVE:"Est usted segura/o querer <b>suprimir este mensaje</b> ?<br/><br/>Esta operacin es ireversible.",REMOVE_ALL:"Est usted segura/o querer <b>suprimir todos los mensajes</b> ?<br/><br/>Esta operacin es ireversible.",MARK_ALL_AS_READ:"Est usted segura/o querer <b>marcar todos los mensajes como ledo</b> ?",USER_HAS_NO_PROFILE:"Esta identidad no tiene ningn perfil Cesium+. Se puede que no utilice la extensin Cesium+, y <b>as no consultar su mensaje</b>.<br/><br/>Est usted segura/o querer <b>continuar</b> a pesar de todo ?"},INFO:{MESSAGE_REMOVED:"Mensaje suprimido",All_MESSAGE_REMOVED:"Todos los mensajes fueron suprimido",MESSAGE_SENT:"Mensaje mandado"},ERROR:{SEND_MSG_FAILED:"Fracaso durante el envo del mensaje.",LOAD_MESSAGES_FAILED:"Fracaso durante la recuperacin de los mensajes.",LOAD_MESSAGE_FAILED:"Fracaso durante la recuperacin del mensaje.",MESSAGE_NOT_READABLE:"Lectura del mensaje imposible.",USER_NOT_RECIPIENT:"No esta el destinatario de este mensaje : deciframiento imposible.",NOT_AUTHENTICATED_MESSAGE:"La autenticidad del mensaje es dudosa o su contenido es corrupto.",REMOVE_MESSAGE_FAILED:"Fracaso en la supresin del mensaje",MESSAGE_CONTENT_TOO_LONG:"Valor demasiado largo ({{maxLength}} carcteres max).",MARK_AS_READ_FAILED:"Imposible marcar el mensaje como 'ledo'.",LOAD_NOTIFICATIONS_FAILED:"Fracaso durante la recuperacin de las notificacines de mensajes.",REMOVE_All_MESSAGES_FAILED:"Fracaso durante la supresin de todos los mensajes.",MARK_ALL_AS_READ_FAILED:"Fracaso durante el marcaje de los mensajes como ledo.",RECIPIENT_IS_MANDATORY:"El destinatario es obligatorio."}},BLOCKCHAIN:{LOOKUP:{SEARCH_HELP:"Nmero de bloque, hash, llave pblica, etc.",POPOVER_FILTER_TITLE:"Filtros",HEADER_MEDIAN_TIME:"Fecha / Hora",HEADER_BLOCK:"Bloque #",HEADER_ISSUER:"Nodo emisor",BTN_LAST:"ltimos bloques",DISPLAY_QUERY:"Mostrar la consulta",HIDE_QUERY:"Ocultar la consulta",TX_SEARCH_FILTER:{MEMBER_FLOWS:"Entradas/salidas de miembros",EXISTING_TRANSACTION:"Con transacciones",PERIOD:'<b class="ion-clock"></b> Entre el <b class="gray">{{params[1]|formatDateShort}}</b> ({{params[1]|formatTime}}) y el <b class="gray">{{params[2]|formatDateShort}}</b> ({{params[2]|formatTime}})',ISSUER:'<b class="ion-android-desktop"></b> Calculado por <b class="ion-key"></b> {{params[1]|formatPubkey}}',TX_PUBKEY:'<b class="ion-card"></b> Transacciones que implican <b class="ion-key"></b> {{params[1]|formatPubkey}}'}},ERROR:{SEARCH_BLOCKS_FAILED:"Fracaso en la bsqueda de los bloques."}},GROUP:{GENERAL_DIVIDER:"Informacines generales",LOCATION_DIVIDER:"Direccin",SOCIAL_NETWORKS_DIVIDER:"Redes sociales y sitio web",TECHNICAL_DIVIDER:"Informacines tcnicas",CREATED_TIME:"Creada {{creationTime|formatFromNow}}",NOTIFICATIONS:{TITLE:"Invitacines"},LOOKUP:{TITLE:"Grupos",SEARCH_HELP:"Nombre de grupo, palabras , lugar, etc.",LAST_RESULTS_LIST:"Nuevos grupos :",OPEN_RESULTS_LIST:"Grupos abiertos :",MANAGED_RESULTS_LIST:"Grupos cerrados :",BTN_LAST:"Nuevos grupos",BTN_NEW:"Aado un grupo"},TYPE:{TITLE:"Nuevo grupo",SELECT_TYPE:"Tipo de grupo :",OPEN_GROUP:"Grupo abierto",OPEN_GROUP_HELP:"Un grupo abierto es accesible por cualquier miembro de la moneda.",MANAGED_GROUP:"Grupo administrado",MANAGED_GROUP_HELP:"un grupo administrado es gestionado por administradores y moderadores, que pueden aceptar, rechazar o excluir un miembro en su seno.",ENUM:{OPEN:"Grupo abierto",MANAGED:"Grupo administrado"}},VIEW:{POPOVER_SHARE_TITLE:"{{title}}",MENU_TITLE:"Opciones",REMOVE_CONFIRMATION:"Seguro que quieres eliminar este grupo?<br/><br/>Esta operacin es irreversible."},EDIT:{TITLE:"Grupo",TITLE_NEW:"Nuevo grupo",RECORD_TITLE:"Ttulo",RECORD_TITLE_HELP:"Ttulo",RECORD_DESCRIPTION:"Descripcin",RECORD_DESCRIPTION_HELP:"Descripcin"},ERROR:{SEARCH_GROUPS_FAILED:"Fracaso en la bsqueda de grupos",REMOVE_RECORD_FAILED:"Error al eliminar el grupo"},INFO:{RECORD_REMOVED:"Grupo eliminado"}},REGISTRY:{CATEGORY:"Actividad principal",GENERAL_DIVIDER:"Informacines generales",LOCATION_DIVIDER:"Direccin",SOCIAL_NETWORKS_DIVIDER:"Redes sociales y sitio web",TECHNICAL_DIVIDER:"Informacines tcnicas",BTN_SHOW_WOT:"Personas",BTN_SHOW_WOT_HELP:"Buscar personas",BTN_SHOW_PAGES:"Pginas",BTN_SHOW_PAGES_HELP:"Bsqueda de pginas",BTN_NEW:"Creer una pgina",MY_PAGES:"Mis pginas",NO_PAGE:"Sin pgina",SEARCH:{TITLE:"Pginas",SEARCH_HELP:"Qu, Quin : restaurante, Con Marcel, ...",BTN_ADD:"Nuevo",BTN_LAST_RECORDS:"Pginas recientes",BTN_ADVANCED_SEARCH:"bsqueda avanzada",BTN_OPTIONS:"Bsqueda avanzada",TYPE:"Tipo de pgina",LOCATION_HELP:"Ciudad",RESULTS:"Resultados",RESULT_COUNT_LOCATION:"{{count}} Resultado{{count>0?'s':''}}, cerca de {{location}}",RESULT_COUNT:"{{count}} resultado{{count>0?'s':''}}",LAST_RECORDS:"Pginas recientes",LAST_RECORD_COUNT_LOCATION:"{{count}} pgina{{count>0?'s':''}} reciente{{count>0?'s':''}}, cerca de {{location}}",LAST_RECORD_COUNT:"{{count}} pgina{{count>0?'s':''}} reciente{{count>0?'s':''}}",POPOVER_FILTERS:{BTN_ADVANCED_SEARCH:"Opciones avanzadas?"}},VIEW:{TITLE:"Anuario",CATEGORY:"Actividad principal :",LOCATION:"Direccin :",MENU_TITLE:"Opcines",POPOVER_SHARE_TITLE:"{{title}}",REMOVE_CONFIRMATION:"Est usted segura/o querer suprimir esta pgina ?<br/><br/>Esta operacin es ireversible."},TYPE:{TITLE:"Nueva pgina",SELECT_TYPE:"Tipo de pgina :",ENUM:{SHOP:"Comercio local",COMPANY:"Empresa",ASSOCIATION:"Asociacin",INSTITUTION:"Institucin"}},EDIT:{TITLE:"Edicin",TITLE_NEW:"Nueva pgina",RECORD_TYPE:"Tipo de pgina",RECORD_TITLE:"Nombre",RECORD_TITLE_HELP:"Nombre",RECORD_DESCRIPTION:"Descripcin",RECORD_DESCRIPTION_HELP:"Descripcin de la actividad",RECORD_ADDRESS:"Calle",RECORD_ADDRESS_HELP:"Calle, edificio...",RECORD_CITY:"Ciudad",RECORD_CITY_HELP:"Ciudad",RECORD_SOCIAL_NETWORKS:"Redes sociales y sitio web",RECORD_PUBKEY:"Llave pblica",RECORD_PUBKEY_HELP:"Llave pblica de recepcin de los pagos"},WALLET:{REGISTRY_DIVIDER:"Pginas",REGISTRY_HELP:"Las pginas se refieren a actividades que aceptan dinero o lo favorecen: empresas, negocios, asociaciones, instituciones."},ERROR:{LOAD_CATEGORY_FAILED:"Fracaso en la carga de la lista de actividades",LOAD_RECORD_FAILED:"Fracaso durante la carga de la pgina",LOOKUP_RECORDS_FAILED:"Fracaso durante la ejecucin de la bsqueda.",REMOVE_RECORD_FAILED:"Fracaso en la supresin de la pgina",SAVE_RECORD_FAILED:"Fracaso durante el respaldo",RECORD_NOT_EXISTS:"Pgina inexistente",GEO_LOCATION_NOT_FOUND:"Ciudad o cdigo postal no encontrado"},INFO:{RECORD_REMOVED:"Pgina suprimida",RECORD_SAVED:"Pgina guardada"}},PROFILE:{PROFILE_DIVIDER:"Perfil Cesium+",PROFILE_DIVIDER_HELP:"Estos son datos auxiliares, almacenados fuera de la red monetaria.",NO_PROFILE_DEFINED:"Ningn perfil Cesium+",BTN_ADD:"Ingresar mi perfil",BTN_EDIT:"Editar mi perfil",BTN_DELETE:"Eliminar mi perfil",BTN_REORDER:"Reordenar",UID:"Seudnimo",TITLE:"Nombre, Apellido",TITLE_HELP:"Nombre, Apellido",DESCRIPTION:"A propsito de yo",DESCRIPTION_HELP:"A propsito de yo...",SOCIAL_HELP:"http://...",GENERAL_DIVIDER:"Informacines generales",SOCIAL_NETWORKS_DIVIDER:"Redes sociales, sitios web",TECHNICAL_DIVIDER:"Informacines tcnicas",MODAL_AVATAR:{TITLE:"Foto de perfil",SELECT_FILE_HELP:"Por favor, <b>elige un fichero imagen</b>, haciendo un clic sobre el botn por debajo :",BTN_SELECT_FILE:"Eligir una foto",RESIZE_HELP:"<b>Encuadra la imagen</b>, si es necesario. Un clic mantenido sobre la imagen permite desplazarla. Hace un clic sobre la zona abajo a la izquierda para hacer zoom.",RESULT_HELP:"<b>Aqu est el resultado</b> tal como est visible sobre su perfil :"},CONFIRM:{DELETE:"Ests seguro de que quieres <b>eliminar tu perfil Cesium+?</b><br/><br/>Esta operacin es irreversible."
},ERROR:{REMOVE_PROFILE_FAILED:"Error de eliminacin de perfil",LOAD_PROFILE_FAILED:"Fracaso en la carga del perfil usuario.",SAVE_PROFILE_FAILED:"Fracaso durante el respaldo",INVALID_SOCIAL_NETWORK_FORMAT:"Formato no tomado en cuenta : por favor, indica una direccin vlida.<br/><br/>Ejemplos :<ul><li>- Una pgina Facebook (https://www.facebook.com/user)</li><li>- Una pgina web (http://www.misitio.es)</li><li>- Una direccin email (joe@dalton.com)</li></ul>",IMAGE_RESIZE_FAILED:"Fracaso durante el redimensionamiento de la imagen"},INFO:{PROFILE_REMOVED:"Perfil eliminado",PROFILE_SAVED:"Perfil respaldado"},HELP:{WARNING_PUBLIC_DATA:"Las informacines informadas en su perfil <b>estn pblicas</b> : visibles tambin por personas <b>no conectadas</b>.<br/>{{'PROFILE.PROFILE_DIVIDER_HELP'|translate}}"}},LOCATION:{BTN_GEOLOC_ADDRESS:"Actualizar desde la direccin",USE_GEO_POINT:"Aparecer en la tarjeta {{'COMMON.APP_NAME'|translate}} ?",LOADING_LOCATION:"Encontrar la direccin ...",LOCATION_DIVIDER:"Direccin",ADDRESS:"Calle",ADDRESS_HELP:"Calle, complemento de direccin...",CITY:"Ciudad",CITY_HELP:"Ciudad, Pas",DISTANCE:"Distancia mxima alrededor de la ciudad",DISTANCE_UNIT:"km",DISTANCE_OPTION:"{{value}} {{'LOCATION.DISTANCE_UNIT'|translate}}",SEARCH_HELP:"Ciudad, Pas",MODAL:{TITLE:"Bsqueda de direccin",SEARCH_HELP:"Ciudad, Pas",ALTERNATIVE_RESULT_DIVIDER:"Resultados alternativos para <b>{{address}}</b> :",POSITION:"Latitud/Longitud : {{lat}} / {{lon}}"},ERROR:{REQUIRED_FOR_LOCATION:"Campo obligatorio para aparecer en el mapa",INVALID_FOR_LOCATION:"Direccin desconocida",GEO_LOCATION_FAILED:"No se puede recuperar su ubicacin Por favor usa el botn de bsqueda.",ADDRESS_LOCATION_FAILED:"No se puede recuperar la posicin de la direccin."}},SUBSCRIPTION:{SUBSCRIPTION_DIVIDER:"Servicios en lnea",SUBSCRIPTION_DIVIDER_HELP:"Los servicios en lnea ofrecen servicios adicionales opcionales, delegados a un tercero.",BTN_ADD:"Agregar un servicio",BTN_EDIT:"Administrar mis servicios",NO_SUBSCRIPTION:"Ningn servicio definido",SUBSCRIPTION_COUNT:"Servicios / Suscripcin",EDIT:{TITLE:"Servicios en lnea",HELP_TEXT:"Gestione sus suscripciones y otros servicios en lnea aqu",PROVIDER:"Proveedor:"},TYPE:{ENUM:{EMAIL:"Recibir notificaciones por correo electrnico"}},CONFIRM:{DELETE_SUBSCRIPTION:"Deseas <b>eliminar</b> esta suscripcin ?"},ERROR:{LOAD_SUBSCRIPTIONS_FAILED:"Error al cargar servicios en lnea",ADD_SUBSCRIPTION_FAILED:"Error al agregar suscripcin",UPDATE_SUBSCRIPTION_FAILED:"Error durante la actualizacin de la suscripcin",DELETE_SUBSCRIPTION_FAILED:"Error al eliminar la suscripcin"},MODAL_EMAIL:{TITLE:"Notificacin por correo electrnico",HELP:"Rellene este formulario para <b>ser notificado por correo electrnico</b> de los eventos de su cuenta. <br/> Su direccin de correo electrnico se cifrar nicamente para que sea visible para el proveedor de servicios.",EMAIL_LABEL:"Tu correo electrnico :",EMAIL_HELP:"carlos@dominio.com",FREQUENCY_LABEL:"Frecuencia de las notificaciones :",FREQUENCY_DAILY:"Diariamente",FREQUENCY_WEEKLY:"Semanal",PROVIDER:"Proveedor de servicio :"}},ES_SETTINGS:{PLUGIN_NAME:"Cesium+",PLUGIN_NAME_HELP:"Perfiles, notificacines, mensajes privados",ENABLE_TOGGLE:"Activar la extensin ?",ENABLE_MESSAGE_TOGGLE:"Activar los mensajes privados ?",ENABLE_SETTINGS_TOGGLE:"Activar el almacenamiento a distancia de las configuracines ?",PEER:"Direccin del nodo de datos",POPUP_PEER:{TITLE:"Nodo de datos",HELP:"Ingresa la direccin del nodo que quiere utilizar :",PEER_HELP:"servidor.dominio.com:puerto"},NOTIFICATIONS:{DIVIDER:"Notificacines",HELP_TEXT:"Activa los tipos de notificacines que usted desea recibir :",ENABLE_TX_SENT:"Notificar la validacin de los <b>pagos emitidos</b> ?",ENABLE_TX_RECEIVED:"Notificar la validacin de los <b>pagos recibidos</b> ?",ENABLE_CERT_SENT:"Notificar la validacin de las <b>certificacines emitidas</b> ?",ENABLE_CERT_RECEIVED:"Notificar la validacin de las <b>certificacines recibidas</b> ?"},CONFIRM:{ASK_ENABLE_TITLE:"Nuevas funcionalidades",ASK_ENABLE:'Nuevas funcionalidades son disponibles : <ul><li>&nbsp;&nbsp;<b><i class="icon ion-person"></i> Perfiles Cesium+</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-android-notifications"></i> Notificacines</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-email"></i> Mensajes privados</b>.</ul><br/>Fueron <b>desactivadas</b> en sus configuraciones.<br/><br/><b>Quiere usted activarlas</b> ?'}},ES_WALLET:{ERROR:{RECIPIENT_IS_MANDATORY:"Un destinatario es obligatorio para el cifrado."}},EVENT:{NODE_STARTED:"Su nodo ES API <b>{{params[0]}}</b> es comenzado",NODE_BMA_DOWN:"El nodo <b>{{params[0]}}:{{params[1]}}</b> (utilizado por su nodo ES API) <b>no es localizable</b>.",NODE_BMA_UP:"El nodo <b>{{params[0]}}:{{params[1]}}</b> es de nuevo accesible.",MEMBER_JOIN:"Ahora usted est <b>miembro</b> de la moneda <b>{{params[0]}}</b> !",MEMBER_LEAVE:"No est <b>miembro</b> de la moneda <b>{{params[0]}}</b>!",MEMBER_EXCLUDE:"Usted ya no es un miembro de la moneda <b>{{params[0]}}</b>, la falta de no renovacin o la falta de certificaciones.",MEMBER_REVOKE:"La revocacin de su cuenta se ha hecho. Puede que no sea un miembro de la cuenta en moneda <b>{{params[0]}}</b>.",MEMBER_ACTIVE:"Su renovacin de adhesin a la moneda <b>{{params[0]}}</b> fue <b>tomado en cuenta</b>.",TX_SENT:"Su <b>pago</b> a <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> fue efectuado.",TX_SENT_MULTI:"Su <b>pago</b> a <b>{{params[1]}}</b> fue efectuado.",TX_RECEIVED:"Ha <b>recibido un pago</b> de <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",TX_RECEIVED_MULTI:"Ha <b>recibido un pago</b> de <b>{{params[1]}}</b>.",CERT_SENT:"Su <b>certificacin</b> a <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> fue efectuada.",CERT_RECEIVED:"Ha <b>recibido una certificacin</b> de <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",REGISTRY:{NEW_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> ha comentado su referencia : <b>{{params[2]}}</b>",UPDATE_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> ha modificado su comentario sobre su referencia : <b>{{params[2]}}</b>",NEW_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> ha contestado a su comentario sobre el referencia : <b>{{params[2]}}</b>",UPDATE_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> ha modificado la repuesta a su comentario sobre el referencia : <b>{{params[2]}}</b>"}},CONFIRM:{ES_USE_FALLBACK_NODE:"Nodo de datos <b> {{old}} </ b> direccin inalcanzable o no vlida.<br/><br/>Desea utilizar temporalmente el nodo de datos <b>{{new}}</b>?"},ERROR:{ES_CONNECTION_ERROR:'Nodo de datos <b>{{server}}</b> direccin inalcanzable o no vlida.<br/><br/>Cesium continuar funcionando, <b>sin la extensin Cesium+</b> (perfiles de usuario, mensajes privados), mapas y grficos).<br/><br/>Verifique su conexin a Internet, o cambie el nodo de datos en <a class="positive" ng-click="doQuickFix(\'settings\')"> configuracin de extensin </a>.',ES_MAX_UPLOAD_BODY_SIZE:"El volumen de datos a enviar excede el lmite establecido por el servidor.<br/><br/>Por favor, intntelo de nuevo despus, por ejemplo, borrando fotos."}}),e.translations("fr-FR",{COMMON:{CATEGORY:"Catgorie",CATEGORIES:"Catgories",CATEGORY_SEARCH_HELP:"Recherche",LAST_MODIFICATION_DATE:"Mise  jour le",SUBMIT_BY:"Soumis par",BTN_PUBLISH:"Publier",BTN_PICTURE_DELETE:"Supprimer",BTN_PICTURE_FAVORISE:"Principale",BTN_PICTURE_ROTATE:"Tourner",BTN_ADD_PICTURE:"Ajouter une photo",NOTIFICATIONS:{TITLE:"Notifications",MARK_ALL_AS_READ:"Tout marquer comme lu",NO_RESULT:"Aucune notification",SHOW_ALL:"Voir tout",LOAD_NOTIFICATIONS_FAILED:"Erreur de chargement des notifications"}},MENU:{REGISTRY:"Pages",USER_PROFILE:"Mon profil",MESSAGES:"Messages",NOTIFICATIONS:"Notifications",INVITATIONS:"Invitations"},ACCOUNT:{NEW:{ORGANIZATION_ACCOUNT:"Compte pour une organisation",ORGANIZATION_ACCOUNT_HELP:"Si vous reprsentez une entreprise, une association, etc.<br/>Aucun dividende universel ne sera cr par ce compte."},EVENT:{MEMBER_WITHOUT_PROFILE:'Pour obtenir vos certifications plus rapidement, completez <a ui-sref="app.user_edit_profile">votre profil utilisateur</a>. Les membres accorderont plus facilement leur confiance  une identit vrifiable.'},ERROR:{WS_CONNECTION_FAILED:"Cesium ne peut pas recevoir les notifications,  cause d'une erreur technique (connexion au noeud de donnes Cesium+).<br/><br/>Si le problme persiste, veuillez <b>choisir un autre noeud de donnes</b> dans les paramtres Cesium+."}},WOT:{BTN_SUGGEST_CERTIFICATIONS_DOTS:"Suggrer des identits  certifier...",BTN_ASK_CERTIFICATIONS_DOTS:"Demander  des membres de me certifier...",BTN_ASK_CERTIFICATION:"Demander une certification",SUGGEST_CERTIFICATIONS_MODAL:{TITLE:"Suggrer des certifications",HELP:"Slectionner vos suggestions"},ASK_CERTIFICATIONS_MODAL:{TITLE:"Demander des certifications",HELP:"Slectionner les destinataires"},SEARCH:{DIVIDER_PROFILE:"Comptes",DIVIDER_PAGE:"Pages",DIVIDER_GROUP:"Groupes"},CONFIRM:{SUGGEST_CERTIFICATIONS:"Etes-vous sr de vouloir <b>envoyer ces suggestions de certification</b> ?",ASK_CERTIFICATION:"Etes-vous sr de vouloir <b>envoyer une demande de certification</b> ?",ASK_CERTIFICATIONS:"Etes-vous sr de vouloir <b>envoyer une demande de certification</b>  ces personnes ?"}},INVITATION:{TITLE:"Invitations",NO_RESULT:"Aucune invitation en attente",BTN_DELETE_ALL:"Supprimer toutes les invitations",BTN_DELETE:"Supprimer l'invitation",BTN_NEW_INVITATION:"Nouvelle invitation",ASK_CERTIFICATION:'<a href="#/app/wot/{{pubkey}}/{{::uid}}">{{::name||uid}}</a> demande votre certification',SUGGESTION_CERTIFICATION:'<a href="#/app/wot/{{::pubkey}}/{{::uid}}">{{::name||uid}}</a> vous est suggr pour certification',SUGGESTED_BY:'Suggestion envoye par <a class="positive" href="#/app/wot/{{::issuer.pubkey}}/{{::issuer.uid}}">{{::issuer.name||issuer.uid}}</a>',NOTIFICATIONS:{TITLE:"Invitations"},LIST:{TITLE:"Invitations"},NEW:{TITLE:"Nouvelle invitation",RECIPIENTS:"A",RECIPIENTS_HELP:"Destinataires de l'invitation",RECIPIENTS_MODAL_TITLE:"Destinataires",RECIPIENTS_MODAL_HELP:"Veuillez choisir les destinataires :",SUGGESTION_IDENTITIES:"Suggestions de certification",SUGGESTION_IDENTITIES_HELP:"Certifications  suggrer",SUGGESTION_IDENTITIES_MODAL_TITLE:"Suggestions",SUGGESTION_IDENTITIES_MODAL_HELP:"Veuillez choisir vos suggestions :"},CONFIRM:{DELETE_ALL_CONFIRMATION:"La suppression des invitations est une <b>opration irrversible</b>.<br/><br/><b>Etes-vous sr</b> de vouloir continuer ?",SEND_INVITATIONS_TO_CERTIFY:"Etes-vous sr de vouloir <b>envoyer cette invitation  certfier</b> ?"},INFO:{INVITATION_SENT:"Invitation envoye"},ERROR:{LOAD_INVITATIONS_FAILED:"Echec du chargement des invitations",REMOVE_INVITATION_FAILED:"Erreur lors de la suppression de l'invitation",REMOVE_ALL_INVITATIONS_FAILED:"Erreur lors de la suppression des invitations",SEND_INVITATION_FAILED:"Erreur lors de l'envoi de l'invitation",BAD_INVITATION_FORMAT:'<span class="assertive"><i class="ion-close-circled"></i> Invitation illisible (format inconnu)</span> - envoye par <a ui-sref="app.wot_identity({pubkey: \'{{::pubkey}}\', uid: \'{{::uid}}\' })">{{::name||uid}}</a>'}},COMMENTS:{DIVIDER:"Commentaires",SHOW_MORE_COMMENTS:"Afficher les commentaires prcdents",COMMENT_HELP:"Votre commentaire, question, etc.",COMMENT_HELP_REPLY_TO:"Votre rponse...",BTN_SEND:"Envoyer",POPOVER_SHARE_TITLE:"Message #{{number}}",REPLY:"Rpondre",REPLY_TO:"Rponse  :",REPLY_TO_LINK:"En rponse  ",REPLY_TO_DELETED_COMMENT:"En rponse  un commentaire supprim",REPLY_COUNT:"{{replyCount}} rponses",DELETED_COMMENT:"Commentaire supprim",ERROR:{FAILED_SAVE_COMMENT:"Erreur lors de la sauvegarde du commentaire",FAILED_REMOVE_COMMENT:"Erreur lors de la suppression du commentaire"}},MESSAGE:{REPLY_TITLE_PREFIX:"Rep: ",FORWARD_TITLE_PREFIX:"Tr: ",BTN_REPLY:"Rpondre",BTN_COMPOSE:"Nouveau message",BTN_WRITE:"Ecrire",NO_MESSAGE_INBOX:"Aucun message reu",NO_MESSAGE_OUTBOX:"Aucun message envoy",NOTIFICATIONS:{TITLE:"Messages",MESSAGE_RECEIVED:"Vous avez <b>reu un message</b><br/>de"},LIST:{INBOX:"Boite de rception",OUTBOX:"Messages envoys",LAST_INBOX:"Nouveaux messages",LAST_OUTBOX:"Messages envoys",BTN_LAST_MESSAGES:"Messages rcents",TITLE:"Messages",SEARCH_HELP:"Recherche dans les messages",POPOVER_ACTIONS:{TITLE:"Options",DELETE_ALL:"Supprimer tous les messages"}},COMPOSE:{TITLE:"Nouveau message",TITLE_REPLY:"Rpondre",SUB_TITLE:"Nouveau message",TO:"A",OBJECT:"Objet",OBJECT_HELP:"Objet",ENCRYPTED_HELP:"Veuillez noter que ce message sera chiffr avant envoi, afin que seul le destinataire puisse le lire, et qu'il soit assur que vous soyez bien son auteur.",MESSAGE:"Message",MESSAGE_HELP:"Contenu du message",CONTENT_CONFIRMATION:"Le contenu du message est vide.<br/><br/>Voulez-vous nanmoins envoyer le message ?"},VIEW:{TITLE:"Message",SENDER:"Envoy par",RECIPIENT:"Envoy ",NO_CONTENT:"Message vide",DELETE:"Supprimer le message"},CONFIRM:{REMOVE:"tes-vous sr de vouloir <b>supprimer ce message</b> ?<br/><br/>Cette opration est irrversible.",REMOVE_ALL:"tes-vous sr de vouloir <b>supprimer tous les messages</b> ?<br/><br/>Cette opration est irrversible.",MARK_ALL_AS_READ:"tes-vous sr de vouloir <b>marquer tous les messages comme lu</b> ?",USER_HAS_NO_PROFILE:"Cette identit n'a aucun profil Cesium+. Il se peut qu'elle n'utilise pas l'extension Cesium+, et <b>ne consultera donc pas votre message</b>.<br/><br/>tes-vous sr de vouloir <b>continuer</b> malgr tout ?"},INFO:{MESSAGE_REMOVED:"Message supprim",All_MESSAGE_REMOVED:"Tous les messages ont t supprim",MESSAGE_SENT:"Message envoy"},ERROR:{SEND_MSG_FAILED:"Erreur lors de l'envoi du message.",LOAD_MESSAGES_FAILED:"Erreur lors de la rcupration des messages.",LOAD_MESSAGE_FAILED:"Erreur lors de la rcupration du message.",MESSAGE_NOT_READABLE:"Lecture du message impossible.",USER_NOT_RECIPIENT:"Vous n'tes pas le destinataire de ce message : dchiffrement impossible.",NOT_AUTHENTICATED_MESSAGE:"L'authenticit du message est douteuse ou son contenu est corrompu.",REMOVE_MESSAGE_FAILED:"Erreur de suppression du message",MESSAGE_CONTENT_TOO_LONG:"Valeur trop longue ({{maxLength}} caractres max).",MARK_AS_READ_FAILED:"Impossible de marquer le message comme 'lu'.",LOAD_NOTIFICATIONS_FAILED:"Erreur lors de la rcupration des notifications de messages.",REMOVE_All_MESSAGES_FAILED:"Erreur lors de la suppression de tous les messages.",MARK_ALL_AS_READ_FAILED:"Erreur lors du marquage des message comme lu.",RECIPIENT_IS_MANDATORY:"Le destinataire est obligatoire."}},BLOCKCHAIN:{LOOKUP:{SEARCH_HELP:"Numro de bloc, hash, cl publique, etc.",POPOVER_FILTER_TITLE:"Filtres",HEADER_MEDIAN_TIME:"Date / Heure",HEADER_BLOCK:"Bloc #",HEADER_ISSUER:"Noeud metteur",BTN_LAST:"Derniers blocs",DISPLAY_QUERY:"Afficher la requte",HIDE_QUERY:"Masquer la requte",TX_SEARCH_FILTER:{MEMBER_FLOWS:'<b class="ion-person"></b> Entres/sorties de membres',EXISTING_TRANSACTION:'<b class="ion-card"></b> Avec transactions',PERIOD:'<b class="ion-clock"></b> Entre <b class="gray">{{params[1]|formatDateShort}}</b> ({{params[1]|formatTime}}) et <b class="gray">{{params[2]|formatDateShort}}</b> ({{params[2]|formatTime}})',ISSUER:'<b class="ion-android-desktop"></b> Calcul par <b class="ion-key"></b> {{params[1]|formatPubkey}}',TX_PUBKEY:'<b class="ion-card"></b> Transactions concernant <b class="ion-key"></b> {{params[1]|formatPubkey}}'}},ERROR:{SEARCH_BLOCKS_FAILED:"Erreur de la recherche des blocs."}},GROUP:{GENERAL_DIVIDER:"Informations gnrales",LOCATION_DIVIDER:"Adresse",SOCIAL_NETWORKS_DIVIDER:"Rseaux sociaux et site web",TECHNICAL_DIVIDER:"Informations techniques",CREATED_TIME:"Cre {{creationTime|formatFromNow}}",NOTIFICATIONS:{TITLE:"Invitations"},LOOKUP:{TITLE:"Groupes",SEARCH_HELP:"Nom de groupe, mots, lieu, etc.",LAST_RESULTS_LIST:"Nouveaux groupes :",OPEN_RESULTS_LIST:"Groupes ouverts :",MANAGED_RESULTS_LIST:"Groupes ferms :",BTN_LAST:"Nouveaux groupes",BTN_NEW:"J'ajoute un groupe"},TYPE:{TITLE:"Nouveau groupe",SELECT_TYPE:"Type de groupe :",OPEN_GROUP:"Groupe ouvert",OPEN_GROUP_HELP:"Un groupe ouvert est accessible par n'importe quel membre de la monnaie.",MANAGED_GROUP:"Groupe administr",MANAGED_GROUP_HELP:"un groupe administr est grer par des administrateurs et des modrateurs, qui peuvent accepter, refuser ou exclure un membre en son sein.",ENUM:{OPEN:"Groupe ouvert",MANAGED:"Groupe administr"}},VIEW:{POPOVER_SHARE_TITLE:"{{title}}",MENU_TITLE:"Options",REMOVE_CONFIRMATION:"tes-vous sr de vouloir supprimer ce groupe ?<br/><br/>Cette opration est irrversible."},EDIT:{TITLE:"Groupe",TITLE_NEW:"Nouveau groupe",RECORD_TITLE:"Titre",RECORD_TITLE_HELP:"Titre",RECORD_DESCRIPTION:"Description",RECORD_DESCRIPTION_HELP:"Description"},ERROR:{SEARCH_GROUPS_FAILED:"Echec de la recherche de groupes",REMOVE_RECORD_FAILED:"Erreur de la suppression du groupe"},INFO:{RECORD_REMOVED:"Groupe supprim"}},REGISTRY:{CATEGORY:"Activit principale",GENERAL_DIVIDER:"Informations gnrales",LOCATION_DIVIDER:"Adresse",SOCIAL_NETWORKS_DIVIDER:"Rseaux sociaux et site web",TECHNICAL_DIVIDER:"Informations techniques",BTN_SHOW_WOT:"Personnes",BTN_SHOW_WOT_HELP:"Rechercher des personnes",BTN_SHOW_PAGES:"Pages",BTN_SHOW_PAGES_HELP:"Rechercher des pages",BTN_NEW:"Crer une page",MY_PAGES:"Mes pages",NO_PAGE:"Aucune page",SEARCH:{TITLE:"Pages",SEARCH_HELP:"Quoi, Qui : restaurant, Chez Marcel, ...",BTN_ADD:"Nouveau",BTN_LAST_RECORDS:"Pages rcentes",BTN_ADVANCED_SEARCH:"Recherche avance",BTN_OPTIONS:"Recherche avance",TYPE:"Type de page",LOCATION_HELP:"O : Ville, Code postal",RESULTS:"Rsultats",RESULT_COUNT_LOCATION:"{{count}} rsultat{{count>0?'s':''}}, prs de {{location}}",RESULT_COUNT:"{{count}} rsultat{{count>0?'s':''}}",LAST_RECORDS:"Pages rcentes",LAST_RECORD_COUNT_LOCATION:"{{count}} page{{count>0?'s':''}} rcente{{count>0?'s':''}}, prs de {{location}}",LAST_RECORD_COUNT:"{{count}} page{{count>0?'s':''}} rcente{{count>0?'s':''}}",POPOVER_FILTERS:{BTN_ADVANCED_SEARCH:"Options avances ?"}},VIEW:{TITLE:"Annuaire",CATEGORY:"Activit principale :",LOCATION:"Adresse :",MENU_TITLE:"Options",POPOVER_SHARE_TITLE:"{{title}}",REMOVE_CONFIRMATION:"tes-vous sr de vouloir supprimer cette page ?<br/><br/>Cette opration est irrversible."},TYPE:{TITLE:"Types",SELECT_TYPE:"Type de page :",ENUM:{SHOP:"Commerce local",COMPANY:"Entreprise",ASSOCIATION:"Association",INSTITUTION:"Institution"}},EDIT:{TITLE:"Edition",TITLE_NEW:"Nouvelle page",RECORD_TYPE:"Type de page",RECORD_TITLE:"Nom",RECORD_TITLE_HELP:"Nom",RECORD_DESCRIPTION:"Description",RECORD_DESCRIPTION_HELP:"Description de l'activit",RECORD_ADDRESS:"Rue",RECORD_ADDRESS_HELP:"Rue, batiment...",RECORD_CITY:"Ville",RECORD_CITY_HELP:"Ville",RECORD_SOCIAL_NETWORKS:"Rseaux sociaux et site web",RECORD_PUBKEY:"Cl publique",RECORD_PUBKEY_HELP:"Cl publique de rception des paiements"},WALLET:{REGISTRY_DIVIDER:"Pages",REGISTRY_HELP:"Les pages rfrencent des activits acceptant la monnaie ou la favorisant : commerces, entreprises, associations, institutions."},ERROR:{LOAD_CATEGORY_FAILED:"Erreur de chargement de la liste des activits",LOAD_RECORD_FAILED:"Erreur lors du chargement de la page",LOOKUP_RECORDS_FAILED:"Erreur lors de l'execution de la recherche.",REMOVE_RECORD_FAILED:"Erreur de la suppression de la page",SAVE_RECORD_FAILED:"Erreur lors de la sauvegarde",RECORD_NOT_EXISTS:"Page inexistante",GEO_LOCATION_NOT_FOUND:"Ville ou code postal non trouv"},INFO:{RECORD_REMOVED:"Page supprime",RECORD_SAVED:"Page sauvegarde"}},PROFILE:{PROFILE_DIVIDER:"Profil Cesium+",PROFILE_DIVIDER_HELP:"Il s'agit de donnes annexes, stockes en dehors du rseau de la monnaie.",NO_PROFILE_DEFINED:"Aucun profil saisi",BTN_ADD:"Saisir mon profil",BTN_EDIT:"Editer mon profil",BTN_DELETE:"Supprimer mon profil",BTN_REORDER:"Rordonner",UID:"Pseudonyme",TITLE:"Nom, Prnom",TITLE_HELP:"Nom, Prnom",DESCRIPTION:"A propos de moi",DESCRIPTION_HELP:"A propos de moi...",SOCIAL_HELP:"http://...",GENERAL_DIVIDER:"Informations gnrales",SOCIAL_NETWORKS_DIVIDER:"Rseaux sociaux, sites web",TECHNICAL_DIVIDER:"Informations techniques",MODAL_AVATAR:{TITLE:"Photo de profil",SELECT_FILE_HELP:"Veuillez <b>choisir un fichier image</b>, en cliquant sur le bouton ci-dessous :",BTN_SELECT_FILE:"Choisir une photo",RESIZE_HELP:"<b>Recadrez l'image</b>, si besoin. Un clic maintenu sur l'image permet de la dplacer. Cliquez sur la zone en bas  gauche pour zoomer.",RESULT_HELP:"<b>Voici le rsultat</b> tel que visible sur votre profil :"},CONFIRM:{DELETE:"Etes-vous sur de vouloir <b>supprimer votre profif Cesium+ ?</b><br/><br/>Cette opration est irrversible."},ERROR:{REMOVE_PROFILE_FAILED:"Erreur de suppression du profil",LOAD_PROFILE_FAILED:"Erreur de chargement du profil utilisateur.",SAVE_PROFILE_FAILED:"Erreur lors de la sauvegarde",INVALID_SOCIAL_NETWORK_FORMAT:"Format non pris en compte : veuillez indiquer une adresse valide.<br/><br/>Exemples :<ul><li>- Une page Facebook (https://www.facebook.com/user)</li><li>- Une page web (http://www.monsite.fr)</li><li>- Une adresse email (joe@dalton.com)</li></ul>",IMAGE_RESIZE_FAILED:"Erreur lors du redimensionnement de l'image"},INFO:{PROFILE_REMOVED:"Profil supprim",PROFILE_SAVED:"Profil sauvegard"},HELP:{WARNING_PUBLIC_DATA:"Les informations renseignes dans votre profil <b>sont publiques</b> : visibles y compris par des personnes <b>non connectes</b>.<br/>{{'PROFILE.PROFILE_DIVIDER_HELP'|translate}}"}},LOCATION:{BTN_GEOLOC_ADDRESS:"Trouver mon adresse sur la carte",USE_GEO_POINT:"Apparatre sur les cartes {{'COMMON.APP_NAME'|translate}} ?",LOADING_LOCATION:"Recherche de l'adresse...",LOCATION_DIVIDER:"Adresse",ADDRESS:"Rue",ADDRESS_HELP:"Rue, complment d'adresse...",CITY:"Ville",CITY_HELP:"Ville, Pays",DISTANCE:"Distance maximale autour de la ville",DISTANCE_UNIT:"km",DISTANCE_OPTION:"{{value}} {{'LOCATION.DISTANCE_UNIT'|translate}}",SEARCH_HELP:"Ville, Code postal",MODAL:{TITLE:"Recherche de l'adresse",SEARCH_HELP:"Ville, Code postal, Pays",ALTERNATIVE_RESULT_DIVIDER:"Rsultats alternatifs pour <b>{{address}}</b> :",POSITION:"Lat/Lon : {{lat}}/{{lon}}"},ERROR:{REQUIRED_FOR_LOCATION:"Champ obligatoire pour apparatre sur la carte",INVALID_FOR_LOCATION:"Adresse inconnue",GEO_LOCATION_FAILED:"Impossible de rcuprer votre position. Veuillez utiliser le bouton de recherche.",ADDRESS_LOCATION_FAILED:"Impossible de rcuprer la position  partir de l'adresse"}},SUBSCRIPTION:{SUBSCRIPTION_DIVIDER:"Services en ligne",SUBSCRIPTION_DIVIDER_HELP:"Les services en ligne offrent des services supplmentaires optionnels, dlgus  un tiers.",BTN_ADD:"Ajouter un service",BTN_EDIT:"Grer mes services",NO_SUBSCRIPTION:"Aucun service utilis",SUBSCRIPTION_COUNT:"Services / Abonnements",EDIT:{TITLE:"Services en lignes",HELP_TEXT:"Grer ici vos abonnements et autres services en ligne",PROVIDER:"Prestataire :"},TYPE:{ENUM:{EMAIL:"Recevoir les notifications par email"}},CONFIRM:{DELETE_SUBSCRIPTION:"Etes-vous sr de vouloir <b>supprimer cet abonnement</b> ?"},ERROR:{LOAD_SUBSCRIPTIONS_FAILED:"Erreur lors du chargement des services en ligne",ADD_SUBSCRIPTION_FAILED:"Erreur de l'envoi de l'abonnement",UPDATE_SUBSCRIPTION_FAILED:"Erreur de la mise  jour de l'abonnement",DELETE_SUBSCRIPTION_FAILED:"Erreur lors de la suppression de l'abonnement"},MODAL_EMAIL:{TITLE:"Notification par email",HELP:"Remplissez ce formulaire pour <b>tre notifi par email</b> des vnements de votre compte.<br/>Votre adresse email sera chiffre pour n'tre visible que par le prestataire de service.",EMAIL_LABEL:"Votre email :",EMAIL_HELP:"jean.dupond@domaine.com",FREQUENCY_LABEL:"Frquence des notifications :",FREQUENCY_DAILY:"Journalier",FREQUENCY_WEEKLY:"Hebdomadaire",PROVIDER:"Prestataire du service :"}},DOCUMENT:{HASH:"Hash: ",LOOKUP:{TITLE:"Recherche de documents",BTN_ACTIONS:"Actions",SEARCH_HELP:"issuer:AAA*, time:1508406169",LAST_DOCUMENTS:"Derniers documents",SHOW_QUERY:"Voir la requte",HIDE_QUERY:"Masquer la requte",HEADER_TIME:"Date/Heure",HEADER_ISSUER:"Emetteur",HEADER_RECIPIENT:"Destinataire",READ:"Lu",BTN_REMOVE:"Supprimer ce document",POPOVER_ACTIONS:{TITLE:"Actions",REMOVE_ALL:"Supprimer ces documents..."}},INFO:{REMOVED:"Document supprim"},CONFIRM:{REMOVE:"Etes-vous sr de vouloir <b>supprimer ce document</b> ?",REMOVE_ALL:"Etes-vous sr de vouloir <b>supprimer ces documents</b> ?"},ERROR:{LOAD_DOCUMENTS_FAILED:"Erreur lors de la recherche de documents",REMOVE_FAILED:"Erreur lors de la suppression du document",REMOVE_ALL_FAILED:"Erreur lors de la suppression des documents"}},ES_SETTINGS:{PLUGIN_NAME:"Cesium+",PLUGIN_NAME_HELP:"Profils, notifications, messages privs",ENABLE_TOGGLE:"Activer l'extension ?",ENABLE_MESSAGE_TOGGLE:"Activer les messages privs ?",ENABLE_SETTINGS_TOGGLE:"Activer le stockage distant des paramtres ?",PEER:"Addresse du nud de donnes",POPUP_PEER:{TITLE:"Nud de donnes",HELP:"Saisissez l'adresse du nud que vous voulez utiliser :",PEER_HELP:"serveur.domaine.com:port"},NOTIFICATIONS:{DIVIDER:"Notifications",HELP_TEXT:"Activez les types de notifications que vous souhaitez recevoir :",ENABLE_TX_SENT:"Notifier les <b>paiement mis</b> ?",ENABLE_TX_RECEIVED:"Notifier les <b>paiements reus</b> ?",ENABLE_CERT_SENT:"Notifier les <b>certifications mises</b> ?",ENABLE_CERT_RECEIVED:"Notifier les <b>certifications reues</b> ?"},CONFIRM:{ASK_ENABLE_TITLE:"Fonctionnalits optionnelles",ASK_ENABLE:'L\'extension Cesium+ est <b>dsactive</b> dans vos paramtres, rendant inactives les fonctionnalits : <ul><li>&nbsp;&nbsp;<b><i class="icon ion-person"></i> Profils Cesium+</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-android-notifications"></i> Notifications</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-email"></i> Messages privs</b>.<li>&nbsp;&nbsp;<b><i class="icon ion-location"></i> Cartes, etc.</b>.</ul><br/><b>Souhaitez-vous la r-activer</b> l\'extension ?'}},ES_WALLET:{ERROR:{RECIPIENT_IS_MANDATORY:"Un destinataire est obligatoire pour le chiffrement."}},EVENT:{NODE_STARTED:"Votre noeud ES API <b>{{params[0]}}</b> est dmarr",NODE_BMA_DOWN:"Le noeud <b>{{params[0]}}:{{params[1]}}</b> (utilis par votre noeud ES API) est <b>injoignable</b>.",NODE_BMA_UP:"Le noeud <b>{{params[0]}}:{{params[1]}}</b> est  nouveau accessible.",MEMBER_JOIN:"Vous tes maintenant <b>membre</b> de la monnaie <b>{{params[0]}}</b> !",MEMBER_LEAVE:"Vous n'tes <b>plus membre</b> de la monnaie <b>{{params[0]}}</b>!",MEMBER_EXCLUDE:"Vous n'tes <b>plus membre</b> de la monnaie <b>{{params[0]}}</b>, faute de non renouvellement ou par manque de certifications.",MEMBER_REVOKE:"La rvocation de votre compte a t effectue. Il ne pourra plus tre un compte membre de la monnaie <b>{{params[0]}}</b>.",MEMBER_ACTIVE:"Votre renouvellement d'adhsion  la monnaie <b>{{params[0]}}</b> a t <b>pris en compte</b>.",TX_SENT:"Votre <b>paiement</b>  <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a t effectu.",TX_SENT_MULTI:"Votre <b>paiement</b>  <b>{{params[1]}}</b> a t effectu.",TX_RECEIVED:"Vous avez <b>reu un paiement</b> de <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",TX_RECEIVED_MULTI:"Vous avez <b>reu un paiement</b> de <b>{{params[1]}}</b>.",CERT_SENT:"Votre <b>certification</b>  <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a t effectue.",CERT_RECEIVED:"Vous avez <b>reu une certification</b> de <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",REGISTRY:{NEW_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a comment votre rfrencement : <b>{{params[2]}}</b>",UPDATE_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a modifi son commentaire sur votre rfrencement : <b>{{params[2]}}</b>",NEW_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a rpondu  votre commentaire sur le rfrencement : <b>{{params[2]}}</b>",UPDATE_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> a modifi sa rponse  votre commentaire sur le rfrencement : <b>{{params[2]}}</b>"}},CONFIRM:{ES_USE_FALLBACK_NODE:"Nud de donnes <b>{{old}}</b> injoignable ou adresse invalide.<br/><br/>Voulez-vous temporairement utiliser le nud de donnes <b>{{new}}</b> ?"},ERROR:{ES_CONNECTION_ERROR:"Nud de donnes <b>{{server}}</b> injoignable ou adresse invalide.<br/><br/>Cesium va continuer  fonctionner, <b>sans l'extension Cesium+</b> (profils utilisateur, messages privs, cartes et graphiques)<br/><br/>Vrifiez votre connection Internet, ou changer de nud de donnes dans les <a class=\"positive\" ng-click=\"doQuickFix('settings')\">paramtres de l'extension</a>.",ES_MAX_UPLOAD_BODY_SIZE:"Le volume des donnes  envoyer dpasse la limite fixe par le serveur.<br/>Veuillez r-essayer aprs avoir, par exemple, supprimer des photos."}}),e.translations("nl-NL",{COMMON:{CATEGORY:"Categorie",CATEGORIES:"Categorien",CATEGORY_SEARCH_HELP:"Zoeken",LAST_MODIFICATION_DATE:"Vernieuws op ",SUBMIT_BY:"Ingediend door",BTN_PUBLISH:"Publiceren",BTN_PICTURE_DELETE:"Wissen",BTN_PICTURE_FAVORISE:"Default",BTN_ADD_PICTURE:"Afbeelding toevoegen",NOTIFICATIONS:{TITLE:"Notificaties",MARK_ALL_AS_READ:"Markeer alles als gelezen",NO_RESULT:"Geen berichten",SHOW_ALL:"Toon alles",LOAD_NOTIFICATIONS_FAILED:"Kan berichten niet laden"}},MENU:{REGISTRY:"Ondernemingen",USER_PROFILE:"Mijn profiel",MESSAGES:"Berichten"
},ACCOUNT:{NEW:{ORGANIZATION_ACCOUNT:"Ondernemingsrekening",ORGANIZATION_ACCOUNT_HELP:"Als je een onderneming, vereniging etc. vertegenwoordigd.<br/>Deze rekening zal geen dividend creren."},EVENT:{MEMBER_WITHOUT_PROFILE:'Vul <a ui-sref="app.user_edit_profile"je gebruikersprofiel</a> in om sneller een certificering te verkrijgen. Leden zullen een verfifieerbare identiteit eerder vertrouwen.'}},COMMENTS:{DIVIDER:"Commentaren",SHOW_MORE_COMMENTS:"Toon eerder commentaren",COMMENT_HELP:"Jouw commentaar, vraag...",COMMENT_HELP_REPLY_TO:"Jouw antwoord...",BTN_SEND:"Verzenden",POPOVER_SHARE_TITLE:"Bericht #{{number}}",REPLY:"Antwoord",REPLY_TO:"Antwoorden op:",REPLY_TO_LINK:"In antwoord op ",REPLY_TO_DELETED_COMMENT:"In antwoord op een gewist bericht",REPLY_COUNT:"{{replyCount}} antwoorden",DELETED_COMMENT:"Bericht gewist"},MESSAGE:{REPLY_TITLE_PREFIX:"Re: ",FORWARD_TITLE_PREFIX:"Fw: ",BTN_REPLY:"Antwoord",BTN_COMPOSE:"Nieuw bericht",BTN_WRITE:"Schrijven",NO_MESSAGE_INBOX:"Geen bericht ontvangen",NO_MESSAGE_OUTBOX:"Geen bericht verzonden",NOTIFICATIONS:{TITLE:"Berichten",MESSAGE_RECEIVED:"Je hebt een <b>bericht ontvangen</b><br/>van"},LIST:{INBOX:"Inbox",OUTBOX:"Verzonden",TITLE:"Priv",POPOVER_ACTIONS:{TITLE:"Opties",DELETE_ALL:"Alle berichten wissen"}},COMPOSE:{TITLE:"Nieuw bericht",TITLE_REPLY:"Antwoord",SUB_TITLE:"Nieuw bericht",TO:"Aan",OBJECT:"Onderwerp",OBJECT_HELP:"Onderwerp",ENCRYPTED_HELP:"Please note this message will by encrypt before sending zodat alleen de ontvanger het kan lezen en zeker kan zijn dat jij de auteur bent.",MESSAGE:"Bericht",MESSAGE_HELP:"Berichtinhoud",CONTENT_CONFIRMATION:"Geen berichtinhoud.<br/><br/>Weet je zeker dat je dit bericht wil verzenden?"},VIEW:{TITLE:"Bericht",SENDER:"Verzonden door",RECIPIENT:"Verzonden aan",NO_CONTENT:"Leeg bericht"},CONFIRM:{REMOVE:"Weet je zeker dat je <b>dit bericht wil wissen</b>?<br/><br/>Dit kan niet ongedaan gemaakt worden.",REMOVE_ALL:"Weet je zeker dat je <b>alle berichten wil wissen</b>?<br/><br/>Dit kan niet ongedaan gemaakt worden.",MARK_ALL_AS_READ:"Weet je zeker dat je <b>alle berichten als gelezen wil markeren</b>?"},INFO:{MESSAGE_REMOVED:"Bericht succesvol gewist",All_MESSAGE_REMOVED:"Berichten succesvol gewist",MESSAGE_SENT:"Bericht verzonden"},ERROR:{SEND_MSG_FAILED:"Fout tijdens verzending.",LOAD_MESSAGES_FAILED:"Kan berichten niet laden.",LOAD_MESSAGE_FAILED:"Kan bericht niet laden.",MESSAGE_NOT_READABLE:"Kan bericht niet lezen.",USER_NOT_RECIPIENT:"Je bent niet de geadresseerde van dit bericht: het kan niet gelezen worden.",NOT_AUTHENTICATED_MESSAGE:"De authenticiteit van het bericht is onduidelijk of de inhoud is gecorrumpeerd.",REMOVE_MESSAGE_FAILED:"Kan bericht niet wissen.",MESSAGE_CONTENT_TOO_LONG:"Waarde te land (max {{maxLength}} characters).",MARK_AS_READ_FAILED:"Kan bericht niet als gelezen markeren.",LOAD_NOTIFICATIONS_FAILED:"Kan niet alle berichtnotificaties laden.",REMOVE_All_MESSAGES_FAILED:"Kan niet alle berichten wissen.",MARK_ALL_AS_READ_FAILED:"Kan berichten niet als gelezen markeren."}},REGISTRY:{CATEGORY:"Hoofdactiviteit",GENERAL_DIVIDER:"Basisinformatie",LOCATION_DIVIDER:"Adres",SOCIAL_NETWORKS_DIVIDER:"Sociale media en website",TECHNICAL_DIVIDER:"Technische informatie",BTN_NEW:"Toevoegen",SEARCH:{TITLE:"Bedrijfsregister",TITLE_SMALL_DEVICE:"Bedrijfsregister",SEARCH_HELP:"Wie, Wat: kapper, Lili's restaurant, ...",BTN_ADD:"Nieuw",BTN_OPTIONS:"Geavanceerd zoeken",TYPE:"Soort organisatie",LOCATION:"Locatie",LOCATION_HELP:"Plaats",LAST_RECORDS:"Nieuwste referenties:",RESULTS:"Resultaten:"},VIEW:{TITLE:"Register",CATEGORY:"Hoofdactiviteit:",LOCATION:"Adres:",MENU_TITLE:"Opties",POPOVER_SHARE_TITLE:"{{title}}",REMOVE_CONFIRMATION:"Weet je zeker dat je deze referentie wil verwijderen?<br/><br/>Dit kan niet ongedaan worden gemaakt."},TYPE:{TITLE:"Nieuwe referentie",SELECT_TYPE:"Soort organizatie:",ENUM:{SHOP:"Locale winkel",COMPANY:"Onderneming",ASSOCIATION:"Stichting",INSTITUTION:"Instituut"}},EDIT:{TITLE:"Bewerk",TITLE_NEW:"Nieuwe referentie",RECORD_TYPE:"Soort organizatie",RECORD_TITLE:"Naam",RECORD_TITLE_HELP:"Naam",RECORD_DESCRIPTION:"Beschrijving",RECORD_DESCRIPTION_HELP:"Omschrijf activiteit",RECORD_ADDRESS:"Straat",RECORD_ADDRESS_HELP:"Straat, gebouw...",RECORD_CITY:"Plaats",RECORD_CITY_HELP:"Plaats",RECORD_SOCIAL_NETWORKS:"Sociale media en website",RECORD_PUBKEY:"Publieke sleutel",RECORD_PUBKEY_HELP:"Publieke sleutel om betalingen te ontvangen"},ERROR:{LOAD_CATEGORY_FAILED:"Laden hoofdactiveiten mislukt",LOAD_RECORD_FAILED:"Laden datasheet mislukt",LOOKUP_RECORDS_FAILED:"Opzoeken datasheets is mislukt.",REMOVE_RECORD_FAILED:"Verwijderen datasheet mislukt",SAVE_RECORD_FAILED:"Opslaan datasheet mislukt",RECORD_NOT_EXISTS:"Datasheet niet gevonden"},INFO:{RECORD_REMOVED:"Datasheet succesvol verwijderd"}},PROFILE:{UID:"Pseudoniem",TITLE:"Naam",TITLE_HELP:"Naam",DESCRIPTION:"Over mij",DESCRIPTION_HELP:"Over mij...",ADDRESS:"Adres",ADDRESS_HELP:"Adres (optioneel)",CITY:"Plaats",CITY_HELP:"Plaats (optioneel)",SOCIAL_HELP:"http://...",GENERAL_DIVIDER:"Algemene informatie",LOCATION_DIVIDER:"Localisatie",SOCIAL_NETWORKS_DIVIDER:"Sociale media en website",TECHNICAL_DIVIDER:"Technische informatie",ERROR:{LOAD_PROFILE_FAILED:"Kon gebruikersprofiel niet laden.",SAVE_PROFILE_FAILED:"Opslaan profiel mislukt",INVALID_SOCIAL_NETWORK_FORMAT:"Ongeldig formaat: vul een geldig internetadres in.<br/><br/>Voorbeelden:<ul><li>- Een Facebookpagina (https://www.facebook.com/user)</li><li>- Een webpagina (http://www.domain.com)</li><li>- Een emailadres (joe@dalton.com)</li></ul>",IMAGE_RESIZE_FAILED:"Fout tijdens afbeelding schalen"},INFO:{PROFILE_SAVED:"Profiel opgeslagen"},HELP:{WARNING_PUBLIC_DATA:"Let op, de informatie die hier is vastgelegd <b>is publiek</b>: zichtbaar ook voor <b>niet ingelogde gebruikers</b>."}},ES_SETTINGS:{PLUGIN_NAME:"Cesium+",ENABLE_TOGGLE:"Uitbreiding inschakelen?",ENABLE_MESSAGE_TOGGLE:"Berichten inschakelen?",ENABLE_SETTINGS_TOGGLE:"Globale opslag voor instellingen inschakelen?",PEER:"Adres dataknooppunt",POPUP_PEER:{TITLE:"Dataknoop",HELP:"Stel het te gebruiken adres in:",PEER_HELP:"server.domein.com:poort"},NOTIFICATIONS:{DIVIDER:"Notificaties",HELP_TEXT:"Schakel het type notificatie dat je wil ontvangen in:",ENABLE_TX_SENT:"Bericht bij validatie van <b>verzonden betalingen</b>?",ENABLE_TX_RECEIVED:"Bericht bij validatie van <b>ontvangen betalingen</b>?",ENABLE_CERT_SENT:"Bericht bij validatie van <b>verzonden certificaties</b>?",ENABLE_CERT_RECEIVED:"Bericht bij validatie van <b>ontvangen certificaties</b>?"},CONFIRM:{ASK_ENABLE_TITLE:"Nieuwe functies",ASK_ENABLE:'Er zijn nieuwe functies beschikbaar: <ul><li>&nbsp;&nbsp;<b><i class="icon ion-person"></i> Profile Cesium+</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-android-notifcaitions"></i> Notifications</b>;<li>&nbsp;&nbsp;<b><i class="icon ion-email"></i> Priv berichten</b>.</ul><br/>Deze zijn <b>uitgeschakeld</b> in je instellingen.<br/><br/>Wil je deze functies <b>inschakelen</b>?'}},EVENT:{NODE_STARTED:"Je knoop ES API <b>{{params[0]}}</b> is UP",NODE_BMA_DOWN:"Knooppunt <b>{{params[0]}}:{{params[1]}}</b> (gebruikt door je ES API) is <b>onbereikbaar</b>.",NODE_BMA_UP:"Knooppunt <b>{{p0}}:{{params[1]}}</b> is weer onbereikbaar.",MEMBER_JOIN:"Je bent nu <b>lid</b> van valuta <b>{{params[0]}}</b>!",MEMBER_LEAVE:"Je bent <b>geen lid meer</b> van valuta <b>{{params[0]}}</b>!",MEMBER_ACTIVE:"Je lidmaatschap bij <b>{{params[0]}}</b> is met <b>succes verlengd</b>.",TX_SENT:"Je <b>betaling</b> aan <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> is uitgevoerd.",TX_SENT_MULTI:"Je <b>betaling</b> aan <b>{{params[1]}}</b> is uitgevoerd.",TX_RECEIVED:"Je hebt een <b>betaling ontvangen</b> van <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",TX_RECEIVED_MULTI:"Je hebt een <b>betaling ontvangen</b> van <b>{{params[1]}}</b>.",CERT_SENT:"Je <b>certificatie</b> van <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\" ><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> is uitgevoerd.",CERT_RECEIVED:"Je hebt een <b>certificatie ontvangen</b> van <span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid}\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span>.",REGISTRY:{NEW_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> heeft gereageerd op jouw referentie: <b>{{params[2]}}</b>",UPDATE_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> heeft zijn/aar reactie op jouw referentie bewerkt: <b>{{params[2]}}</b>",NEW_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> hheeft gereageerd op jouw commentaar op referentie: <b>{{params[2]}}</b>",UPDATE_REPLY_COMMENT:"<span ng-class=\"{'gray': !notification.uid, 'positive':notification.uid }\"><i class=\"icon\" ng-class=\"{'ion-person': notification.uid, 'ion-key': !notification.uid}\"></i>&thinsp;{{name||uid||params[1]}}</span> heeft zijn/haar reactie op jouw commentaar bewerkt, op referentie: <b>{{params[2]}}</b>"}}}),e.translations("en-GB",{NETWORK:{VIEW:{BTN_GRAPH:"Statistics"}},GRAPH:{COMMON:{LINEAR_SCALE:"Linear scale",LOGARITHMIC_SCALE:"Logarithmic scale",BTN_SHOW_STATS:"See statistics",BTN_SHOW_DETAILED_STATS:"Detailed statistics"},ACCOUNT:{TITLE:"Statistics",BTN_SHOW_STATS:"View account Statistics",BALANCE_DIVIDER:"Account status",BALANCE_TITLE:"Evolution of the account {{pubkey|formatPubkey}}",TX_RECEIVED_LABEL:"Receipts",TX_SENT_LABEL:"Spending",UD_LABEL:"UD",BALANCE_LABEL:"Balance",INPUT_CHART_TITLE:"Sum of incoming flows, per transmitter:",OUTPUT_CHART_TITLE:"Sum of outgoing flows, per recipient:"},BLOCKCHAIN:{TITLE:"Statistics",BLOCKS_ISSUERS_DIVIDER:"Written blocks by members",BLOCKS_ISSUERS_HELP:"<b>{{issuerCount|formatInteger}} members</b> calculated <b>{{blockCount|formatInteger}} blocks</b>",BLOCKS_ISSUERS_TITLE:"Number of blocks calculated per member",BLOCKS_ISSUERS_LABEL:"Number of blocks",TX_DIVIDER:"Analysis of transactions",TX_AMOUNT_TITLE:"Transaction volume",TX_AMOUNT_PUBKEY_TITLE:"Volume of transactions calculated by {{issuer | formatPubkey}}",TX_AMOUNT_LABEL:"Exchange volume",TX_COUNT_TITLE:"Number of written transactions",TX_COUNT_LABEL:"Number of transactions",TX_AVG_BY_BLOCK:"Average per block",TX_RANGE_DURATION_DIVIDER:"Step unit:",TX_RANGE_DURATION:{HOUR:"Group by <b>hour</b>",DAY:"Group by <b>day</b>",MONTH:"Group by <b>month</b>"}},CURRENCY:{MONETARY_MASS_TITLE:"Evolution of the monetary mass",MONETARY_MASS_LABEL:"Monetary mass",MONETARY_MASS_SHARE_LABEL:"Average per member",UD_TITLE:"Evolution of the universal dividend",MEMBERS_COUNT_TITLE:"Evolution of the number of members",MEMBERS_COUNT_LABEL:"Number of members"},PEER:{VIEW:{BLOCK_COUNT_LABEL:"Computed blocks count",BLOCK_COUNT:"{{count}} blocks",NO_BLOCK:"No block"}}}}),e.translations("en",{NETWORK:{VIEW:{BTN_GRAPH:"Statistics"}},GRAPH:{COMMON:{LINEAR_SCALE:"Linear scale",LOGARITHMIC_SCALE:"Logarithmic scale",BTN_SHOW_STATS:"See statistics",BTN_SHOW_DETAILED_STATS:"Detailed statistics"},ACCOUNT:{TITLE:"Statistics",BTN_SHOW_STATS:"View account Statistics",BALANCE_DIVIDER:"Account status",BALANCE_TITLE:"Evolution of the account {{pubkey|formatPubkey}}",TX_RECEIVED_LABEL:"Receipts",TX_SENT_LABEL:"Spending",UD_LABEL:"UD",BALANCE_LABEL:"Balance",INPUT_CHART_TITLE:"Sum of incoming flows, per transmitter:",OUTPUT_CHART_TITLE:"Sum of outgoing flows, per recipient:"},BLOCKCHAIN:{TITLE:"Statistics",BLOCKS_ISSUERS_DIVIDER:"Written blocks by members",BLOCKS_ISSUERS_HELP:"<b>{{issuerCount|formatInteger}} members</b> calculated <b>{{blockCount|formatInteger}} blocks</b>",BLOCKS_ISSUERS_TITLE:"Number of blocks calculated per member",BLOCKS_ISSUERS_LABEL:"Number of blocks",TX_DIVIDER:"Analysis of transactions",TX_AMOUNT_TITLE:"Transaction volume",TX_AMOUNT_PUBKEY_TITLE:"Volume of transactions calculated by {{issuer | formatPubkey}}",TX_AMOUNT_LABEL:"Exchange volume",TX_COUNT_TITLE:"Number of written transactions",TX_COUNT_LABEL:"Number of transactions",TX_AVG_BY_BLOCK:"Average per block",TX_RANGE_DURATION_DIVIDER:"Step unit:",TX_RANGE_DURATION:{HOUR:"Group by <b>hour</b>",DAY:"Group by <b>day</b>",MONTH:"Group by <b>month</b>"}},CURRENCY:{MONETARY_MASS_TITLE:"Evolution of the monetary mass",MONETARY_MASS_LABEL:"Monetary mass",MONETARY_MASS_SHARE_LABEL:"Average per member",UD_TITLE:"Evolution of the universal dividend",MEMBERS_COUNT_TITLE:"Evolution of the number of members",MEMBERS_COUNT_LABEL:"Number of members"},PEER:{VIEW:{BLOCK_COUNT_LABEL:"Computed blocks count",BLOCK_COUNT:"{{count}} blocks",NO_BLOCK:"No block"}},DOC_STATS:{TITLE:"Data storage statistitics",USER:{TITLE:"Number of documents linked to an account",USER_PROFILE:"User profiles utilisateur",USER_SETTINGS:"Saved settings"},MESSAGE:{TITLE:"Number of documents related to the communication",MESSAGE_INBOX:"Messages in inbox",MESSAGE_OUTBOX:"Messages in outbox",INVITATION_CERTIFICATION:"Invitations to certify"},SOCIAL:{TITLE:"Number of page or group",PAGE_COMMENT:"Comments",PAGE_RECORD:"Pages",GROUP_RECORD:"Groups"},OTHER:{TITLE:"Other documents",HISTORY_DELETE:"Deletion of documents"}}}}),e.translations("es-ES",{NETWORK:{VIEW:{BTN_GRAPH:"Estadstica"}},GRAPH:{COMMON:{LINEAR_SCALE:"Escala lineal",LOGARITHMIC_SCALE:"Escala logartmica",BTN_SHOW_STATS:"Ver estadsticas",BTN_SHOW_DETAILED_STATS:"Estadsticas detalladas"},ACCOUNT:{INPUT_CHART_TITLE:"Suma del flujo entrante, por el transmisor:",OUTPUT_CHART_TITLE:"Suma de las salidas por destino:"},BLOCKCHAIN:{TITLE:"Estadstica",BLOCKS_ISSUERS_DIVIDER:"Bloques escritos por los miembros",BLOCKS_ISSUERS_HELP:"<b>{{issuerCount|formatInteger}} members</b> has computed <b>{{blockCount|formatInteger}} blocks</b>",BLOCKS_ISSUERS_TITLE:"Nmero de bloques miembro calculado",BLOCKS_ISSUERS_LABEL:"Nmero de bloques",TX_DIVIDER:"Anlisis de transacciones",TX_AMOUNT_TITLE:"El volumen de operaciones",TX_AMOUNT_PUBKEY_TITLE:"El volumen de operaciones calculado por {{issuer | formatPubkey}}",TX_AMOUNT_LABEL:"Volumen negociado",TX_COUNT_TITLE:"Nmero de transacciones escritas",TX_COUNT_LABEL:"Nmero de transacciones",TX_AVG_BY_BLOCK:"Promedio por bloque",TX_RANGE_DURATION:{HOUR:"Grupo por <b>hora</b>",DAY:"Grupo por <b>da</b>",MONTH:"Grupo por <b>mes</b>"}},CURRENCY:{MONETARY_MASS_TITLE:"Evolucin de la masa monetaria",MONETARY_MASS_LABEL:"Masa monetaria",MONETARY_MASS_SHARE_LABEL:"Promedio miembro",UD_TITLE:"Evolucin del dividendo universales",MEMBERS_COUNT_TITLE:"Evolucin del nmero de miembros",MEMBERS_COUNT_LABEL:"Nmero de miembros"},PEER:{VIEW:{BLOCK_COUNT_LABEL:"Nmero de bloques calculados",BLOCK_COUNT:"{{count}} bloques",NO_BLOCK:"Ningn bloque"}}}}),e.translations("fr-FR",{NETWORK:{VIEW:{BTN_GRAPH:"Statistiques"}},GRAPH:{COMMON:{LINEAR_SCALE:"Echelle linaire",LOGARITHMIC_SCALE:"Echelle logarithmique",BTN_SHOW_STATS:"Voir les statistiques",BTN_SHOW_DETAILED_STATS:"Statistiques dtailles"},ACCOUNT:{TITLE:"Statistiques",BTN_SHOW_STATS:"Voir les statistiques du compte",BALANCE_DIVIDER:"Situation du compte",BALANCE_TITLE:"Evolution du compte {{pubkey|formatPubkey}}",TX_RECEIVED_LABEL:"Recettes",TX_SENT_LABEL:"Dpenses",TX_ACCUMULATION_LABEL:"Bilan des transactions",UD_LABEL:"DU",UD_ACCUMULATION_LABEL:"Bilan des DU",BALANCE_LABEL:"Solde",WOT_DIVIDER:"Toile de confiance",CERTIFICATION_TITLE:"Nombre de certifications - {{pubkey|formatPubkey}}",RECEIVED_CERT_LABEL:"Total reues",RECEIVED_CERT_DELTA_LABEL:"Variation reues",GIVEN_CERT_LABEL:"Total envoyes",GIVEN_CERT_DELTA_LABEL:"Variation envoyes",INPUT_CHART_TITLE:"Somme des flux entrants, par metteur :",OUTPUT_CHART_TITLE:"Somme des flux sortants, par destinaire :"},BLOCKCHAIN:{TITLE:"Statistiques",BLOCKS_ISSUERS_DIVIDER:"Analyse de la rpartition du calcul",BLOCKS_ISSUERS_HELP:"<b>{{issuerCount|formatInteger}} membres</b> ont calcul <b>{{blockCount|formatInteger}} blocs</b>",BLOCKS_ISSUERS_TITLE:"Nombre de blocs calculs par membre",BLOCKS_ISSUERS_LABEL:"Nombre de blocs",TX_DIVIDER:"Analyse des transactions",TX_AMOUNT_TITLE:"Volume des transactions",TX_AMOUNT_PUBKEY_TITLE:"Volume des transactions calcules par {{issuer | formatPubkey}}",TX_AMOUNT_LABEL:"Volume chang",TX_COUNT_TITLE:"Nombre de transactions crites",TX_COUNT_LABEL:"Nombre de transactions",TX_AVG_BY_BLOCK:"Nombre moyen de transactions / bloc",TX_RANGE_DURATION_DIVIDER:"Unit de temps :",TX_RANGE_DURATION:{HOUR:"Heure",DAY:"Jour",MONTH:"Mois"}},CURRENCY:{MONETARY_MASS_TITLE:"Evolution de la masse montaire",MONETARY_MASS_LABEL:"Masse montaire",MONETARY_MASS_SHARE_LABEL:"Moyenne par membre",UD_TITLE:"Evolution du dividende universel",MEMBERS_COUNT_TITLE:"Evolution du nombre de membres",MEMBERS_COUNT_LABEL:"Nombre de membres"},PEER:{VIEW:{BLOCK_COUNT_LABEL:"Nombre de blocs calculs",BLOCK_COUNT:"{{count}} blocs",NO_BLOCK:"Aucun bloc"}},DOC_STATS:{TITLE:"Statistiques de stockage",USER:{TITLE:"Nombre de documents lis  un compte",USER_PROFILE:"Profils utilisateur",USER_SETTINGS:"Paramtres sauvegards"},MESSAGE:{TITLE:"Nombre de documents li  la communication",MESSAGE_INBOX:"Messages en boite de rception",MESSAGE_OUTBOX:"Messages envoys sauvegards",INVITATION_CERTIFICATION:"Invitations  certifier"},SOCIAL:{TITLE:"Nombre de pages ou groupes",PAGE_COMMENT:"Commentaires",PAGE_RECORD:"Pages",GROUP_RECORD:"Groupes"},OTHER:{TITLE:"Autres documents",HISTORY_DELETE:"Suppressions de documents"}},SYNCHRO:{TITLE:"Statistiques de synchronisations",COUNT:{TITLE:"Volume synchronis",INSERTS:"Insertions",UPDATES:"Mises  jour",DELETES:"Suppressions"},PEER:{TITLE:"Noeuds requts",ES_USER_API:"Noeuds donnes utilisateurs",ES_SUBSCRIPTION_API:"Noeuds services en lignes"},PERFORMANCE:{TITLE:"Performances d'execution",DURATION:"Temps d'execution (ms)"}}}}),e.translations("nl-NL",{NETWORK:{VIEW:{BTN_GRAPH:"Statistieken"}},GRAPH:{COMMON:{LINEAR_SCALE:"Lineaire schaal",LOGARITHMIC_SCALE:"Logaritmische schaal",BTN_SHOW_STATS:"Zie statistieken",BTN_SHOW_DETAILED_STATS:"Gedetailleerde statistieken"},ACCOUNT:{INPUT_CHART_TITLE:"Som van de binnenkomende stroom, door de zender:",OUTPUT_CHART_TITLE:"Som van de uitstroom per bestemming:"},BLOCKCHAIN:{TITLE:"Statistieken",BLOCKS_ISSUERS_DIVIDER:"Schriftelijke blokken door leden",BLOCKS_ISSUERS_HELP:"<b>{{issuerCount|formatInteger}} leden</b> berekend <b>{{blockCount|formatInteger}} blokken</b>",BLOCKS_ISSUERS_TITLE:"Aantal blokken berekend per lid",BLOCKS_ISSUERS_LABEL:"Aantal blokken",TX_DIVIDER:"Analyse van transacties",TX_AMOUNT_TITLE:"Trading volume",TX_AMOUNT_PUBKEY_TITLE:"Trading volume dat wordt berekend door {{issuer | formatPubkey}}",TX_AMOUNT_LABEL:"Verhandeld volume",TX_COUNT_TITLE:"Aantal schriftelijke transacties",TX_COUNT_LABEL:"Aantal transacties",TX_AVG_BY_BLOCK:"Gemiddeld aantal transacties / blok",TX_RANGE_DURATION:{HOUR:"Groep per <b>uur</b>",DAY:"Groep per <b>dag</b>",MONTH:"Groep per <b>maand</b>"}},CURRENCY:{MONETARY_MASS_TITLE:"Evolutie van de monetaire massa",MONETARY_MASS_LABEL:"Monetaire massa",MONETARY_MASS_SHARE_LABEL:"Gemiddelde leden",UD_TITLE:"Ontwikkeling van de universele dividend",MEMBERS_COUNT_TITLE:"Evolutie van het aantal leden",MEMBERS_COUNT_LABEL:"Aantal leden"}}}),e.translations("en-GB",{MAP:{COMMON:{SEARCH_DOTS:"Search...",BTN_LOCALIZE_ME:"Localize me"},NETWORK:{LOOKUP:{BTN_MAP:"Peers map",BTN_MAP_HELP:"Open peers map"},VIEW:{TITLE:"Peers map",LAYER:{MEMBER:"Member peers",MIRROR:"Mirror peers",OFFLINE:"Offline peers"}}},WOT:{LOOKUP:{BTN_MAP:"Members map",BTN_MAP_HELP:"Open members map"},VIEW:{TITLE:"Members map",LAYER:{MEMBER:'<i class="icon ion-person positive"></i> Members',PENDING:'<i class="icon ion-clock energized"></i> Pending registrations',WALLET:'<i class="icon ion-card gray"></i> Simple wallets'}},ERROR:{LOAD_POSITION_FAILED:"Can not retrieve the positions to display."}},REGISTRY:{LOOKUP:{BTN_MAP:"Map",BTN_MAP_HELP:"Open the map of the pages"},VIEW:{TITLE:"Map of pages",LAYER:{SHOP:'<i class="icon ion-page-shop positive"></i> Local shops',COMPANY:'<i class="icon ion-page-company positive"></i> Companies',ASSOCIATION:'<i class="icon ion-page-association energized"></i> Associations',INSTITUTION:'<i class="icon ion-page-institution gray"></i> Institutions'}}},PROFILE:{MARKER_HELP:"<b>Drag and drop</b> this marker to <b>update<br/>your position</b>, or use the buttons<br/>on top of the map."},ERROR:{LOCALIZE_ME_FAILED:"Unable to retrieve your current position"},SETTINGS:{MAP_DIVIDER:"Maps",ENABLE_GOOGLE_API:"Enable Google API services?",ENABLE_GOOGLE_API_HELP:"In the <b>members map</b>, allows you to display accounts with an address but without geolocation.",GOOGLE_API_KEY:"Google API key",BTN_GOOGLE_API:"Getting a key",BTN_GOOGLE_API_WARNING:"requires a Google account",GOOGLE_API_KEY_PLACEHOLDER:"eg: AIzaqyAgszvWm0tM81x1sMK_ipDHBI7EowLqR7I"},HELP:{TIP:{WOT:"This map displays <b>profiles with a position</b>, whether they are member accounts or not.<br/><br/>Only profiles with the option &quot;appear on the map&quot; has been activated.",WOT_BTN_LAYERS:"<b>Filter the displayed data</b>: members, pending registrations, simple portfolios, etc.",WOT_BTN_SEARCH:"You can <b>search</b> by name, public key, or member pseudonym."}}}}),e.translations("en",{MAP:{COMMON:{SEARCH_DOTS:"Search...",BTN_LOCALIZE_ME:"Localize me"},NETWORK:{LOOKUP:{BTN_MAP:"Peers map",BTN_MAP_HELP:"Open peers map"},VIEW:{TITLE:"Peers map",LAYER:{MEMBER:"Member peers",MIRROR:"Mirror peers",OFFLINE:"Offline peers"}}},WOT:{LOOKUP:{BTN_MAP:"Members map",BTN_MAP_HELP:"Open members map"},VIEW:{TITLE:"Members map",LAYER:{MEMBER:'<i class="icon ion-person positive"></i> Members',PENDING:'<i class="icon ion-clock energized"></i> Pending registrations',WALLET:'<i class="icon ion-card gray"></i> Simple wallets'}},ERROR:{LOAD_POSITION_FAILED:"Can not retrieve the positions to display."}},REGISTRY:{LOOKUP:{BTN_MAP:"Map",BTN_MAP_HELP:"Open the map of the pages"},VIEW:{TITLE:"Map of pages",LAYER:{SHOP:'<i class="icon ion-page-shop positive"></i> Local shops',COMPANY:'<i class="icon ion-page-company positive"></i> Companies',ASSOCIATION:'<i class="icon ion-page-association energized"></i> Associations',INSTITUTION:'<i class="icon ion-page-institution gray"></i> Institutions'}}},PROFILE:{MARKER_HELP:"<b>Drag and drop</b> this marker to <b>update<br/>your position</b>, or use the buttons<br/>on top of the map."},ERROR:{LOCALIZE_ME_FAILED:"Unable to retrieve your current position"},SETTINGS:{MAP_DIVIDER:"Maps",ENABLE_GOOGLE_API:"Enable Google API services?",ENABLE_GOOGLE_API_HELP:"In the <b>members map</b>, allows you to display accounts with an address but without geolocation.",GOOGLE_API_KEY:"Google API key",BTN_GOOGLE_API:"Getting a key",BTN_GOOGLE_API_WARNING:"requires a Google account",GOOGLE_API_KEY_PLACEHOLDER:"eg: AIzaqyAgszvWm0tM81x1sMK_ipDHBI7EowLqR7I"},HELP:{TIP:{WOT:"This map displays <b>profiles with a position</b>, whether they are member accounts or not.<br/><br/>Only profiles with the option &quot;appear on the map&quot; has been activated.",WOT_BTN_LAYERS:"<b>Filter the displayed data</b>: members, pending registrations, simple portfolios, etc.",WOT_BTN_SEARCH:"You can <b>search</b> by name, public key, or member pseudonym."}}}}),e.translations("fr-FR",{MAP:{COMMON:{SEARCH_DOTS:"Rechercher...",BTN_LOCALIZE_ME:"Me localiser"},NETWORK:{LOOKUP:{BTN_MAP:"Carte",BTN_MAP_HELP:"Ouvrir la carte des noeuds"},VIEW:{TITLE:"Carte des noeuds",LAYER:{MEMBER:"Nuds membre",MIRROR:"Nuds mirroir",OFFLINE:"Nuds hors ligne"}}},WOT:{LOOKUP:{BTN_MAP:"Carte",BTN_MAP_HELP:"Ouvrir la carte des membres"},VIEW:{TITLE:"Carte des membres",LAYER:{MEMBER:'<i class="icon ion-person positive"></i> Membres',PENDING:'<i class="icon ion-clock energized"></i> Inscriptions en attente',WALLET:'<i class="icon ion-card gray"></i> Simples portefeuilles'}},ERROR:{LOAD_POSITION_FAILED:"Impossible de rcuprer les positions  afficher."}},REGISTRY:{LOOKUP:{BTN_MAP:"Carte",BTN_MAP_HELP:"Ouvrir la carte des pages"},VIEW:{TITLE:"Carte des pages",LAYER:{SHOP:'<i class="icon ion-page-shop positive"></i> Commerces locaux',COMPANY:'<i class="icon ion-page-company positive"></i> Entreprises',ASSOCIATION:'<i class="icon ion-page-association energized"></i> Associations',INSTITUTION:'<i class="icon ion-page-institution gray"></i> Institutions'}}},PROFILE:{MARKER_HELP:"<b>Glissez-dposez</b> ce marqueur pour <b>mettre<br/> jour votre position</b> sur la carte, ou utilisez le bouton<br/>de recherche au dessus de la carte."},ERROR:{LOCALIZE_ME_FAILED:"Impossible de rcuprer votre position actuelle"},SETTINGS:{MAP_DIVIDER:"Cartes",ENABLE_GOOGLE_API:"Activer les services Google API ?",ENABLE_GOOGLE_API_HELP:"Permet l'affichage dans la <b>carte des membres</b> des comptes ayant une adresse mais aucun positionnement GPS.",GOOGLE_API_KEY:"Cl d'API Google",BTN_GOOGLE_API:"Obtenir une cl",BTN_GOOGLE_API_WARNING:"ncessite d'avoir un compte Google",GOOGLE_API_KEY_PLACEHOLDER:"Exemple: AIzaqyAgszvWm0tM81x1sMK_ipDHBI7EowLqR7I"},HELP:{TIP:{WOT:"Cette carte affiche <b>les profils ayant une position</b>, qu'ils correspondent  des comptes membre ou non.<br/><br/>Seuls sont visibles les profils dont l'option &quot;apparaitre sur le carte&quot; a t active.",WOT_BTN_LAYERS:"<b>Filtrez ici les donnes affiches</b>: membres, inscriptions en attente, simples portefeuilles, etc.",WOT_BTN_SEARCH:"Vous pouvez <b>effectuer une recherche</b> par nom, clef publique ou pseudonyme de membre."}}}}),e.translations("fr-FR",{RML9:{BTN_EXPORT:"Tlcharger",BTN_OPEN:"Ouvrir la page RML9",BTN_SWOW_TX:"Voir les transactions",FILE_NAME:"relev du compte {{pubkey|formatPubkey}} au {{currentTime|formatDateForFile}}.csv",HEADERS:{TIME:"Date",AMOUNT:"Montant",COMMENT:"Commentaire"},VIEW:{TITLE:"RML9",DIVIDER:"Dernires transactions :",BALANCE:"Solde du compte"},CHART:{INPUT_CHART_TITLE:"Somme des flux entrants, par metteur :",OUTPUT_CHART_TITLE:"Somme des flux sortants, par destinaire :"},SETTINGS:{ENABLE_TOGGLE:"Activer le plugin RML9 ?"}}})}]),angular.module("cesium.plugins.templates",[]).run(["$templateCache",function(e){e.put("plugins/es/templates/menu_extend.html",'\n<!-- Top header: Main section -->\n<div\n  ng-if="enable && extensionPoint === \'nav-buttons-right\'" class="hidden-xs hidden-sm">\n\n\n  <!-- invitation event -->\n  <button class="button button-clear icon ion-person-stalker"\n          ng-if="login"\n          active-link="gray"\n          active-link-path-prefix="#/app/invitations"\n          ng-click="showInvitationsPopover($event)">\n          <span\n            ng-if="$root.walletData.invitations.unreadCount"\n            class="badge badge-button badge-positive">{{$root.walletData.invitations.unreadCount}}</span>\n  </button>\n\n  <!-- messages -->\n  <button class="button button-clear icon ion-email"\n          ng-if="login"\n          active-link="gray"\n          active-link-path-prefix="#/app/user/message"\n          ng-click="showMessagesPopover($event)">\n    <span\n      ng-if="$root.walletData.messages.unreadCount"\n      class="badge badge-button badge-positive">{{$root.walletData.messages.unreadCount}}</span>\n  </button>\n\n  <!-- notifications -->\n  <button class="button button-clear icon ion-android-notifications"\n          ng-if="login"\n          active-link="gray"\n          active-link-path-prefix="#/app/notifications"\n          ng-click="showNotificationsPopover($event)">\n          <span\n            ng-if="$root.walletData.notifications.unreadCount"\n            class="badge badge-button badge-positive">{{$root.walletData.notifications.unreadCount}}</span>\n  </button>\n</div>\n\n<!-- Left menu: User section -->\n<div ng-if="enable && extensionPoint === \'menu-user\'" class="visible-xs visible-sm">\n\n  <a menu-close class="item item-icon-left" active-link="active"\n       active-link-path-prefix="#/app/invitations"\n       ng-class="{\'item-menu-disable\': !login}"\n       ui-sref="app.view_invitations">\n    <i class="icon ion-person-stalker"></i>\n    <span translate>MENU.INVITATIONS</span>\n    <span class="badge badge-positive"\n          ng-if="$root.walletData.invitations.unreadCount">{{$root.walletData.invitations.unreadCount}}</span>\n  </a>\n\n  <a menu-close class="item item-icon-left" active-link="active"\n            active-link-path-prefix="#/app/user/message"\n            ng-class="{\'item-menu-disable\': !login}"\n            ui-sref="app.user_message.tab_inbox">\n    <i class="icon ion-email"></i>\n    <span translate>MENU.MESSAGES</span>\n    <span class="badge badge-positive"\n          ng-if="$root.walletData.messages.unreadCount">{{$root.walletData.messages.unreadCount}}</span>\n  </a>\n\n  <a menu-close class="item item-icon-left" active-link="active"\n       active-link-path-prefix="#/app/notifications"\n       ng-class="{\'item-menu-disable\': !login}"\n       ui-sref="app.view_notifications">\n    <i class="icon ion-android-notifications"></i>\n    <span translate>MENU.NOTIFICATIONS</span>\n    <span class="badge badge-positive"\n          ng-if="$root.walletData.notifications.unreadCount">{{$root.walletData.notifications.unreadCount}}</span>\n  </a>\n\n</div>\n'),e.put("plugins/rml9/templates/01-button.html",'<!-- Button that call a function of the controller -->\n<button class="button button-balanced button-small-padding icon ion-android-archive"\n        ng-click="onButtonClick()"\n        title="{{\'RML9.BTN_OPEN\' | translate}}">\n</button>\n\n<!-- Button: Open a view, using `ui-sref` attribute\n<button class="button button-balanced button-small-padding icon ion-plus-circled"\n        ui-sref="app.rml9({pubkey: formData.pubkey})"\n        title="{{\'RML9.BTN_OPEN\' | translate}}">\n</button> -->\n\n'),e.put("plugins/rml9/templates/02-view.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    {{\'RML9.VIEW.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content>\n    <div class="list">\n\n      <!-- the pubkey -->\n      <div class="item">\n        {{\'COMMON.PUBKEY\'|translate}}\n        <div class="badge">{{pubkey|formatPubkey}}</div>\n      </div>\n\n      <!-- a text divider-->\n      <div class="item item-divider">{{\'RML9.VIEW.DIVIDER\'|translate:{pubkey: pubkey} }}</div>\n\n      <!-- iterate on each TX -->\n      <div class="item" ng-repeat="item in items">\n        <h3>{{item.time|formatDate}}</h3>\n        <h4>{{item.pubkey|formatPubkey}}</h4>\n        <div class="badge">{{item.amount|formatAmount}}</div>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/rml9/templates/03-button.html",'<!-- Button: Open a view, using `ui-sref` attribute -->\n<button class="button button-balanced button-small-padding icon ion-android-archive"\n        ui-sref="app.rml9({pubkey: formData.pubkey})"\n        title="{{\'RML9.BTN_SWOW_TX\' | translate}}">\n</button>\n\n'),e.put("plugins/rml9/templates/03-view_with_button.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    {{\'RML9.VIEW.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content>\n    <div class="list">\n\n      <!-- buttons bar -->\n      <div class="center padding">\n        <div class="buttons">\n          <button class="button button-balanced icon-left icon ion-archive"\n                  ng-click="onExportButtonClick()">{{\'RML9.BTN_EXPORT\' | translate}}\n          </button>\n        </div>\n      </div>\n\n      <!-- the pubkey -->\n      <div class="item">\n        {{\'COMMON.PUBKEY\'|translate}}\n        <div class="badge">{{pubkey|formatPubkey}}</div>\n      </div>\n\n      <!-- the balance -->\n      <div class="item">\n        {{\'RML9.VIEW.BALANCE\'|translate}}\n        <div class="badge badge-calm">\n          {{balance|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n        </div>\n      </div>\n\n      <!-- a text divider-->\n      <div class="item item-divider">{{\'RML9.VIEW.DIVIDER\'|translate:{pubkey: pubkey} }}</div>\n\n      <!-- iterate on each TX -->\n      <div class="item item-text-wrap" ng-repeat="item in items">\n\n        <h3>\n          {{item.time|formatDate}}\n          <span ng-if="item.comment" class="gray"> | {{item.comment}}</span>\n        </h3>\n\n        <h4 ng-if="item.uid" class="positive"><i class="icon ion-person"></i> {{item.name||item.uid}}</h4>\n        <h4 ng-if="!item.uid" class="gray"><i class="icon ion-key"></i> {{item.pubkey|formatPubkey}}</h4>\n\n        <div class="badge"\n             ng-class="{\'badge-balanced\': item.amount > 0}">\n          {{item.amount|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n        </div>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),
e.put("plugins/rml9/templates/04-view_chart.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    {{\'RML9.VIEW.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content>\n    <div class="list">\n\n      <!-- buttons bar -->\n      <div class="center padding">\n        <div class="buttons">\n          <button class="button button-balanced icon-left icon ion-archive"\n                  ng-click="onExportButtonClick()">{{\'RML9.BTN_EXPORT\' | translate}}\n          </button>\n        </div>\n      </div>\n\n      <!-- the pubkey -->\n      <div class="item">\n        {{\'COMMON.PUBKEY\'|translate}}\n        <div class="badge">{{pubkey|formatPubkey}}</div>\n      </div>\n\n      <!-- the balance -->\n      <div class="item">\n        {{\'RML9.VIEW.BALANCE\'|translate}}\n        <div class="badge badge-calm">\n          {{balance|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n        </div>\n      </div>\n\n      <!-- a text divider-->\n      <div class="item item-divider">{{\'RML9.VIEW.DIVIDER\'|translate:{pubkey: pubkey} }}</div>\n\n\n      <div class="row">\n        <div class="col col-75">\n          <!-- iterate on each TX -->\n          <div class="item item-text-wrap" ng-repeat="item in items">\n\n            <h3>\n              {{item.time|formatDate}}\n              <span ng-if="item.comment" class="gray"> | {{item.comment}}</span>\n            </h3>\n\n            <h4 ng-if="item.uid" class="positive"><i class="icon ion-person"></i> {{item.name||item.uid}}</h4>\n            <h4 ng-if="!item.uid" class="gray"><i class="icon ion-key"></i> {{item.pubkey|formatPubkey}}</h4>\n\n            <div class="badge"\n                 ng-class="{\'badge-balanced\': item.amount > 0}">\n              {{item.amount|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n            </div>\n          </div>\n        </div>\n\n        <div class="col col-25">\n\n          <!-- [NEW] TX input chart -->\n          <p class="gray" translate>RML9.CHART.INPUT_CHART_TITLE</p>\n          <canvas id="chart-received-pie" class="chart-pie"\n                  chart-data="inputChart.data"\n                  chart-labels="inputChart.labels"\n                  chart-colors="inputChart.colors">\n          </canvas>\n\n          <!-- [NEW] TX input chart -->\n          <p class="gray" translate>RML9.CHART.OUTPUT_CHART_TITLE</p>\n          <canvas id="chart-sent-pie" class="chart-pie"\n                  chart-data="outputChart.data"\n                  chart-labels="outputChart.labels"\n                  chart-colors="outputChart.colors">\n          </canvas>\n        </div>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/rml9/templates/06-button.html",'<!-- [NEW] Display only if plugin is enable -->\n\n  <!-- Button: call a method from the state controller -->\n  <button ng-if="enable" class="button button-balanced button-small-padding icon ion-android-archive"\n          ng-click="onButtonClick()"\n          title="{{\'RML9.BTN_SWOW_TX\' | translate}}">\n  </button>\n\n\n'),e.put("plugins/rml9/templates/06-settings_item.html",'\n<div class="item item-toggle dark">\n  <div class="input-label" translate>RML9.SETTINGS.ENABLE_TOGGLE</div>\n  <label class="toggle toggle-royal">\n    <input type="checkbox" ng-model="formData.plugins.rml9.enable" >\n    <div class="track">\n      <div class="handle"></div>\n    </div>\n  </label>\n</div>\n'),e.put("plugins/rml9/templates/07-button.html",'<!-- Button: Open a view, using `ui-sref` attribute -->\n<button class="button button-balanced button-small-padding icon ion-android-archive"\n        ui-sref="app.rml9({pubkey: formData.pubkey})"\n        title="{{\'RML9.BTN_SWOW_TX\' | translate}}">\n</button>\n\n'),e.put("plugins/rml9/templates/07-view.html",'<leaflet id="map-geojson" center="map.center" geojson="map.geojson"></leaflet>\n'),e.put("plugins/rml9/templates/final-button.html",'<!-- Button: Open a view, using `ui-sref` attribute -->\n<button ng-if class="button button-balanced button-small-padding icon ion-android-archive"\n        ui-sref="app.rml9({pubkey: formData.pubkey})"\n        title="{{\'RML9.BTN_SWOW_TX\' | translate}}">\n</button>\n\n'),e.put("plugins/rml9/templates/final-view.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    {{\'RML9.VIEW.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content>\n    <div class="list">\n\n      <!-- buttons bar -->\n      <div class="center padding">\n        <div class="buttons">\n          <button class="button button-balanced icon-left icon ion-archive"\n                  ng-click="onExportButtonClick()">{{\'RML9.BTN_EXPORT\' | translate}}\n          </button>\n        </div>\n      </div>\n\n      <!-- the pubkey -->\n      <div class="item">\n        {{\'COMMON.PUBKEY\'|translate}}\n        <div class="badge">{{pubkey|formatPubkey}}</div>\n      </div>\n\n      <!-- the balance -->\n      <div class="item">\n        {{\'RML9.VIEW.BALANCE\'|translate}}\n        <div class="badge badge-calm">\n          {{balance|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n        </div>\n      </div>\n\n      <!-- a text divider-->\n      <div class="item item-divider">{{\'RML9.VIEW.DIVIDER\'|translate:{pubkey: pubkey} }}</div>\n\n      <!-- iterate on each TX -->\n      <div class="row">\n        <div class="col col-75">\n          <div class="item item-text-wrap" ng-repeat="item in items">\n\n            <h3>\n              {{item.time|formatDate}}\n              <span ng-if="item.comment" class="gray"> | {{item.comment}}</span>\n            </h3>\n\n            <h4 ng-if="item.uid" class="positive"><i class="icon ion-person"></i> {{item.name||item.uid}}</h4>\n            <h4 ng-if="!item.uid" class="gray"><i class="icon ion-key"></i> {{item.pubkey|formatPubkey}}</h4>\n\n            <div class="badge"\n                 ng-class="{\'badge-balanced\': item.amount > 0}">\n              {{item.amount|formatAmount}} <span ng-bind-html="$root.currency.name|currencySymbol"></span>\n            </div>\n          </div>\n\n        </div>\n\n        <div class="col col-25">\n\n          <!-- [NEW] TX input chart -->\n          <p class="gray" translate>RML9.CHART.INPUT_CHART_TITLE</p>\n          <canvas id="chart-received-pie" class="chart-pie"\n                  chart-data="inputChart.data"\n                  chart-labels="inputChart.labels">\n          </canvas>\n\n          <!-- [NEW] TX input chart -->\n          <p class="gray" translate>RML9.CHART.OUTPUT_CHART_TITLE</p>\n          <canvas id="chart-sent-pie" class="chart-pie"\n                  chart-data="outputChart.data"\n                  chart-labels="outputChart.labels">\n          </canvas>\n        </div>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/account/graph_balance.html",'\n    <!-- button bar -->\n    <div class="button-bar-inline "\n         style="top: 33px; margin-top:-33px; position: relative;">\n      <button\n        class="button button-stable button-clear no-padding-xs pull-right"\n        ng-click="showActionsPopover($event)">\n        <i class="icon ion-navicon-round"></i>\n      </button>\n    </div>\n\n    <div class="padding-left padding-right">\n      <canvas id="account-balance" class="chart-bar"\n              height="{{height}}" width="{{width}}"\n              chart-data="data"\n              chart-dataset-override="datasetOverride"\n              chart-colors="colors"\n              chart-options="options"\n              chart-labels="labels"\n              chart-click="onChartClick">\n      </canvas>\n    </div>\n\n    <ng-include src="\'plugins/graph/templates/common/graph_range_bar.html\'"></ng-include>\n'),e.put("plugins/graph/templates/account/graph_certifications.html",'\n    <div class="padding-left padding-right">\n      <canvas id="account-certifications" class="chart-bar"\n              height="{{height}}" width="{{width}}"\n              chart-data="data"\n              chart-dataset-override="datasetOverride"\n              chart-colors="colors"\n              chart-options="options"\n              chart-labels="labels"\n              chart-click="onChartClick">\n      </canvas>\n    </div>\n'),e.put("plugins/graph/templates/account/graph_sum_tx.html",'<div class="row responsive-sm" ng-if="!loading">\n\n  <div class="col col-10 hidden-xs hidden-sm">&nbsp;</div>\n\n  <div class="col text-center">\n\n    <!-- [NEW] TX input chart -->\n    <p class="gray padding text-wrap"\n       ng-if="inputChart.data.length"\n       translate>GRAPH.ACCOUNT.INPUT_CHART_TITLE</p>\n    <canvas id="chart-received-pie" class="chart-pie"\n            chart-data="inputChart.data"\n            chart-labels="inputChart.labels"\n            chart-colors="inputChart.colors"\n            chart-click="onInputChartClick">\n    </canvas>\n\n  </div>\n\n  <div class="col col-10 hidden-xs hidden-sm">&nbsp;</div>\n\n  <div class="col text-center">\n\n    <!-- [NEW] TX input chart -->\n    <p class="gray padding text-wrap"\n       ng-if="outputChart.data.length"\n       translate>GRAPH.ACCOUNT.OUTPUT_CHART_TITLE</p>\n    <canvas id="chart-sent-pie" class="chart-pie"\n            chart-data="outputChart.data"\n            chart-labels="outputChart.labels"\n            chart-colors="outputChart.colors"\n            chart-click="onOutputChartClick">\n    </canvas>\n\n  </div>\n\n  <div class="col col-10 hidden-xs hidden-sm">&nbsp;</div>\n\n</div>\n'),e.put("plugins/graph/templates/account/view_identity_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="extensionPoint === \'buttons\'">\n\n  <button class="button button-stable button-small-padding icon ion-stats-bars"\n          ng-click="showIdentityStats()"\n          title="{{\'GRAPH.ACCOUNT.BTN_SHOW_STATS\' | translate}}">\n  </button>\n\n</ng-if>\n'),e.put("plugins/graph/templates/account/view_identity_tx_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="extensionPoint === \'buttons\'">\n\n  <button class="button button-stable button-small-padding icon ion-stats-bars"\n          ng-click="showIdentityStats()"\n          title="{{\'GRAPH.ACCOUNT.BTN_SHOW_STATS\' | translate}}">\n  </button>\n\n</ng-if>\n'),e.put("plugins/graph/templates/account/view_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.ACCOUNT.TITLE\' | translate}}{{id}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="no-padding">\n\n\n\n    <div class="list" >\n\n      <!--  - - - - Balance - - - - -->\n      <ng-controller ng-controller="GpAccountBalanceCtrl">\n        <div class="center padding" ng-if="loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <div class="item item-divider" ng-if="!loading" >\n          {{\'GRAPH.ACCOUNT.BALANCE_DIVIDER\'|translate}}\n          <ion-spinner ng-if="loadingRange" class="ion-spinner-small" icon="android"></ion-spinner>\n        </div>\n\n        <div class="item no-padding-xs"\n             ng-if="!loading"\n             ng-include="\'plugins/graph/templates/account/graph_balance.html\'"\n             ng-init="setSize(350, 1000)">\n        </div>\n      </ng-controller>\n\n    </div>\n\n    <div class="item no-padding-xs"\n         ng-include="\'plugins/graph/templates/account/graph_sum_tx.html\'"\n         ng-controller="GpAccountSumTxCtrl">\n    </div>\n\n      <!--  - - - - WOT - - - - -->\n      <!--<div class="item item-divider" translate>\n        GRAPH.ACCOUNT.WOT_DIVIDER\n      </div>\n\n      <div class="item no-padding-xs"\n           ng-include="\'plugins/graph/templates/account/graph_certifications.html\'"\n           ng-controller="GpAccountCertificationCtrl"\n           ng-init="setSize(350, 1000)">\n      </div>-->\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/graph/templates/account/view_wallet_tx_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="extensionPoint === \'buttons\'">\n\n  <button class="button button-stable button-small-padding icon ion-stats-bars"\n          ng-click="showWalletStats()"\n          title="{{\'GRAPH.ACCOUNT.BTN_SHOW_STATS\' | translate}}">\n  </button>\n\n</ng-if>\n'),e.put("plugins/graph/templates/blockchain/graph_block_issuers.html",'\n    <div class="row responsive-lg">\n\n      <!-- bar -->\n      <div class="col col-75">\n        <canvas id="bar" class="chart-bar"\n                height="{{height}}" width="{{width}}"\n                chart-data="data"\n                chart-labels="labels"\n                chart-colors="colors"\n                chart-options="barOptions"\n                chart-click="onChartClick">\n        </canvas>\n      </div>\n\n      <!-- pie -->\n      <div class="col col-25 padding-top">\n        <canvas id="blocksByIssuer-pie" class="chart-pie"\n                chart-data="data"\n                chart-labels="labels"\n                chart-colors="colors"\n                chart-click="onChartClick">\n        </canvas>\n\n        <div class="gray padding-top text-center">\n          <small ng-bind-html="\'GRAPH.BLOCKCHAIN.BLOCKS_ISSUERS_HELP\'| translate:{issuerCount: data.length, blockCount: blockCount }"></small>\n        </div>\n      </div>\n    </div>\n'),e.put("plugins/graph/templates/blockchain/graph_tx_count.html",'\n    <!-- button bar -->\n    <div class="button-bar-inline "\n         style="top: 33px; margin-top:-33px; position: relative;">\n      <button\n        class="button button-stable button-clear no-padding-xs pull-right"\n        ng-click="showActionsPopover($event)">\n        <i class="icon ion-navicon-round"></i>\n      </button>\n    </div>\n\n    <div class="padding-left padding-right">\n      <canvas id="tx-line" class="chart-bar"\n              height="{{height}}" width="{{width}}"\n              chart-data="data"\n              chart-dataset-override="datasetOverride"\n              chart-colors="colors"\n              chart-options="options"\n              chart-labels="labels"\n              chart-click="onChartClick">\n      </canvas>\n    </div>\n\n    <ng-include src="\'plugins/graph/templates/common/graph_range_bar.html\'"></ng-include>\n'),e.put("plugins/graph/templates/blockchain/view_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.BLOCKCHAIN.TITLE\' | translate}}{{id}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="no-padding">\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list" ng-if="!loading">\n\n\n      <!-- TX count -->\n      <ng-controller ng-controller="GpBlockchainTxCountCtrl">\n        <div class="center padding" ng-if="loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <div class="item item-divider" ng-if="!loading" >\n          {{\'GRAPH.BLOCKCHAIN.TX_DIVIDER\'|translate}}\n          <ion-spinner ng-if="loadingRange" class="ion-spinner-small" icon="android"></ion-spinner>\n        </div>\n\n        <div class="item no-padding-xs"\n             ng-if="!loading"\n             ng-include="\'plugins/graph/templates/blockchain/graph_tx_count.html\'"\n             ng-init="setSize(350, 1000)">\n        </div>\n      </ng-controller>\n\n\n      <!-- Blocks issuer -->\n      <ng-controller ng-controller="GpBlockchainIssuersCtrl">\n\n        <div class="item item-divider" ng-if="!loading" translate>GRAPH.BLOCKCHAIN.BLOCKS_ISSUERS_DIVIDER</div>\n\n        <div class="item no-padding-xs"\n             ng-if="!loading"\n             ng-include="\'plugins/graph/templates/blockchain/graph_block_issuers.html\'"\n             ng-init="setSize(300, 750)">\n        </div>\n\n      </ng-controller>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/graph/templates/common/graph_range_bar.html",'\n  <div class="range range-positive no-padding-left no-padding-right">\n    <a\n      class="button button-stable button-clear no-padding pull-left"\n      ng-click="goPreviousRange($event)">\n      <i class="icon ion-chevron-left"></i>\n    </a>\n    <input type="range"\n           ng-model="formData.timePct"\n           name="timePct"\n           min="0" max="100"\n           value="{{formData.timePct}}"\n           ng-change="onRangeChanged();"\n           ng-model-options="{ debounce: 250 }">\n    <a\n      class="button button-stable button-clear no-padding pull-right"\n      ng-click="goNextRange($event)">\n      <i class="icon ion-chevron-right"></i>\n    </a>\n  </div>\n'),e.put("plugins/graph/templates/common/popover_range_actions.html",'<ion-popover-view class="has-header popover-graph-currency">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- scale -->\n      <a class="item item-icon-left ink"\n         ng-click="toggleScale()">\n        <i class="icon ion-ios-checkmark-empty" ng-show="formData.scale==\'logarithmic\'"></i>\n        <span ng-bind-html="\'GRAPH.COMMON.LOGARITHMIC_SCALE\' | translate"></span>\n      </a>\n\n      <!-- duration divider -->\n      <div class="item item-divider">\n        {{\'GRAPH.BLOCKCHAIN.TX_RANGE_DURATION_DIVIDER\'|translate}}\n      </div>\n\n      <!-- duration: hour -->\n      <a class="item item-icon-left ink"\n         ng-click="setRangeDuration(\'hour\')">\n        <i class="icon ion-ios-checkmark-empty" ng-show="formData.rangeDuration==\'hour\'"></i>\n        <span ng-bind-html="\'GRAPH.BLOCKCHAIN.TX_RANGE_DURATION.HOUR\' | translate"></span>\n      </a>\n\n      <!-- duration: day -->\n      <a class="item item-icon-left ink"\n         ng-click="setRangeDuration(\'day\')">\n        <i class="icon ion-ios-checkmark-empty" ng-show="formData.rangeDuration==\'day\'"></i>\n        <span ng-bind-html="\'GRAPH.BLOCKCHAIN.TX_RANGE_DURATION.DAY\' | translate"></span>\n      </a>\n\n      <!-- duration: month -->\n      <a class="item item-icon-left ink"\n         ng-click="setRangeDuration(\'month\')">\n        <i class="icon ion-ios-checkmark-empty" ng-show="formData.rangeDuration==\'month\'"></i>\n        <span ng-bind-html="\'GRAPH.BLOCKCHAIN.TX_RANGE_DURATION.MONTH\' | translate"></span>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/graph/templates/currency/graph_du.html",'\n  <!-- graphs button bar -->\n  <div class="button-bar-inline "\n       style="top: 33px; margin-top:-33px; position: relative;">\n    <button\n      class="button button-stable button-clear no-padding-xs pull-right"\n      ng-click="showActionsPopover($event)">\n      <i class="icon ion-navicon-round"></i>\n    </button>\n  </div>\n\n  <canvas id="monetaryMass-bar" class="chart-bar"\n          height="{{height}}"\n          width="{{width}}"\n          chart-data="data"\n          chart-labels="labels"\n          chart-colors="colors"\n          chart-dataset-override="datasetOverride"\n          chart-options="options"\n          chart-click="showBlock">\n  </canvas>\n'),e.put("plugins/graph/templates/currency/graph_members_count.html",'  <canvas id="membersCount-bar" class="chart-line"\n          height="{{height}}"\n          width="{{width}}"\n          chart-data="data"\n          chart-labels="labels"\n          chart-colors="colors"\n          chart-options="options"\n          chart-dataset-override="datasetOverride"\n          chart-click="onChartClick">\n  </canvas>\n'),e.put("plugins/graph/templates/currency/graph_monetary_mass.html",'\n  <!-- graphs button bar -->\n  <div class="button-bar-inline "\n       style="top: 33px; margin-top:-33px; position: relative;">\n    <button\n      class="button button-stable button-clear no-padding-xs pull-right"\n      ng-click="showActionsPopover($event)">\n      <i class="icon ion-navicon-round"></i>\n    </button>\n  </div>\n\n  <canvas id="monetaryMass-bar"\n          class="chart-bar"\n          height="{{height}}"\n          width="{{width}}"\n          chart-data="data"\n          chart-labels="labels"\n          chart-colors="colors"\n          chart-dataset-override="datasetOverride"\n          chart-options="options"\n          chart-click="onChartClick">\n  </canvas>\n'),e.put("plugins/graph/templates/currency/popover_monetary_mass_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink"\n         ng-click="toggleScale()">\n        <i class="icon ion-ios-checkmark-empty" ng-show="formData.scale==\'logarithmic\'"></i>\n        <span ng-bind-html="\'GRAPH.COMMON.LOGARITHMIC_SCALE\' | translate"></span>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/graph/templates/currency/tab_blocks_extend.html",'<!-- buttons -->\n<ng-if ng-if="enable && extensionPoint === \'buttons\'">\n  <div class="item item-divider">\n    <a class="badge button button-text button-small button-small-padding ink" ui-sref="app.currency.tab_blocks_stats">\n      <i class="icon ion-stats-bars"></i>\n      <span translate>GRAPH.COMMON.BTN_SHOW_STATS</span>\n    </a>\n  </div>\n</ng-if>\n'),e.put("plugins/graph/templates/currency/view_currency_extend.html",'\n<!-- section actual parameters -->\n<ng-if ng-if="enable && extensionPoint === \'parameters-actual\'" >\n\n  <ng-if ng-if="!smallscreen">\n    <div class="item padding-left padding-right no-padding-xs"\n         ng-include="\'plugins/graph/templates/currency/graph_monetary_mass.html\'"\n         ng-controller="GpCurrencyMonetaryMassCtrl"\n         ng-init="displayShareAxis=false;">\n    </div>\n    <div class="item buttons no-padding-top ">\n      <a class="pull-right button button-text button-small button-small-padding ink" ui-sref="app.currency_stats_lg">\n        <i class="icon ion-stats-bars"></i>\n        <span translate>GRAPH.COMMON.BTN_SHOW_DETAILED_STATS</span>\n      </a>\n    </div>\n  </ng-if>\n\n  <div class="item item-divider"\n       ng-if="smallscreen">\n    <a class="badge button button-text button-small button-small-padding ink" ui-sref="app.currency.tab_parameters_stats">\n      <i class="icon ion-stats-bars"></i>\n      <span translate>GRAPH.COMMON.BTN_SHOW_STATS</span>\n    </a>\n  </div>\n</ng-if>\n\n<!-- section Wot -->\n<ng-if ng-if="enable && extensionPoint === \'wot-actual\'" >\n\n  <ng-if ng-if="!smallscreen">\n    <div class="item padding-left padding-right no-padding-xs"\n         ng-include="\'plugins/graph/templates/currency/graph_members_count.html\'"\n         ng-controller="GpCurrencyMembersCountCtrl">\n    </div>\n    <div class="item buttons no-padding-top ">\n      <a class="pull-right button button-text button-small button-small-padding ink" ui-sref="app.currency_stats_lg">\n        <i class="icon ion-stats-bars"></i>\n        <span translate>GRAPH.COMMON.BTN_SHOW_DETAILED_STATS</span>\n      </a>\n    </div>\n  </ng-if>\n\n  <div class="item item-divider"\n       ng-if="smallscreen">\n    <a class="badge button button-text button-small button-small-padding ink" ui-sref="app.currency.tab_wot_stats">\n      <i class="icon ion-stats-bars"></i>\n      <span translate>GRAPH.COMMON.BTN_SHOW_STATS</span>\n    </a>\n  </div>\n</ng-if>\n\n<!-- section Wot -->\n<ng-if ng-if="enable && extensionPoint === \'network-actual\'" >\n\n  <div class="item padding-left padding-right no-padding-xs"\n       ng-if="!smallscreen"\n       ng-include="\'plugins/graph/templates/blockchain/graph_block_issuers.html\'"\n       ng-controller="GpBlockchainIssuersCtrl">\n  </div>\n\n  <div class="item item-divider"\n       ng-if="smallscreen">\n    <a class="badge button button-text button-small button-small-padding ink" ui-sref="app.currency.tab_network_stats">\n      <i class="icon ion-stats-bars"></i>\n      <span translate>GRAPH.COMMON.BTN_SHOW_STATS</span>\n    </a>\n  </div>\n</ng-if>\n\n'),e.put("plugins/graph/templates/currency/view_parameters_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n\n  <ion-content scroll="true" >\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list no-padding-xs">\n      <div class="item no-padding-xs"\n           ng-include="\'plugins/graph/templates/currency/graph_monetary_mass.html\'">\n      </div>\n\n      <!-- DU -->\n      <div class="item no-padding-xs"\n           ng-include="\'plugins/graph/templates/currency/graph_du.html\'"\n           ng-controller="GpCurrencyDUCtrl"\n           ng-init="setSize(undefined, undefined)">\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/currency/view_stats_lg.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.BLOCKCHAIN.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="padding" >\n\n\n\n    <div class="list" >\n\n      <!-- Monetary mass -->\n      <ng-controller ng-controller="GpCurrencyMonetaryMassCtrl" >\n\n        <div class="center padding" ng-if="loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <div class="item no-padding-xs" ng-if="!loading"\n             ng-include="\'plugins/graph/templates/currency/graph_monetary_mass.html\'"\n             ng-init="setSize(250, 1000)">\n        </div>\n\n        <div ng-if="!loading"\n             class="item item-toggle dark no-border text-right">\n          <span class="" translate>COMMON.BTN_RELATIVE_UNIT</span>\n          <label class="toggle toggle-royal" id="helptip-currency-change-unit">\n            <input type="checkbox" ng-model="formData.useRelative">\n            <div class="track">\n              <div class="handle"></div>\n            </div>\n          </label>\n        </div>\n      </ng-controller>\n\n      <!-- DU -->\n      <ng-controller ng-controller="GpCurrencyDUCtrl" >\n        <div class="item no-padding-xs"\n             ng-if="!loading"\n             ng-include="\'plugins/graph/templates/currency/graph_du.html\'"\n             ng-init="setSize(250, 1000)">\n        </div>\n      </ng-controller>\n\n      <!-- Member count  -->\n      <ng-controller ng-controller="GpCurrencyMembersCountCtrl" >\n      <div class="item no-padding-xs"\n           ng-if="!loading"\n           ng-include="\'plugins/graph/templates/currency/graph_members_count.html\'"\n           ng-init="setSize(250, 1000)">\n      </div>\n\n\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/graph/templates/currency/view_wot_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n\n  <ion-content scroll="true" >\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <ng-include\n      ng-if="!loading"\n      src="\'plugins/graph/templates/currency/graph_members_count.html\'" ></ng-include>\n  </ion-content>\n  </ion-view>\n'),e.put("plugins/graph/templates/docstats/graph.html",'\n  <!-- graphs button bar -->\n  <div class="button-bar-inline "\n       style="top: 33px; margin-top:-33px; position: relative;">\n    <button\n      class="button button-stable button-clear no-padding-xs pull-right"\n      ng-click="showActionsPopover($event)">\n      <i class="icon ion-navicon-round"></i>\n    </button>\n  </div>\n\n  <canvas id="{{::chartIdPrefix}}{{chart.id}}"\n          class="chart-line"\n          height="{{height}}"\n          width="{{width}}"\n          chart-data="chart.data"\n          chart-labels="labels"\n          chart-dataset-override="chart.datasetOverride"\n          chart-options="chart.options"\n          chart-click="onChartClick">\n  </canvas>\n\n  <ng-include src="\'plugins/graph/templates/common/graph_range_bar.html\'"></ng-include>\n'),e.put("plugins/graph/templates/docstats/view_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.DOC_STATS.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="padding" >\n\n    <div class="list" >\n\n      <!-- Doc stat -->\n      <div class="center padding" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </div>\n\n      <div class="item no-padding-xs" ng-if="!loading"\n           ng-repeat="chart in charts"\n           ng-include="\'plugins/graph/templates/docstats/graph.html\'"\n           ng-init="setSize(250, 1000)">\n      </div>\n\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/graph/templates/network/view_network_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'buttons\'">\n  <a class="button button-text button-small ink"\n     ui-sref="app.blockchain_stats" >\n    <i class="icon ion-stats-bars"></i>\n    <span>{{\'NETWORK.VIEW.BTN_GRAPH\'|translate}}</span>\n  </a>\n</ng-if>\n'),e.put("plugins/graph/templates/network/view_peer_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'general\'">\n\n  <a class="item item-icon-left item-icon-right item-text-wrap ink"\n    ui-sref="app.view_peer_stats({pubkey: node.pubkey})">\n    <i class="icon ion-stats-bars"></i>\n    <span translate>GRAPH.PEER.VIEW.BLOCK_COUNT_LABEL</span>\n    <span class="badge"\n          ng-if="!loading"\n          ng-class="{\'badge-stable\': blockCount > 0, \'badge-assertive\': !blockCount}">\n      {{!blockCount ? \'GRAPH.PEER.VIEW.NO_BLOCK\' : \'GRAPH.PEER.VIEW.BLOCK_COUNT\' | translate:{count: blockCount} }}\n    </span>\n    <ion-spinner class="badge" icon="android" ng-if="loading"></ion-spinner>\n    <i class="gray icon ion-ios-arrow-right"></i>\n  </a>\n</ng-if>\n\n'),e.put("plugins/graph/templates/network/view_peer_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.BLOCKCHAIN.TITLE\' | translate}}{{id}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="no-padding">\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list" ng-if="!loading">\n\n      <!--  - - - - TX divider - - - - -->\n      <div class="item item-divider hidden-xs hidden-sm" translate>\n        GRAPH.BLOCKCHAIN.TX_DIVIDER\n      </div>\n\n      <div class="item no-padding-xs"\n           ng-include="\'plugins/graph/templates/blockchain/graph_tx_count.html\'"\n           ng-init="setSize(350, 1000)">\n      </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/graph/templates/synchro/graph.html",'\n  <!-- graphs button bar -->\n  <div class="button-bar-inline "\n       style="top: 33px; margin-top:-33px; position: relative;">\n    <button\n      class="button button-stable button-clear no-padding-xs pull-right"\n      ng-click="showActionsPopover($event)">\n      <i class="icon ion-navicon-round"></i>\n    </button>\n  </div>\n\n  <canvas id="synchro-chart-{{chart.id}}"\n          class="chart-bar"\n          height="{{height}}"\n          width="{{width}}"\n          chart-data="chart.data"\n          chart-labels="labels"\n          chart-dataset-override="chart.datasetOverride"\n          chart-options="chart.options">\n  </canvas>\n\n  <ng-include src="\'plugins/graph/templates/common/graph_range_bar.html\'"></ng-include>\n'),e.put("plugins/graph/templates/synchro/view_stats.html",'<ion-view left-buttons="leftButtons"\n          cache-view="false">\n  <ion-nav-title>\n    {{\'GRAPH.SYNCHRO.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content scroll="true" class="padding" >\n\n    <div class="list" >\n\n      <div class="center padding" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </div>\n\n      <div class="item no-padding-xs" ng-if="!loading"\n           ng-repeat="chart in charts"\n           ng-include="\'plugins/graph/templates/synchro/graph.html\'"\n           ng-init="setSize(250, 1000)">\n      </div>\n\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),
e.put("plugins/es/templates/blockchain/items_blocks.html",'\n<div class="item row row-header done in hidden-xs hidden-sm">\n\n  <!-- compact -->\n  <a class="pull-left gray button button-text button-small no-margin no-padding"\n     ng-class="{\'positive\': compactMode}"\n     ng-click="toggleCompactMode()">\n    <i class="icon ion-navicon"></i>\n    <b class="ion-arrow-down-b" style="position: absolute; top: -8px; left: 2px; font-size: 8px;"></b>\n    <b class="ion-arrow-up-b" style="position: absolute; top: 6px; left: 2px; font-size: 8px;"></b>\n    <span>{{\'BLOCKCHAIN.LOOKUP.BTN_COMPACT\'|translate}}</span>\n  </a>\n\n  <a class="no-padding dark col col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'medianTime\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'medianTime\'"></cs-sort-icon>\n    {{\'BLOCKCHAIN.LOOKUP.HEADER_MEDIAN_TIME\' | translate}}\n  </a>\n  <a class="no-padding dark col col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'issuer\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'issuer\'"></cs-sort-icon>\n    {{\'BLOCKCHAIN.LOOKUP.HEADER_ISSUER\' | translate}}\n  </a>\n  <div class="col col-20">&nbsp;\n  </div>\n  <a class="no-padding dark col col-20 col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'number\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'number\'"></cs-sort-icon>\n    {{\'BLOCKCHAIN.LOOKUP.HEADER_BLOCK\' | translate}}\n  </a>\n</div>\n\n<div class="padding gray" ng-if=":rebind:!search.loading && !search.results.length" translate>\n  COMMON.SEARCH_NO_RESULT\n</div>\n\n<!-- blocks (large view) -->\n<ng-if ng-if=":rebind:!smallscreen">\n  <ng-repeat ng-repeat="block in :rebind:search.results track by block.number"\n             ng-include="!block.empty ? \'templates/blockchain/item_block_lg.html\' : \'templates/blockchain/item_block_empty_lg.html\'">\n  </ng-repeat>\n</ng-if>\n<!-- blocks (small screens) -->\n<ng-if ng-if=":rebind:smallscreen">\n  <ng-repeat ng-repeat="block in :rebind:search.results track by block.number"\n             ng-include="\'templates/blockchain/item_block.html\'">\n  </ng-repeat>\n</ng-if>\n'),e.put("plugins/es/templates/blockchain/lookup.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>BLOCKCHAIN.LOOKUP.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-navicon visible-xs visible-sm"\n            ng-click="toggleCompactMode()">\n      <b class="icon-secondary"\n         ng-class="{\'ion-arrow-down-b\': !compactMode, \'ion-arrow-up-b\': compactMode}"\n         style="top: -12px; left: 11px; font-size: 10px;"></b>\n      <b class="icon-secondary"\n         ng-class="{\'ion-arrow-up-b\': !compactMode,\'ion-arrow-down-b\': compactMode}"\n         style="top: 12px; left: 11px; font-size: 10px;"></b>\n    </button>\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showActionsPopover($event)">\n    </button>\n\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n    <ng-include src="\'plugins/es/templates/blockchain/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/blockchain/lookup_form.html",'<div class="lookupForm">\n\n\n  <div class="item no-padding">\n\n    <div class="button button-small button-text button-stable button-icon-event padding no-padding-right ink"\n         ng-repeat="filter in search.filters" ng-if="filter">\n      <span ng-bind-html="\'BLOCKCHAIN.LOOKUP.TX_SEARCH_FILTER.\'+filter.type|translate:filter"></span>\n      <i class="icon ion-close" ng-click="itemRemove($index)"></i>\n\n    </div>\n\n    <label class="item-input">\n      <i class="icon ion-search placeholder-icon"></i>\n      <input type="text"\n             class="visible-xs visible-sm"\n             placeholder="{{\'BLOCKCHAIN.LOOKUP.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             ng-model-options="{ debounce: 650 }"\n             ng-change="doSearchText()">\n      <input type="text"\n             class="hidden-xs hidden-sm"\n             id="{{searchTextId}}" placeholder="{{\'BLOCKCHAIN.LOOKUP.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             on-return="doSearchText()">\n      <div class="helptip-anchor-center">\n        <a id="helptip-blockchain-search-text"></a>\n      </div>\n\n    </label>\n  </div>\n\n\n  <div class="padding-top padding-xs" style="display: block; height: 60px;">\n    <div class="pull-left">\n      <h4\n        ng-if="search.type==\'last\'" translate>\n        BLOCKCHAIN.LOOKUP.LAST_BLOCKS\n      </h4>\n      <h4 ng-if="search.type==\'text\'">\n        {{\'COMMON.RESULTS_LIST\'|translate}}\n      </h4>\n      <h5 class="dark" ng-if="!search.loading && search.total">\n        <span translate="COMMON.RESULTS_COUNT" translate-values="{count: search.total}"></span>\n        <small class="gray" ng-if=":rebind:search.took && expertMode">\n          - {{:rebind:\'COMMON.EXECUTION_TIME\'|translate: {duration: search.took} }}\n        </small>\n        <small class="gray" ng-if=":rebind:expertMode && search.filters && search.filters.length">\n          - <a ng-click="toggleShowQuery()"\n            ng-if="!showQuery" >\n            Voir la requte\n            <i class="icon ion-arrow-down-b gray"></i>\n          </a>\n          <a ng-click="toggleShowQuery()"\n             ng-if="showQuery" >\n             Masquer la requte\n             <i class="icon ion-arrow-up-b gray"></i>\n          </a>\n        </small>\n      </h5>\n      <h5 class="gray" ng-if="search.loading" >\n        <ion-spinner class="icon ion-spinner-small" icon="android"></ion-spinner>\n        <span translate>COMMON.SEARCHING</span>\n        <br/>\n      </h5>\n    </div>\n\n    <div class=" pull-right hidden-xs hidden-sm">\n      <a ng-if="enableFilter"\n         class="button button-text button-small ink icon ion-clock"\n         ng-class="{\'button-text-positive\': search.type==\'last\'}"\n         ng-click="doSearchLast()">\n        {{\'BLOCKCHAIN.LOOKUP.BTN_LAST\' | translate}}\n      </a>\n\n      <!--<a class="button button-text button-small ink icon icon-help" ng-click="showHelpModal(\'join-salt\')">\n        {{\'BLOCKCHAIN.LOOKUP.HELP\' | translate}}\n      </a>-->\n      &nbsp;\n      <button class="button button-small button-stable ink"\n              ng-click="doSearchText()">\n        {{\'COMMON.BTN_SEARCH\' | translate:search}}\n      </button>\n    </div>\n  </div>\n\n  <div class="item no-border no-padding" ng-if=":rebind:search.filters && search.filters.length && expertMode">\n    <small class="no-padding no-margin" ng-if="showQuery">\n      <span class="gray text-wrap dark">{{:rebind:search.query}}</span>\n    </small>\n  </div>\n\n  <ion-list class="list list-blocks" ng-class="::motion.ionListClass">\n\n    <ng-include src="\'plugins/es/templates/blockchain/items_blocks.html\'"></ng-include>\n\n  </ion-list>\n\n  <ion-infinite-scroll\n    ng-if="search.hasMore"\n    spinner="android"\n    on-infinite="showMore()"\n    distance="1%">\n  </ion-infinite-scroll>\n\n'),e.put("plugins/es/templates/blockchain/lookup_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>BLOCKCHAIN.LOOKUP.POPOVER_FILTER_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- last blocks -->\n      <a ng-if="enableFilter"\n         class="item item-icon-left item-icon-right ink"\n         ng-click="doSearchLast()">\n        <i class="icon ion-clock"></i>\n        {{\'BLOCKCHAIN.LOOKUP.BTN_LAST\' | translate}}\n        <i class="icon ion-ios-checkmark-empty" ng-show="search.type==\'last\'"></i>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/common/edit_pictures.html",'<div class="gallery" ng-controller="ESPicturesEditCtrl as ctrl">\n\n  <!-- Picture list -->\n  <div ng-repeat="picture in pictures"\n       class="item card card-gallery stable-bg"\n       ng-class="{\'in done\': picture.isnew}">\n    <div>\n      <h2 ng-if="picture.title">{{picture.title}}</h2>\n      <img ng-src="{{picture.src}}">\n    </div>\n    <div class="item done in tabs tabs-secondary tabs-icon-left">\n      <a class="tab-item stable-bg assertive" ng-click="removePicture($index)"\n         title="{{\'COMMON.BTN_PICTURE_DELETE\' | translate}}"\n        ><i class="icon ion-trash-a"></i>{{\'COMMON.BTN_PICTURE_DELETE\'|translate}}</a>\n      <a class="tab-item stable-bg dark"\n         ng-click="rotatePicture($index)"\n         title="{{\'COMMON.BTN_PICTURE_ROTATE\' | translate}}"\n        ><i class="icon ion-forward"></i>{{\'COMMON.BTN_PICTURE_ROTATE\'|translate}}</a>\n      <a class="tab-item stable-bg"\n         ng-click="favoritePicture($index)"\n         ng-class="{\'gray\': $index !== 0, \'positive\': $index === 0}"\n         title="{{\'COMMON.BTN_PICTURE_FAVORISE\' | translate}}"\n        ><i class="icon ion-star"></i>{{\'COMMON.BTN_PICTURE_FAVORISE\'|translate}}</a>\n    </div>\n  </div>\n\n  <!-- Add picture button -->\n  <div class="item card card-gallery card-gallery-new text-center padding ink"\n       ng-click="selectNewPicture(\'#pictureFile\')">\n    <i class="ion-image stable" style="font-size:150px"></i>\n    <b class="ion-plus gray" style="font-size:80px; position:absolute; top:25px; right: 5px;"></b>\n    <p translate>COMMON.BTN_ADD_PICTURE</p>\n  </div>\n\n  <input type="file" id="pictureFile" accept="image/*" onchange="angular.element(this).scope().fileChanged(event)"\n         style="visibility:hidden; position:absolute;"/>\n</div>\n\n'),e.put("plugins/es/templates/common/edit_position.html",'<div class="item item-divider" translate>LOCATION.LOCATION_DIVIDER</div>\n\n<!-- address -->\n<ion-item class="item-input item-floating-label item-button-right">\n  <span class="input-label">{{\'LOCATION.ADDRESS\' | translate}}</span>\n  <textarea placeholder="{{\'LOCATION.ADDRESS_HELP\' | translate}}"\n            ng-model="formData.address"\n            ng-model-options="{ debounce: 350 }"\n            rows="4" cols="10">\n              </textarea>\n</ion-item>\n\n<!-- city -->\n<div class="item item-input item-floating-label"\n     ng-class="{\'item-input-error\': form.$submitted && form.geoPoint.$invalid}">\n  <span class="input-label" translate>LOCATION.CITY</span>\n  <input type="text" placeholder="{{\'LOCATION.CITY_HELP\'|translate}}"\n         ng-model="formData.city"\n         ng-model-options="{ updateOn: \'blur\' }"\n         ng-change="onCityChanged()">\n</div>\n<input type="hidden"\n       name="geoPoint"\n       ng-model="formData.geoPoint"\n       required-if="formPosition.enable"\n       geo-point>\n<div class="form-errors"\n     ng-show="form.$submitted && form.geoPoint.$error"\n     ng-messages="form.geoPoint.$error">\n  <div class="form-error" ng-message="required">\n    <span translate="LOCATION.ERROR.REQUIRED_FOR_LOCATION" ng-if="!formData.city"></span>\n    <span translate="LOCATION.ERROR.INVALID_FOR_LOCATION" ng-if="formData.city"></span>\n  </div>\n  <div class="form-error" ng-message="geoPoint">\n    <span translate="LOCATION.ERROR.REQUIRED_FOR_LOCATION" ng-if="!formData.city"></span>\n    <span translate="LOCATION.ERROR.INVALID_FOR_LOCATION" ng-if="formData.city"></span>\n  </div>\n</div>\n\n\n<!-- Position (lat/lon) -->\n<div class="item row item-text-wrap no-padding">\n\n  <div class="col no-padding">\n\n    <!-- appear on map ? -->\n    <ion-checkbox ng-model="formPosition.enable"\n                  ng-change="onUseGeopointChanged()"\n                  class="item item-border-large done in">\n      <div class="item-content">\n        <span translate>LOCATION.USE_GEO_POINT</span>\n        <h4 class="gray" ng-if="formPosition.loading">\n          <ion-spinner class="icon ion-spinner-small" icon="android"></ion-spinner>\n          {{\'LOCATION.LOADING_LOCATION\'|translate}}\n        </h4>\n      </div>\n    </ion-checkbox>\n  </div>\n\n  <div class="col col-10 no-padding" style="min-width: 60px;">\n    <div class="row text-center">\n\n      <a class="button button-stable button-small-padding"\n         title="{{\'LOCATION.BTN_GEOLOC_ADDRESS\'|translate}}"\n         ng-disabled="!formPosition.enable"\n         ng-click="openSearchLocationModal()">\n        <i class=" icon ion-home" style="left: 15px;"></i>\n        <b class=" icon-secondary ion-search" style="top: -9px; left:32px; font-size: 18px;"></b>\n      </a>\n\n    </div>\n  </div>\n</div>\n\n\n<cs-extension-point name="after-position"></cs-extension-point>\n'),e.put("plugins/es/templates/common/edit_socials.html",'<ion-list class="no-padding">\n  <!-- divider -->\n  <div class="item item-divider">\n      <span>\n        {{\'PROFILE.SOCIAL_NETWORKS_DIVIDER\' | translate}}\n      </span>\n    <a class="badge button button-text button-small button-small-padding"\n       ng-class="{\'button-text-positive\': socialData.reorder}"\n       ng-if="formData.socials && formData.socials.length &gt; 1"\n       ng-click="socialData.reorder=!socialData.reorder">\n      <span translate>PROFILE.BTN_REORDER</span>\n    </a>\n  </div>\n</ion-list>\n\n<ion-list show-reorder="socialData.reorder">\n\n  <ion-item class="item-remove-animate item-icon-left "\n            type="no-padding item-text-wrap"\n            ng-if="formData.socials && formData.socials.length"\n            ng-repeat="social in formData.socials | filter:filterFn track by social.url"\n            id="social-{{social.url|formatSlug}}">\n    <i class="icon ion-social-{{social.type}}"\n       ng-class="{\'ion-bookmark\': social.type == \'other\', \'ion-link\': social.type == \'web\', \'ion-email\': social.type == \'email\', \'ion-iphone\': social.type == \'phone\'}"></i>\n    <p ng-if="social.type && social.type != \'web\'">\n      {{social.type}}\n      <i class="ion-locked" ng-if="social.recipient"></i>\n    </p>\n    <h2>\n      <a href="{{social.url}}" ng-if="social.type != \'email\' && social.type != \'phone\'" target="_blank">{{social.url}}</a>\n      <a href="mailto:{{social.url}}" ng-if="social.type == \'email\'">{{social.url}}</a>\n      <a href="tel:{{social.url}}" ng-if="social.type == \'phone\'">{{social.url}}</a>\n      <a class="gray hidden-device"\n         ng-if="!social.recipient && !socialData.reorder"\n         ng-click="formData.socials.splice($index, 1); dirty = true;">\n        &nbsp;<b class="ion ion-trash-a"></b>&nbsp;\n      </a>\n      <a class="gray hidden-device"\n         ng-if="!social.recipient && !socialData.reorder"\n         ng-click="editSocialNetwork($index)">\n        &nbsp;<b class="ion ion-edit"></b>&nbsp;\n      </a>\n    </h2>\n    <ion-option-button class="button-assertive"\n                       ng-if="!social.recipient"\n                       ng-click="formData.socials.splice($index, 1); dirty = true;">\n      {{\'COMMON.BTN_DELETE\'|translate}}\n    </ion-option-button>\n    <ion-option-button class="button-info"\n                       ng-if="!social.recipient"\n                       ng-click="editSocialNetwork($index)">\n      {{\'COMMON.BTN_EDIT\'|translate}}\n    </ion-option-button>\n    <ion-reorder-button class="ion-drag"\n                        on-reorder="reorderSocialNetwork(social, $fromIndex, $toIndex)">\n    </ion-reorder-button>\n  </ion-item>\n</ion-list>\n\n<ion-list class="no-padding">\n  <div class="item item-complex item-input-inset">\n    <label class="item-input-wrapper">\n      <input type="text" style="width:100%" placeholder="{{\'PROFILE.SOCIAL_HELP\'|translate}}"\n             id="socialUrl"\n             on-return="addSocialNetwork($event);"\n             ng-model="socialData.url"/>\n    </label>\n    <button class="button button-small hidden-xs" type="button" ng-click="addSocialNetwork($event)">\n      {{\'COMMON.BTN_ADD\'|translate}}\n    </button>\n    <button class="button button-small button-icon icon ion-android-add visible-xs" type="button"\n            ng-click="addSocialNetwork($event)">\n    </button>\n  </div>\n\n</ion-list>\n'),e.put("plugins/es/templates/common/item_comment.html",'<ng-init ng-init="level = level + 1">\n  <a name="{{::comment.id|formatHash}}"></a>\n\n  <ion-item\n    id="comment-{{::comment.id|formatHash}}"\n    class="card card-comment card-avatar stable-900-bg item-text-wrap no-padding"\n    ng-class="::{\'in done\': comment.isnew}">\n\n    <!-- Parent comment -->\n    <div class="card-header padding-left" ng-if="comment.parent && !hideParent">\n      <h5 class="gray underline">\n        <ng-if ng-if="!comment.parent.issuer">\n          {{\'COMMENTS.REPLY_TO_DELETED_COMMENT\'|translate}}\n        </ng-if>\n        <ng-if ng-if="comment.parent.issuer">\n          <a ng-click="toggleExpandedParent(comment, $index)">\n            {{\'COMMENTS.REPLY_TO_LINK\'|translate}}\n            <ng-if ng-if="::comment.parent.uid">\n              {{::comment.parent.name||comment.parent.uid}}\n            </ng-if>\n            <ng-if ng-if="::!comment.parent.uid">\n              <i class="ion-key"></i>\n              {{::comment.parent.name|| (comment.parent.issuer|formatPubkey) }}\n            </ng-if>\n          </a>\n          <i ng-class="{\'ion-arrow-down-b\': !comment.expandedParent[$index], \'ion-arrow-up-b\': comment.expandedParent[$index]}"></i>\n        </ng-if>\n      </h5>\n      <div class="padding-left" ng-if="comment.expandedParent[$index]">\n        <div class="card card-avatar card-avatar-small stable-bg item-text-wrap no-padding in done">\n          <ng-include ng-init="comment = comment.parent"\n                      src="\'plugins/es/templates/common/item_comment_content.html\'">\n          </ng-include>\n        </div>\n      </div>\n    </div>\n\n    <ng-include src="\'plugins/es/templates/common/item_comment_content.html\'"></ng-include>\n\n    <div class="card-footer gray">\n      <small class="underline">\n        <a ng-click="share($event, comment, $index)">{{comment.creationTime | formatFromNow}}</a>\n\n        <ng-if ng-if="comment.replyCount">\n          | <a class="dark" ng-click="toggleExpandedReplies(comment, $index)">{{\'COMMENTS.REPLY_COUNT\'|translate:comment}}</a>\n          <i ng-class="{\'ion-arrow-down-b\': !comment.showReplies, \'ion-arrow-up-b\': comment.showReplies}"></i>\n        </ng-if>\n      </small>\n\n      <div class="pull-right">\n        <a class="ion-android-share-alt" ng-click="share($event, comment)">\n        </a>\n        <a class="ion-edit" ng-if="isUserPubkey(comment.issuer)" ng-click="edit(comment)">\n        </a>\n        <a class="ion-trash-a" ng-if="isUserPubkey(comment.issuer)" ng-click="remove(comment, $index)">\n        </a>\n        <a class="ion-reply" ng-click="reply(comment)">\n          {{::\'COMMENTS.REPLY\'|translate}}\n        </a>\n      </div>\n    </div>\n  </ion-item>\n\n  <!-- replies   -->\n  <div ng-if="comment.expandedReplies[$index]" class="padding-left card-avatar-small expanded" ng-init="hideParent=true">\n    <ng-include ng-repeat="comment in comment.replies track by comment.id"\n                src="\'plugins/es/templates/common/item_comment.html\'">\n    </ng-include>\n  </div>\n\n</ng-init>\n'),e.put("plugins/es/templates/common/item_comment_content.html",'\n<div class="item item-avatar done in">\n    <span class="avatar"\n          ng-if="::!comment.avatar"\n          ng-class="::{\'avatar-member\': comment.uid, \'avatar-wallet\': !comment.uid}"></span>\n  <span class="avatar"\n        ng-if="::comment.avatar"\n        style="background-image: url({{::comment.avatar.src}})"></span>\n\n    <a class="pull-left"\n       ui-sref="app.wot_identity({pubkey:comment.issuer, uid: comment.uid})">\n      <span class="positive" ng-if="::comment.uid">\n        {{::comment.name||comment.uid}}\n      </span>\n      <span ng-if="::!comment.uid" class="gray">\n        <i class="icon ion-key gray"></i>\n        {{::comment.name || (comment.issuer|formatPubkey)}}\n      </span>\n  </a>&nbsp;\n  <span trust-as-html="comment.html"></span>\n</div>\n'),e.put("plugins/es/templates/common/item_location_search.html",'  <!-- search text -->\n  <div class="item no-padding">\n    <div class="item-input">\n      <i class="icon ion-location placeholder-icon"></i>\n      <input type="text"\n             placeholder="{{(options.location.help||\'LOCATION.SEARCH_HELP\')|translate}}"\n             ng-model-options="{ debounce: 350 }"\n             ng-model="search.location"\n             ng-keydown="onKeydown($event)"\n             ng-change="onLocationChanged()"\n             ng-blur="hideDropdown()">\n    </div>\n  </div>\n\n  <!-- dropdown -->\n  <ul class="item no-padding list dropdown-list" ng-if="locations" scroll="true">\n\n    <div ng-if="!locations.length"\n         class="item padding assertive">\n      <span translate>COMMON.SEARCH_NO_RESULT</span>\n    </div>\n\n    <a ng-repeat="res in locations"\n         class="item item-border-large item-text-wrap  ink done in {{res.selected && \'active\' || \'\'}}"\n         ng-class="::{\'item-divider\': !res.address, \'item-icon-left\': res.address}"\n         ng-click="::res.address ? selectLocation(res) : false">\n\n      <!-- if divider -->\n      <h4 class="text-italic" ng-if="::!res.address" ng-bind-html="res.name"></h4>\n\n      <!-- if divider -->\n      <ng-if ng-if="::res.address">\n\n        <i class="icon ion-location"></i>\n\n        <h3 ng-if="res.address.road">\n          {{::res.address.road}}\n        </h3>\n        <h3>\n          <span ng-if="res.address.postcode">{{::res.address.postcode}}</span>\n          {{::res.address.city||res.address.village}}\n          <span class="gray">| {{::res.address.country}}</span>\n        </h3>\n        <h5 class="gray">\n          {{\'LOCATION.MODAL.POSITION\'|translate:res }}\n        </h5>\n      </ng-if>\n\n    </a>\n\n  </ul>\n'),e.put("plugins/es/templates/common/modal_category.html",'<ion-modal-view>\n  <ion-header-bar class="bar-positive">\n      <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n      <h1 class="title" >{{ (ctrl.title || \'COMMON.CATEGORIES\') | translate}}</h1>\n  </ion-header-bar>\n\n  <ion-content class="categoryModal">\n\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list">\n      <label class="item item-input">\n          <i class="icon ion-search placeholder-icon"></i>\n          <input type="text" placeholder="{{\'COMMON.CATEGORY_SEARCH_HELP\'|translate}}"\n                 ng-model="ctrl.searchText"\n                 ng-model-options="{ debounce: 350 }"\n                 ng-change="ctrl.doSearch()">\n      </label>\n\n\n      <div ng-repeat="cat in categories"\n         class="item item-category item-text-wrap"\n         ng-class="{\'item-divider\': !cat.parent}"\n         ng-click="cat.parent ? closeModal(cat) : false">\n          <h2 ng-bind-html="cat.name"></h2>\n      </div>\n    </div>\n  </ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/common/modal_edit_avatar.html",'<ion-modal-view>\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs visible-sm" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n\n    <h1 class="title" translate>PROFILE.MODAL_AVATAR.TITLE</h1>\n\n    <button class="button button-clear icon-right visible-xs"\n            ng-click="doCrop()"\n            ng-disabled="formData.imageCropStep == 1"\n            ng-if="formData.imageCropStep <= 2">\n      <span translate>COMMON.BTN_NEXT</span>\n      <i class="icon ion-ios-arrow-right"></i>\n    </button>\n    <button class="button button-clear icon-right visible-xs"\n            ng-click="closeModal(formData.result)"\n            ng-if="formData.imageCropStep == 3">\n      <i class="icon ion-android-done"></i>\n    </button>\n  </ion-header-bar>\n\n  <ion-content class="modal-avatar padding">\n\n\n    <div ng-show="formData.imageCropStep == 1">\n      <p translate>PROFILE.MODAL_AVATAR.SELECT_FILE_HELP</p>\n\n      <!-- Add picture button -->\n      <div class="item card text-center padding ink"\n           ng-click="openFileSelector()">\n        <i class="ion-image stable" style="font-size:150px"></i>\n        <b class="ion-plus gray" style="position:relative; font-size:80px; top:-51px; right: 19px;"></b>\n        <p translate>PROFILE.MODAL_AVATAR.BTN_SELECT_FILE</p>\n      </div>\n\n      <input type="file" name="fileInput" accept="image/*" id="fileInput" onchange="angular.element(this).scope().fileChanged(event)"\n             style="visibility:hidden; position:absolute;"/>\n    </div>\n\n    <div ng-show="formData.imageCropStep == 2">\n      <p translate>PROFILE.MODAL_AVATAR.RESIZE_HELP</p>\n\n      <!-- <image-crop\n             data-height="200" //shape\'s height\n             data-width="150" //shape\'s width\n             data-shape="square" //the shape.. square or circle\n             data-step="imageCropStep"//scope variable that will contain the current step of the crop (1. Waiting for source image; 2. Image loaded, waiting for crop; 3. Crop done)\n             src="imgSrc" //scope variable that will be the source image for the crop (may be a Blob or base64 string)\n             data-result-blob="result" //scope variable that will contain the Blob information\n             data-result="resultDataUrl" //scope variable that will contain the image\'s base64 string representation\n             crop="initCrop" //scope variable that must be set to true when the image is ready to be cropped\n             padding="250" //space, in pixels, rounding the shape\n             max-size="1024" //max of the image, in pixels\n           ></image-crop> -->\n\n      <div class="item card text-center padding ink">\n        <image-crop\n          data-height="100"\n          data-width="100"\n          data-shape="circle"\n          data-step="formData.imageCropStep"\n          src="formData.imgSrc"\n          data-result="formData.result"\n          data-result-blob="formData.resultBlob"\n          crop="formData.initCrop"\n          padding="150"\n          max-size="1024">\n        </image-crop>\n      </div>\n    </div>\n\n    <div ng-show="formData.imageCropStep == 3">\n      <p translate>PROFILE.MODAL_AVATAR.RESULT_HELP</p>\n\n      <div class="item card padding hero" style="height: 110px;">\n        <div class="content">\n          <img class="avatar" ng-src="{{formData.result}}" style="height: 88px; width: 88px;">\n        </div>\n      </div>\n    </div>\n\n    <!-- buttons bar -->\n    <div class="padding hidden-xs text-right">\n      <button class="button button-clear button-dark ink" ng-click="closeModal()" type="button" translate>\n        COMMON.BTN_CANCEL\n      </button>\n      <button class="button button-calm icon-right ion-chevron-right ink" ng-click="doCrop()" translate\n              ng-disabled="formData.imageCropStep == 1"\n              ng-if="formData.imageCropStep <= 2">\n        COMMON.BTN_NEXT\n      </button>\n      <button class="button button-positive ink" ng-click="closeModal(formData.result)" translate\n              ng-if="formData.imageCropStep == 3">\n        COMMON.BTN_CONTINUE\n      </button>\n    </div>\n\n  </ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/common/modal_location.html",'<ion-modal-view class="modal-full-height modal-search-location">\n  <ion-header-bar class="bar-positive">\n      <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n      <h1 class="title" translate>LOCATION.MODAL.TITLE</h1>\n  </ion-header-bar>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n\n    <!-- search text -->\n    <div class="item item-input">\n      <i class="icon ion-search placeholder-icon"></i>\n\n      <input type="text"\n             class="visible-xs visible-sm"\n             placeholder="{{\'LOCATION.MODAL.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             ng-model-options="{ debounce: 650 }"\n             ng-change="doSearch()">\n      <input type="text"\n             class="hidden-xs hidden-sm"\n              placeholder="{{\'LOCATION.MODAL.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             on-return="doSearch()">\n    </div>\n\n    <div class="padding-top padding-xs" style="display: block; height: 60px;">\n      <div class="pull-left" ng-if="!search.loading && search.results">\n        <h4 translate>COMMON.RESULTS_LIST</h4>\n      </div>\n\n      <div class="pull-right hidden-xs hidden-sm">\n        <button class="button button-small button-stable ink"\n                ng-click="doSearch()">\n          {{\'COMMON.BTN_SEARCH\' | translate}}\n        </button>\n      </div>\n\n    </div>\n\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div ng-if="!search.loading && search.results && (!search.results.length || !search.results[0].address)"\n         class="assertive padding">\n      <span translate>COMMON.SEARCH_NO_RESULT</span>\n    </div>\n\n    <ion-list ng-if="!search.loading"\n              class="padding-top {{::motion.ionListClass}}">\n      <div ng-repeat="res in search.results"\n         class="item item-border-large  item-text-wrap  ink"\n         ng-class="::{\'item-divider\': !res.address, \'item-icon-left item-icon-right\': res.address}"\n         ng-click="res.address ? closeModal(res) : false">\n\n        <!-- if divider -->\n        <h4 class="text-italic" ng-if="::!res.address" ng-bind-html="res.name"></h4>\n\n        <!-- if divider -->\n        <ng-if ng-if="::res.address">\n\n          <i class="icon ion-location"></i>\n\n          <h2 ng-if="res.address.road">\n            {{::res.address.road}}\n          </h2>\n          <h3>\n            <span ng-if="res.address.postcode">{{::res.address.postcode}}</span>\n            {{::res.address.city||res.address.village}}\n            <span class="gray">| {{::res.address.country}}</span>\n          </h3>\n          <h5 class="gray">\n             {{\'LOCATION.MODAL.POSITION\'|translate:res }}\n          </h5>\n\n          <i class="icon ion-ios-arrow-right"></i>\n        </ng-if>\n\n      </div>\n    </ion-list>\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg padding-left padding-right block" ng-if="license">\n    <div class="pull-right copyright">\n      <span class="dark"> </span>\n      <a class="positive" href="{{license.url}}" target="_blank">{{license.name}}</a>\n    </div>\n  </ion-footer-bar>\n</ion-modal-view>\n'),e.put("plugins/es/templates/common/popover_profile_extend.html",'    <!-- profile -->\n    <button ng-if="enable && auth"\n            class="button button-positive button-small ink"\n            ng-click="showEditUserProfile()">\n      {{\'PROFILE.BTN_EDIT\' | translate}}\n    </button>\n\n'),e.put("plugins/es/templates/common/view_comments.html",'\n<div class="comments" ng-controller="ESCommentsCtrl">\n\n  <div class="item item-divider">\n    <i class="icon ion-chatboxes"></i>\n    <span translate>COMMENTS.DIVIDER</span>\n    <span class="gray" ng-if="comments.total">({{comments.total}})</span>\n  </div>\n\n  <span class="item item-more-comments"\n        ng-if="comments.hasMore">\n    <small><a ng-click="showMore()" translate>COMMENTS.SHOW_MORE_COMMENTS</a></small>\n  </span>\n\n  <div class="padding-right">\n    <ng-repeat ng-repeat="comment in comments.result track by comment.id"\n               ng-include="\'plugins/es/templates/common/item_comment.html\'">\n    </ng-repeat>\n  </div>\n\n  <div class="hidden-xs hidden-sm padding-right">\n    <div class="card card-comment item item-input item-button-right">\n\n      <!-- reply to comment-->\n      <ng-if ng-if="formData.parent">\n        <div class="padding card-header text-right pull-left" translate>COMMENTS.REPLY_TO</div><br/>\n        <div class="padding-left">\n          <div class="card card-avatar card-avatar-small stable-900-bg item-text-wrap no-padding in done">\n            <ng-include ng-if="formData.parent.message"\n                        ng-init="comment = formData.parent"\n                        src="\'plugins/es/templates/common/item_comment_content.html\'">\n            </ng-include>\n            <div class="item dark done in gray" ng-if="!formData.parent.message">\n              {{::\'COMMENTS.DELETED_COMMENT\'|translate}}\n            </div>\n            <div class="card-footer text-right gray">\n              <div class="pull-right">\n                <a class="ion-close" ng-click="removeParentLink()">\n                  {{::\'COMMON.BTN_CANCEL\'|translate}}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </ng-if>\n      <textarea class="padding"\n                style="background-color: transparent;"\n                id="comment-form-textarea"\n                rows="3"\n                placeholder="{{formData.replyTo ? \'COMMENTS.COMMENT_HELP_REPLY_TO\' : \'COMMENTS.COMMENT_HELP\'|translate}}"\n                ng-model="formData.message">\n      </textarea>\n      <div class="card-footer text-right">\n        <button class="button button-small button-small-padding"\n                ng-class="{\'button-positive\': formData.message.length}"\n                ng-if="!formData.id"\n                ng-click="save()" translate>\n          COMMON.BTN_SEND\n        </button>\n        <!-- Edit buttons -->\n        <ng-if ng-if="formData.id">\n          <button class="button button-small button-small-padding"\n                  ng-click="cancel()" translate>\n            COMMON.BTN_CANCEL\n          </button>\n          <button class="button button-small button-small-padding button-positive"\n                  ng-click="save()" translate>\n            COMMON.BTN_SAVE\n          </button>\n        </ng-if>\n      </div>\n    </div>\n  </div>\n\n  <div class="visible-xs visible-sm" style="margin-bottom">\n    <div class="block">\n      <!-- reply to comment-->\n      <div class="item item-input-inset done in" ng-if="formData.parent">\n        <div class="padding text-right pull-left" translate>COMMENTS.REPLY_TO</div><br/>\n        <div class="padding-left expanded">\n          <div class="card card-comment stable-900-bg item-text-wrap no-padding in done">\n            <ng-include ng-if="::formData.parent.message"\n                        ng-init="comment = formData.parent"\n                        src="\'plugins/es/templates/common/item_comment_content.html\'">\n            </ng-include>\n            <span ng-if="::!formData.parent.message" translate>\n              COMMENTS.DELETED_COMMENT\n            </span>\n            <div class="card-footer text-right gray">\n              <div class="pull-right">\n                <a class="ion-close" ng-click="removeParentLink()">\n                  {{::\'COMMON.BTN_CANCEL\'|translate}}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="item item-input-inset">\n        <div class="item-input-wrapper">\n          <input type="text"\n                 id="comment-form-input"\n                 style="width: 100%"\n                 placeholder="{{\'COMMENTS.COMMENT_HELP\'|translate}}"\n                 on-return="save();"\n                 ng-model="formData.message"/>\n          <button class="button button-small button-small-padding button-icon button-dark button-icon gray" ng-click="save()">\n            <i class="icon ion-android-send"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),
e.put("plugins/es/templates/common/view_pictures.html",'<div class="item gallery done in" ng-if="pictures && pictures.length>0" >\n  <div ng-repeat="picture in pictures"\n       class="item card card-gallery">\n    <div class="ink">\n      <h2 ng-if="picture.title">{{::picture.title}}</h2>\n      <img ng-src="{{picture.src}}"/>\n    </div>\n  </div>\n</div>\n'),e.put("plugins/es/templates/currency/tab_blocks_extend.html",'\n<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'nav-buttons\'">\n\n  <button class="button button-icon button-clear icon ion-android-search visible-xs visible-sm"\n          ui-sref="app.blockchain_search">\n  </button>\n</ng-if>\n'),e.put("plugins/es/templates/document/item_document.html",'<ion-item id="doc-{{::doc.id}}"\n          class="item item-document item-icon-left ink {{::ionItemClass}} no-padding-top no-padding-bottom"\n          ng-click="selectDocument($event, doc)">\n\n  <i class="icon ion-document stable" ng-if=":rebind:!doc.avatar"></i>\n  <i class="avatar" ng-if=":rebind:doc.avatar" style="background-image: url(\'{{:rebind:doc.avatar.src}}\')"></i>\n\n  <div class="row no-padding">\n    <div class="col">\n      <h3 class="dark">\n        <i class="ion-locked" ng-if=":rebind:doc.nonce"></i>\n        {{:rebind:doc.time|formatDate}}</h3>\n      <h4 class="gray">{{:rebind:\'DOCUMENT.HASH\'|translate}} {{:rebind:doc.hash|formatHash}}</h4>\n    </div>\n\n    <div class="col">\n      <h3>\n        <a ui-sref="app.wot_identity({pubkey: doc.pubkey, uid: doc.uid})">\n          <span class="gray">\n            <i class="ion-key"></i> {{:rebind:doc.pubkey|formatPubkey}}\n          </span>\n          <span class="positive" ng-if=":rebind:doc.uid">\n            <i class="ion-person"></i> {{:rebind:doc.name||doc.uid}}\n          </span>\n        </a>\n      </h3>\n    </div>\n\n    <div class="col">\n      <a\n        ng-if=":rebind:login && doc.pubkey==$root.walletData.pubkey"\n        ng-click="remove($index)"\n        class="gray pull-right"\n         title="{{\'DOCUMENT.LOOKUP.BTN_REMOVE\'|translate}}">\n        <i class="ion-trash-a"></i>\n      </a>\n      <h3 ng-if=":rebind:doc.recipient">\n          <a ui-sref="app.wot_identity({pubkey: doc.recipient.pubkey, uid: doc.recipient.uid})">\n          <span class="gray">\n            <i class="ion-key"></i> {{:rebind:doc.recipient.pubkey|formatPubkey}}\n          </span>\n            <span class="positive" ng-if=":rebind:doc.recipient.uid">\n            <i class="ion-person"></i> {{:rebind:doc.recipient.name||doc.recipient.uid}}\n          </span>\n          </a>\n      </h3>\n      <h4 class="gray" ng-if=":rebind:doc.read_signature">\n        <i class="ion-checkmark"></i>\n        <span translate>DOCUMENT.LOOKUP.READ</span>\n      </h4>\n\n    </div>\n\n  </div>\n</ion-item>\n'),e.put("plugins/es/templates/document/items_documents.html",'\n<div class="item row row-header done in hidden-xs hidden-sm">\n\n  <a class="no-padding dark col col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'time\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'time\'"></cs-sort-icon>\n    {{\'DOCUMENT.LOOKUP.HEADER_TIME\' | translate}}\n  </a>\n  <a class="no-padding dark col col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'issuer\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'issuer\'"></cs-sort-icon>\n    {{\'DOCUMENT.LOOKUP.HEADER_ISSUER\' | translate}}\n  </a>\n  <a class="no-padding dark col col-header"\n     ng-if=":rebind:expertMode"\n     ng-click="toggleSort(\'recipient\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'recipient\'"></cs-sort-icon>\n    {{\'DOCUMENT.LOOKUP.HEADER_RECIPIENT\' | translate}}\n  </a>\n</div>\n\n<div class="padding gray" ng-if=":rebind:!search.loading && !search.results.length" translate>\n  COMMON.SEARCH_NO_RESULT\n</div>\n\n<!-- for each doc -->\n<ng-repeat ng-repeat="doc in :rebind:search.results track by doc.id"\n           ng-include="\'plugins/es/templates/document/item_document.html\'">\n</ng-repeat>\n'),e.put("plugins/es/templates/document/lookup.html",'<ion-view>\n  <ion-nav-title>\n    <span translate>DOCUMENT.LOOKUP.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showActionsPopover($event)">\n    </button>\n\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <ng-include src="\'plugins/es/templates/document/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/document/lookup_form.html",'<div class="lookupForm">\n\n\n  <div class="item no-padding">\n\n    <!--<div class="button button-small button-text button-stable button-icon-event padding no-padding-right ink"\n         ng-repeat="filter in search.filters" ng-if="filter">\n      <span ng-bind-html="\'DOCUMENT.LOOKUP.TX_SEARCH_FILTER.\'+filter.type|translate:filter"></span>\n      <i class="icon ion-close" ng-click="itemRemove($index)"></i>\n\n    </div>-->\n\n    <label class="item-input">\n      <i class="icon ion-search placeholder-icon"></i>\n      <input type="text"\n             class="visible-xs visible-sm"\n             placeholder="{{\'DOCUMENT.LOOKUP.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             ng-model-options="{ debounce: 650 }"\n             ng-change="doSearchText()">\n      <input type="text"\n             class="hidden-xs hidden-sm"\n             id="{{searchTextId}}" placeholder="{{\'DOCUMENT.LOOKUP.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             on-return="doSearchText()">\n      <div class="helptip-anchor-center">\n        <a id="{{helptipPrefix}}-search-text"></a>\n      </div>\n\n    </label>\n  </div>\n\n\n  <div class="padding-top padding-xs" style="display: block; height: 60px;">\n    <div class="pull-left">\n      <h4\n        ng-if="search.last" translate>\n        DOCUMENT.LOOKUP.LAST_DOCUMENTS\n      </h4>\n      <h4 ng-if="!search.last">\n        {{\'COMMON.RESULTS_LIST\'|translate}}\n      </h4>\n      <h5 class="dark" ng-if="!search.loading && search.total">\n        <span translate="COMMON.RESULTS_COUNT" translate-values="{count: search.total}"></span>\n        <small class="gray" ng-if=":rebind:search.took && expertMode">\n          - {{:rebind:\'COMMON.EXECUTION_TIME\'|translate: {duration: search.took} }}\n        </small>\n        <small class="gray" ng-if=":rebind:expertMode && search.filters && search.filters.length">\n          - <a ng-click="toggleShowQuery()"\n            ng-if="!showQuery" >\n            <span translate>DOCUMENT.LOOKUP.SHOW_QUERY</span>\n            <i class="icon ion-arrow-down-b gray"></i>\n          </a>\n          <a ng-click="toggleShowQuery()"\n             ng-if="showQuery" >\n            <span translate>DOCUMENT.LOOKUP.HIDE_QUERY</span>\n             <i class="icon ion-arrow-up-b gray"></i>\n          </a>\n        </small>\n      </h5>\n      <h5 class="gray" ng-if="search.loading" >\n        <ion-spinner class="icon ion-spinner-small" icon="android"></ion-spinner>\n        <span translate>COMMON.SEARCHING</span>\n        <br/>\n      </h5>\n    </div>\n\n    <div class=" pull-right hidden-xs hidden-sm">\n      <a class="button button-text button-small ink"\n         ng-if="login"\n         ng-click="showActionsPopover($event)">\n        {{\'DOCUMENT.LOOKUP.BTN_ACTIONS\' | translate}}\n        <i class="icon ion-arrow-down-b"></i>\n      </a>\n      &nbsp;\n      <button class="button button-small button-stable ink"\n              ng-click="doSearchText()">\n        {{\'COMMON.BTN_SEARCH\' | translate:search}}\n      </button>\n    </div>\n  </div>\n\n  <div class="item no-border no-padding" ng-if=":rebind:search.filters && search.filters.length && expertMode">\n    <small class="no-padding no-margin" ng-if="showQuery">\n      <span class="gray text-wrap dark">{{:rebind:search.query}}</span>\n    </small>\n  </div>\n\n  <ion-list class="list" ng-class="::motion.ionListClass">\n\n    <ng-include src="\'plugins/es/templates/document/items_documents.html\'"></ng-include>\n\n  </ion-list>\n\n  <ion-infinite-scroll\n    ng-if="search.hasMore"\n    spinner="android"\n    on-infinite="showMore()"\n    distance="1%">\n  </ion-infinite-scroll>\n\n'),e.put("plugins/es/templates/document/lookup_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>DOCUMENT.LOOKUP.POPOVER_ACTIONS.TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n      <a class="item item-icon-left assertive ink"\n         ng-class="{\'gray\': !search.total}"\n         ng-click="removeAll()">\n        <i class="icon ion-trash-a"></i>\n        {{\'DOCUMENT.LOOKUP.POPOVER_ACTIONS.REMOVE_ALL\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/group/edit_group.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <span class="visible-xs" ng-if="id" ng-bind-html="formData.title"></span>\n    <span class="visible-xs" ng-if="!loading && !id" translate>GROUP.EDIT.TITLE_NEW</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n      <button class="button button-icon button-clear visible-xs visible-sm"\n              ng-class="{\'ion-android-send\':!id, \'ion-android-done\': id}"\n              ng-click="save()">\n      </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n      <div class="row no-padding">\n\n        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n        <div class="col">\n          <!-- loading -->\n          <div class="center padding" ng-if="loading">\n            <ion-spinner icon="android"></ion-spinner>\n          </div>\n\n          <form name="recordForm" novalidate="" ng-submit="save()">\n\n            <!--  -->\n            <div class="list"\n                 ng-class="motion.ionListClass"\n                 ng-init="setForm(recordForm)">\n\n              <div class="item hidden-xs">\n                <h1 ng-if="id" ng-bind-html="formData.title"></h1>\n                <h1 ng-if="!id" translate>GROUP.EDIT.TITLE_NEW</h1>\n                <h2 class="balanced" ng-if="!id">\n                  <i class="icon ion-android-people"></i>\n                  <i class="icon ion-android-lock" ng-if="formData.type==\'managed\'"></i>\n                  {{\'GROUP.TYPE.ENUM.\'+formData.type|upper|translate}}\n                </h2>\n              </div>\n              <div class="item" ng-if="id">\n                <h4 class="gray">\n                  <i class="icon ion-calendar"></i>\n                  {{\'COMMON.LAST_MODIFICATION_DATE\'|translate}}&nbsp;{{formData.time | formatDate}}\n                </h4>\n                <div class="badge badge-balanced badge-editable" ng-click="showRecordTypeModal()">\n                  {{\'GROUP.TYPE.ENUM.\'+formData.type|upper|translate}}\n                </div>\n              </div>\n\n              <!-- pictures -->\n              <ng-include src="\'plugins/es/templates/common/edit_pictures.html\'"></ng-include>\n\n              <div class="item item-divider" translate>GROUP.GENERAL_DIVIDER</div>\n\n              <!-- title -->\n              <div class="item item-input item-floating-label"\n                   ng-class="{\'item-input-error\': form.$submitted && form.title.$invalid}">\n                <span class="input-label" translate>GROUP.EDIT.RECORD_TITLE</span>\n                <input type="text" placeholder="{{\'GROUP.EDIT.RECORD_TITLE_HELP\'|translate}}"\n                       name="title"\n                       id="group-record-title"\n                       ng-model="formData.title"\n                       ng-minlength="3"\n                       ng-required="true"/>\n              </div>\n              <div class="form-errors"\n                   ng-if="form.$submitted && form.title.$error"\n                   ng-messages="form.title.$error">\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT"></span>\n                </div>\n              </div>\n\n              <!-- description -->\n              <div class="item item-input item-floating-label">\n                <span class="input-label" translate>GROUP.EDIT.RECORD_DESCRIPTION</span>\n                <textarea placeholder="{{\'GROUP.EDIT.RECORD_DESCRIPTION_HELP\'|translate}}"\n                          ng-model="formData.description"\n                          rows="8" cols="10">\n                </textarea>\n              </div>\n\n              <!-- social networks -->\n              <ng-include src="\'plugins/es/templates/common/edit_socials.html\'" ng-controller="ESSocialsEditCtrl"></ng-include>\n\n            </div>\n\n            <div class="padding hidden-xs hidden-sm text-right">\n              <button class="button button-clear button-dark ink" ng-click="cancel()" type="button" translate>\n                COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-positive button-raised ink" type="submit" ng-if="!id" translate>\n                COMMON.BTN_PUBLISH\n              </button>\n              <button class="button button-assertive button-raised ink" type="submit" ng-if="id" translate>\n                COMMON.BTN_SAVE\n              </button>\n            </div>\n          </form>\n        </div>\n\n        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/group/item_group.html",'<a name="group-{{:rebind:group.hash}}"></a>\n<div id="group-{{:rebind:group.hash}}"\n          class="item item-icon-right item-avatar {{::ionItemClass}} ink"\n          ng-click="select(group)">\n\n  <i class="item-image avatar" style="background-image: url({{::group.avatar.src}})" ng-if="group.avatar"></i>\n  <i class="item-image icon ion-android-people" ng-if="!group.avatar"></i>\n  <i class="item-image icon-secondary ion-android-lock" ng-if="!group.avatar" style="left: 20px; top: 17px; font-size: 19px; color: #d9d9d9;"></i>\n\n  <h2 ng-bind-html=":rebind:group.title"></h2>\n\n  <!-- creation time-->\n  <h4 class="gray pull-right">\n    <i class="ion-clock"></i>\n    {{:rebind:\'GROUP.CREATED_TIME\'|translate: group }}\n  </h4>\n\n  <!-- membersCount -->\n  <h4 class="dark pull-left" ng-if=":rebind:group.membersCount">\n    <i class="dark ion-person"></i>\n    <span class="dark">+{{:rebind:group.membersCount}}</span>\n  </h4>\n\n  <i class="icon ion-ios-arrow-right"></i>\n</div>\n'),e.put("plugins/es/templates/group/items_groups.html",'\n\n<div class="item row row-header hidden-xs hidden-sm" ng-if="expertMode">\n\n  <a class="no-padding dark col col-header"\n     ng-click="toggleSort(\'medianTime\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'medianTime\'"></cs-sort-icon>\n    {{\'GROUP.LOOKUP.HEADER_CREATION_TIME\' | translate}}\n  </a>\n  <a class="no-padding dark col col-header"\n     ng-click="toggleSort(\'issuer\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'issuer\'"></cs-sort-icon>\n    {{\'GROUP.LOOKUP.HEADER_ISSUER\' | translate}}\n  </a>\n  <div class="col col-20">&nbsp;\n  </div>\n  <a class="no-padding dark col col-20 col-header" ng-click="toggleSort(\'number\')">\n    <cs-sort-icon asc="search.asc" sort="search.sort" toggle="\'number\'"></cs-sort-icon>\n    {{\'GROUP.LOOKUP.HEADER_NAME\' | translate}}\n  </a>\n</div>\n\n<div class="padding gray" ng-if=":rebind:!search.loading && !search.results.length" translate>\n  COMMON.SEARCH_NO_RESULT\n</div>\n\n<ng-repeat ng-repeat="group in :rebind:search.results"\n           ng-include="\'plugins/es/templates/group/item_group.html\'">\n</ng-repeat>\n'),e.put("plugins/es/templates/group/list.html",'<ion-list class="{{::motion.ionListClass}}">\n\n  <ion-item\n    ng-repeat="notification in search.results"\n    class="item-border-large item-text-wrap ink item-avatar"\n    ng-class="{\'unread\': !notification.read}"\n    ng-click="select(notification)">\n\n    <i ng-if="!notification.avatar" class="item-image icon {{::notification.avatarIcon}}"></i>\n    <i ng-if="notification.avatar" class="item-image avatar" style="background-image: url({{::notification.avatar.src}})"></i>\n\n    <h3 trust-as-html="notification.message | translate:notification"></h3>\n    <h4>\n      <i class="icon {{notification.icon}}"></i>&thinsp;<span class="dark">{{notification.time|formatFromNow}}</span>\n      <span class="gray">| {{notification.time|formatDate}}</span>\n    </h4>\n  </ion-item>\n</ion-list>\n\n<ion-infinite-scroll\n  ng-if="!search.loading && search.hasMore"\n  spinner="android"\n  on-infinite="showMore()"\n  distance="1%">\n</ion-infinite-scroll>\n'),e.put("plugins/es/templates/group/lookup.html",'<ion-view class="view-group">\n  <ion-nav-title>\n    <span translate>GROUP.LOOKUP.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showActionsPopover($event)">\n    </button>\n\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n    <ng-include src="\'plugins/es/templates/group/lookup_form.html\'"></ng-include>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/group/lookup_form.html",'<div class="lookupForm">\n\n  <button class="button button-small button-positive button-clear ink pull-right padding-right hidden-sm hidden-xs"\n          ng-click="showNewRecordModal()">\n    <i class="icon ion-plus"></i>\n    {{\'GROUP.LOOKUP.BTN_NEW\' | translate}}\n  </button>\n\n  <!-- search text-->\n  <label class="item item-input">\n    <i class="icon ion-search placeholder-icon"></i>\n    <input type="text"\n           class="visible-xs visible-sm"\n           placeholder="{{\'GROUP.LOOKUP.SEARCH_HELP\'|translate}}"\n           ng-model="search.text"\n           ng-model-options="{ debounce: 650 }"\n           ng-change="doSearchText()">\n    <input type="text"\n           class="hidden-xs hidden-sm"\n           id="{{searchTextId}}" placeholder="{{\'GROUP.LOOKUP.SEARCH_HELP\'|translate}}"\n           ng-model="search.text"\n           on-return="doSearchText()">\n    <div class="helptip-anchor-center">\n      <a id="helptip-group-search-text"></a>\n    </div>\n\n  </label>\n\n  <div class="padding-top padding-xs" style="display: block; height: 60px;">\n    <div class="pull-left">\n      <h4\n        ng-if="search.type==\'open\'" translate>\n        GROUP.LOOKUP.OPEN_RESULTS_LIST\n      </h4>\n      <h4\n        ng-if="search.type==\'last\'" translate>\n        GROUP.LOOKUP.LAST_RESULTS_LIST\n      </h4>\n      <h4\n        ng-if="search.type==\'managed\'" translate>\n        GROUP.LOOKUP.MANAGED_RESULTS_LIST\n      </h4>\n      <h4 ng-if="search.type==\'text\'">\n        {{\'COMMON.RESULTS_LIST\'|translate}}\n      </h4>\n      <h5 class="dark" ng-if="!search.loading && search.total">\n        <span translate="COMMON.RESULTS_COUNT" translate-values="{count: search.total}"></span>\n        <small class="gray" ng-if=":rebind:search.took && expertMode">\n          - {{:rebind:\'COMMON.EXECUTION_TIME\'|translate: {duration: search.took} }}\n        </small>\n      </h5>\n      <h5 class="gray" ng-if="search.loading" >\n        <ion-spinner class="icon ion-spinner-small" icon="android"></ion-spinner>\n        <span translate>COMMON.SEARCHING</span>\n        <br/>\n      </h5>\n    </div>\n\n    <div class=" pull-right hidden-xs hidden-sm">\n      <a ng-if="enableFilter"\n         class="button button-text button-small ink icon ion-clock"\n         ng-class="{\'button-text-positive\': search.type==\'last\'}"\n         ng-click="doSearchLast()">\n        {{\'GROUP.LOOKUP.BTN_LAST\' | translate}}\n      </a>\n      &nbsp;\n      <button class="button button-small button-stable ink"\n              ng-click="doSearchText()">\n        {{\'COMMON.BTN_SEARCH\' | translate:search}}\n      </button>\n    </div>\n  </div>\n\n  <div class="list {{::motion.ionListClass}}" ng-if="!$scope.search.loading">\n\n    <ng-include src="\'plugins/es/templates/group/items_groups.html\'"></ng-include>\n\n  </div>\n\n  <ion-infinite-scroll\n    ng-if="search.hasMore"\n    spinner="android"\n    on-infinite="showMore()"\n    distance="1%">\n  </ion-infinite-scroll>\n\n'),e.put("plugins/es/templates/group/lookup_item.html",'\n  <i class="item-image avatar" style="background-image: url({{::item.avatar.src}})" ng-if="item.avatar"></i>\n  <i class="item-image icon ion-android-people" ng-if="!item.avatar"></i>\n  <i class="item-image icon-secondary ion-android-lock" ng-if="!item.avatar" style="left: 20px; top: 17px; font-size: 19px; color: #d9d9d9;"></i>\n\n  <h2 ng-bind-html=":rebind:item.title"></h2>\n\n  <!-- creation time-->\n  <h4 class="gray pull-right">\n    <i class="ion-clock"></i>\n    {{:rebind:\'GROUP.CREATED_TIME\'|translate: item }}\n  </h4>\n\n  <!-- membersCount -->\n  <h4 class="dark pull-left" ng-if=":rebind:item.membersCount">\n    <i class="dark ion-person"></i>\n    <span class="dark">+{{:rebind:item.membersCount}}</span>\n  </h4>\n'),e.put("plugins/es/templates/group/modal_record_type.html",'<ion-modal-view>\n  <ion-header-bar class="bar-positive">\n      <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n      <h1 class="title" translate>GROUP.TYPE.TITLE</h1>\n  </ion-header-bar>\n\n    <ion-content class="lookupForm padding">\n      <h3 translate>GROUP.TYPE.SELECT_TYPE</h3>\n\n    \t<div class="list">\n\n        <!-- open group -->\n        <div class="item item-complex card stable-bg item-icon-left ink"\n             ng-click="closeModal(\'open\')">\n          <div class="item-content item-text-wrap">\n            <i class="item-image icon ion-android-people dark"></i>\n            <h2 translate>GROUP.TYPE.OPEN_GROUP</h2>\n            <h4 class="gray" translate>GROUP.TYPE.OPEN_GROUP_HELP</h4>\n          </div>\n        </div>\n\n        <!-- managed group -->\n        <div class="item item-complex card stable-bg item-icon-left ink"\n             ng-click="closeModal(\'managed\')">\n          <div class="item-content item-text-wrap">\n            <i class="item-image icon ion-android-people dark"></i>\n            <i class="icon-secondary ion-android-lock dark" style="left: 10px; top: -8px;"></i>\n            <h2 translate>GROUP.TYPE.MANAGED_GROUP</h2>\n            <h4 class="gray" translate>GROUP.TYPE.MANAGED_GROUP_HELP</h4>\n          </div>\n        </div>\n\n      </div>\n</ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/group/view_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title"  translate>GROUP.VIEW.MENU_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink"\n         ng-click="showSharePopover($event)">\n        <i class="icon ion-android-share-alt"></i>\n        {{\'COMMON.BTN_SHARE\' | translate}}\n      </a>\n\n      <!--<a class="item item-icon-left assertive ink"\n         ng-if="canEdit"\n         ng-click="delete()">\n        <i class="icon ion-trash-a"></i>\n        {{\'COMMON.BTN_DELETE\' | translate}}\n      </a>-->\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/group/view_record.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-bar button-icon button-clear visible-xs visible-sm" ng-click="edit()" ng-if="canEdit">\n      <i class="icon ion-android-create"></i>\n    </button>\n    <button class="button button-bar button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n    <div class="positive-900-bg hero">\n      <div class="content" ng-if="!loading">\n        <i class="avatar cion-registry-{{formData.type}}" ng-if="!formData.avatar"></i>\n        <i class="avatar" style="background-image: url({{::formData.avatar.src}})" ng-if="formData.avatar"></i>\n        <h3 ng-bind-html="formData.title"></h3>\n        <h4>&nbsp;</h4>\n      </div>\n      <h4 class="content light" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </h4>\n    </div>\n\n    <div class="row no-padding-xs">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n\n      <div class="col list item-text-wrap no-padding-xs" ng-class="::motion.ionListClass">\n\n        <div class="item">\n          <h2 class="gray">\n            <a ng-if="formData.city" ui-sref="app.groups({location:formData.city})">\n              <i class="icon ion-location"></i>\n              <span ng-bind-html="formData.city"></span>\n            </a>\n            <span ng-if="formData.city && formData.type">&nbsp;|&nbsp;</span>\n            <a ng-if="formData.type" ui-sref="app.groups({type:formData.type})">\n              <i class="icon ion-flag"></i>\n              {{\'GROUP.TYPE.ENUM.\'+formData.type|upper|translate}}\n            </a>\n          </h2>\n          <h4>\n            <i class="icon ion-clock" ng-if="formData.time"></i>\n            <span translate>COMMON.SUBMIT_BY</span>\n            <a ng-class="{\'positive\': issuer.uid, \'gray\': !issuer.uid}"\n               ui-sref="app.wot_identity({pubkey:issuer.pubkey, uid: issuer.name||issuer.uid})">\n              <ng-if ng-if="issuer.uid">\n                <i class="icon ion-person"></i>\n                {{::issuer.name||issuer.uid}}\n              </ng-if>\n              <span ng-if="!issuer.uid">\n                <i class="icon ion-key"></i>\n                {{issuer.pubkey|formatPubkey}}\n              </span>\n            </a>\n            <span >\n                {{formData.time|formatFromNow}}\n                <h4 class="gray hidden-xs">|\n                  {{formData.time | formatDate}}\n                </h4>\n              </span>\n          </h4>\n        </div>\n\n        <!-- Buttons bar-->\n        <a id="group-share-anchor-{{id}}"></a>\n        <div class="item large-button-bar hidden-xs hidden-sm">\n          <button class="button button-stable button-small-padding icon ion-android-share-alt"\n                  ng-click="showSharePopover($event)">\n          </button>\n          <button class="button button-calm ink-dark"\n                  ng-if="formData.pubkey && !isUserPubkey(formData.pubkey)"\n                  ng-click="showTransferModal({pubkey:formData.pubkey, uid: formData.title})">\n            {{\'COMMON.BTN_SEND_MONEY\' | translate}}\n          </button>\n          <button class="button button-stable icon-left ink-dark"\n                  ng-if="canEdit"\n                  ng-click="delete()">\n            <i class="icon ion-trash-a assertive"></i>\n            <span class="assertive"> {{\'COMMON.BTN_DELETE\' | translate}}</span>\n          </button>\n          <button class="button button-calm icon-left ion-android-create ink"\n                  ng-if="canEdit"\n                  ng-click="edit()">\n            {{\'COMMON.BTN_EDIT\' | translate}}\n          </button>\n        </div>\n\n        <ion-item>\n            <h2>\n              <span trust-as-html="formData.description"></span>\n            </h2>\n        </ion-item>\n\n        <ion-item>\n          <h4 ng-if="formData.address">\n            <span class="gray" translate>REGISTRY.VIEW.LOCATION</span>\n            <a class="positive" target=\'_blank\' href="https://www.google.fr/maps/?q={{formData.address}},%20{{formData.city}}">\n              <span ng-bind-html="formData.address"></span>\n              <span ng-if="formData.city"> - </span>\n              <span ng-bind-html="formData.city"></span>\n            </a>\n          </h4>\n        </ion-item>\n\n        <!-- Socials networks -->\n        <ng-if ng-if="formData.socials && formData.socials.length>0">\n          <ion-item class="item-icon-left"\n                    type="no-padding item-text-wrap"\n                    ng-repeat="social in formData.socials track by social.url"\n                    id="social-{{social.url|formatSlug}}">\n            <i class="icon ion-social-{{social.type}}"\n               ng-class="{\'ion-bookmark\': social.type == \'other\', \'ion-link\': social.type == \'web\', \'ion-email\': social.type == \'email\'}"></i>\n            <p ng-if="social.type && social.type != \'web\'">{{social.type}}</p>\n            <h2>\n              <a href="{{social.url}}" ng-if="social.type != \'email\'" target="_blank">{{social.url}}</a>\n              <a href="mailto:{{social.url}}" ng-if="social.type == \'email\'">{{social.url}}</a>\n            </h2>\n          </ion-item>\n        </ng-if>\n\n        <div class="lazy-load">\n\n          <!-- pictures -->\n          <ng-include src="\'plugins/es/templates/common/view_pictures.html\'"></ng-include>\n\n\n          <span class="item item-divider" ng-if="formData.pubkey">\n            <span translate>REGISTRY.TECHNICAL_DIVIDER</span>\n          </span>\n\n          <!-- pubkey -->\n          <div class="item item-icon-left item-text-wrap ink"\n                    ng-if="formData.pubkey"\n                    copy-on-click="{{::formData.pubkey}}">\n            <i class="icon ion-key"></i>\n            <span translate>REGISTRY.EDIT.RECORD_PUBKEY</span>\n            <h4 class="dark">{{::formData.pubkey}}</h4>\n          </div>\n\n          <!-- comments -->\n          <ng-include src="\'plugins/es/templates/common/view_comments.html\'"></ng-include>\n        </div>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n  </ion-content>\n\n  <button class="button button-fab button-fab-bottom-right button-assertive icon ion-android-send visible-xs visible-sm"\n          ng-if="formData.pubkey && !isUserPubkey(formData.pubkey)"\n          ng-click="showTransferModal({pubkey: formData.pubkey, uid: formData.title})">\n  </button>\n\n\n</ion-view>\n'),e.put("plugins/es/templates/invitation/list_invitation.html",'<ion-list class="{{::motion.ionListClass}}">\n\n  <ion-item\n    ng-repeat="invitation in search.results"\n    class="item-border-large item-text-wrap item-avatar">\n\n    <i ng-if="::!invitation.avatar" class="item-image icon {{::invitation.avatarIcon}}"></i>\n    <i ng-if="::invitation.avatar" class="item-image avatar" style="background-image: url({{::invitation.avatar.src}})"></i>\n    <h3 trust-as-html="invitation.message | translate:invitation"></h3>\n    <h3 class="dark text-italic" ng-if="invitation.comment">\n      <i class="icon ion-quote"></i>\n      <span ng-bind-html="invitation.comment"></span>\n    </h3>\n    <h4>\n      <i class="icon {{::invitation.icon}}"></i>\n      <span class="dark" ng-if="::invitation.issuer" trust-as-html="\'INVITATION.SUGGESTED_BY\' | translate:invitation"></span>\n      <span class="dark">{{::invitation.time|formatFromNow}}</span>\n      <span class="gray">| {{::invitation.time|formatDate}}</span>\n    </h4>\n    <div class="block text-right">\n      <button class="button button-positive button-small button-small-padding"\n              ng-click="accept(invitation)"\n              ng-if="::invitation.state"\n              translate>{{::(invitation.okText||\'COMMON.BTN_SHOW\') |translate}}</button>\n      <button class="button button-stable button-small button-small-padding"\n              ng-click="delete($index)"\n              translate>INVITATION.BTN_DELETE</button>\n    </div>\n  </ion-item>\n\n</ion-list>\n\n<ion-infinite-scroll\n  ng-if="!search.loading && search.hasMore"\n  spinner="android"\n  on-infinite="showMore()"\n  distance="1%">\n</ion-infinite-scroll>\n'),
e.put("plugins/es/templates/invitation/modal_new_invitation.html",'<ion-modal-view id="transfer" class="modal-full-height">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>INVITATION.NEW.TITLE</h1>\n\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doSend()">\n    </button>\n  </ion-header-bar>\n\n  <ion-content scroll="true">\n      <ng-include src="\'plugins/es/templates/invitation/new_invitation_form.html\'"></ng-include>\n  </ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/invitation/new_invitation_form.html",'  <form name="invitationForm" novalidate=""\n        ng-submit="doSend()">\n\n    <div class="list" ng-init="setForm(invitationForm)">\n\n      <a class="item item-icon-right gray ink"\n         ng-class="{\'disable-pointer-events\': recipients.length, \'item-input-error\': form.$submitted && !recipients.length}"\n         ng-click="showSelectRecipientModal($event)">\n        <span class="gray" translate>INVITATION.NEW.RECIPIENTS</span>\n        <span class="item-note">\n          <span class="hidden-xs" ng-if="!recipients.length" translate>INVITATION.NEW.RECIPIENTS_HELP</span>\n          <ng-repeat ng-repeat="identity in recipients track by identity.id"\n                     class="button button-small button-text button-stable button-icon-event ink"\n                     ng-class="{\'button-text-positive\': identity.selected}">\n            <ng-bind-html ng-bind-html="identity.name||identity.uid||(identity.pubkey|formatPubkey)"></ng-bind-html>\n            <b class="enable-pointer-events ion-close" ng-click="removeRecipient($index, $event)">&nbsp;&nbsp;</b>\n          </ng-repeat>\n        </span>\n\n        <i class="gray icon enable-pointer-events ion-ios-arrow-right"></i>\n      </a>\n      <div class="form-errors"\n           ng-if="form.$submitted && !recipients.length">\n        <div class="form-error">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n      </div>\n\n      <a class="item item-icon-right gray ink"\n         ng-class="{\'disable-pointer-events\': suggestions.length, \'item-input-error\': form.$submitted && !suggestions.length}"\n         ng-click="showSelectSuggestionModal($event)">\n        <span class="gray enable-pointer-events" translate>INVITATION.NEW.SUGGESTION_IDENTITIES</span>\n\n        <span class="item-note">\n          <span class="hidden-xs" ng-if="!suggestions.length" translate>INVITATION.NEW.SUGGESTION_IDENTITIES_HELP</span>\n          <ng-repeat ng-repeat="identity in suggestions track by identity.id"\n               class="button button-small button-text button-stable button-icon-event ink"\n               ng-class="{\'button-text-positive\': identity.selected}">\n            <ng-bind-html ng-bind-html="identity.name||identity.uid||(identity.pubkey|formatPubkey)"></ng-bind-html>\n            <b class="enable-pointer-events ion-close" ng-click="removeSuggestion($index, $event)">&nbsp;&nbsp;</b>\n          </ng-repeat>\n        </span>\n        <i class="gray icon enable-pointer-events ion-ios-arrow-right"></i>\n      </a>\n      <div class="form-errors"\n           ng-if="form.$submitted && !suggestions.length">\n        <div class="form-error">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n      </div>\n\n      <!-- Enable comment ? -->\n      <div class="item item-content item-toggle dark visible-xs visible-sm">\n        <span class="input-label gray">{{\'TRANSFER.BTN_ADD_COMMENT\' | translate}}</span>\n        <label class="toggle toggle-royal">\n          <input type="checkbox" ng-model="formData.useComment">\n          <div class="track">\n            <div class="handle"></div>\n          </div>\n        </label>\n      </div>\n\n      <!-- Comment -->\n      <label class="item item-input item-floating-label hidden-xs hidden-sm"\n             ng-class="{\'item-input-error\': form.$submitted && form.comment.$invalid}">\n        <span class="input-label">{{\'TRANSFER.COMMENT\' | translate}}</span>\n        <textarea placeholder="{{\'TRANSFER.COMMENT_HELP\' | translate}}"\n                  name="comment"\n                  ng-model="formData.comment"\n                  ng-maxlength="255">\n        </textarea>\n      </label>\n      <label class="item item-input item-floating-label visible-xs visible-sm"\n             ng-if="formData.useComment"\n             ng-class="{\'item-input-error\': form.$submitted && form.comment.$invalid}">\n        <span class="input-label">{{\'TRANSFER.COMMENT\' | translate}}</span>\n        <textarea placeholder="{{\'TRANSFER.COMMENT_HELP\' | translate}}"\n                  name="comment"\n                  ng-model="formData.comment"\n                  ng-maxlength="255">\n        </textarea>\n      </label>\n      <div class="form-errors"\n           ng-show="form.$submitted && form.comment.$error"\n           ng-messages="form.comment.$error">\n        <div class="form-error" ng-message="maxlength">\n          <span translate="ERROR.FIELD_TOO_LONG"></span>\n        </div>\n        <div class="form-error" ng-message="pattern">\n          <span translate="ERROR.FIELD_ACCENT"></span>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="padding hidden-xs text-right">\n      <button class="button button-small button-clear button-dark ink"\n              ng-click="cancel()" type="button" translate>COMMON.BTN_CANCEL\n      </button>\n      <button class="button button-small button-positive ink" type="submit">\n        {{\'COMMON.BTN_SEND\' | translate}}\n      </button>\n    </div>\n  </form>\n\n'),e.put("plugins/es/templates/invitation/popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left  ink"\n         ng-class="{\'gray\': !search.results.length, \'assertive\': search.results.length}"\n         ng-click="deleteAll()">\n        <i class="icon ion-trash-a"></i>\n        <span translate>INVITATION.BTN_DELETE_ALL</span>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/invitation/popover_invitation.html",'<ion-popover-view class="fit hidden-xs hidden-sm popover-notification popover-invitation"\n                  ng-controller="PopoverInvitationCtrl">\n  <ion-header-bar class="stable-bg block">\n    <div class="title" translate>INVITATION.NOTIFICATIONS.TITLE</div>\n\n    <div class="pull-right">\n      <a class="positive"\n         ng-click="showNewInvitationModal()"\n         translate>INVITATION.BTN_NEW_INVITATION</a>\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      INVITATION.NO_RESULT\n    </div>\n\n    <ng-include src="\'plugins/es/templates/invitation/list_invitation.html\'"></ng-include>\n\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg block">\n    <!-- settings -->\n    <div class="pull-left">\n      <a class="positive"\n         ui-sref="app.es_settings"\n         ng-click="closePopover()"\n         translate>MENU.SETTINGS</a>\n    </div>\n\n    <!-- show all -->\n    <div class="pull-right">\n      <a class="positive"\n         ui-sref="app.view_invitations"\n         ng-click="closePopover()"\n         translate>COMMON.NOTIFICATIONS.SHOW_ALL</a>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("plugins/es/templates/invitation/view_invitations.html",'<ion-view left-buttons="leftButtons"\n          class="view-invitation">\n  <ion-nav-title>\n    {{\'INVITATION.LIST.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <!-- Buttons bar-->\n    <div class="hidden-xs hidden-sm padding text-center" ng-if="!loading">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink"\n              ng-click="load()">\n      </button>\n\n      <button class="button button-raised button-calm ink"\n              ng-click="showNewInvitationModal()">\n        {{\'INVITATION.BTN_NEW_INVITATION\' | translate}}\n      </button>\n\n      <button class="button button-stable icon-right ink"\n              ng-click="showActionsPopover($event)">\n        &nbsp; <i class="icon ion-android-more-vertical"></i>&nbsp;\n        {{\'COMMON.BTN_OPTIONS\' | translate}}\n      </button>\n    </div>\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col no-padding-xs">\n\n        <div class="center padding" ng-if="search.loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n          INVITATION.NO_RESULT\n        </div>\n\n        <ng-include src="\'plugins/es/templates/invitation/list_invitation.html\'"></ng-include>\n\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n    </div>\n\n  </ion-content>\n\n  <button id="fab-new-invitation"\n          class="button button-fab button-fab-bottom-right button-assertive icon ion-android-send visible-xs visible-sm spin"\n          ng-click="showNewInvitationModal()">\n  </button>\n</ion-view>\n'),e.put("plugins/es/templates/join/modal_join_extend.html",'<ng-if ng-if="enable && extensionPoint === \'select-account-type\'">\n\n  <!-- ornigzation wallet -->\n  <div class="item item-complex card stable-bg item-icon-left item-icon-right ink"\n       ng-class="{ activated: accountTypeMember != null && !accountTypeMember }"\n       ng-click="selectAccountType(\'organization\')">\n    <div class="item-content item-text-wrap">\n      <i class="item-image icon dark cion-registry-association"></i>\n      <h2 translate>ACCOUNT.NEW.ORGANIZATION_ACCOUNT</h2>\n      <h4 class="gray" translate>ACCOUNT.NEW.ORGANIZATION_ACCOUNT_HELP</h4>\n      <i class="icon dark ion-ios-arrow-right"></i>\n    </div>\n  </div>\n\n</ng-if>\n\n<!-- Add a slide -->\n<ng-if ng-if="enable && extensionPoint === \'last-slide\'">\n\n  <!-- STEP 6: organization type -->\n  <ion-slide-page>\n    <ion-content class="has-header" scroll="false">\n\n      <p>TOTO</p>\n\n    </ion-content>\n  </ion-slide-page>\n\n</ng-if>\n'),e.put("plugins/es/templates/message/compose.html",'<ion-view left-buttons="leftButtons"\n          id="composeMessage">\n  <ion-nav-title>\n    <span class="visible-xs visible-sm" nf-if="!isReply" translate>MESSAGE.COMPOSE.TITLE</span>\n    <span class="visible-xs visible-sm" nf-if="isReply" translate>MESSAGE.COMPOSE.TITLE_REPLY</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doSend()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n    <div class="row">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n      <div class="col">\n        <h2 class="hidden-xs hidden-sm">\n          {{\'MESSAGE.COMPOSE.SUB_TITLE\'|translate}}\n        </h2>\n        <h4 class="hidden-xs hidden-sm">&nbsp;</h4>\n        <ng-include src="\'plugins/es/templates/message/compose_form.html\'"></ng-include>\n      </div>\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/message/compose_form.html",'  <form name="messageForm" novalidate="" ng-submit="doSend()">\n\n    <div class="list no-margin"\n         ng-init="setForm(messageForm)">\n\n      <!-- TODO: allow multi dest ?\n           Do IT with a ion-scroll - see https://stackoverflow.com/a/38308803 -->\n      <a class="item item-icon-right gray ink"\n         ng-class="{\'item-input-error\': form.$submitted && !formData.destPub}"\n         ng-click="showWotLookupModal()">\n          <span class="gray" translate>MESSAGE.COMPOSE.TO</span>\n          <span class="badge badge-royal">{{destUid}}{{destPub | formatPubkey}}</span>&nbsp;\n          <i class="gray icon ion-ios-arrow-right"></i>\n      </a>\n      <div class="form-errors"\n           ng-if="form.$submitted && !formData.destPub">\n        <div class="form-error">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n      </div>\n\n      <div class="item item-text-wrap">\n          <span class="gray" translate>TRANSFER.FROM</span>\n          <span class="badge badge-balanced">\n              <ion-spinner icon="android" ng-if="!$root.walletData.pubkey"></ion-spinner>\n              <span ng-if="$root.walletData.pubkey && !$root.walletData.isMember">\n              {{$root.walletData.pubkey| formatPubkey}}&nbsp;&nbsp;\n              </span>\n              <span ng-if="$root.walletData.isMember">\n                {{$root.walletData.name||$root.walletData.uid}}\n              </span>\n          </span>\n      </div>\n\n      <!-- Object -->\n      <div class="item item-input"\n             ng-class="{\'item-input-error\': form.$submitted && form.title.$invalid}">\n        <!--<span class="input-label">{{\'MESSAGE.COMPOSE.OBJECT\' | translate}}</span>-->\n        <input type="text"\n               placeholder="{{\'MESSAGE.COMPOSE.OBJECT_HELP\' | translate}}"\n               name="title"\n               ng-model="formData.title"\n               ng-maxlength="256"\n               required>\n        </input>\n      </div>\n      <div class="form-errors"\n           ng-show="form.$submitted && form.title.$error"\n           ng-messages="form.title.$error">\n        <div class="form-error" ng-message="maxlength">\n          <span translate="MESSAGE.ERROR.MESSAGE_CONTENT_TOO_LONG" translate-values="{maxLength: 256}"></span>\n        </div>\n        <div class="form-error" ng-message="required">\n          <span translate="ERROR.FIELD_REQUIRED"></span>\n        </div>\n      </div>\n\n      <!-- Content -->\n      <div class="item item-input item-floating-label"\n             ng-class="{\'item-input-error\': form.$submitted && form.content.$invalid}">\n        <span class="input-label">{{\'MESSAGE.COMPOSE.MESSAGE\' | translate}}</span>\n        <textarea placeholder="{{\'MESSAGE.COMPOSE.MESSAGE_HELP\' | translate}}"\n                  name="content"\n                  ng-model="formData.content"\n                  rows="8"\n                  ng-maxlength="5000">\n        </textarea>\n      </div>\n      <div class="form-errors"\n           ng-show="form.$submitted && form.content.$error"\n           ng-messages="form.content.$error">\n        <div class="form-error" ng-message="maxlength">\n          <span translate="MESSAGE.ERROR.MESSAGE_CONTENT_TOO_LONG" translate-values="{maxLength: 5000}"></span>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="padding hidden-xs text-right">\n      <button class="button button-clear button-dark ink"\n              ng-click="cancel()" type="button"\n              translate>COMMON.BTN_CANCEL</button>\n      <button class="button button-positive ink" type="submit"\n              translate>TRANSFER.BTN_SEND</button>\n    </div>\n\n    <!-- Encryption info -->\n    <div class="list no-margin">\n      <div class="item item-icon-left item-text-wrap">\n        <i class="icon ion-ios-information-outline positive"></i>\n        <h4 class="positive" translate>MESSAGE.COMPOSE.ENCRYPTED_HELP</h4>\n      </div>\n    </div>\n  </form>\n\n'),e.put("plugins/es/templates/message/list.html",'<div class="padding gray" ng-if="!search.loading && !search.results.length">\n  <span ng-if="search.type==\'last\'">{{ (\'MESSAGE.NO_MESSAGE_\' + type) | upper | translate }}</span>\n  <span ng-if="search.type==\'text\'" translate>COMMON.SEARCH_NO_RESULT</span>\n</div>\n\n<ion-list class="{{::motion.ionListClass}}"\n          can-swipe="$root.device.enable">\n\n  <ion-item\n    class="item item-border-large item-avatar item-icon-right ink"\n    ng-repeat="msg in search.results"\n    ui-sref="app.user_view_message({type:type, id:msg.id})">\n\n    <i ng-if="::!msg.avatar" class="item-image icon" ng-class="{\'ion-person\': msg.uid, \'ion-email\': !msg.uid}"></i>\n    <i ng-if="::msg.avatar" class="item-image avatar" style="background-image: url({{::msg.avatar.src}})"></i>\n\n    <h4 class="pull-right hidden-xs hidden-sm">\n      <span class="dark"><i class="ion-clock"></i> {{::msg.time|formatFromNow}}</span>\n      <span class="gray ">| {{::msg.time|formatDate}}</span>\n    </h4>\n    <h4 class="pull-right visible-xs visible-sm dark"><i class="ion-clock"></i> {{::msg.time|formatFromNow}}</h4>\n    <h3>\n      <a class="positive"\n         ng-if="::msg.name||msg.uid"\n         ui-sref="app.wot_identity({pubkey:msg.issuer, uid:msg.name||msg.uid})">\n        <i class="ion-person"></i>\n        {{::msg.name||msg.uid}}\n      </a>\n      <a class="gray" ng-if="::!msg.name && !msg.uid"\n         ui-sref="app.wot_identity({pubkey:msg.issuer})">\n        <i class="ion-key"></i>\n        {{::msg.issuer|formatPubkey}}\n      </a>\n    </h3>\n    <h2 ng-class="{\'unread\': !msg.read}" ng-bind-html="::msg.title"></h2>\n    <p ng-bind-html="::msg.summary||msg.content"></p>\n    <i class="icon ion-ios-arrow-right "></i>\n    <ion-option-button class="button-stable"\n                       ng-click="showReplyModal($index)"\n                       translate>MESSAGE.BTN_REPLY</ion-option-button>\n    <ion-option-button class="button-assertive"\n                       ng-click="delete($index)"\n                       translate>COMMON.BTN_DELETE</ion-option-button>\n\n  </ion-item>\n</ion-list>\n\n<ion-infinite-scroll\n  ng-if="!search.loading && search.hasMore"\n  icon="ion-loading-c"\n  on-infinite="showMore()"\n  distance="10%">\n</ion-infinite-scroll>\n'),e.put("plugins/es/templates/message/lookup.html",'<ion-view left-buttons="leftButtons" class="view-messages">\n\n  <ion-tabs class="tabs-positive tabs-icon-top">\n\n    <ion-tab title="{{\'MESSAGE.LIST.INBOX\'|translate}}" icon="ion-archive"\n      ui-sref="app.user_message.tab_inbox">\n      <ion-nav-view name="tab_inbox"></ion-nav-view>\n    </ion-tab>\n\n    <ion-tab title="{{\'MESSAGE.LIST.OUTBOX\'|translate}}" icon="ion-paper-airplane"\n             ui-sref="app.user_message.tab_outbox">\n      <ion-nav-view name="tab_outbox"></ion-nav-view>\n    </ion-tab>\n\n  </ion-tabs>\n\n</ion-view>\n'),e.put("plugins/es/templates/message/lookup_lg.html",'<ion-view left-buttons="leftButtons" class="view-messages">\n  <ion-nav-title>\n    <span translate>MESSAGE.LIST.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n      <i class="icon ion-android-more-vertical"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs">\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}"\n                   on-refresh="refresh(true)">\n    </ion-refresher>\n\n    <!-- Buttons bar-->\n    <div class="hidden-xs hidden-sm padding text-center">\n\n      <button class="button button-stable button-small-padding icon ion-loop" ng-click="load()">\n      </button>\n\n      <button class="button button-calm icon ion-compose"\n              ng-click="showNewMessageModal()">\n        {{\'MESSAGE.BTN_COMPOSE\' | translate}}\n      </button>\n\n      <button class="button button-stable button-small-padding icon ion-android-more-vertical"\n              ng-click="showActionsPopover($event)"\n              title="{{\'COMMON.POPOVER_ACTIONS_TITLE\' | translate}}">\n      </button>\n\n\n    </div>\n\n    <!-- button tabs -->\n    <div class="buttons-tabs border-bottom hidden-sm hidden-xs">\n      <div class="pull-right">\n        <div\n          class="button button-tab dark"\n          title="{{\'MESSAGE.LIST.INBOX\' | translate}}"\n          nav-transition="none"\n          ng-class="{\'active\': type==\'inbox\'}"\n          ui-sref="app.user_messages_lg_inbox">\n          <i class="icon ion-archive"></i>\n          {{\'MESSAGE.LIST.INBOX\' | translate}}\n        </div>\n        <a\n          class="button button-tab ink dark"\n          title="{{\'MESSAGE.LIST.OUTBOX\' | translate}}"\n          nav-transition="none"\n          ng-class="{\'active\': type==\'outbox\'}"\n          ui-sref="app.user_messages_lg_outbox">\n          <i class="icon ion-paper-airplane"></i>\n          {{\'MESSAGE.LIST.OUTBOX\' | translate}}\n        </a>\n      </div>\n    </div>\n\n    <div class="item no-padding">\n      <div class="item-input ">\n        <i class="icon ion-search placeholder-icon"></i>\n\n        <input type="text"\n               class="visible-xs visible-sm"\n               placeholder="{{\'MESSAGE.LIST.SEARCH_HELP\'|translate}}"\n               ng-model="search.text"\n               ng-model-options="{ debounce: 650 }"\n               ng-change="doSearch()"\n               on-return="doSearch()"\n               select-on-click>\n        <input type="text"\n               class="hidden-xs hidden-sm"\n               placeholder="{{\'MESSAGE.LIST.SEARCH_HELP\'|translate}}"\n               ng-model="search.text"\n               on-return="doSearch()">\n        <div class="helptip-anchor-center">\n          <a id="helptip-message-search-text"></a>\n        </div>\n      </div>\n    </div>\n\n    <div class="padding-top hidden-xs" style="display: block; height: 60px;">\n\n      <div class="pull-left" ng-if="!search.loading">\n        <ng-if ng-if="search.type==\'last\'">\n          <h4>{{ (\'MESSAGE.LIST.LAST_\' + type) | upper | translate}}</h4>\n          <!--<small class="gray no-padding" ng-if="search.total">{{\'WOT.LOOKUP.NEWCOMERS_COUNT\'|translate:{count: search.total} }}</small>-->\n        </ng-if>\n        <ng-if ng-if="search.type==\'text\'">\n          <h4 translate>COMMON.RESULTS_LIST</h4>\n          <!--<small class="gray no-padding" ng-if="search.total">{{\'WOT.LOOKUP.PENDING_COUNT\'|translate:{count: search.total} }}</small>-->\n        </ng-if>\n      </div>\n\n      <div class="pull-right hidden-xs hidden-sm">\n        <a class="button button-text button-small ink"\n           ng-class="{\'button-text-positive\': search.type==\'last\'}"\n           ng-click="doSearchLast()">\n          <i class="icon ion-clock"></i>\n          {{\'MESSAGE.LIST.BTN_LAST_MESSAGES\' | translate}}\n        </a>\n\n        <!-- Allow extension here -->\n        <cs-extension-point name="filter-buttons"></cs-extension-point>\n        &nbsp;\n        <button class="button button-small button-stable ink"\n                ng-click="doSearch()">\n          {{\'COMMON.BTN_SEARCH\' | translate}}\n        </button>\n\n      </div>\n    </div>\n\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <!-- list -->\n    <ng-include src="\'plugins/es/templates/message/list.html\'"></ng-include>\n\n  </ion-content>\n\n  <button id="fab-add-message-record"\n          class="button button-fab button-fab-bottom-right button-assertive icon ion-compose visible-xs visible-sm spin"\n          ng-click="showNewMessageModal()">\n  </button>\n</ion-view>\n'),e.put("plugins/es/templates/message/lookup_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>MESSAGE.LIST.POPOVER_ACTIONS.TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n      <a class="item item-icon-left ink"\n         ng-class="{\'gray\': (type != \'inbox\' && !messages.length)}"\n         ng-click="markAllAsRead()">\n        <i class="icon ion-android-checkmark-circle"></i>\n        {{\'COMMON.NOTIFICATIONS.MARK_ALL_AS_READ\' | translate}}\n      </a>\n\n      <a class="item item-icon-left assertive ink"\n         ng-class="{\'gray\': !messages.length}"\n         ng-click="deleteAll()">\n        <i class="icon ion-trash-a"></i>\n        {{\'MESSAGE.LIST.POPOVER_ACTIONS.DELETE_ALL\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/message/modal_compose.html",'<ion-modal-view id="composeMessage"\n                class="modal-full-height">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" ng-if="!isReply" translate>MESSAGE.COMPOSE.TITLE</h1>\n    <h1 class="title" ng-if="isReply" translate>MESSAGE.COMPOSE.TITLE_REPLY</h1>\n\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doSend()">\n    </button>\n  </ion-header-bar>\n\n  <ion-content scroll="true">\n      <ng-include src="\'plugins/es/templates/message/compose_form.html\'"></ng-include>\n  </ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/message/popover_message.html",'<ion-popover-view class="fit hidden-xs hidden-sm popover-notification"\n                  ng-controller="PopoverMessageCtrl">\n  <ion-header-bar class="stable-bg block">\n    <div class="title" translate>MESSAGE.NOTIFICATIONS.TITLE</div>\n\n    <div class="pull-right">\n      <a class="positive"\n         ng-click="showNewMessageModal()"\n         translate>MESSAGE.BTN_COMPOSE</a>\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      MESSAGE.NO_MESSAGE_INBOX\n    </div>\n\n    <ion-list>\n\n      <ion-item\n        ng-repeat="notification in search.results"\n        class="item-border-large item-text-wrap ink item-avatar"\n        ng-class="{\'unread\': !notification.read}"\n        ng-click="select(notification)">\n\n        <i ng-if="!notification.avatar" class="item-image icon" ng-class="{\'ion-person\': notification.uid, \'ion-email\': !notification.uid}"></i>\n        <i ng-if="notification.avatar" class="item-image avatar" style="background-image: url({{::notification.avatar.src}})"></i>\n\n        <h3>\n          <span translate>MESSAGE.NOTIFICATIONS.MESSAGE_RECEIVED</span>\n          <span class="positive" ng-if="notification.uid"><i class="ion-person"></i>&thinsp;{{notification.name||notification.uid}}</span>\n          <span class="gray" ng-if="!notification.uid"><i class="ion-key"></i>&thinsp;{{notification.issuer|formatPubkey}}</span>\n        </h3>\n        <h4>\n          <i class="icon ion-archive balanced"></i>&thinsp;<span class="dark">{{notification.time|formatFromNow}}</span>\n          <span class="gray">| {{notification.time|formatDate}}</span>\n        </h4>\n      </ion-item>\n    </ion-list>\n\n    <ion-infinite-scroll\n      ng-if="!search.loading && search.hasMore"\n      spinner="android"\n      on-infinite="showMore()"\n      distance="1%">\n    </ion-infinite-scroll>\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg block">\n\n    <!-- show all -->\n    <div class="pull-right">\n      <a class="positive"\n         ui-sref="app.user_message.tab_inbox"\n         ng-click="closePopover()"\n         translate>COMMON.NOTIFICATIONS.SHOW_ALL</a>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("plugins/es/templates/message/view_message.html",'<ion-view left-buttons="leftButtons" class="view-message">\n  <ion-nav-title>\n    <span translate>MESSAGE.VIEW.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col no-padding">\n\n        <div class="center padding" ng-if="loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <ion-list class="animate-fade-slide-in item-text-wrap">\n\n          <!-- Buttons bar-->\n          <div class="item large-button-bar hidden-xs hidden-sm">\n            <button class="button button-stable icon-left ink-dark"\n                    ng-click="delete()">\n              <i class="icon ion-trash-a assertive"></i>\n              <span class="assertive"> {{\'COMMON.BTN_DELETE\' | translate}}</span>\n            </button>\n            <button class="button button-stable icon ion-reply"\n                    ng-click="showReplyModal()">\n              {{\'MESSAGE.BTN_REPLY\' | translate}}\n            </button>\n            <!--<button class="button button-small button-stable icon ion-reply"\n                    ng-click="showForwardModal()">\n              {{\'MESSAGE.BTN_FORWARD\' | translate}}\n            </button>-->\n          </div>\n\n          <div class="item item-avatar" ng-class="{\'item-avatar\': formData.avatar}">\n\n            <i ng-if="!formData.avatar" class="item-image" ng-class="{\'ion-person\': formData.uid, \'ion-email\': !formData.uid}"></i>\n            <i ng-if="formData.avatar" class="item-image avatar" style="background-image: url({{::formData.avatar.src}})"></i>\n\n            <h1 class="title hidden-xs hidden-sm" ng-bind-html="formData.title"></h1>\n            <h4>\n              {{type == \'inbox\' ? \'MESSAGE.VIEW.SENDER\': \'MESSAGE.VIEW.RECIPIENT\'|translate}}\n              <a class="positive" ui-sref="app.wot_identity({pubkey: (type == \'inbox\') ? formData.issuer : formData.recipient, uid: formData.name||formData.uid})">\n                <span ng-if="formData.uid">\n                  <i class="ion-person"></i>\n                  {{formData.name||formData.uid}}\n                </span>\n                <span ng-if="!formData.uid" class="gray">\n                  <i class="ion-key gray"></i>\n                  {{formData.name||(formData.issuer|formatPubkey)}}\n                </span>\n              </a>\n              <span class="hidden-xs hidden-sm">\n                <i class="ion-clock"></i>\n                {{formData.time|formatFromNow}}\n                <span class="gray">|\n                  {{formData.time | formatDate}}\n                </span>\n              </span>\n            </h4>\n            <h5 class="gray visible-xs visible-sm">\n              <i class="ion-clock"></i> {{formData.time | formatDate}}\n            </h5>\n          </div>\n\n          <!-- content -->\n          <ion-item class="visible-xs visible-sm">\n            <h1 class="title" ng-bind-html="formData.title"></h1>\n          </ion-item>\n\n          <!-- content -->\n          <ion-item>\n            <p ng-bind-html="formData.html">\n            </p>\n\n            <div class="padding gray" ng-if="!formData.content" translate>\n              MESSAGE.VIEW.NO_CONTENT\n            </div>\n          </ion-item>\n\n\n        </ion-list>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n    </div>\n  </ion-content>\n\n  <button id="fab-view-message-reply"\n          class="button button-fab button-fab-bottom-right button-calm icon ion-reply visible-xs visible-sm spin"\n          ng-click="showReplyModal()">\n  </button>\n</ion-view>\n'),e.put("plugins/es/templates/message/view_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left assertive ink"\n         ng-click="delete()">\n        <i class="icon ion-trash-a"></i>\n        {{\'MESSAGE.VIEW.DELETE\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),
e.put("plugins/es/templates/network/view_network_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'buttons\'">\n  <a class="button button-text button-small ink"\n     ui-sref="app.blockchain_search" >\n    <i class="icon ion-android-search"></i>\n    <span>{{\'COMMON.BTN_SEARCH\'|translate}}</span>\n  </a>\n</ng-if>\n'),e.put("plugins/es/templates/notification/list_notification.html",'<ion-list class="{{::motion.ionListClass}}">\n\n  <ion-item\n    ng-repeat="notification in search.results"\n    class="item-border-large item-text-wrap ink item-avatar"\n    ng-class="{\'unread\': !notification.read}"\n    ng-click="select(notification)">\n\n    <i ng-if="!notification.avatar" class="item-image icon {{::notification.avatarIcon}}"></i>\n    <i ng-if="notification.avatar" class="item-image avatar" style="background-image: url({{::notification.avatar.src}})"></i>\n\n    <h3 trust-as-html="notification.message | translate:notification"></h3>\n    <h4>\n      <i class="icon {{notification.icon}}"></i>&thinsp;<span class="dark">{{notification.time|formatFromNow}}</span>\n      <span class="gray">| {{notification.time|formatDate}}</span>\n    </h4>\n  </ion-item>\n</ion-list>\n\n<ion-infinite-scroll\n  ng-if="!search.loading && search.hasMore"\n  spinner="android"\n  on-infinite="showMore()"\n  distance="1%">\n</ion-infinite-scroll>\n'),e.put("plugins/es/templates/notification/popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink"\n         ng-disabled="!search.results.length"\n         ng-click="markAllAsRead()">\n        <i class="icon ion-android-checkmark-circle"></i>\n        {{\'COMMON.NOTIFICATIONS.MARK_ALL_AS_READ\' | translate}}\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/notification/popover_notification.html",'<ion-popover-view class="fit hidden-xs hidden-sm popover-notification"\n                  ng-controller="PopoverNotificationsCtrl">\n  <ion-header-bar class="stable-bg block">\n    <div class="title" translate>COMMON.NOTIFICATIONS.TITLE</div>\n\n    <div class="pull-right">\n      <a class="positive"\n         ng-click="markAllAsRead()"\n         translate>COMMON.NOTIFICATIONS.MARK_ALL_AS_READ</a>\n    </div>\n  </ion-header-bar>\n  <ion-content scroll="true">\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n    <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n      COMMON.NOTIFICATIONS.NO_RESULT\n    </div>\n\n    <ng-include src="\'plugins/es/templates/notification/list_notification.html\'"></ng-include>\n\n  </ion-content>\n\n  <ion-footer-bar class="stable-bg block">\n    <!-- settings -->\n    <div class="pull-left">\n      <a class="positive"\n         ui-sref="app.es_settings"\n         ng-click="closePopover()"\n         translate>MENU.SETTINGS</a>\n    </div>\n\n    <!-- show all -->\n    <div class="pull-right">\n      <a class="positive"\n         ui-sref="app.view_notifications"\n         ng-click="closePopover()"\n         translate>COMMON.NOTIFICATIONS.SHOW_ALL</a>\n    </div>\n  </ion-footer-bar>\n</ion-popover-view>\n'),e.put("plugins/es/templates/notification/view_notifications.html",'<ion-view left-buttons="leftButtons"\n          class="view-notification">\n  <ion-nav-title>\n    {{\'COMMON.NOTIFICATIONS.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n      <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm"\n              ng-click="showActionsPopover($event)">\n      </button>\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}"\n                   on-refresh="refresh(true)">\n    </ion-refresher>\n\n    <!-- Buttons bar-->\n    <div class="hidden-xs hidden-sm padding text-center" >\n\n      <button class="button button-stable button-small-padding icon ion-loop ink"\n              ng-click="load()">\n      </button>\n\n      <button class="button button-raised icon-left ion-checkmark ink"\n              ng-click="markAllAsRead()">\n        {{\'COMMON.NOTIFICATIONS.MARK_ALL_AS_READ\' | translate}}\n      </button>\n    </div>\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col no-padding-xs">\n\n        <div class="center padding" ng-if="search.loading">\n          <ion-spinner icon="android"></ion-spinner>\n        </div>\n\n        <div class="padding gray" ng-if="!search.loading && !search.results.length" translate>\n          COMMON.NOTIFICATIONS.NO_RESULT\n        </div>\n\n        <ng-include src="\'plugins/es/templates/notification/list_notification.html\'"></ng-include>\n\n\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/es/templates/registry/edit_record.html",'<ion-view left-buttons="leftButtons" class="view-page">\n  <ion-nav-title>\n    <span class="visible-xs" ng-if="id" ng-bind-html="formData.title"></span>\n    <span class="visible-xs" ng-if="!loading && !id" translate>REGISTRY.EDIT.TITLE_NEW</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n      <button class="button button-icon button-clear visible-xs visible-sm"\n              ng-class="{\'ion-android-send\':!id, \'ion-android-done\': id}"\n              ng-click="save()">\n      </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n\n    <div class="hero">\n      <div class="content">\n        <i class="avatar"\n           ng-class="avatarClass"\n           ng-style="avatarStyle">\n          <button class="button button-positive button-large button-clear flat icon ion-camera visible-xs visible-sm"\n                  style="display: inline-block;"\n                  ng-click="showAvatarModal()"></button>\n          <button ng-if="avatar.src"\n                  class="button button-positive button-large button-clear flat  visible-xs visible-sm"\n                  style="display: inline-block; left: 85px; bottom:15px;"\n                  ng-click="rotateAvatar()">\n            <i class="icon-secondary ion-image" style="left: 24px; top: 3px; font-size: 24px;"></i>\n            <i class="icon-secondary ion-forward" style="left: 26px; top: -13px;"></i>\n          </button>\n          <button class="button button-positive button-large button-clear icon ion-camera hidden-xs hidden-sm"\n                  ng-click="showAvatarModal()"></button>\n        </i>\n        <h3 class="dark">\n          <span ng-if="!loading && formData.title">{{formData.title}}</span>\n          <span ng-if="!loading && !id && !formData.title" translate>REGISTRY.EDIT.TITLE_NEW</span>\n        </h3>\n        <h4 class="dark">\n          <ion-spinner ng-if="loading" icon="android"></ion-spinner>\n        </h4>\n      </div>\n    </div>\n\n      <div class="row no-padding">\n\n        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n        <div class="col no-padding-xs">\n\n          <form name="recordForm" novalidate="" ng-submit="save()">\n            <div class="list {{::motion.ionListClass}}"\n                 ng-init="setForm(recordForm)">\n              <div class="item" ng-if="id">\n                <h4 class="gray">\n                  <i class="icon ion-calendar"></i>\n                  {{\'COMMON.LAST_MODIFICATION_DATE\'|translate}}&nbsp;{{formData.time | formatDate}}\n                </h4>\n                <div class="badge badge-balanced badge-editable" ng-click="showRecordTypeModal()">\n                  {{\'REGISTRY.TYPE.ENUM.\'+formData.type|upper|translate}}\n                </div>\n              </div>\n\n              <!-- pictures -->\n              <ng-include src="\'plugins/es/templates/common/edit_pictures.html\'"></ng-include>\n\n              <div class="item item-divider" translate>REGISTRY.GENERAL_DIVIDER</div>\n\n              <!-- title -->\n              <div class="item item-input item-floating-label"\n                   ng-class="{\'item-input-error\': form.$submitted && form.title.$invalid}">\n                <span class="input-label" translate>REGISTRY.EDIT.RECORD_TITLE</span>\n                <input type="text" placeholder="{{\'REGISTRY.EDIT.RECORD_TITLE_HELP\'|translate}}"\n                       name="title"\n                       id="registry-record-title"\n                       ng-model="formData.title"\n                       ng-minlength="3"\n                       ng-required="true"/>\n              </div>\n              <div class="form-errors"\n                   ng-if="form.$submitted && form.title.$error"\n                   ng-messages="form.title.$error">\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n                <div class="form-error" ng-message="minlength">\n                  <span translate="ERROR.FIELD_TOO_SHORT"></span>\n                </div>\n              </div>\n\n              <!-- description -->\n              <div class="item item-input item-floating-label">\n                <span class="input-label" translate>REGISTRY.EDIT.RECORD_DESCRIPTION</span>\n                <textarea placeholder="{{\'REGISTRY.EDIT.RECORD_DESCRIPTION_HELP\'|translate}}"\n                          ng-model="formData.description"\n                          rows="8" cols="10">\n                </textarea>\n              </div>\n\n              <!-- category -->\n              <div class="item item-icon-right ink"\n                   ng-if="loading || formData.type===\'company\' || formData.type===\'shop\'"\n                   ng-class="{\'item-input-error\': form.$submitted && !formData.category.id, \'done in\': !loading}"\n                   ng-click="showCategoryModal()">\n                <span translate>REGISTRY.CATEGORY</span>\n                <span class="badge badge-royal">{{formData.category.name | formatCategory}}</span>&nbsp;\n                <i class="gray icon ion-ios-arrow-right"></i>\n              </div>\n              <input type="hidden" name="category" ng-model="formData.category.id" required-if="formData.type==\'company\' || formData.type==\'shop\'">\n              <div class="form-errors"\n                   ng-if="form.$submitted && form.category.$error"\n                   ng-messages="form.category.$error">\n                <div class="form-error" ng-message="required">\n                  <span translate="ERROR.FIELD_REQUIRED"></span>\n                </div>\n              </div>\n\n              <!-- position -->\n              <ng-include src="\'plugins/es/templates/common/edit_position.html\'"></ng-include>\n\n              <!-- social networks -->\n              <ng-include src="\'plugins/es/templates/common/edit_socials.html\'" ng-controller="ESSocialsEditCtrl"></ng-include>\n\n              <div class="item item-divider" translate>REGISTRY.TECHNICAL_DIVIDER</div>\n\n              <!-- pubkey  -->\n              <div class="item item-input item-floating-label">\n                <span class="input-label" translate>REGISTRY.EDIT.RECORD_PUBKEY</span>\n                <input type="text" placeholder="{{\'REGISTRY.EDIT.RECORD_PUBKEY_HELP\'|translate}}" ng-model="formData.pubkey"/>\n              </div>\n\n            </div>\n\n            <div class="padding hidden-xs hidden-sm text-right">\n              <button class="button button-clear button-dark ink" ng-click="cancel()" type="button" translate>\n                COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-positive button-raised ink" type="submit" ng-if="!id" translate>\n                COMMON.BTN_PUBLISH\n              </button>\n              <button class="button button-assertive button-raised ink" type="submit" ng-if="id" translate>\n                COMMON.BTN_SAVE\n              </button>\n            </div>\n          </form>\n        </div>\n\n        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/registry/lookup_form.html",'\n<!-- selected location\n<a\n     class="button button-small button-text button-stable button-icon-event stable-900-bg"\n     style="margin-right: 10px;">\n  &nbsp;<i class="icon ion-location"></i>\n  {{search.location}}\n  <i class="icon ion-close" ng-click="removeLocation2()">&nbsp;&nbsp;</i>\n</a>-->\n<form ng-submit="doSearch()"/>\n  <div class="item no-padding">\n\n    <div class="item-input">\n      <i class="icon ion-search placeholder-icon"></i>\n      <input type="text"\n             class="visible-xs visible-sm"\n             placeholder="{{\'REGISTRY.SEARCH.SEARCH_HELP\'|translate}}"\n             ng-model="search.text"\n             ng-model-options="{ debounce: 650 }"\n             ng-change="doSearch()"\n             on-return="doSearchText()"\n             select-on-click>\n      <input type="text"\n             class="hidden-xs hidden-sm"\n             placeholder="{{\'REGISTRY.SEARCH.SEARCH_HELP\'|translate}}"\n             id="registrySearchText"\n             ng-model="search.text"\n             on-return="doSearchText()">\n    </div>\n\n    <div class="row double-padding-x item-text-wrap animate-show-hide ng-hide hidden-xs hidden-sm"\n         ng-show="entered"\n         ng-if="search.geoPoint || search.type || search.category" >\n\n      <!-- selected location -->\n      <div ng-show="search.geoPoint"\n           class="button button-small button-text button-stable button-icon-event stable-900-bg"\n           style="margin-right: 10px;">\n        &nbsp;<i class="icon ion-location"></i>\n        <span ng-bind-html="search.location"></span>\n        <i class="icon ion-close" ng-click="removeLocation()">&nbsp;&nbsp;</i>\n      </div>\n\n      <!-- selected type -->\n      <div ng-show="search.type"\n           class="button button-small button-text button-stable button-icon-event stable-900-bg"\n           style="margin-right: 10px;" >\n        &nbsp;<i class="icon cion-page-{{search.type}}"></i>\n        <span>{{\'REGISTRY.TYPE.ENUM.\'+search.type|uppercase|translate}}</span>\n        <i class="icon ion-close" ng-click="removeType()">&nbsp;&nbsp;</i>\n      </div>\n\n      <!-- selected category -->\n      <div ng-show="search.category.name"\n           class="button button-small button-text button-stable button-icon-event stable-900-bg"\n           style="margin-right: 10px;">\n        &nbsp;<i class="icon ion-flag"></i>\n        <span>{{search.category.name|truncText:40}}</span>\n        <i class="icon ion-close" ng-click="removeCategory()">&nbsp;&nbsp;</i>\n      </div>\n    </div>\n  </div>\n\n  <!-- location -->\n  <ng-include src="::\'plugins/es/templates/common/item_location_search.html\'"\n              ng-if="entered && options.location.show && (!search.geoPoint || smallscreen)"\n              ng-controller="ESSearchPositionItemCtrl"></ng-include>\n\n  <!-- options -->\n  <ng-include src="::\'plugins/es/templates/registry/lookup_form_options.html\'"></ng-include>\n\n</form>\n\n<div class="buttons-block padding-top hidden-xs hidden-sm">\n\n  <div class="pull-left" >\n\n    <a class="button button-text button-small ink "\n       ng-class="{\'button-text-stable\': !search.advanced, \'button-text-positive\': search.advanced}"\n       ng-click="search.advanced=!search.advanced">\n      {{\'REGISTRY.SEARCH.BTN_ADVANCED_SEARCH\' | translate}}\n      <i class="icon" ng-class="{\'ion-arrow-down-b\': !search.advanced, \'ion-arrow-up-b\': search.advanced}"></i>\n    </a>\n\n    &nbsp;\n\n  </div>\n\n  <div class="pull-right">\n\n    <a ng-if="enableFilter"\n       class="button button-text button-small ink"\n       ng-class="{\'button-text-positive\': search.lastRecords}"\n       ng-click="doGetLastRecords()">\n      <i class="icon ion-clock"></i>\n      {{\'REGISTRY.SEARCH.BTN_LAST_RECORDS\' | translate}}\n    </a>\n    &nbsp;\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="filter-buttons"></cs-extension-point>\n\n    &nbsp;\n\n    <button class="button button-small button-stable ink"\n            ng-click="doSearchText()">\n      {{\'COMMON.BTN_SEARCH\' | translate}}\n    </button>\n  </div>\n</div>\n\n\n<div class="padding-xs" style="display: block; height: 60px;">\n  <div class="pull-left ng-hide" ng-show="!search.loading && search.results">\n    <ng-if ng-if="search.lastRecords">\n      <h4  translate>REGISTRY.SEARCH.LAST_RECORDS</h4>\n      <small class="gray no-padding" ng-if="search.total">\n        <span ng-if="search.geoPoint && search.total">{{\'REGISTRY.SEARCH.LAST_RECORD_COUNT_LOCATION\'|translate:{count: search.total, location: search.location} }}</span>\n        <span ng-if="!search.geoPoint && search.total">{{\'REGISTRY.SEARCH.LAST_RECORD_COUNT\'|translate:{count: search.total} }}</span>\n      </small>\n    </ng-if>\n\n    <ng-if ng-if="!search.lastRecords">\n      <h4 translate>COMMON.RESULTS_LIST</h4>\n      <small class="gray no-padding" ng-if="search.total">\n        <span ng-if="search.geoPoint && search.total">{{\'REGISTRY.SEARCH.RESULT_COUNT_LOCATION\'|translate:{count: search.total, location: search.location} }}</span>\n        <span ng-if="!search.geoPoint && search.total">{{\'REGISTRY.SEARCH.RESULT_COUNT\'|translate:{count: search.total} }}</span>\n      </small>\n    </ng-if>\n\n  </div>\n</div>\n\n<div class="center padding" ng-if="search.loading">\n  <ion-spinner icon="android"></ion-spinner>\n</div>\n\n<div class="padding assertive" ng-if="!search.loading && search.results.length===0" translate>\n  COMMON.SEARCH_NO_RESULT\n</div>\n'),e.put("plugins/es/templates/registry/lookup_form_options.html",'\n  <!-- removeIf(device) -->\n  <div class="item item-icon-left item-icon-right item-input stable-bg"\n       remove-if="device"\n       ng-click="showRecordTypeModal($event)"\n       ng-if="!smallscreen && search.advanced && !search.type">\n    <b class="icon-secondary ion-help gray" style="left:10px; top: -8px;"></b>\n    <b class="icon-secondary cion-page-association gray" style="left:14px; top: 2px;"></b>\n    <b class="icon-secondary cion-page-company gray" style="left:28px; top: -6px;"></b>\n\n    <span class="input-label item-icon-left-padding" translate>REGISTRY.SEARCH.TYPE</span>\n    <i class="gray icon ion-ios-arrow-right"></i>\n  </div>\n\n  <div class="item item-icon-left item-icon-right item-input stable-bg"\n       remove-if="device"\n       ng-click="showCategoryModal($event)"\n       ng-if="!smallscreen && search.advanced && !search.category">\n    <i class="icon ion-flag gray"></i>\n    <span class="input-label item-icon-left-padding" translate>REGISTRY.CATEGORY</span>\n    <i class="gray icon ion-ios-arrow-right"></i>\n  </div>\n\n  <div class="item item-icon-left item-input item-select stable-bg" ng-if="search.advanced && options.location.show">\n    <i class="icon ion-arrow-resize gray"></i>\n    <span class="input-label item-icon-left-padding " translate>LOCATION.DISTANCE</span>\n    <label>\n      <select ng-model="search.geoDistance" class="col-border-left"\n              ng-options="i as (geoDistanceLabels[i].labelKey | translate:geoDistanceLabels[i].labelParams ) for i in geoDistances track by i">\n      </select>\n    </label>\n  </div>\n'),e.put("plugins/es/templates/registry/lookup_lg.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    {{\'REGISTRY.SEARCH.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-content class="lookupForm padding no-padding-xs">\n\n    <ng-include src="::\'plugins/es/templates/wot/lookup_lg_extend.html\'" ng-init="showNewPageButton=true;"></ng-include>\n\n    <ng-include src="::\'plugins/es/templates/registry/lookup_form.html\'"></ng-include>\n\n    <ng-include src="::\'plugins/es/templates/registry/lookup_list_lg.html\'"></ng-include>\n  </ion-content>\n\n  <button id="fab-add-registry-record"\n          class="button button-fab button-fab-bottom-right button-assertive icon ion-plus hidden-md hidden-lg spin"\n          ng-click="showNewPageModal()">\n  </button>\n</ion-view>\n'),e.put("plugins/es/templates/registry/lookup_list.html",'\n<ion-list class="{{::motion.ionListClass}}"\n          ng-if="!search.loading && search.results && search.results.length > 0">\n\n  <ion-item ng-repeat="item in search.results"\n            class="item item-border-large item-avatar item-icon-right ink"\n            ng-class="::{\'item-icon-left\': !smallscreen}"\n            ui-sref="app.view_page({id: item.id, title: item.urlTitle})">\n\n    <i ng-if="::!item.avatar" class="item-image icon cion-page-{{::item.type}}"></i>\n    <i ng-if="::item.avatar" class="item-image avatar" style="background-image: url({{::item.avatar.src}})"></i>\n\n    <h2 ng-bind-html="::item.title"></h2>\n    <h4>\n      <span class="dark" ng-if="::item.city">\n        <b class="ion-location"></b>\n        <span ng-bind-html="::item.city"></span>\n      </span>\n      <span class="gray" ng-if="::item.distance">\n        ({{::item.distance|formatDecimal}} {{::geoUnit}})\n      </span>\n    </h4>\n    <h4 class="gray" ng-if="::item.time && search.lastRecords">\n      <i class="ion-clock" ></i>\n      {{::item.time | formatFromNow}}\n    </h4>\n    <h4 class="gray" ng-if="!search.lastRecords">\n      <i class="cion-page-{{::item.type}}"></i>\n      <span ng-if="item.category">{{::item.category.name}}</span>\n      <span ng-if="!item.category">{{::\'REGISTRY.TYPE.ENUM.\'+item.type|uppercase|translate}}</span>\n    </h4>\n    <i class="icon ion-ios-arrow-right "></i>\n  </ion-item>\n</ion-list>\n'),e.put("plugins/es/templates/registry/lookup_list_lg.html",'\n\n<div class="list {{::motion.ionListClass}}"\n          ng-if="!search.loading && search.results && search.results.length > 0">\n\n  <a ng-repeat="item in search.results"\n     class="item item-record item-border-large ink padding-xs"\n     ui-sref="app.view_page({id: item.id, title: item.urlTitle})">\n\n    <div class="row row-record">\n      <div class="col item-text-wrap item-avatar-left-padding"\n           ng-class="::{\'item-avatar\': item.avatar || item.type}">\n        <i class="item-image icon cion-page-{{::item.type}}" ng-if="::!item.avatar"></i>\n        <i class="item-image avatar" style="background-image: url({{::item.avatar.src}})" ng-if="::item.avatar"></i>\n        <h2 ng-bind-html="::item.title"></h2>\n        <h4>\n          <span class="dark" ng-if="::item.city">\n            <b class="ion-location"></b>\n            <span ng-bind-html="::item.city"></span>\n          </span>\n          <span class="gray" ng-if="::item.distance">\n            ({{::item.distance|formatDecimal}} {{::geoUnit}})\n          </span>\n        </h4>\n        <h4>\n          <span class="gray" ng-if="::item.time && search.lastRecords">\n            <b class="ion-clock" ></b>\n            {{::item.time | formatFromNow}}\n          </span>\n          <span ng-if="::item.tags" class="dark">\n           <ng-repeat ng-repeat="tag in ::item.tags">\n             #<ng-bind-html ng-bind-html="::tag"></ng-bind-html>\n           </ng-repeat>\n          </span>\n        </h4>\n        <span  ng-if="::item.picturesCount > 1"\n               class="badge badge-balanced badge-picture-count">{{::item.picturesCount}}&nbsp;<i class="icon ion-camera"></i></span>\n      </div>\n      <div class="col col-20 hidden-xs hidden-sm">\n        <h3 class="gray">\n          <ng-if ng-if="::item.category">{{::item.category.name}}</ng-if>\n          <ng-if ng-if="::!item.category">{{::\'REGISTRY.TYPE.ENUM.\'+item.type|uppercase|translate}}</ng-if>\n        </h3>\n      </div>\n      <div class="col hidden-xs">\n        <h4 class="text-wrap">\n          <span class="visible-sm">\n            <b class="ion-flag" ></b>\n            <ng-if ng-if="::item.category">{{::item.category.name|truncText:50}}</ng-if>\n            <ng-if ng-if="::!item.category">{{::\'REGISTRY.TYPE.ENUM.\'+item.type|uppercase|translate}}</ng-if>\n          </span>\n          <span class="gray text-italic" ng-if="::item.description">\n            <b class="ion-quote" ></b>\n            <span ng-bind-html="::item.description|truncText:500" ng-if="::item.description"></span>\n          </span>\n        </h4>\n      </div>\n    </div>\n\n  </a>\n</div>\n\n<ion-infinite-scroll\n  ng-if="!search.loading && search.hasMore"\n  spinner="android"\n  on-infinite="showMore()"\n  distance="10%">\n</ion-infinite-scroll>\n'),e.put("plugins/es/templates/registry/lookup_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- new page -->\n      <a class="item item-icon-left ink"\n         ng-click="showNewPageModal();">\n        <i class="icon ion-plus"></i>\n        <span translate>REGISTRY.BTN_NEW</span>\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/registry/lookup_popover_filters.html",'<ion-popover-view class="fit has-header ">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_FILTER_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- last record -->\n      <a class="item item-icon-left ink"\n         ng-click="doGetLastRecords()">\n        <i class="icon ion-clock"></i>\n        {{\'REGISTRY.SEARCH.BTN_LAST_RECORDS\' | translate}}\n      </a>\n\n      <!-- advanced options -->\n      <a class="item item-icon-left ink"\n         ng-click="toggleAdvanced();">\n        <i class="icon ion-android-checkbox-outline-blank" ng-show="!search.advanced"></i>\n        <i class="icon ion-android-checkbox-outline" ng-show="search.advanced"></i>\n        <span translate>REGISTRY.SEARCH.POPOVER_FILTERS.BTN_ADVANCED_SEARCH</span>\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/registry/modal_record_type.html",'<ion-modal-view>\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>{{getParameters().title||\'REGISTRY.TYPE.TITLE\'|translate}}</h1>\n  </ion-header-bar>\n\n  <ion-content class="lookupForm">\n    <div class="list padding">\n      <h3 translate>REGISTRY.TYPE.SELECT_TYPE</h3>\n      <button class="button button-block button-stable icon-left cion-page-shop"\n              ng-click="closeModal(\'shop\')"\n              translate>REGISTRY.TYPE.ENUM.SHOP</button>\n\n      <button class="button button-block button-stable icon-left cion-page-association"\n              ng-click="closeModal(\'association\')"\n              translate>REGISTRY.TYPE.ENUM.ASSOCIATION</button>\n\n      <button class="button button-block button-stable icon-left cion-page-company"\n              ng-click="closeModal(\'company\')"\n              translate>REGISTRY.TYPE.ENUM.COMPANY</button>\n\n      <button class="button button-block button-stable icon-left cion-page-institution"\n              ng-click="closeModal(\'institution\')"\n              translate>REGISTRY.TYPE.ENUM.INSTITUTION</button>\n    </div>\n  </ion-content>\n</ion-modal-view>\n'),e.put("plugins/es/templates/registry/view_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title"  translate>REGISTRY.VIEW.MENU_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <a class="item item-icon-left ink"\n         ng-click="showSharePopover($event)">\n        <i class="icon ion-android-share-alt"></i>\n        {{\'COMMON.BTN_SHARE\' | translate}}\n      </a>\n\n      <a class="item item-icon-left assertive ink"\n         ng-if="canEdit"\n         ng-click="delete()">\n        <i class="icon ion-trash-a"></i>\n        {{\'COMMON.BTN_DELETE\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/registry/view_record.html",'<ion-view left-buttons="leftButtons" class="view-page">\n  <ion-nav-title>\n\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-bar button-icon button-clear visible-xs visible-sm" ng-click="edit()" ng-if="canEdit">\n      <i class="icon ion-android-create"></i>\n    </button>\n    <button class="button button-bar button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true" class="refresher-top-bg">\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}"\n                   on-refresh="load()">\n    </ion-refresher>\n\n    <div class="hero">\n      <div class="content" ng-if="!loading">\n        <i class="avatar cion-page-{{formData.type}}" ng-if="!formData.avatar"></i>\n        <i class="avatar" ng-style="{{avatarStyle}}" ng-if="formData.avatar"></i>\n        <h3><span class="dark" ng-bind-html="formData.title"></span></h3>\n        <h4>&nbsp;</h4>\n      </div>\n      <h4 class="content dark" ng-if="loading">\n        <ion-spinner icon="android"></ion-spinner>\n      </h4>\n      <h4 class="content gray hidden-xs hidden-sm" ng-if="formData.city">\n        <i class="icon ion-location"></i>\n        <span ng-bind-html="formData.city"></span>\n      </h4>\n    </div>\n\n    <div class="row no-padding-xs">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n\n      <div class="col list animate-fade-slide-in item-text-wrap no-padding-xs">\n\n        <div class="item">\n          <h2 class="gray">\n            <a ng-if="formData.city" ui-sref="app.wot_lookup.tab_registry({location:formData.city})">\n              <i class="icon ion-location"></i>\n              <span ng-bind-html="formData.city"></span>\n            </a>\n            <span ng-if="formData.city && formData.type">&nbsp;|&nbsp;</span>\n            <a ng-if="formData.type" ui-sref="app.wot_lookup.tab_registry({type:formData.type})">\n              <i class="cion-page-{{formData.type}}"></i>\n              {{\'REGISTRY.TYPE.ENUM.\'+formData.type|upper|translate}}\n            </a>\n          </h2>\n          <h4>\n            <i class="icon ion-clock" ng-if="formData.time"></i>\n            <span translate>COMMON.SUBMIT_BY</span>\n            <a ng-class="{\'positive\': issuer.uid, \'gray\': !issuer.uid}"\n               ui-sref="app.wot_identity({pubkey:issuer.pubkey, uid: issuer.name||issuer.uid})">\n              <ng-if ng-if="issuer.uid">\n                <i class="icon ion-person"></i>\n                {{::issuer.name||issuer.uid}}\n              </ng-if>\n              <span ng-if="!issuer.uid">\n                <i class="icon ion-key"></i>\n                {{issuer.pubkey|formatPubkey}}\n              </span>\n            </a>\n            <span >\n                {{formData.time|formatFromNow}}\n                <h4 class="gray hidden-xs">|\n                  {{formData.time | formatDate}}\n                </h4>\n              </span>\n          </h4>\n        </div>\n\n        <!-- Buttons bar-->\n        <a id="registry-share-anchor-{{id}}"></a>\n        <div class="item large-button-bar hidden-xs hidden-sm">\n          <button class="button button-stable button-small-padding icon ion-android-share-alt"\n                  ng-click="showSharePopover($event)">\n          </button>\n          <button class="button button-calm ink-dark"\n                  ng-if="formData.pubkey && !isUserPubkey(formData.pubkey)"\n                  ng-click="showTransferModal({pubkey:formData.pubkey, uid: formData.title})">\n            {{\'COMMON.BTN_SEND_MONEY\' | translate}}\n          </button>\n          <button class="button button-stable icon-left ink-dark"\n                  ng-if="canEdit"\n                  ng-click="delete()">\n            <i class="icon ion-trash-a assertive"></i>\n            <span class="assertive"> {{\'COMMON.BTN_DELETE\' | translate}}</span>\n          </button>\n          <button class="button button-calm icon-left ion-android-create ink"\n                  ng-if="canEdit"\n                  ng-click="edit()">\n            {{\'COMMON.BTN_EDIT\' | translate}}\n          </button>\n        </div>\n\n        <ion-item>\n          <h2 trust-as-html="formData.description"></h2>\n        </ion-item>\n\n        <ion-item ng-if="formData.category || formData.address">\n          <h4 ng-if="formData.category">\n            <span class="gray" translate>REGISTRY.VIEW.CATEGORY</span>\n            <a class="positive" ng-if="formData.category" ui-sref="app.wot_lookup.tab_registry({category:formData.category.id})">\n              <span ng-bind-html="formData.category.name"></span>\n            </a>\n          </h4>\n          <h4 ng-if="formData.address">\n            <span class="gray" translate>REGISTRY.VIEW.LOCATION</span>\n            <a class="positive" target="_system" href="https://www.openstreetmap.org/search?query={{formData.address}},%20{{formData.city}}">\n              <span ng-bind-html="formData.address"></span>\n              <span ng-if="formData.city"> - </span>\n              <span ng-bind-html="formData.city"></span>\n            </a>\n          </h4>\n        </ion-item>\n\n        <!-- Socials networks -->\n        <ng-if ng-if="formData.socials && formData.socials.length>0">\n          <ion-item class="item-icon-left"\n                    type="no-padding item-text-wrap"\n                    ng-repeat="social in formData.socials track by social.url"\n                    id="social-{{social.url|formatSlug}}">\n            <i class="icon ion-social-{{social.type}}"\n               ng-class="{\'ion-bookmark\': social.type == \'other\', \'ion-link\': social.type == \'web\', \'ion-email\': social.type == \'email\'}"></i>\n            <p ng-if="social.type && social.type != \'web\'">{{social.type}}</p>\n            <h2>\n              <a ng-click="openLink($event, social.url, social.type)">{{social.url}}</a>\n            </h2>\n          </ion-item>\n        </ng-if>\n\n        <!-- pubkey -->\n        <div class="item item-icon-left item-text-wrap ink"\n             ng-if="formData.pubkey"\n             copy-on-click="{{::formData.pubkey}}">\n          <i class="icon ion-key"></i>\n          <span translate>REGISTRY.EDIT.RECORD_PUBKEY</span>\n          <h4 class="dark">{{::formData.pubkey}}</h4>\n        </div>\n\n        <div class="lazy-load">\n\n          <!-- pictures -->\n          <ng-include src="\'plugins/es/templates/common/view_pictures.html\'"></ng-include>\n\n          <!-- comments -->\n          <ng-include src="\'plugins/es/templates/common/view_comments.html\'"></ng-include>\n        </div>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n  </ion-content>\n\n  <button class="button button-fab button-fab-bottom-right button-assertive icon ion-android-send visible-xs visible-sm"\n          ng-if="formData.pubkey && !isUserPubkey(formData.pubkey)"\n          ng-click="showTransferModal({pubkey: formData.pubkey, uid: formData.title})">\n  </button>\n\n\n</ion-view>\n'),
e.put("plugins/es/templates/registry/view_wallet_pages.html",'<ion-view left-buttons="leftButtons"\n          class="view-notification">\n  <ion-nav-title>\n    {{\'REGISTRY.MY_PAGES\' | translate}}\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="load()">\n    </button>\n\n    <button class="button button-icon button-clear visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n      <i class="icon ion-android-more-vertical"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <!-- Buttons bar -->\n    <div class="hidden-xs hidden-sm padding text-center">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink"\n              ng-click="doUpdate()"\n              title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <button class="button button-calm icon-left ink"\n              ng-click="showNewPageModal()">\n        {{\'REGISTRY.BTN_NEW\' | translate}}\n      </button>\n    </div>\n\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="center padding gray" ng-if="!search.loading && !search.results.length" translate>\n      REGISTRY.NO_PAGE\n    </div>\n\n    <ng-include src="\'plugins/es/templates/registry/lookup_list.html\'"></ng-include>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/es/templates/settings/plugin_settings.html",'<ion-view left-buttons="leftButtons"\n          class="settings">\n  <ion-nav-title translate>ES_SETTINGS.PLUGIN_NAME</ion-nav-title>\n\n  <ion-content scroll="true">\n\n    <div class="item item-toggle dark">\n      <div class="input-label" translate>ES_SETTINGS.ENABLE_TOGGLE</div>\n      <label class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.enable" >\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </label>\n    </div>\n\n    <span class="item item-divider" translate>SETTINGS.NETWORK_SETTINGS</span>\n\n    <div class="item ink" ng-click="formData.enable && changeEsNode()" ng-disabled="!formData.enable">\n      <div class="input-label" ng-class="{\'gray\': !formData.enable}">\n      {{\'ES_SETTINGS.PEER\' | translate}}\n      </div>\n\n      <!-- node fallback node -->\n      <ng-if ng-if="isFallbackNode">\n        <h4 class="gray text-wrap assertive" >\n          <i class="icon ion-alert-circled"></i>\n          <span ng-bind-html="\'SETTINGS.PEER_CHANGED_TEMPORARY\' | translate "></span>\n        </h4>\n        <div class="item-note assertive text-italic">{{server}}</div>\n      </ng-if>\n\n      <span ng-if="!isFallbackNode" class="item-note" ng-class="{\'dark\': formData.enable}">{{server}}</span>\n    </div>\n\n    <span class="item item-divider" translate>ES_SETTINGS.NOTIFICATIONS.DIVIDER</span>\n\n    <span class="item gray item-text-wrap" translate>ES_SETTINGS.NOTIFICATIONS.HELP_TEXT</span>\n\n    <label class="item item-toggle dark item-text-wrap">\n      <span ng-class="{\'gray\': !formData.enable}" translate>ES_SETTINGS.NOTIFICATIONS.ENABLE_TX_SENT</span>\n      <div class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.notifications.txSent" ng-disabled="!formData.enable">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </div>\n    </label>\n    <label class="item item-toggle dark item-text-wrap">\n      <span ng-class="{\'gray\': !formData.enable}" translate>ES_SETTINGS.NOTIFICATIONS.ENABLE_TX_RECEIVED</span>\n      <label class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.notifications.txReceived" ng-disabled="!formData.enable">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </label>\n    </label>\n    <label class="item item-toggle dark item-text-wrap">\n      <span ng-class="{\'gray\': !formData.enable}" translate>ES_SETTINGS.NOTIFICATIONS.ENABLE_CERT_SENT</span>\n      <div class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.notifications.certSent" ng-disabled="!formData.enable">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </div>\n    </label>\n    <label class="item item-toggle dark item-text-wrap">\n      <span ng-class="{\'gray\': !formData.enable}" translate>ES_SETTINGS.NOTIFICATIONS.ENABLE_CERT_RECEIVED</span>\n      <div class="toggle toggle-royal">\n        <input type="checkbox" ng-model="formData.notifications.certReceived" ng-disabled="!formData.enable">\n        <div class="track">\n          <div class="handle"></div>\n        </div>\n      </div>\n    </label>\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="common"></cs-extension-point>\n\n\n\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/settings/settings_extend.html",'\n<div class="item item-text-wrap item-icon-right ink" ui-sref="app.es_settings">\n  <div class="input-label ng-binding" translate>ES_SETTINGS.PLUGIN_NAME</div>\n\n  <h4 class="gray" translate>ES_SETTINGS.PLUGIN_NAME_HELP</h4>\n\n  <i class="icon ion-ios-arrow-right"></i>\n</div>\n'),e.put("plugins/es/templates/subscription/edit_subscriptions.html",'<ion-view left-buttons="leftButtons"\n          class="view-notification">\n  <ion-nav-title>\n    {{\'SUBSCRIPTION.EDIT.TITLE\' | translate}}\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="load()">\n    </button>\n\n    <button class="button button-icon button-clear visible-xs visible-sm"\n            ng-click="showActionsPopover($event)">\n      <i class="icon ion-android-more-vertical"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="padding no-padding-xs" scroll="true">\n\n    <!-- Buttons bar -->\n    <div class="hidden-xs hidden-sm padding text-center">\n\n      <button class="button button-stable button-small-padding icon ion-loop ink"\n              ng-click="load()"\n              title="{{\'COMMON.BTN_REFRESH\' | translate}}">\n      </button>\n\n      <button class="button button-calm ink"\n              ng-click="addSubscription()">\n        {{\'SUBSCRIPTION.BTN_ADD\' | translate}}\n      </button>\n    </div>\n\n    <div class="center padding" ng-if="search.loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="center padding gray" ng-if="!search.loading && !search.results.length" translate>\n      SUBSCRIPTION.NO_SUBSCRIPTION\n    </div>\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n      <div class="col list {{::motion.ionListClass}} item-border-large">\n\n        <!-- emails -->\n        <ng-repeat ng-repeat="subscriptions in search.results | filter: { type: \'email\' }"\n                   ng-include="\'plugins/es/templates/subscription/item_\' + subscriptions.type.toLowerCase() + \'_subscription.html\'">>\n        </ng-repeat>\n\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>\n\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/es/templates/subscription/item_email_subscription.html",'<div class="item item-thumbnail-left">\n  <i class="item-image icon ion-email"></i>\n  <h3>\n    {{\'SUBSCRIPTION.TYPE.ENUM.\' + subscriptions.type.toUpperCase() | translate}}\n  </h3>\n  <h4 class="gray">\n    {{\'SUBSCRIPTION.EDIT.PROVIDER\'|translate}}\n    <a ui-sref="app.wot_identity({pubkey: subscriptions.recipient, uid: subscriptions.uid})">\n      <span ng-class="{\'positive\': subscriptions.uid, \'dark\': !subscriptions.uid}" ng-if="subscriptions.name||subscriptions.uid">\n        <i class="ion-person" ng-if="subscriptions.uid"></i>\n        {{subscriptions.name||subscriptions.uid}}\n      </span>\n      <span class="gray" ng-if="!subscriptions.uid">\n        <i class="ion-key"></i>\n        {{subscriptions.recipient | formatPubkey}}\n      </span>\n    </a>\n  </h4>\n  <div class="item-note text-right">\n    <span ng-repeat="item in subscriptions.items">\n      {{item.content.email}}\n      <a class="ion-trash-a gray padding-left" ng-click="deleteSubscription(item)"></a>\n      <a class="ion-edit gray padding-left" ng-click="editSubscription(item)"></a>\n      <br/>\n    </span>\n  </div>\n</div>\n'),e.put("plugins/es/templates/subscription/modal_email.html",'\n<ion-modal-view id="composeMessage"\n                class="modal-full-height">\n  <ion-header-bar class="bar-positive">\n    <button class="button button-clear visible-xs" ng-click="closeModal()" translate>COMMON.BTN_CANCEL</button>\n    <h1 class="title" translate>SUBSCRIPTION.MODAL_EMAIL.TITLE</h1>\n\n    <button class="button button-icon button-clear icon ion-android-send visible-xs" ng-click="doSubmit()">\n    </button>\n  </ion-header-bar>\n\n  <ion-content scroll="true">\n\n    <!-- Encryption info -->\n    <div class="item item-icon-left item-text-wrap">\n      <i class="icon ion-ios-information-outline positive"></i>\n      <h4 class="positive" translate>SUBSCRIPTION.MODAL_EMAIL.HELP</h4>\n    </div>\n\n    <form name="subscriptionForm" novalidate="" ng-submit="doSubmit()">\n\n      <div class="list" ng-init="setForm(subscriptionForm)">\n\n        <!-- email -->\n        <label class="item item-input"\n               ng-class="{\'item-input-error\': form.$submitted && (form.email.$invalid || form.email.$error)}">\n          <span class="input-label" translate>SUBSCRIPTION.MODAL_EMAIL.EMAIL_LABEL</span>\n          <input name="email" type="text" placeholder="{{\'SUBSCRIPTION.MODAL_EMAIL.EMAIL_HELP\' | translate}}"\n                 ng-model="formData.content.email"\n                 ng-minlength="3"\n                 required\n                 email>\n        </label>\n        <div class="form-errors"\n             ng-if="form.$submitted && (form.email.$invalid || form.email.$error)"\n             ng-messages="form.email.$error">\n          <div class="form-error" ng-message="minlength">\n            <span translate="ERROR.FIELD_TOO_SHORT"></span>\n          </div>\n          <div class="form-error" ng-message="email">\n            <span translate="ERROR.FIELD_NOT_EMAIL"></span>\n          </div>\n        </div>\n\n        <!-- Frequency -->\n        <label class="item item-input item-select"\n             ng-class="{\'item-input-error\': form.$submitted && !formData.content.frequency}">\n          <span class="input-label" translate>SUBSCRIPTION.MODAL_EMAIL.FREQUENCY_LABEL</span>\n          <select name="frequency" ng-model="formData.content.frequency" style="height: 46px;margin-top: 1px;">\n            <option value="weekly" translate>SUBSCRIPTION.MODAL_EMAIL.FREQUENCY_WEEKLY</option>\n            <option value="daily" translate>SUBSCRIPTION.MODAL_EMAIL.FREQUENCY_DAILY</option>\n          </select>\n        </label>\n        <div class="form-errors"\n             ng-if="form.$submitted && !formData.content.frequency">\n          <div class="form-error">\n            <span translate="ERROR.FIELD_REQUIRED"></span>\n          </div>\n        </div>\n\n        <!-- Recipient (service provider) -->\n        <a class="item item-input item-icon-right gray ink"\n           ng-class="{\'item-input-error\': form.$submitted && !formData.recipient}"\n           ng-click="showNetworkLookup()"\n          style="height: 67px;">\n          <span class="input-label" translate>SUBSCRIPTION.MODAL_EMAIL.PROVIDER</span>\n          <span class="badge animate-fade-in animate-show-hide ng-hide"\n                ng-class="{\'badge-royal\': recipient.uid, \'badge-stable\': !recipient.uid}"\n                ng-show="recipient && (recipient.name||recipient.uid)">\n            <i class="ion-person" ng-if="recipient.uid"></i> {{recipient.name||recipient.uid}}\n          </span>\n          <span class="badge badge-secondary animate-fade-in animate-show-hide ng-hide" ng-show="formData.recipient">\n            <i class="ion-key"></i> {{formData.recipient | formatPubkey}}\n          </span>\n          <i class="gray icon ion-ios-arrow-right"></i>\n        </a>\n        <div class="form-errors"\n             ng-if="form.$submitted && !formData.recipient">\n          <div class="form-error">\n            <span translate="ERROR.FIELD_REQUIRED"></span>\n          </div>\n        </div>\n\n      </div>\n\n      <div class="padding hidden-xs text-right">\n        <button class="button button-small button-clear button-dark ink"\n                ng-click="cancel()" type="button" translate>COMMON.BTN_CANCEL\n        </button>\n        <button class="button button-small button-positive ink" type="submit">\n          {{\'COMMON.BTN_SEND\' | translate}}\n        </button>\n      </div>\n\n    </form>\n  </ion-content>\n</ion-modal-view>\n\n\n\n\n'),e.put("plugins/es/templates/user/edit_popover_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- delete profile -->\n      <a class="item item-icon-left assertive ink"\n         ng-click="removeProfile()">\n        <i class="icon ion-trash-a"></i>\n        {{\'PROFILE.BTN_DELETE\' | translate}}\n      </a>\n\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/user/edit_profile.html",'<ion-view left-buttons="leftButtons">\n  <ion-nav-title>\n    <!-- no title-->\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <!-- remove button -->\n    <button class="button button-icon button-clear button-assertive ion-trash-a visible-xs visible-sm" ng-click="removeProfile()"\n            ng-if="existing">\n    </button>\n    <!-- save button -->\n    <button class="button button-icon button-clear ion-android-done visible-xs visible-sm" ng-click="submitAndSaveAndClose()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content scroll="true">\n\n    <div class="positive-900-bg hero">\n      <div class="content">\n        <i class="avatar"\n           ng-style="avatarStyle"\n           ng-class="{\'avatar-wallet\': !loading && !avatar && walletData && !walletData.isMember, \'avatar-member\': !loading && !avatar && walletData.isMember}">\n          <button class="button button-positive button-large button-clear flat icon ion-camera visible-xs visible-sm"\n                  style="display: inline-block;"\n                  ng-click="showAvatarModal()"></button>\n          <button ng-if="avatar.src"\n                  class="button button-positive button-large button-clear flat  visible-xs visible-sm"\n                  style="display: inline-block; left: 85px; bottom:15px;"\n                  ng-click="rotateAvatar()">\n            <i class="icon-secondary ion-image" style="left: 24px; top: 3px; font-size: 24px;"></i>\n            <i class="icon-secondary ion-forward" style="left: 26px; top: -13px;"></i>\n          </button>\n          <button class="button button-positive button-large button-clear icon ion-camera hidden-xs hidden-sm"\n                  ng-click="showAvatarModal()"></button>\n        </i>\n        <h3 class="light">\n          <ng-if ng-if="!loading && !formData.title && walletData && walletData.isMember">{{walletData.uid}}</ng-if>\n          <ng-if ng-if="!loading && !formData.title && walletData && !walletData.isMember">{{::walletData.pubkey | formatPubkey}}</ng-if>\n          <ng-if ng-if="!loading && formData.title">{{formData.title}}</ng-if>\n        </h3>\n        <h4 class="light">\n          <ion-spinner ng-if="loading" icon="android"></ion-spinner>\n        </h4>\n      </div>\n    </div>\n\n\n    <div class="row no-padding">\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n\n      <div class="col">\n\n        <!-- Buttons bar-->\n        <div class="hidden-xs hidden-sm padding text-center" ng-if="existing && !saving">\n\n          <button class="button button-stable icon-right ink"\n                  ng-click="showActionsPopover($event)">\n            &nbsp; <i class="icon ion-android-more-vertical"></i>&nbsp;\n            {{\'COMMON.BTN_OPTIONS\' | translate}}\n          </button>\n        </div>\n\n        <form name="profileForm" novalidate="" ng-submit="saveAndClose()">\n\n          <div class="list item-text-wrap {{::motion.ionListClass}}"\n                    ng-init="setForm(profileForm)">\n\n\n\n\n            <!-- Public info -->\n            <div class="item item-icon-left item-text-wrap">\n              <i class="icon ion-ios-information-outline positive"></i>\n              <h4 class="positive" translate>PROFILE.HELP.WARNING_PUBLIC_DATA</h4>\n            </div>\n\n            <div class="item item-divider">\n              {{\'PROFILE.GENERAL_DIVIDER\' | translate}}\n            </div>\n\n            <!-- title -->\n            <ion-item class="item-input item-floating-label item-button-right"\n                      ng-class="{\'item-input-error\': form.$submitted && form.title.$invalid}">\n              <span class="input-label">{{\'PROFILE.TITLE\' | translate}}</span>\n              <input type="text" name="title" placeholder="{{\'PROFILE.TITLE_HELP\' | translate}}"\n                     id="profile-name"\n                     ng-model="formData.title"\n                     ng-model-options="{ debounce: 350 }"\n                     ng-maxlength="50"\n                     required>\n            </ion-item>\n            <div class="form-errors"\n                 ng-show="form.$submitted && form.title.$error"\n                 ng-messages="form.title.$error">\n              <div class="form-error" ng-message="required">\n                <span translate="ERROR.FIELD_REQUIRED"></span>\n              </div>\n              <div class="form-error" ng-message="maxlength">\n                <span translate="ERROR.FIELD_TOO_LONG_WITH_LENGTH" translate-values="{maxLength: 50}"></span>\n              </div>\n            </div>\n\n            <!-- description -->\n            <ion-item class="item-input item-floating-label item-button-right">\n              <span class="input-label" style="width: 100%">{{\'PROFILE.DESCRIPTION\' | translate}}</span>\n              <textarea placeholder="{{\'PROFILE.DESCRIPTION_HELP\' | translate}}"\n                        ng-model="formData.description"\n                        ng-model-options="{ debounce: 350 }"\n                        rows="4" cols="10">\n              </textarea>\n            </ion-item>\n\n            <!-- position -->\n            <ng-include src="\'plugins/es/templates/common/edit_position.html\'" ng-controller="ESPositionEditCtrl as ctrl"></ng-include>\n\n          </div>\n\n          <!-- social networks -->\n          <ng-include src="\'plugins/es/templates/common/edit_socials.html\'" ng-controller="ESSocialsEditCtrl"></ng-include>\n\n          <div class="list item-text-wrap {{::motion.ionListClass}}">\n\n            <div class="item item-divider">\n              {{\'PROFILE.TECHNICAL_DIVIDER\' | translate}}\n            </div>\n\n            <!-- uid -->\n            <ion-item class="item-icon-left" ng-if="walletData && walletData.uid">\n              <span translate>COMMON.UID</span>\n              <span class="badge badge-stable">{{::walletData.uid}}</span>\n            </ion-item>\n\n            <!-- pubkey-->\n            <ion-item class="item-icon-left item-icon-right item-text-wrap ink"\n                  on-hold="copy(formData.pubkey)"\n                  copy-on-click>\n                <i class="icon ion-key"></i>\n                <span translate>COMMON.PUBKEY</span>\n                <p class="gray">{{walletData.pubkey}}</p>\n            </ion-item>\n\n            <div class="item padding hidden-xs hidden-sm text-right">\n              <button class="button button-clear button-dark ink"\n                      ng-click="cancel()" type="button" translate>COMMON.BTN_CANCEL\n              </button>\n              <button class="button button-calm ink"\n                      ng-class="{\'button-assertive\': dirty}"\n                      type="submit">\n                {{\'COMMON.BTN_SAVE\' | translate}}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n\n      <div class="col col-20 hidden-xs hidden-sm">&nbsp;\n      </div>\n    </div>\n\n  </ion-content>\n\n</ion-view>\n'),e.put("plugins/es/templates/user/items_profile.html",'<div ng-if="!formData.profile && !formData.name"\n     class="item gray" translate>PROFILE.NO_PROFILE_DEFINED</div>\n\n<!-- name -->\n<div class="item" ng-if="formData.name && showName">\n  <span class="gray" translate>PROFILE.TITLE</span>\n  <h3>{{formData.name}}</h3>\n</div>\n\n<!-- About me -->\n<div class="item item-text-wrap" ng-if="formData.profile.description">\n  <span class="gray" translate>PROFILE.DESCRIPTION</span>\n  <h3 trust-as-html="formData.profile.description"></h3>\n</div>\n\n<!-- Localisation -->\n<div class="item" ng-if="formData.profile.address || formData.profile.city"\n     copy-on-click="{{formData.profile.address ? formData.profile.address + \'&#10;\' : \'\'}}{{formData.profile.city}}">\n  <span class="gray" translate>LOCATION.LOCATION_DIVIDER</span>\n  <h3>\n    <span class="text-keep-lines" ng-if="formData.profile.address">{{formData.profile.address}}<br/></span>\n    {{formData.profile.city}}\n  </h3>\n</div>\n\n<!-- Socials networks -->\n<div class="item" ng-if="formData.profile.socials && formData.profile.socials.length" ng-controller="ESSocialsViewCtrl">\n  <span class="gray" translate>PROFILE.SOCIAL_NETWORKS_DIVIDER</span>\n  <div class="list no-padding">\n    <ion-item ng-repeat="social in formData.profile.socials | filter:filterFn track by social.url "\n              id="social-{{::social.url|formatSlug}}"\n              class="item-icon-left item-text-wrap no-padding-bottom ink"\n              on-tap="openSocial($event, social)"\n              >\n      <i class="icon ion-social-{{social.type}}"\n         ng-class="{\'ion-bookmark\': social.type == \'other\', \'ion-link\': social.type == \'web\', \'ion-email\': social.type == \'email\', \'ion-iphone\': social.type == \'phone\'}"></i>\n      <p ng-if="social.type && social.type != \'web\'">\n        {{social.type}}\n        <i class="ion-locked" ng-if="social.recipient"></i>\n      </p>\n      <h4>\n        <a on-tap="openSocial($event, social)" href="{{::social.url}}" target="_blank">{{::social.url}}</a>\n      </h4>\n    </ion-item>\n  </div>\n</div>\n\n\n'),e.put("plugins/es/templates/wallet/view_wallet_extend.html",'<ng-if ng-if="enable">\n  <!-- profile -->\n  <div class="item item-divider item-divider-top-border">\n    <span>\n      {{\'PROFILE.PROFILE_DIVIDER\' | translate}}\n      <i style="font-size: 12pt; cursor: pointer;"\n         ng-click="showProfileHelp=!showProfileHelp"\n         class="icon positive ion-ios-help-outline"\n         title="{{\'PROFILE.PROFILE_DIVIDER_HELP\' | translate}}"></i>\n    </span>\n    <a class="badge button button-text button-small button-small-padding "\n       ui-sref="app.user_edit_profile">\n      <i class="icon ion-edit"></i>\n      <span ng-if="!formData.profile" translate>PROFILE.BTN_ADD</span>\n      <span ng-if="formData.profile" translate>PROFILE.BTN_EDIT</span>\n    </a>\n  </div>\n\n\n  <div class="item item-text-wrap positive item-small-height" ng-show="showProfileHelp">\n    <small translate>PROFILE.PROFILE_DIVIDER_HELP</small>\n  </div>\n\n  <div class="double-padding-x padding-bottom">\n    <ng-include src="\'plugins/es/templates/user/items_profile.html\'" ng-init="showName=true;"></ng-include>\n  </div>\n\n  <!-- subscriptions -->\n  <div class="item item-divider item-divider-top-border">\n    <span>\n      {{\'SUBSCRIPTION.SUBSCRIPTION_DIVIDER\' | translate}}\n      <i style="font-size: 12pt; cursor: pointer;"\n         ng-click="showSubscriptionHelp=!showSubscriptionHelp"\n         class="icon positive ion-ios-help-outline"\n         title="{{\'SUBSCRIPTION.SUBSCRIPTION_DIVIDER_HELP\' | translate}}"></i>\n    <span>\n\n    <a class="badge button button-text button-small button-small-padding "\n       ng-if="!formData.subscriptions.count"\n       ui-sref="app.edit_subscriptions">\n      <i class="icon ion-edit"></i>\n      <span translate>SUBSCRIPTION.BTN_ADD</span>\n    </a>\n  </div>\n\n  <div class="item item-text-wrap positive item-small-height" ng-show="showSubscriptionHelp">\n    <small translate>SUBSCRIPTION.SUBSCRIPTION_DIVIDER_HELP</small>\n  </div>\n\n  <div class="double-padding-x padding-bottom">\n\n    <div ng-if="!formData.subscriptions.count"\n         class="item gray" translate>SUBSCRIPTION.NO_SUBSCRIPTION</div>\n\n    <a class="item item-icon-left item-text-wrap item-icon-right ink"\n       ng-if="formData.subscriptions.count"\n       ui-sref="app.edit_subscriptions">\n      <i class="icon ion-gear-a"></i>\n      <span translate>SUBSCRIPTION.SUBSCRIPTION_COUNT</span>\n      <span class="badge badge-calm">{{formData.subscriptions.count}}</span>\n\n      <i class="gray icon ion-ios-arrow-right"></i>\n    </a>\n  </div>\n\n  <!-- page -->\n  <div class="item item-divider item-divider-top-border">\n    <span>\n      {{\'REGISTRY.WALLET.REGISTRY_DIVIDER\' | translate}}\n      <i style="font-size: 12pt; cursor: pointer;"\n         ng-click="showPagesHelp=!showPagesHelp"\n         class="icon positive ion-ios-help-outline"\n         title="{{\'REGISTRY.WALLET.REGISTRY_HELP\' | translate}}"></i>\n    <span>\n\n    <a class="badge button button-text button-small button-small-padding "\n       ng-if="!formData.pages.count"\n       ng-click="showNewPageModal()">\n      <i class="icon ion-edit"></i>\n      <span translate>REGISTRY.BTN_NEW</span>\n    </a>\n  </div>\n\n  <div class="item item-text-wrap positive item-small-height" ng-show="showPagesHelp">\n    <small translate>REGISTRY.WALLET.REGISTRY_HELP</small>\n  </div>\n\n  <div class="double-padding-x padding-bottom">\n\n    <div ng-if="!formData.pages.count"\n         class="item gray" translate>REGISTRY.NO_PAGE</div>\n\n    <a class="item item-icon-left item-text-wrap item-icon-right ink"\n       ng-if="formData.pages.count"\n       ui-sref="app.wallet_pages">\n      <i class="icon ion-social-buffer"></i>\n      <span translate>REGISTRY.MY_PAGES</span>\n      <span class="badge badge-calm">{{formData.pages.count}}</span>\n\n      <i class="gray icon ion-ios-arrow-right"></i>\n    </a>\n  </div>\n</ng-if>\n'),e.put("plugins/es/templates/wot/lookup_extend.html",'<ion-tab title="{{\'MENU.REGISTRY\'|translate}}" icon="ion-social-buffer"\n         ui-sref="app.wot_lookup.tab_registry">\n  <ion-nav-view name="tab_registry"></ion-nav-view>\n</ion-tab>\n'),e.put("plugins/es/templates/wot/lookup_item_group.html",'\n<i ng-if="::!item.avatar" class="item-image icon ion-android-people"></i>\n<i ng-if="::!item.avatar" class="item-image icon-secondary ion-android-lock" style="left: 20px; top: 17px; font-size: 19px; color: #d9d9d9;"></i>\n<i ng-if="::item.avatar" class="item-image avatar" style="background-image: url({{::item.avatar.src}})"></i>\n\n<h2 ng-bind-html=":rebind:item.name"></h2>\n\n<!-- creation time-->\n<h4 class="gray">\n  <i class="ion-clock"></i>\n  {{:rebind:\'GROUP.CREATED_TIME\'|translate: item }}\n</h4>\n\n<!-- membersCount -->\n<h4 class="dark pull-left" ng-if=":rebind:item.membersCount">\n  <i class="dark ion-person"></i>\n  <span class="dark">+{{:rebind:item.membersCount}}</span>\n</h4>\n\n<h4 class="dark">\n  <span class="dark" ng-if="::item.description">\n    <i class="ion-quote"></i>\n    {{::item.description|truncText}}\n  </span>\n</h4>\n<h4 ng-if="::item.tags">\n  <span ng-if="::item.tags" class="dark">\n   <ng-repeat ng-repeat="tag in ::item.tags">\n     #<ng-bind-html ng-bind-html="::tag"></ng-bind-html>\n   </ng-repeat>\n  </span>\n</h4>\n'),e.put("plugins/es/templates/wot/lookup_item_page.html",'<i ng-if="::!item.avatar" class="item-image icon cion-page-{{item.type}}"></i>\n<i ng-if="::item.avatar" class="item-image avatar" style="background-image: url({{::item.avatar.src}})"></i>\n\n<h2 ng-bind-html=":rebind:item.name"></h2>\n\n<h4 class="gray">\n  <span class="gray" ng-if="::item.city">\n    <i class="ion-location"></i>\n    {{::item.city|truncText}}\n  </span>\n  <span ng-if="::item.city && item.type">|</span>\n  <span ng-if="item.type">\n    <i class="cion-page-{{item.type}}"></i>\n    {{::\'REGISTRY.TYPE.ENUM.\'+item.type|uppercase|translate}}\n  </span>\n</h4>\n<h4 class="dark">\n  <span class="dark" ng-if="::item.description">\n    <i class="ion-quote"></i>\n    {{::item.description|truncText}}\n  </span>\n</h4>\n<h4 ng-if="::item.tags">\n  <span ng-if="::item.tags" class="dark">\n   <ng-repeat ng-repeat="tag in ::item.tags">\n     #<ng-bind-html ng-bind-html="::tag"></ng-bind-html>\n   </ng-repeat>\n  </span>\n</h4>\n'),e.put("plugins/es/templates/wot/lookup_lg_extend.html",'<div class="buttons-tabs">\n  <div class="pull-right">\n    <div\n      class="button button-tab dark"\n      title="{{\'REGISTRY.BTN_SHOW_WOT_HELP\' | translate}}"\n      nav-transition="none"\n      active-link="active"\n      active-link-path-prefix="#/app/wot/lg"\n      ui-sref="app.wot_lookup_lg">\n      <i class="icon ion-person-stalker"></i>\n      {{\'REGISTRY.BTN_SHOW_WOT\' | translate}}\n    </div>\n    <a\n      class="button button-tab ink dark"\n      title="{{\'REGISTRY.BTN_SHOW_PAGES_HELP\' | translate}}"\n      nav-transition="none"\n      active-link="active"\n      active-link-path-prefix="#/app/wot/page"\n      ui-sref="app.registry_lookup_lg">\n      <i class="icon ion-social-buffer"></i>\n      {{\'REGISTRY.BTN_SHOW_PAGES\' | translate}}\n    </a>\n  </div>\n\n  <div class="pull-right" ng-if="showNewPageButton">\n    <button class="button button-small button-positive button-small-padding button-clear ink hidden-sm hidden-xs"\n            ng-click="showNewPageModal()">\n      <i class="icon ion-plus"></i>\n      {{\'REGISTRY.BTN_NEW\' | translate}}\n    </button>\n    &nbsp;\n  </div>\n</div>\n'),e.put("plugins/es/templates/wot/popover_certification_actions.html",'<ion-popover-view class="fit has-header">\n  <ion-header-bar>\n    <h1 class="title" translate>COMMON.POPOVER_ACTIONS_TITLE</h1>\n  </ion-header-bar>\n  <ion-content scroll="false">\n    <div class="list item-text-wrap">\n\n      <!-- ask certification to current identities -->\n      <a class="item item-icon-left ink"\n         ng-if="!isUserPubkey(formData.pubkey) && formData.isMember"\n         ng-click="askCertification()">\n        <i class="icon-secondary ion-ribbon-b" style="left: 16px; top: 0px; font-size: 25px;"></i>\n        <b class="icon-secondary ion-help" style="left: 35px; top: 0px;"></b>\n        {{\'WOT.BTN_ASK_CERTIFICATION\' | translate}}\n      </a>\n\n      <!-- ask certifications to many identities -->\n      <a class="item item-icon-left ink"\n         ng-if="isUserPubkey(formData.pubkey)"\n         ng-click="showAskCertificationModal()">\n        <i class="icon-secondary ion-ribbon-b" style="left: 16px; top: 0px; font-size: 25px;"></i>\n        <b class="icon-secondary ion-help" style="left: 35px; top: 0px;"></b>\n        {{\'WOT.BTN_ASK_CERTIFICATIONS_DOTS\' | translate}}\n      </a>\n\n      <!-- suggest certifications to current identity -->\n      <a class="item item-icon-left ink"\n         ng-if="!isUserPubkey(formData.pubkey)"\n         ng-click="showSuggestCertificationModal()">\n        <i class="icon-secondary ion-person-stalker" style="left: 16px; top: 0px; font-size: 25px;"></i>\n        <b class="icon-secondary ion-help" style="left: 37px; top: -4px;"></b>\n        {{\'WOT.BTN_SUGGEST_CERTIFICATIONS_DOTS\' | translate}}\n      </a>\n    </div>\n  </ion-content>\n</ion-popover-view>\n'),e.put("plugins/es/templates/wot/view_certifications_extend.html",'<!-- nav buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'nav-buttons\'">\n\n  <button class="button button-icon button-clear icon ion-android-more-vertical visible-xs visible-sm" ng-click="showCertificationActionsPopover($event)">\n  </button>\n\n</ng-if>\n\n<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'buttons\'">\n\n  <button class="button button-stable button-small-padding icon ion-android-more-vertical"\n          ng-click="showCertificationActionsPopover($event)"\n          title="{{\'COMMON.POPOVER_ACTIONS_TITLE\' | translate}}">\n  </button>\n\n</ng-if>\n'),
e.put("plugins/es/templates/wot/view_identity_extend.html",'<!-- Buttons section -->\n<ng-if ng-if="enable && extensionPoint === \'buttons\'">\n  <button class="button button-stable button-small-padding icon ion-compose"\n          ng-click="showNewMessageModal()"\n          title="{{\'MESSAGE.BTN_WRITE\' | translate}}">\n  </button>\n</ng-if>\n\n<!-- General section -->\n<ng-if ng-if="enable && extensionPoint === \'after-general\'">\n\n  <span class="item item-divider item-divider-top-border">\n    <span>\n      {{\'PROFILE.PROFILE_DIVIDER\' | translate}}\n      <a style="font-size: 12pt; cursor: pointer;"\n         ng-click="showProfileHelp=!showProfileHelp"\n         class="icon positive ion-ios-help-outline ink"\n         title="{{\'PROFILE.PROFILE_DIVIDER_HELP\' | translate}}"></a>\n    </span>\n  </span>\n\n  <div class="item item-text-wrap positive item-small-height" ng-show="showProfileHelp">\n    <small translate>PROFILE.PROFILE_DIVIDER_HELP</small>\n  </div>\n\n  <div class="double-padding-x padding-bottom">\n    <ng-include src="\'plugins/es/templates/user/items_profile.html\'" ng-init="showName=false;"></ng-include>\n  </div>\n\n</ng-if>\n'),e.put("plugins/map/templates/network/item_search_tooltip.html","<a href=\"#\">\n  {{peer.dns || peer.server}}\n  <span class=\"{{peer.uid ? 'positive' : 'gray'}}\">\n    <i class=\"icon {{peer.uid ? 'ion-person' : 'ion-key'}}\"></i>\n    {{peer.uid ? (peer.name||peer.uid) : (peer.pubkey|formatPubkey) }}\n  </span>\n  <span class=\"gray\">{{peer.ipv4 ? (peer.ipv4 + ':' + peer.port) : ''}}</span>\n  <span class=\"{{peer.bma.useSsl  ? '' : 'ng-hide'}}\"><i class=\"ion-locked\"></i> <small>SSL</small></span>\n</a>\n"),e.put("plugins/map/templates/network/lookup_extend.html",'<a ng-if="enable"\n   class="button button-text button-small ink hidden-sm hidden-xs"\n   title="{{\'MAP.NETWORK.LOOKUP.BTN_MAP_HELP\' | translate}}"\n        ui-sref="app.view_network_map">\n  <i class="icon ion-ios-location"></i>\n  {{\'MAP.NETWORK.LOOKUP.BTN_MAP\' | translate}}\n</a>\n'),e.put("plugins/map/templates/network/view_map.html",'<ion-view left-buttons="leftButtons" class="view-map-network">\n  <ion-nav-title>\n    <span class="hidden-xs" translate>MAP.NETWORK.VIEW.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n  </ion-nav-buttons>\n\n  <ion-content data-tap-disabled="true">\n    <leaflet id="{{::mapId}}"\n             height="100%"\n             center="map.center"\n             markers="map.markers"\n             layers="map.layers">\n    </leaflet>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/map/templates/registry/item_search_tooltip.html","<a href=\"#\" class=\"{{type}}\">\n  <i class=\"{{'cion-page-' + type}}\"></i>\n  {{name != uid ? name +' ' : ''}}\n  <span class=\"gray\">\n    {{pubkey ? (pubkey|formatPubkey) : ''}}\n  </span>\n</a>\n"),e.put("plugins/map/templates/registry/lookup_lg_extend.html",'<a class="button button-text button-small ink hidden-sm hidden-xs"\n   title="{{\'MAP.REGISTRY.LOOKUP.BTN_MAP_HELP\' | translate}}"\n   ui-sref="app.view_registry_map">\n  <i class="icon ion-ios-location"></i>\n  {{\'MAP.REGISTRY.LOOKUP.BTN_MAP\' | translate}}\n</a>\n'),e.put("plugins/map/templates/registry/view_map.html",'<ion-view left-buttons="leftButtons" class="view-map-registry">\n  <ion-nav-title>\n    <span class="hidden-xs" translate>MAP.REGISTRY.VIEW.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="load()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content data-tap-disabled="true">\n    <a id="helptip-map-registry" style="left: 150px; top: 50px; position: relative;"></a>\n    <leaflet id="{{::mapId}}"\n             height="100%"\n             layers="map.layers"\n             markers="map.markers"\n             lf-center="map.center"\n             bounds="map.bounds">\n    </leaflet>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/map/templates/settings/es_settings_extend.html",'\n<!--<span class="item item-divider" translate>MAP.SETTINGS.MAP_DIVIDER</span>\n\n<label class="item item-toggle dark item-text-wrap">\n  <span translate>MAP.SETTINGS.ENABLE_GOOGLE_API</span>\n  <h4 class="gray" translate>MAP.SETTINGS.ENABLE_GOOGLE_API_HELP</h4>\n  <div class="toggle toggle-royal">\n    <input type="checkbox" ng-model="formData.enableGoogleApi">\n    <div class="track">\n      <div class="handle"></div>\n    </div>\n  </div>\n</label>\n\n<ion-item class="item-input"\n          ng-if="!$root.config.plugins.es.googleApiKey"\n          ng-class="{\'item-input-error\': formData.enableGoogleApi && !formData.googleApiKey}">\n  <div class="input-label col-33">\n    <span class="" ng-class="{\'gray\': !formData.enableGoogleApi}"translate>MAP.SETTINGS.GOOGLE_API_KEY</span>\n    <h4>\n      <a ng-click="openLink($event, \'https://console.developers.google.com/apis/credentials/key\')" translate>MAP.SETTINGS.BTN_GOOGLE_API</a>\n      <span class="gray"> ({{\'MAP.SETTINGS.BTN_GOOGLE_API_WARNING\'|translate}})</span>\n    </h4>\n  </div>\n  <input type="text"\n         placeholder="{{\'MAP.SETTINGS.GOOGLE_API_KEY_PLACEHOLDER\' | translate}}"\n         ng-model="formData.googleApiKey"\n         ng-if="formData.enableGoogleApi">\n</ion-item>\n<div class="form-errors"\n     ng-show="formData.enableGoogleApi && !formData.googleApiKey">\n  <div class="form-error">\n    <span translate="ERROR.FIELD_REQUIRED"></span>\n  </div>\n</div>-->\n'),e.put("plugins/map/templates/user/edit_profile_extend.html",'<div class="item no-padding {{ionItemClass}}" ng-if="formData.geoPoint && formData.geoPoint.lat && formData.geoPoint.lon">\n  <leaflet id="{{::mapId}}"\n           height="250px"\n           center="map.center"\n           markers="map.markers"\n           defaults="map.defaults">\n  </leaflet>\n</div>\n'),e.put("plugins/map/templates/wot/item_search_tooltip.html","<a href=\"#\" class=\"{{type}}\">\n  <i class=\"{{pending ? 'ion-clock': (type ? 'cion-page-' + type : '')}}\"></i>\n  {{name != uid ? name +' ' : ''}}\n  <span class=\"{{uid ? 'positive' : 'gray'}}\">\n    <i class=\"{{uid ? 'ion-person' : 'ion-key'}}\"></i>\n    {{uid ? uid : (pubkey|formatPubkey) }}\n  </span>\n</a>\n"),e.put("plugins/map/templates/wot/lookup_lg_extend.html",'<a ng-if="enable"\n   class="button button-text button-small ink hidden-sm hidden-xs"\n   title="{{\'MAP.WOT.LOOKUP.BTN_MAP_HELP\' | translate}}"\n   ui-sref="app.view_wot_map">\n  <i class="icon ion-ios-location"></i>\n  {{\'MAP.WOT.LOOKUP.BTN_MAP\' | translate}}\n</a>\n'),e.put("plugins/map/templates/wot/popup_marker.html",'<div class="item no-border no-padding item-avatar" ng-class="::{\'item-avatar\': hit.avatar}">\n  <img ng-if="::hit.avatar" class="item-image avatar" ng-src="{{::hit.avatar.src}}">\n  <i ng-if="::!hit.avatar" class="item-image icon " ng-class="::{\'ion-person\': hit.uid, \'ion-card\': !hit.uid}"></i>\n  <div class="item-content item-avatar-left-padding padding-top">\n    <h2 class="dark"><a ui-sref="app.wot_identity({pubkey: hit.pubkey, uid: hit.uid})">{{::hit.name}}</a></h2>\n    <h4>\n      <span ng-if="::hit.uid" class="positive">\n        <b class="ion-person"></b>\n        {{::hit.uid}}\n      </span>\n      <span class="gray" title="{{::hit.pubkey}}"><b class="ion-key"></b> {{::hit.pubkey|formatPubkey}}</span>\n      <span class="assertive" ng-if="!hit.uid">\n        {{::\'WOT.NOT_MEMBER_PARENTHESIS\'|translate}}\n      </span>\n    </h4>\n    <h4 ng-if="::hit.city" class="gray" title="{{::hit.city}}">\n      <b class="ion-location"></b> {{::hit.city}}\n    </h4>\n  </div>\n</div>\n<div class="item no-border no-padding item-text-wrap hidden-xs" ng-if="::hit.description">\n  <small trust-as-html="::hit.description"></small>\n</div>\n'),e.put("plugins/map/templates/wot/popup_page_marker.html",'<div class="item no-border no-padding item-avatar" ng-class="::{\'item-avatar\': hit.avatar}">\n  <img ng-if="::hit.avatar" class="item-image avatar" ng-src="{{::hit.avatar.src}}">\n  <i ng-if="::!hit.avatar" class="item-image icon cion-page-{{::hit.type}}"></i>\n  <div class="item-content item-avatar-left-padding padding-top">\n    <h2 class="dark"><a ui-sref="app.view_page({id: hit.id, title: hit.title})">{{::hit.name}}</a></h2>\n    <h4 ng-if="::hit.category" class="gray" title="{{::hit.category.name}}">\n      <a ui-sref="app.registry_lookup({category: hit.category.id})"><b class="ion-flag"></b> {{::hit.category.name}}</a>\n    </h4>\n    <h4 ng-if="::hit.city" class="gray" title="{{::hit.city}}">\n      <b class="ion-location"></b> {{::hit.city}}\n    </h4>\n  </div>\n</div>\n<div class="item no-border no-padding item-text-wrap hidden-xs" ng-if="::hit.description">\n  <small trust-as-html="::hit.description"></small>\n</div>\n'),e.put("plugins/map/templates/wot/view_map.html",'<ion-view left-buttons="leftButtons" class="view-map-wot">\n  <ion-nav-title>\n    <span class="hidden-xs" translate>MAP.WOT.VIEW.TITLE</span>\n  </ion-nav-title>\n\n  <ion-nav-buttons side="secondary">\n    <button class="button button-icon button-clear icon ion-loop visible-xs visible-sm" ng-click="load()">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content data-tap-disabled="true">\n    <a id="helptip-map-wot" style="left: 150px; top: 50px; position: relative;"></a>\n    <leaflet id="{{::mapId}}"\n             height="100%"\n             layers="map.layers"\n             markers="map.markers"\n             lf-center="map.center"\n             bounds="map.bounds">\n    </leaflet>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/currency/tabs/tab_blocks_stats.html",'<ion-view>\n  <ion-content>\n    <div\n       ng-include="\'plugins/graph/templates/blockchain/graph_tx_count.html\'"\n       ng-controller="GpBlockchainTxCountCtrl"\n       ng-init="setSize(500,700,false)">\n      </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/currency/tabs/tab_network_stats.html",'<ion-view>\n  <ion-content>\n\n    <div class="list">\n      <div class="item"\n         ng-include="\'plugins/graph/templates/blockchain/graph_block_issuers.html\'"\n         ng-controller="GpBlockchainIssuersCtrl"\n           ng-init="setSize(500,700,true)">\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/currency/tabs/tab_parameters_stats.html",'<ion-view>\n  <ion-content>\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="row responsive-sm">\n      <div class="col"\n           ng-include="\'plugins/graph/templates/currency/graph_monetary_mass.html\'"\n           ng-init="setSize(500,700,true)">\n      </div>\n\n      <!-- DU -->\n      <div class="col"\n           ng-include="\'plugins/graph/templates/currency/graph_du.html\'"\n           ng-controller="GpCurrencyDUCtrl"\n           ng-init="setSize(500,700,true)">\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/graph/templates/currency/tabs/tab_wot_stats.html",'<ion-view>\n  <ion-content>\n    <div class="center padding" ng-if="loading">\n      <ion-spinner icon="android"></ion-spinner>\n    </div>\n\n    <div class="list no-padding">\n      <div class="item no-padding-top"\n           ng-include="\'plugins/graph/templates/currency/graph_members_count.html\'"\n           ng-init="setSize(600,700,false)">\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),e.put("plugins/es/templates/message/tabs/tab_list.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical"\n            ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content>\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}"\n                   on-refresh="refresh()">\n    </ion-refresher>\n\n    <cs-extension-point name="buttons"></cs-extension-point>\n\n    <!-- list -->\n    <ng-include src="\'plugins/es/templates/message/list.html\'"></ng-include>\n\n  </ion-content>\n\n  <!-- fab button -->\n  <div class="visible-xs visible-sm" >\n    <button ng-if="fabButtonNewMessageId"\n            id="{{::fabButtonNewMessageId}}"\n            class="button button-fab button-fab-bottom-right button-assertive spin has-footer"\n            ng-click="showNewMessageModal()">\n      <i class="icon ion-compose"></i>\n    </button>\n  </div>\n\n</ion-view>\n'),e.put("plugins/es/templates/registry/tabs/tab_registry.html",'<ion-view>\n  <ion-nav-buttons side="secondary">\n\n    <!-- Allow extension here -->\n    <cs-extension-point name="nav-buttons"></cs-extension-point>\n\n    <button class="button button-icon button-clear"\n            ng-click="showFiltersPopover($event)">\n      <i class="icon ion-android-funnel"></i>\n    </button>\n\n    <button class="button button-icon button-clear icon ion-android-more-vertical"\n            ng-click="showActionsPopover($event)">\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content>\n\n    <ion-refresher pulling-text="{{\'COMMON.BTN_REFRESH\' | translate}}"\n                   on-refresh="doSearch()">\n    </ion-refresher>\n\n    <cs-extension-point name="buttons"></cs-extension-point>\n\n    <ng-include src="::\'plugins/es/templates/registry/lookup_form.html\'"></ng-include>\n\n    <ng-include src="::\'plugins/es/templates/registry/lookup_list.html\'"></ng-include>\n  </ion-content>\n\n</ion-view>\n')}]),angular.module("cesium.es.plugin",["cesium.es.services","cesium.es.app.controllers","cesium.es.common.controllers","cesium.es.settings.controllers","cesium.es.currency.controllers","cesium.es.wot.controllers","cesium.es.wallet.controllers","cesium.es.profile.controllers","cesium.es.message.controllers","cesium.es.notification.controllers","cesium.es.blockchain.controllers","cesium.es.network.controllers","cesium.es.registry.controllers","cesium.es.group.controllers","cesium.es.invitation.controllers","cesium.es.subscription.controllers","cesium.es.document.controllers"]),angular.module("cesium.es.services",["cesium.es.http.services","cesium.es.comment.services","cesium.es.social.services","cesium.es.settings.services","cesium.es.crypto.services","cesium.es.profile.services","cesium.es.notification.services","cesium.es.message.services","cesium.es.modal.services","cesium.es.blockchain.services","cesium.es.registry.services","cesium.es.group.services","cesium.es.wallet.services","cesium.es.invitation.services","cesium.es.subscription.services","cesium.es.wot.services","cesium.es.tx.services","cesium.es.geo.services","cesium.es.document.services"]),angular.module("cesium.es.comment.services",["ngResource","cesium.services","cesium.es.http.services","cesium.es.profile.services"]).factory("esComment",["$rootScope","$q","UIUtils","BMA","esHttp","csWallet","csWot",function(e,n,t,i,a,o,r){"ngInject";function s(t){var i=20,s={commons:["issuer","creationTime","time","message","reply_to"]},l={index:t,fields:{commons:s.commons},raw:{search:a.post("/"+t+"/comment/_search"),remove:a.record.remove(t,"comment"),wsChanges:a.ws("/ws/_changes"),add:new a.record.post("/"+t+"/comment",{creationTime:!0}),update:new a.record.post("/"+t+"/comment/:id/_update",{creationTime:!0})}};return l.raw.refreshTreeLinks=function(e){return l.raw.addTreeLinks(e,!0)},l.raw.addTreeLinks=function(e,t){e=e||{},e.result=e.result||[],e.mapById=e.mapById||{};var i={};if(_.forEach(_.values(e.mapById),function(n){if(n.reply_to&&!n.parent){var a=e.mapById[n.reply_to];a||(a=new Comment(n.reply_to),i[a.id]=n.id,e.mapById[a.id]=a),t&&a.containsReply(n)||a.addReply(n)}}),!_.size(i)){var o=n.defer();return o.resolve(e),o.promise}var r={query:{terms:{_id:_.keys(i)}},sort:[{creationTime:{order:"desc"}},{time:{order:"desc"}}],from:0,size:1e3,_source:s.commons};return console.debug("[ES] [comment] Getting missing comments in tree"),l.raw.search(r).then(function(n){return n.hits.total?(_.forEach(n.hits.hits,function(n){var t=e.mapById[n._id];t.copyFromJson(n._source),t.html=a.util.parseAsHtml(t.message),delete i[t.id]}),_.size(i)&&console.error("Comments has invalid [reply_to]: "+_.values(i).join(",")),l.raw.addTreeLinks(e)):(console.error("[ES] [comment] Comments has invalid [reply_to]: "+_.values(i).join(",")),e)})},l.raw.loadDataByRecordId=function(e,n){n=n||{},n.from=n.from||0,n.size=n.size||i,n.loadAvatar=!angular.isDefined(n.loadAvatar)||n.loadAvatar,n.loadAvatarAllParent=!!angular.isDefined(n.loadAvatarAllParent)&&(n.loadAvatar&&n.loadAvatarAllParent),n.size<0&&(n.size=i);var t={query:{term:{record:e}},sort:[{creationTime:{order:"desc"}},{time:{order:"desc"}}],from:n.from,size:n.size,_source:s.commons},o={total:0,mapById:{},result:[],pendings:{}};return l.raw.search(t).then(function(e){return e.hits.total?(o.total=e.hits.total,o.result=e.hits.hits.reduce(function(e,n){var t=new Comment(n._id,n._source);return t.html=a.util.parseAsHtml(t.message),o.mapById[t.id]=t,e.concat(t)},o.result),l.raw.addTreeLinks(o)):o}).then(function(){if(n.loadAvatar)return n.loadAvatarAllParent?r.extendAll(_.values(o.mapById),"issuer"):r.extendAll(o.result,"issuer")}).then(function(){return o.result=o.result.sort(function(e,n){return e.creationTime-n.creationTime}),o})},l.raw.createOnDeleteListener=function(e){return function(t){var i=_.findIndex(e.result,{id:t.id});if(i!==-1)return e.result.splice(i,1),delete e.mapById[t.id],o.isUserPubkey(t.issuer)?l.raw.remove(t.id)["catch"](function(e){throw console.error(e),new Error("MARKET.ERROR.FAILED_REMOVE_COMMENT")}):n.reject("User is not the comment issuer")}},l.raw.startListenChanges=function(n,i,s){i=i||{},i.result=i.result||[],i.mapById=i.mapById||{},i.pendings=i.pendings||{},s=s||e;var c=l.raw.createOnDeleteListener(i);_.forEach(i.result,function(e){e.addOnRemoveListener(c)});var u=(new Date).getTime();console.info("[ES] [comment] Starting websocket to listen comments on [{0}/record/{1}]".format(t,n.substr(0,8)));var d=l.raw.wsChanges();return d.open().then(function(e){return e.send(t+"/comment")}).then(function(){console.debug("[ES] [comment] Websocket opened in {0} ms".format((new Date).getTime()-u)),d.on(function(e){e&&s.$applyAsync(function(){var t=i.mapById[e._id];"DELETE"===e._operation?t&&t.remove():e._source&&e._source.record===n&&(t?(t.copyFromJson(e._source),t.html=a.util.parseAsHtml(t.message),l.raw.refreshTreeLinks(i)):i.pendings&&i.pendings[e._source.creationTime]||e._source.issuer==o.data.pubkey?console.debug("Skip comment received by WS (already in pending)"):(t=new Comment(e._id,e._source),t.addOnRemoveListener(c),t.isnew=!0,t.html=a.util.parseAsHtml(t.message),i.mapById[e._id]=t,l.raw.refreshTreeLinks(i).then(function(){return r.extend(t,"issuer")}).then(function(){i.result.push(t)})))})})})},l.raw.save=function(e,n,t){n=n||{},n.result=n.result||[],n.mapById=n.mapById||{},n.pendings=n.pendings||{};var i=t.id,r={creationTime:i?t.creationTime||t.time:a.date.now(),message:t.message,record:e,issuer:o.data.pubkey};t.reply_to||t.parent?r.reply_to=t.reply_to||t.parent.id:r.reply_to=null;var s;return i?(s=n.mapById[i],s.copy(t)):(s=new Comment(null,r),s.addOnRemoveListener(l.raw.createOnDeleteListener(n)),s.uid=o.data.uid,s.name=o.data.name,s.avatar=o.data.avatar,s.isnew=!0,t.parent&&t.parent.addReply(s),n.result.push(s)),s.html=a.util.parseAsHtml(s.message),i?l.raw.update(r,{id:i}).then(function(){return s}):(n.pendings=n.pendings||{},n.pendings[r.creationTime]=r,l.raw.add(r).then(function(e){return s.id=e,n.mapById[e]=s,delete n.pendings[r.creationTime],s}))},l.raw.stopListenChanges=function(e){console.debug("[ES] [comment] Stopping websocket on comments"),_.forEach(e.result,function(e){e.cleanAllListeners()}),l.raw.wsChanges().close()},l.load=l.raw.loadDataByRecordId,l.save=l.raw.save,l.changes={start:l.raw.startListenChanges,stop:l.raw.stopListenChanges},l}return{instance:s}}]),angular.module("cesium.es.http.services",["ngResource","ngApi","cesium.services","cesium.config"]).factory("esHttp",["$q","$timeout","$rootScope","$state","$sce","$translate","$window","$filter","CryptoUtils","UIUtils","csHttp","csConfig","csSettings","BMA","csWallet","csPlatform","Api",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E,g,b){"ngInject";function h(i,a,r,d){function h(e,n,t,i){!e&&p.data&&(e=e||(p.data.plugins&&p.data.plugins.es?p.data.plugins.es.host:null),n=n||(e?p.data.plugins.es.port:null),t=t||(e?p.data.plugins.es.wsPort:null),i=angular.isDefined(i)?i:443==n||p.data.plugins.es.useSsl||f),Y.alive=!1,Y.host=e,Y.port=n||(i||f?443:80),Y.wsPort=t||Y.port,Y.useSsl=angular.isDefined(i)?i:443==Y.port||f,Y.server=u.getServer(e,n)}function T(e){if(e=e||p.data,!e.plugins||!e.plugins.es)return!1;var n=e.plugins.es.host,t=443==e.plugins.es.port||e.plugins.es.useSsl||f,i=e.plugins.es.port||(t?443:80),a=e.plugins.es.wsPort||i;return v(n,i,a,t)}function v(e,n,t,i){return Y.host==e&&Y.port==n&&(!t||Y.wsPort==t)&&(angular.isUndefined(i)||i==Y.useSsl)}function I(){return Y.data.isFallback}function O(e){Y.data.isFallback=e}function N(e){return new RegExp("^"+e+"$")}function R(e){return new RegExp(e)}function C(){return{getByPath:{},postByPath:{},wsByPath:{}}}function A(n,t){return t=t||e.defer(),Y.data.isFallback&&Y.started&&Y.stop(),Y.data.isFallback=!1,W=null,t.resolve(n),t.promise}function S(e,n){n=n||"#";for(var t,i="@"===n?K.USER_TAG:K.HASH_TAG,a=e&&i.exec(e);a;){var o=a[1];t=t||[],_.contains(t,o)||t.push(o),e=e.substr(a.index+a[1].length+1),a=e.length>0&&i.exec(e)}return t}function y(e){for(var n,t=e&&K.URL.exec(e);t;){var i=t[0];n=n||[],_.contains(n,i)||n.push(i),e=e.substr(t.index+t[0].length+1),t=e&&K.URL.exec(e)}return n}function D(e){return e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function L(e,n){var t=e?D(e.trim()):void 0;if(t){n=n||{},n.tagState=n.tagState||"app.wot_lookup.tab_search",n.uidState=n.uidState||"app.wot_identity_uid",!n.newLine&&angular.isDefined(n.newLine)||(t=t.replace(/\n/g,"<br>\n"));var i=y(t);_.forEach(i,function(e){var n='<a on-tap="openLink($event, \'{0}\')" href="{1}" target="_blank">{2}</a>'.format(e,e,z(e));t=t.replace(e,n)});var a=S(t);_.forEach(a,function(e){var i="<a ui-sref=\"{0}({hash: '{1}'})\">#{2}</a>".format(n.tagState,e,e);t=t.replace("#"+e,i)});var o=S(t,"@");_.forEach(o,function(e){var i="<a ui-sref=\"{0}({uid: '{1}'})\">@{2}</a>".format(n.uidState,e,e);t=t.replace("@"+e,i)})}return t}function P(e,n){n=n||["title","description"],e.tags=n.reduce(function(n,t){var i=e[t],a=i&&S(i);return a?n.concat(a):n},[])}function w(e,n){if(e)return e[n]?e[n]:Array.isArray(e)?e.reduce(function(e,t){return e?e:w(t,n)},!1):"object"==typeof e?_.reduce(_.keys(e),function(t,i){return t?t:w(e[i],n)},!1):void 0}function M(e,n){n=n||{};var t=Y.post(e);return function(e,i){return E.auth().then(function(a){n.creationTime&&!e.creationTime&&(e.creationTime=Y.date.now());var o=Y.date.now();e.time=!e.time||e.time<o?o:e.time+1;var r=angular.copy(e);delete r.signature,delete r.hash,r.issuer=a.pubkey,r.version||(r.version=2),n.tagFields&&P(r,n.tagFields);var s=JSON.stringify(r);return l.util.hash(s).then(function(e){return l.sign(e,a.keypair).then(function(n){return s='{"hash":"{0}","signature":"{1}",'.format(e,n)+s.substring(1),t(s,i).then(function(e){return e})})})})}}function k(n,t){return function(i){return(E.isAuth()?e.when(E.data):E.auth({silent:!0,minData:!0})).then(function(e){var a={version:2,index:n,type:t,id:i,issuer:e.pubkey,time:Y.date.now()},o=JSON.stringify(a);return l.util.hash(o).then(function(n){return l.sign(n,e.keypair).then(function(e){return o='{"hash":"{0}","signature":"{1}",'.format(n,e)+o.substring(1),Y.post("/history/delete")(o).then(function(e){return e})})})})}}function U(e){if(!e||!e._content_type||!e._content||0===e._content.length)return null;var n={src:"data:"+e._content_type+";base64,"+e._content};return e._title&&(n.title=e._title),e._name&&(n.name=e._name),n}function x(e){if(!e||!e.src)return null;var n=K.IMAGE_SRC.exec(e.src);if(!n)return null;var t={_content_type:n[1],_content:n[2]};return e.title&&(t._title=e.title),e.name&&(t._name=e.name),t}function B(e){var n=K.ES_USER_API_ENDPOINT.exec(e);if(n)return{dns:n[2]||"",ipv4:n[4]||"",ipv6:n[6]||"",port:n[8]||80}}function H(){return{_id:null,_index:null,_type:null,_version:null,_source:{}}}function F(){V=[p.api.data.on.reset(t,A,Y)]}function G(){_.forEach(V,function(e){e()}),V=[]}var V,W,Y=this,$={ES_USER_API_ENDPOINT:"ES_USER_API( ([a-z_][a-z0-9-_.]*))?( ([0-9.]+))?( ([0-9a-f:]+))?( ([0-9]+))"},K={IMAGE_SRC:N("data:([A-Za-z//]+);base64,(.+)"),URL:R("(www\\.|https?://(www\\.)?)[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)"),HASH_TAG:R("(?:^|[\t\n\rs ])#([\\w]+)"),USER_TAG:R("(?:^|[\t\n\rs ])@("+m.constants.regexp.USER_ID+")"),ES_USER_API_ENDPOINT:N($.ES_USER_API_ENDPOINT)},q=0,z=s("truncUrl");Y.data={isFallback:!1},Y.cache=C(),Y.api=new b(this,"esHttp"),Y.started=!1,Y.init=h,h(i,a,r,d),Y.cleanCache=function(){console.debug("[ES] [http] Cleaning requests cache..."),_.keys(Y.cache.wsByPath).forEach(function(e){var n=Y.cache.wsByPath[e];n.close()}),Y.cache=C()},Y.copy=function(e){return Y.started&&Y.stop(),Y.init(e.host,e.port,e.wsPort,e.useSsl||443==e.port),Y.data.isTemporary=!1,Y.start(!0)},Y.date={now:u.date.now},Y.getUrl=function(e){return u.getUrl(Y.host,Y.port,e,Y.useSsl)},Y.get=function(n){var t=function(i){if(!Y.started)return Y._startPromise||console.error("[ES] [http] Trying to get [{0}] before start()...".format(n)),Y.ready().then(function(n){return n?t(i):e.reject("ERROR.ES_CONNECTION_ERROR")});var a=Y.cache.getByPath[n];return a||(a=u.get(Y.host,Y.port,n,Y.useSsl),Y.cache.getByPath[n]=a),a(i)};return t},Y.post=function(n){var t=function(i,a){if(!Y.started)return Y._startPromise||console.error("[ES] [http] Trying to post [{0}] before start()...".format(n)),Y.ready().then(function(n){return n?t(i,a):e.reject("ERROR.ES_CONNECTION_ERROR")});var o=Y.cache.postByPath[n];return o||(o=u.post(Y.host,Y.port,n,Y.useSsl),Y.cache.postByPath[n]=o),o(i,a)};return t},Y.ws=function(e){return function(){var n=Y.cache.wsByPath[e];return n||(n=u.ws(Y.host,Y.wsPort,e,Y.useSsl),Y.cache.wsByPath[e]=n),n}},Y.isAlive=function(){return u.get(Y.host,Y.port,"/node/summary",Y.useSsl)().then(function(e){var n=e&&e.duniter&&e.duniter.software||"unknown";return"duniter4j-elasticsearch"==n||(console.error("[ES] [http] Not a Duniter4j ES node, but a {0} node".format(n)),!1)})["catch"](function(){return!1})},Y.checkNodeAlive=function(e){if(e)return O(!T()),!0;if(angular.isUndefined(e))return Y.isAlive().then(Y.checkNodeAlive);var n=p.data.plugins&&p.data.plugins.es||{};W=W||{host:n.host,port:n.port,wsPort:n.wsPort};var t=n.fallbackNodes&&q<n.fallbackNodes.length&&n.fallbackNodes[q++];if(!t)return o("ERROR.ES_CONNECTION_ERROR",{server:Y.server}).then(c.alert.info),!1;var i=u.getServer(t.host,t.port);return c.loading.hide(),o("CONFIRM.ES_USE_FALLBACK_NODE",{old:Y.server,"new":i}).then(c.alert.confirm).then(function(e){return!!e&&(Y.cleanCache(),Y.init(t.host,t.port,t.wsPort,t.useSsl||443==t.port),Y.isAlive().then(Y.checkNodeAlive))})},Y.isStarted=function(){return Y.started},Y.ready=function(){return Y.started?e.when(!0):Y._startPromise||Y.start()},Y.start=function(n){return Y._startPromise?Y._startPromise:Y.started?e.when(Y.alive):(Y._startPromise=g.ready().then(function(){n||Y.init()}).then(function(){console.debug("[ES] [http] Starting on [{0}]{1}...".format(Y.server,Y.useSsl?" (SSL on)":""));var e=(new Date).getTime();return Y.checkNodeAlive().then(function(n){return Y.alive=n,n?(F(),console.debug("[ES] [http] Started in "+((new Date).getTime()-e)+"ms"),Y.api.node.raise.start(),Y.started=!0,delete Y._startPromise,q=0,!0):(console.error("[ES] [http] Could not start [{0}]: node unreachable".format(Y.server)),Y.started=!0,delete Y._startPromise,q=0,!1)})}),Y._startPromise)},Y.stop=function(){return console.debug("[ES] [http] Stopping..."),G(),O(!1),delete Y._startPromise,Y.alive?(Y.cleanCache(),Y.alive=!1,Y.started=!1,Y.api.node.raise.stop()):Y.started=!1,e.when()},Y.restart=function(){return Y.stop(),n(Y.start,200)},Y.image={},Y.image.fromHit=function(e,n){if(e&&e._source){var t=e._source[n];if(t&&t._content_type&&t._content_type.startsWith("image/")){var i={};if(t._content)i.src="data:"+t._content_type+";base64,"+t._content;else{var a=t._content_type.substr(6),o=[e._index,e._type,e._id,"_image",n].join("/");o="/"+o+"."+a,i.src=Y.getUrl(o)}return t._title&&(i.title=t._title),t._name&&(i.name=t._name),i}}},Y.api.registerEvent("node","start"),Y.api.registerEvent("node","stop");var j={getServer:u.getServer,node:{summary:Y.get("/node/summary"),parseEndPoint:B,same:v,sameAsSettings:T,isFallback:I},record:{post:M,remove:k},image:{fromAttachment:U,toAttachment:x},hit:{empty:H},util:{parseTags:S,parseAsHtml:L,findObjectInTree:w},constants:$};j.constants.regexp=K,angular.merge(Y,j)}var f=!!("true"===d.httpsMode||d.httpsMode===!0||"force"===d.httpsMode||r.location&&"https:"===r.location.protocol);f&&console.debug("[ES] [https] Enable SSL (forced by config or detected in URL)");var T=new h;return T.instance=function(e,n,t,i){return new h(e,n,t,i)},T}]),angular.module("cesium.es.settings.services",["cesium.services","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esSettings")}]).factory("esSettings",["$rootScope","$q","$timeout","Api","esHttp","csConfig","csSettings","CryptoUtils","Device","UIUtils","csWallet",function(e,n,t,i,a,o,r,s,l,c,u){"ngInject";function d(e,n){var t={};return n.includes&&_.forEach(_.keys(n),function(e){"includes"!=e&&"excludes"!=e&&n.includes.push(e)}),_.forEach(_.keys(e),function(i){n.includes&&!_.contains(n.includes,i)||n.excludes&&_.contains(n.excludes,i)||(e[i]&&"object"==typeof e[i]&&n[i]&&"object"==typeof n[i]?t[i]=d(e[i],n[i]):t[i]=e[i])}),t}function p(e,n){var t=(new Date).getTime();return A.get({id:e})["catch"](function(e){if(e&&e.ucode&&404==e.ucode)return null;throw e}).then(function(e){if(e&&e._source){var i=e._source;if(i.time===r.data.time)return void console.debug("[ES] [settings] Loaded in "+((new Date).getTime()-t)+"ms, but already up to date");var a=s.util.decode_base58(i.nonce);return s.box.open(i.content,a,n.boxPk,n.boxSk).then(function(e){var n=JSON.parse(e||"{}");return n.time=i.time,console.debug("[ES] [settings] Loaded and decrypted in "+((new Date).getTime()-t)+"ms"),n})["catch"](function(e){return console.error("[ES] [settings] Could not load remote settings: "+(e&&e.message||"decryption error")),delete r.data.time,null})}})}function m(e,t){return t=t||n.defer(),angular.merge(e,C),D=!1,t.resolve(e),t.promise}function E(e,t){return t=t||n.defer(),e&&e.pubkey&&e.keypair&&e.keypair.signSk&&e.keypair.boxSk?(console.debug("[ES] [settings] Loading user settings..."),p(e.pubkey,e.keypair).then(function(e){if(e)return angular.merge(r.data,e),O=e,console.debug("[ES] [settings] Applied"),b()}).then(function(){t.resolve(e)})["catch"](function(e){t.reject(e)}),t.promise):(t.resolve(),t.promise)}function g(e){if(!y){var n=N&&N.length>0;!a.isStarted()||a.node.isFallback()||a.node.sameAsSettings(e)||v(),I();var t=A.isEnable();t&&u.isAuth()&&(n?h(e):E(u.data))}}function b(){return y?n.when():(y=!0,r.store().then(function(){y=!1})["catch"](function(e){throw y=!1,e}))}function h(e){var t=d(e,R);if(O&&angular.equals(t,O))return n.when();var i=a.date.now();return console.debug("[ES] [settings] Saving user settings... at time "+i),n.all([u.getKeypair(),s.util.random_nonce()]).then(function(n){var a=n[0],o=n[1];if(a.boxPk&&a.boxSk){var r={issuer:u.data.pubkey,nonce:s.util.encode_base58(o),time:i},l=JSON.stringify(t);return s.box.pack(l,o,a.boxPk,a.boxSk).then(function(n){return r.content=n,angular.isUndefined(e.time)?A.add(r):A.update(r,{id:r.issuer})}).then(function(){return!0})}}).then(function(n){if(n)return e.time=i,
O=t,console.debug("[ES] [settings] Saved user settings in "+(a.date.now()-i)+"ms"),b()})["catch"](function(e){throw console.error(e),e})}function f(){_.forEach(N,function(e){e()}),N=[]}function T(){N=[r.api.data.on.reset(e,m,this),u.api.data.on.auth(e,E,this)]}function v(){f(),a.stop()}function I(){var e=A.isEnable();return!e&&N&&N.length>0?(console.debug("[ES] [settings] Disable"),f(),a.stop().then(function(){S.state.raise.changed(e)})):!e||N&&0!==N.length&&a.isStarted()?void 0:a.start().then(function(n){return n?(console.debug("[ES] [settings] Enable"),T(),u.isAuth()?E(u.data).then(function(){S.state.raise.changed(e)}):void S.state.raise.changed(e)):(r.data.plugins.es.enable=!1,r.data.plugins.es.askEnable=!0,D=!0,S.state.raise.changed(!1),void console.error("[ES] [settings] Disable, has ES node could not be started"))})}var O,N,R={includes:["locale","showUDHistory","useRelative","useLocalStorage","expertMode","logoutIdle"],excludes:["timeout","cacheTimeMs","time","login","build"],plugins:{es:{excludes:["enable","host","port","wsPort","fallbackNodes"]}},helptip:{excludes:["installDocUrl"]}},C=angular.merge({plugins:{es:{askEnable:!1,notifications:{readTime:!0,txSent:!0,txReceived:!0,certSent:!0,certReceived:!0},invitations:{readTime:!0},defaultCountry:void 0,enableGoogleApi:!1,googleApiKey:void 0,wot:{enableMixedSearch:!0},registry:{defaultSearch:{location:null,geoPoint:null}},geoDistance:"20km"}}},{plugins:{es:o.plugins&&o.plugins.es||{}}}),A=this,S=new i("esSettings"),y=!1,D=!1;return A.api=S,A.get=a.get("/user/settings/:id"),A.add=a.record.post("/user/settings"),A.update=a.record.post("/user/settings/:id/_update"),A.isEnable=function(){return r.data.plugins&&r.data.plugins.es&&r.data.plugins.es.enable&&!!r.data.plugins.es.host},A.wot={},A.wot.isMixedSearchEnable=function(){return A.isEnable()&&(!angular.isDefined(r.data.plugins.es.wot&&r.data.plugins.es.wot.enableMixedSearch)||r.data.plugins.es.wot.enableMixedSearch)},S.registerEvent("state","changed"),r.ready().then(function(){return r.api.data.on.changed(e,g,this),a.api.node.on.stop(e,function(){O=null},this),I()}).then(function(){if(!D&&o.plugins&&o.plugins.es&&o.plugins.es.askEnable&&!A.isEnable()&&r.data.plugins.es.askEnable)return c.alert.confirm("ES_SETTINGS.CONFIRM.ASK_ENABLE","ES_SETTINGS.CONFIRM.ASK_ENABLE_TITLE",{cancelText:"COMMON.BTN_NO",okText:"COMMON.BTN_YES"}).then(function(e){return e&&(r.data.plugins.es.enable=!0),r.data.plugins.es.askEnable=!1,r.store()})}),A}]),angular.module("cesium.es.registry.services",["ngResource","cesium.services","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esRegistry")}]).factory("esRegistry",["$rootScope","$q","csPlatform","csSettings","csWallet","csWot","esHttp","esComment","esGeo",function(e,n,t,i,a,o,r,s,l){"ngInject";function c(e){e.pages=null}function u(e,t){return t=t||n.defer(),e&&e.pubkey&&e.keypair?(console.debug("[ES] [registry] Loading pages count..."),I.raw.count({pubkey:e.pubkey}).then(function(n){e.pages=e.pages||{},e.pages.count=n&&n.hits&&n.hits.total,console.debug("[ES] [registry] Loaded pages count ("+e.pages.count+")"),t.resolve(e)})["catch"](function(n){console.error("[ES] [registry] Error while counting page: "+(n.message?n.message:n)),t.resolve(e)}),t.promise):(t.resolve(),t.promise)}function d(){if(I.raw.categories&&I.raw.categories.length){var e=n.defer();return e.resolve(I.raw.categories),e.promise}return I.raw.category.all().then(function(e){if(0===e.hits.total)I.raw.categories=[];else{var n=e.hits.hits.reduce(function(e,n){var t=n._source;return t.id=n._id,e.concat(t)},[]);_.forEach(n,function(e){n[e.id]=e}),I.raw.categories=n}return I.raw.categories})}function p(e){return I.raw.category.get(e).then(function(e){var n=e._source;return n.id=e._id,n})}function m(e,n){if(e){var t=e._source;return t.category&&t.category.id&&(t.category=n[t.category.id]),e.highlight&&(e.highlight.title&&(t.title=e.highlight.title[0]),e.highlight.description&&(t.description=e.highlight.description[0]),e.highlight.location&&(t.location=e.highlight.location[0]),e.highlight.tags&&(t.tags=e.highlight.tags.reduce(function(e,n){return e.concat(n.replace("<em>","").replace("</em>",""))},[]))),t.avatar=r.image.fromHit(e,"avatar"),e._source.pictures&&e._source.pictures.reduce&&(t.pictures=e._source.pictures.reduce(function(e,n){return e.concat(r.image.fromAttachment(n.file))},[])),t}}function E(e){return e=e||{},e.from=e.from||0,e.size=e.size||20,e._source=e._source||v.commons,e.highlight=e.highlight||{fields:{title:{},description:{}}},n.all([d(),I.raw.search(e)]).then(function(n){var t=n[0];if(n=n[1],!n||!n.hits||!n.hits.total)return{total:0,hits:[]};var i=r.util.findObjectInTree(e.query,"geo_distance"),a=i&&i.geoPoint,o=i&&i.distance&&i.distance.replace(new RegExp("[0-9 ]+","gm"),""),s=n.hits.hits.reduce(function(e,n){var i=m(n,t);return i.id=n._id,a&&i.geoPoint&&o&&(i.distance=l.point.distance(a.lat,a.lon,i.geoPoint.lat,i.geoPoint.lon,o)),e.concat(i)},[]);return{total:n.hits.total,hits:s}})}function g(e,t){return t=t||{},t.raw=!!angular.isDefined(t.raw)&&t.raw,t.fecthPictures=angular.isDefined(t.fetchPictures)?t.fetchPictures:t.raw,n.all([d(),t.fecthPictures?I.raw.get({id:e}):I.raw.getCommons({id:e})]).then(function(e){var n=e[0],i=e[1],a=m(i,n);return t.raw||(a.description=r.util.parseAsHtml(a.description,{tagState:"app.wot_lookup.tab_registry"})),o.extend({pubkey:a.issuer}).then(function(e){return{id:i._id,issuer:e,record:a}})})}function b(){_.forEach(T,function(e){e()}),T=[]}function h(){T=[a.api.data.on.load(e,u,this),a.api.data.on.init(e,c,this),a.api.data.on.reset(e,c,this)]}function f(){var e=r.alive;if(!e&&T&&T.length>0){if(console.debug("[ES] [subscription] Disable"),b(),a.isLogin())return c(a.data)}else if(e&&(!T||0===T.length)&&(console.debug("[ES] [subscription] Enable"),h(),a.isLogin()))return u(a.data)}var T,v={commons:["title","description","issuer","time","address","city","creationTime","avatar._content_type","picturesCount","type","category","socials","pubkey","geoPoint"]},I=this;return I.raw={count:r.get("/page/record/_search?size=0&q=issuer::pubkey"),searchText:r.get("/page/record/_search?q=:search"),search:r.post("/page/record/_search"),get:r.get("/page/record/:id"),getCommons:r.get("/page/record/:id?_source="+v.commons.join(",")),category:{get:r.get("/page/category/:id"),all:r.get("/page/category/_search?sort=order&from=0&size=1000&_source=name,parent")}},t.ready().then(function(){return r.api.node.on.start(e,f,this),r.api.node.on.stop(e,f,this),f()}),I.category={all:d,get:p},I.record={search:E,load:g,add:r.record.post("/page/record",{tagFields:["title","description"],creationTime:!0}),update:r.record.post("/page/record/:id/_update",{tagFields:["title","description"]}),remove:r.record.remove("page","record"),fields:{commons:v.commons},picture:{all:r.get("/page/record/:id?_source=pictures")},comment:s.instance("page")},I.currency={all:r.get("/currency/record/_search?_source=currencyName,peers.host,peers.port"),get:r.get("/currency/record/:id/_source")},I}]),angular.module("cesium.es.social.services",["cesium.es.crypto.services"]).factory("SocialUtils",["$filter","$q","CryptoUtils","BMA","csWallet","esCrypto",function(e,n,t,i,a,o){"ngInject";function r(){function r(e){return new RegExp("^"+e+"$")}function s(e){var n;if(m.URI.test(e)){var t=m.URI.exec(e)[1],i=e;if("http"==t||"https"==t){var a=e.indexOf("/",t.length+3);a>0&&(i=e.substring(0,a))}_.keys(m.socials).forEach(function(e){if(m.socials[e].test(i))return n=e,!1}),n||(n="web")}else m.EMAIL.test(e)?n="email":m.PHONE.test(e)&&(n="phone");return n||console.warn("[ES] [social] Unable to detect type of social URL: "+e),n}function l(e){if(e=e?e.trim():e,e&&e.length>0)return e.startsWith("www.")&&(e="http://"+e),{type:s(e),url:e}}function c(n){if(!n||!n.length)return[];var t={};return n.forEach(function(n){if("curve25519"==n.type?(delete n.issuer,n.valid&&angular.merge(n,l(n.url))):n=l(n.url),n){var i=e("formatSlug")(n.url);t[i]=n}}),_.values(t)}function u(e,n){return{recipient:e,type:"curve25519",url:n}}function d(e,i,r){if(r=r||a.data.pubkey,!t.isLoaded())return console.debug("[socials] Waiting crypto lib loading..."),$timeout(function(){return d(e,i,r)},100);var s=_.filter(e||[],function(e){var n=e.url&&"curve25519"==e.type&&m.socials.curve25519.exec(e.url);return!!n&&(e.recipient=n[1],e.nonce=n[2],e.url=n[3],e.issuer=i,e.valid=e.recipient===r,e.valid)});return s.length?o.box.open(s,void 0,"issuer","url").then(function(){return c(e)}):n.when(c(e))}function p(e){if(!t.isLoaded())return console.debug("[socials] Waiting crypto lib loading..."),$timeout(function(){return p(e)},100);var i=_.filter(e||[],function(e){return"curve25519"==e.type&&e.url&&e.recipient});return i.length?t.util.random_nonce().then(function(e){return n.all(i.reduce(function(n,t){return n.concat(o.box.pack(t,void 0,"recipient","url",e))},[]))}).then(function(e){return e.reduce(function(e,n){return e.concat({type:"curve25519",url:"curve25519://{0}:{1}@{2}".format(n.recipient,n.nonce,n.url)})},[])}):n.when(e)}var m={URI:"([a-zAZ0-9]+)://[ a-zA-Z0-9-_:/;*?!^\\+=@&~#|<>%.]+",EMAIL:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$",PHONE:"[+]?[0-9. ]{9,15}",socials:{facebook:"https?://((fb.me)|((www.)?facebook.com))",twitter:"https?://(www.)?twitter.com",googleplus:"https?://plus.google.com(/u)?",youtube:"https?://(www.)?youtube.com",github:"https?://(www.)?github.com",tumblr:"https?://(www.)?tumblr.com",snapchat:"https?://(www.)?snapchat.com",linkedin:"https?://(www.)?linkedin.com",vimeo:"https?://(www.)?vimeo.com",instagram:"https?://(www.)?instagram.com",wordpress:"https?://([a-z]+)?wordpress.com",diaspora:"https?://(www.)?((diaspora[-a-z]+)|(framasphere)).org",duniter:"duniter://[a-zA-Z0-9-_:/;*?!^\\+=@&~#|<>%.]+",bitcoin:"bitcoin://[a-zA-Z0-9-_:/;*?!^\\+=@&~#|<>%.]+",curve25519:"curve25519://("+i.constants.regexp.PUBKEY+"):([a-zA-Z0-9]+)@([a-zA-Z0-9-_:/;*?!^\\+=@&~#|<>%.]+)"}};return m.URI=r(m.URI),m.EMAIL=r(m.EMAIL),m.PHONE=r(m.PHONE),_.keys(m.socials).forEach(function(e){m.socials[e]=r(m.socials[e])}),{get:l,reduce:c,createForEncryption:u,open:d,pack:p}}var s=r();return s.instance=r,s}]),angular.module("cesium.es.crypto.services",["ngResource","cesium.services"]).factory("esCrypto",["$q","$rootScope","CryptoUtils",function(e,n,t){"ngInject";function i(n){if(!n)throw new Error("Missing keypair");return n.boxPk&&n.boxSk?e.when(n):e.all([t.box.keypair.skFromSignSk(n.signSk),t.box.keypair.pkFromSignPk(n.signPk)]).then(function(e){return{boxSk:e[0],boxPk:e[1]}})}function a(n,a,o,r,s){if(o=o||"recipient",!n[o])return e.reject({message:"ES_WALLET.ERROR.RECIPIENT_IS_MANDATORY"});r=r||"content","string"==typeof r&&(r=[r]),n=angular.copy(n);var l=t.util.decode_base58(n[o]);return e.all([i(a),t.box.keypair.pkFromSignPk(l),s?e.when(s):t.util.random_nonce()]).then(function(i){var a=i[0],o=a.boxSk,s=i[1],l=i[2];return e.all(r.reduce(function(e,i){return n[i]?e.concat(t.box.pack(n[i],l,s,o)):e},[])).then(function(e){var i=0;return _.forEach(r,function(t){n[t]?n[t]=e[i++]:n[t]=null}),n.nonce=t.util.encode_base58(l),n})})}function o(n,a,o,r){o=o||"issuer",r=r||"content","string"==typeof r&&(r=[r]);var s=(new Date).getTime(),l={},c=[i(a)];return e.all(n.reduce(function(e,n){var i=n[o];if(!i)throw"Record has no "+o;return l[i]?res:e.concat(t.box.keypair.pkFromSignPk(t.util.decode_base58(i)).then(function(e){l[i]=e}))},c)).then(function(i){var a=i[0];return e.all(n.reduce(function(e,n){var i=l[n[o]],s=t.util.decode_base58(n.nonce);return n.valid=!0,e.concat(r.reduce(function(e,o){return n[o]?e.concat(t.box.open(n[o],s,i,a.boxSk).then(function(e){n[o]=e})["catch"](function(e){console.error(e),console.warn("[ES] [crypto] a record may have invalid cypher "+o),n.valid=!1})):e},[]))},[]))}).then(function(){return console.debug("[ES] [crypto] All record decrypted in "+((new Date).getTime()-s)+"ms"),n})}return{box:{getKeypair:i,pack:a,open:o}}}]),angular.module("cesium.es.profile.services",["cesium.services","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esProfile")}]).factory("esProfile",["$rootScope","$q","esHttp","SocialUtils","csWot","csWallet","csPlatform","esSettings",function(e,n,t,i,a,o,r,s){"ngInject";function l(e){return f.raw.getFields({id:e,fields:"title,avatar._content_type"}).then(function(e){var n;return e&&e._source&&(n={name:e._source.title},n.avatar=t.image.fromHit(e,"avatar")),n})["catch"](function(e){if(e&&e.ucode&&404==e.ucode)return null;throw e})}function c(e,n){n=n||{};var a=n.raw?f.raw.getAll:f.raw.get;return a({id:e}).then(function(a){if(a&&a.found&&a._source){var r={name:a._source.title,source:a._source};return r.name&&r.name.length>30&&(r.name=r.name.substr(0,27)+"..."),r.avatar=t.image.fromHit(a,"avatar"),n.raw||(r.description=t.util.parseAsHtml(r.source.description)),r.source.socials&&r.source.socials.length&&(r.source.socials=_.uniq(r.source.socials,!1,function(e){return e.url})),o.isLogin()?i.open(r.source.socials,e).then(function(){return r}):(r.source.socials=_.filter(r.source.socials,function(e){return"curve25519"!=e.type}),r)}})["catch"](function(e){if(e&&e.ucode&&404==e.ucode)return null;throw e})}function u(e,n){return p(null,e,n)}function d(e,n,i){e.avatar=e.avatar||t.image.fromHit(n,i||"avatar"),e.name=n._source.title,e.name&&e.name.length>30&&(e.name=e.name.substr(0,27)+"..."),e.description=n._source.description||e.description,e.city=n._source.city||e.city,n.highlight&&(n.highlight.title&&(e.name=n.highlight.title[0]),n.highlight.tags&&(e.tags=n.highlight.tags.reduce(function(e,n){return e.concat(n.replace("<em>","").replace("</em>",""))},[])))}function p(e,i,a,o){if(o=o||n.defer(),!(e||i&&i.length))return o.resolve(i),o.promise;a=a||"pubkey",e=e?e.toLowerCase().trim():e;var r,l=e?t.util.parseTags(e):void 0,c={query:{},highlight:{fields:{title:{},tags:{}}},from:0,size:100,_source:["title","avatar._content_type"]},u=e&&s.wot.isMixedSearchEnable();if(u&&(c._source=c._source.concat(["description","city","creationTime","membersCount","type"]),console.debug("[ES] [profile] Mixed search: enable")),i.length>0){r={},_.forEach(i,function(e){var n=e[a];if(n){var t=r[n];t?t.push(e):(t=[e],r[n]=t)}});var p=_.keys(r);c.size=p.length<=c.size?c.size:p.length,e?(c.query.constant_score={filter:{bool:{should:[{terms:{_id:p}},{bool:{must:[{match:{title:{query:e,boost:2}}},{prefix:{title:e}}]}}]}}},l&&c.query.constant_score.filter.bool.should.push({terms:{tags:l}})):(delete c.highlight,c.query.constant_score={filter:{terms:{_id:p}}})}else{if(!e)return o.resolve(i),o.promise;c.query.bool={should:[{match:{title:{query:e,boost:2}}},{prefix:{title:e}}]},l&&c.query.bool.should.push({terms:{tags:l}})}e&&u&&(c.indices_boost={user:100,page:1,group:.01});var m,E=u?f.raw.mixedSearch:f.raw.search;return E(c).then(function(e){if(m=e.hits,m.total>0){var n,s={};_.forEach(m.hits,function(e){var o="avatar";if("user"==e._index){if(n=r&&r[e._id],!n){var l={};l[a]=e._id,n=[l],i.push(l)}}else if("user"!=e._index){s[e._index]||(s[e._index]=!0,i.push({id:"divider-"+e._index,divider:!0,index:e._index}));var c={id:e._index+"-"+e._id,index:e._index,templateUrl:"plugins/es/templates/wot/lookup_item_{0}.html".format(e._index),state:"app.view_{0}".format(e._index),stateParams:{id:e._id,title:e._source.title},creationTime:e._source.creationTime,memberCount:e._source.memberCount,type:e._source.type};n=[c],i.push(c),o="avatar"}var u=t.image.fromHit(e,o);_.forEach(n,function(n){n.avatar=u,d(n,e)})}),_.keys(s).length&&i.splice(0,0,{id:"divider-identities",divider:!0,index:"profile"})}o.resolve(i)})["catch"](function(e){e&&e.ucode&&404==e.ucode?o.resolve(i):o.reject(e)}),o.promise}function m(e,t){return t=t||n.defer(),e&&e.pubkey?(n.all([c(e.pubkey).then(function(n){n&&(e.name=n.name,e.avatar=n.avatar,e.profile=n.source,e.profile.description=n.description),t.resolve(e)}),u((e.received_cert||[]).concat(e.received_cert_pending||[]).concat(e.given_cert||[]).concat(e.given_cert_pending||[]))])["catch"](function(e){t.reject(e)}),t.promise):(t.resolve(),t.promise)}function E(){_.forEach(h,function(e){e()}),h=[]}function g(){h=[a.api.data.on.load(e,m,this),a.api.data.on.search(e,p,this)]}function b(){var e=t.alive;!e&&h&&h.length>0?(console.debug("[ES] [profile] Disable"),E()):!e||h&&0!==h.length||(console.debug("[ES] [profile] Enable"),g())}var h,f=this;return f.raw={getFields:t.get("/user/profile/:id?&_source_exclude=avatar._content&_source=:fields"),get:t.get("/user/profile/:id?&_source_exclude=avatar._content"),getAll:t.get("/user/profile/:id"),search:t.post("/user/profile/_search"),mixedSearch:t.post("/user,page,group/profile,record/_search")},r.ready().then(function(){return t.api.node.on.start(e,b,this),t.api.node.on.stop(e,b,this),b()}),{getAvatarAndName:l,get:c,add:t.record.post("/user/profile",{tagFields:["title","description"]}),update:t.record.post("/user/profile/:id/_update",{tagFields:["title","description"]}),avatar:t.get("/user/profile/:id?_source=avatar"),fillAvatars:u,remove:t.record.remove("user","profile")}}]),angular.module("cesium.es.notification.services",["cesium.platform","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esNotification")}]).factory("esNotification",["$rootScope","$q","$timeout","esHttp","csConfig","csSettings","csWallet","csWot","UIUtils","BMA","CryptoUtils","csPlatform","Api",function(e,n,t,i,a,o,r,s,l,c,u,d,p){"ngInject";function m(e,n){n=n||{},n.codes=n.codes||{},n.codes.excludes=n.codes.excludes||C.EXCLUDED_CODES;var t={bool:{must:[{term:{recipient:e}}]}};if(n.codes&&n.codes.includes)t.bool.must.push({terms:{code:n.codes.includes}});else{var i=[];o.getByPath("plugins.es.notifications.txSent",!1)||i.push("TX_SENT"),o.getByPath("plugins.es.notifications.txReceived",!0)||i.push("TX_RECEIVED"),o.getByPath("plugins.es.notifications.certSent",!1)||i.push("CERT_SENT"),o.getByPath("plugins.es.notifications.certReceived",!0)||i.push("CERT_RECEIVED"),n.codes.excludes&&_.forEach(n.codes.excludes,function(e){i.push(e)}),i.length&&(t.bool.must_not={terms:{code:i}})}return n.readTime&&t.bool.must.push({range:{time:{gt:n.readTime}}}),t}function E(e,t){if(!e)return n.reject("[ES] [notification] Unable to load - missing pubkey");var i={query:m(e,t)};return i.query.bool.must.push({missing:{field:"read_signature"}}),S.raw.postCount(i).then(function(e){return e.count})}function g(e,t){if(!e)return n.reject("[ES] [notification] Unable to load - missing pubkey");t=t||{},t.from=t.from||0,t.size=t.size||C.DEFAULT_LOAD_SIZE;var i={query:m(e,t),sort:[{time:{order:"desc"}}],from:t.from,size:t.size,_source:A.commons};return S.raw.postSearch(i).then(function(e){if(!e.hits||!e.hits.total)return[];var n=e.hits.hits.reduce(function(e,n){var t=new Notification(n._source,f);return t.id=n._id,e.concat(t)},[]);return s.extendAll(n)})}function b(n){if(n&&r.isLogin()){if(_.contains(C.INVITATION_CODES,n.code))return void y.event.raise.newInvitation(n);if(_.contains(C.MESSAGE_CODES,n.code))return void y.event.raise.newMessage(n);var t=new Notification(n,f);return s.extendAll([t]).then(function(){e.$$phase?h(t):e.$applyAsync(function(){h(t)})})}}function h(e){r.data.notifications=r.data.notifications||{},r.data.notifications.unreadCount++,y.data.raise["new"](e)}function f(e){if(!e.read&&e.id){if(!e.id)return void console.error("[ES] [notification] Could not mark as read: no 'id' found!",e);if(r.isAuth())return e.read=!0,r.getKeypair().then(function(n){return u.sign(e.hash,n).then(function(n){return S.raw.postReadById(n,{id:e.id})})["catch"](function(e){console.error("[ES] [notification] Error while trying to mark event as read.",e)})})}}function T(e){e.notifications=e.notifications||{},e.notifications.unreadCount=null,S.raw.ws.getUserEvent().close()}function v(e,t){if(t=t||n.defer(),!e||!e.pubkey||!e.keypair)return t.resolve(),t.promise;console.debug("[ES] [notification] Loading count...");var i=(new Date).getTime();return E(e.pubkey,{readTime:o.data.wallet?o.data.wallet.notificationReadTime:0,excludeCodes:C.EXCLUDED_CODES}).then(function(n){e.notifications=e.notifications||{},e.notifications.unreadCount=n,console.debug("[ES] [notification] Loaded count ("+n+") in "+((new Date).getTime()-i)+"ms"),t.resolve(e)})["catch"](function(e){t.reject(e)}).then(function(){console.debug("[ES] [notification] Starting listen user event...");var n=S.raw.ws.getUserEvent();return R.push(n.close),n.on(b,{pubkey:e.pubkey,locale:o.data.locale.id})["catch"](function(e){console.error("[ES] [notification] Unable to listen user event",e),l.alert.error("ACCOUNT.ERROR.WS_CONNECTION_FAILED")})}),t.promise}function I(){R=[r.api.data.on.login(e,v,this),r.api.data.on.init(e,T,this),r.api.data.on.reset(e,T,this)]}function O(){_.forEach(R,function(e){e()}),R=[]}function N(){var e=i.alive;if(!e&&R&&R.length>0)console.debug("[ES] [notification] Disable"),O(),r.isLogin()&&T(r.data);else if(e&&(!R||0===R.length)&&(console.debug("[ES] [notification] Enable"),I(),r.isLogin()))return v(r.data)}var R,C={MESSAGE_CODES:["MESSAGE_RECEIVED"],INVITATION_CODES:["INVITATION_TO_CERTIFY"],DEFAULT_LOAD_SIZE:20},A={commons:["type","code","params","reference","recipient","time","hash","read_signature"]},S=this,y=new p(this,"esNotification");return C.EXCLUDED_CODES=C.MESSAGE_CODES.concat(C.INVITATION_CODES),S.raw={postCount:i.post("/user/event/_count"),postSearch:i.post("/user/event/_search"),postReadById:i.post("/user/event/:id/_read"),ws:{getUserEvent:i.ws("/ws/event/user/:pubkey/:locale"),getChanges:i.ws("/ws/_changes")}},y.registerEvent("data","new"),y.registerEvent("event","newInvitation"),y.registerEvent("event","newMessage"),d.ready().then(function(){return i.api.node.on.start(e,N,this),i.api.node.on.stop(e,N,this),N()}),S.load=g,S.unreadCount=E,S.api=y,S.websocket={event:S.raw.ws.getUserEvent,change:S.raw.ws.getChanges},S.constants=C,S}]),angular.module("cesium.es.message.services",["ngResource","cesium.platform","cesium.es.http.services","cesium.es.wallet.services","cesium.es.notification.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esMessage")}]).factory("esMessage",["$q","$rootScope","$timeout","UIUtils","Api","CryptoUtils","csPlatform","csConfig","csSettings","esHttp","csWallet","esWallet","csWot","esNotification",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";function E(e){e.messages=e.messages||{},e.messages.unreadCount=null}function g(e){e.messages&&delete e.messages}function b(n,t){if(t=t||e.defer(),!n||!n.pubkey)return t.resolve(),t.promise;console.debug("[ES] [message] Loading count...");var i=(new Date).getTime();return h(n.pubkey).then(function(e){n.messages=n.messages||{},n.messages.unreadCount=e,console.debug("[ES] [message] Loaded count ("+e+") in "+((new Date).getTime()-i)+"ms"),t.resolve(n)})["catch"](function(e){console.error("Error chile counting message: "+(e.message?e.message:e)),t.resolve(n)}),t.promise}function h(e){if(e=e||(u.isLogin()?u.data.pubkey:e),!e)throw new Error("no pubkey, and user not connected.");var n={query:{bool:{must:[{term:{recipient:e}},{missing:{field:"read_signature"}}]}}};return c.post("/message/inbox/_count")(n).then(function(e){return e.count})}function f(e){console.debug("[ES] [message] detected new message (from notification service)");var n=new Notification(e);n.issuer=n.pubkey,delete n.pubkey,p.extend(n,"issuer").then(function(){u.data.messages=u.data.messages||{},u.data.messages.unreadCount++,V.data.raise["new"](n)})}function T(e){return u.getKeypair().then(function(n){return v(e,n).then(function(t){var i=!l.data.plugins.es.message||!angular.isDefined(l.data.plugins.es.message.outbox)||l.data.plugins.es.message.outbox;return i?v(e,n,"/message/outbox","issuer")["catch"](function(e){return console.error("Failed to store message to outbox: "+e),t}):t}).then(function(e){return V.data.raise.sent(e),e})})}function v(e,n,t,i){return t=t||"/message/inbox",d.box.record.pack(e,n,i,["title","content"]).then(function(e){return c.record.post(t)(e)})}function I(n){if(!u.isLogin())return e.when([]);n=n||{},n.from=n.from||0,n.size=n.size||H.DEFAULT_LOAD_SIZE;var t={sort:{time:"desc"},query:{bool:{filter:{term:{recipient:u.data.pubkey}}}},from:n.from,size:n.size,_source:F.notifications};return G.postSearch(t).then(function(e){if(!e||!e.hits||!e.hits.total)return[];var n=e.hits.hits.reduce(function(e,n){var t=n._source;return t.id=n._id,t.read=!!t.read_signature,delete t.read_signature,e.concat(t)},[]);return p.extendAll(n,"issuer")})}function O(e,n){e=e||u.data.pubkey,n=n||{},n.type=n.type||"inbox",n.from=n.from||0,n.size=n.size||1e3,n._source=n._source||F.commons;var t={sort:{time:"desc"},from:n.from,size:n.size,_source:n._source};return"inbox"==n.type?t.query={bool:{filter:{term:{recipient:e}}}}:t.query={bool:{filter:{term:{issuer:e}}}},G.postSearchByType(t,{type:n.type}).then(function(e){if(!e||!e.hits||!e.hits.total)return[];var t=e.hits.hits.reduce(function(e,t){var i=t._source||{};return i.id=t._id,i.read="outbox"==n.type||!!i.read_signature,delete i.read_signature,e.concat(i)},[]);return console.debug("[ES] [message] Loading {0} {1} messages".format(t.length,n.type)),t})}function N(e){e=e||{},e.type=e.type||"inbox",e._source=F.commons,e.summary=!angular.isDefined(e.summary)||e.summary,e.filter=angular.isDefined(e.filter)?e.filter:void 0,e.from=e.from||0;var n=u.auth().then(function(n){return O(n.pubkey,e).then(function(t){return C(t,n.keypair,e.summary)})}).then(function(n){var t="inbox"==e.type?"issuer":"recipient";return p.extendAll(n,t)}).then(function(n){if(n.length&&e.filter){var t=P(n,e.filter);if(t.length<n.length)return e=angular.copy(e),e.from+=e.size,e.size=n.length-t.length,N(e).then(function(e){return t.concat(e)})}return 0!==e.from||e.filter||(u.data.messages=u.data.messages||{},u.data.messages.count=n.length),n});return 0===e.from&&e.filter&&n.then(w),n}function R(e,n){return n=n||{},n.type=n.type||"inbox",n.summary=!!angular.isDefined(n.summary)&&n.summary,u.auth().then(function(t){return G.getByTypeAndId({id:e,type:n.type}).then(function(e){if(e.found){var i=e._source;return i.id=e._id,i.read="outbox"==n.type||!!i.read_signature,delete i.read_signature,C([i],t.keypair,n.summary).then(function(){var e="inbox"==n.type?"issuer":"recipient";return p.extend(i,e)})}})})}function C(n,t,i){var a=(new Date).getTime(),r={},s=[d.box.getKeypair(t)];return e.all(n.reduce(function(e,n){return r[n.issuer]?res:e.concat(o.box.keypair.pkFromSignPk(o.util.decode_base58(n.issuer)).then(function(e){r[n.issuer]=e}))},s)).then(function(t){var a=t[0];return e.all(n.reduce(function(e,n){var t=r[n.issuer],s=o.util.decode_base58(n.nonce);return n.valid=!0,e.concat(o.box.open(n.title,s,t,a.boxSk).then(function(e){n.title=e})["catch"](function(e){console.error(e),console.warn("[ES] [message] may have invalid cypher title"),n.valid=!1}),o.box.open(n.content,s,t,a.boxSk).then(function(e){n.content=e,i?A(n):e&&(n.html=c.util.parseAsHtml(e))})["catch"](function(e){console.error(e),console.warn("[ES] [message] may have invalid cypher content"),n.valid=!1}))},[]))}).then(function(){return console.debug("[ES] [message] All messages decrypted in "+((new Date).getTime()-a)+"ms"),n})}function A(e){e.content&&(e.summary=e.content.replace(/(^|[\n\r]+)\s*>[^\n\r]*/g,"").trim(),e.summary.length>140&&(e.summary=e.summary.substr(0,137)+"..."))}function S(e,n){return n=n||"inbox",c.record.remove("message",n)(e).then(function(t){return"inbox"==n&&(u.data.messages=u.data.messages||{},u.data.messages.count=u.data.messages.count>0?u.data.messages.count-1:0),V.data.raise["delete"](e),t})}function y(n){return n=n||"inbox",u.auth().then(function(t){return O(t.pubkey,{type:n,from:0,size:1e3,_source:!1}).then(function(i){if(i&&i.length){var a=_.pluck(i,"id");return e.all(i.reduce(function(e,i){return e.concat(c.record.remove("message",n)(i.id,t))},[])).then(function(){return a})}}).then(function(e){"inbox"==n&&(u.data.messages=u.data.messages||{},u.data.messages.count=0,u.data.messages.unreadCount=0),_.forEach(e,V.data.raise["delete"])})})}function D(n,t){if(t=t||"inbox",n.read){var i=e.defer();return i.resolve(),i.promise}return n.read=!0,u.getKeypair().then(function(e){return o.sign(n.hash,e)}).then(function(e){return G.postReadById(e,{id:n.id})}).then(function(){"inbox"==t&&(u.data.messages=u.data.messages||{},u.data.messages.unreadCount=u.data.messages.unreadCount?u.data.messages.unreadCount-1:0)})}function L(){return u.auth().then(function(n){return O(n.pubkey,{type:"inbox",from:0,size:1e3,_source:["hash","read_signature"]}).then(function(t){if(t&&t.length)return t=_.filter(t,{read:!1}),e.all(t.reduce(function(e,t){return e.concat(o.sign(t.hash,n.keypair).then(function(e){return G.postReadById(e,{id:t.id})}))},[]))}).then(function(){u.data.messages=u.data.messages||{},u.data.messages.unreadCount=0})})}function P(e,n){if(n&&!n.trim().length)return e;e.forEach(function(e){e.content&&(e.summary=e.content.replace(/(^|[\n\r]+)\s*>[^\n\r]*/g,"").trim()||"")});var t=n.trim().split(" ");return t.forEach(function(n){var t=new RegExp(n,"gi");e.forEach(function(e){var i=t.exec(e.title);if(i)for(e.title=e.title.replace(t,"<b>$&</b>"),e.titleMatch=(e.titleMatch||0)+1;;){if(i=t.exec(e.title.substring(i.index+n.length)),!i||e.titleMatch>=10)break;e.titleMatch=e.titleMatch+1}else if(i=t.exec(e.summary)){for(i.index>140&&(e.summary="..."+e.summary.substring(i.index-20)),e.summary=e.summary.replace(t,"<b>$&</b>"),e.contentMatch=(e.contentMatch||0)+1;;){if(i=t.exec(e.summary.substring(i.index+n.length)),!i||e.contentMatch>=10)break;e.contentMatch++}e.summary.length>140&&(e.summary=e.summary.substr(0,137)+"...")}})}),e=_.filter(e,function(e){return e.titleMatch||e.contentMatch})}function w(e){return _.sortBy(e,function(e){return-1*(1e3*(e.titleMatch||0)+100*(e.contentMatch||0)+e.time/1e10)})}function M(n){var t=s.developers||[{pubkey:"38MEAZN68Pz1DTvT3tqgxx4yQP6snJCQhPqEFxbDk4aE"}];n&&n.content&&t&&t.length&&(console.info("[ES] [message] Sending logs to developers..."),n.issuer=u.data.pubkey,n.title=n.title||"Sending log",n.time=c.date.now(),u.getKeypair().then(function(i){return e.all(t.reduce(function(e,t){return t.pubkey?e.concat(v(angular.merge({recipient:t.pubkey},n),i)):e},[]))}).then(function(e){console.info("[ES] [message] Logs sent to {0} developers".format(e.length))}))}function k(){_.forEach(B,function(e){e()}),B=[]}function U(){B=[u.api.data.on.login(n,b,this),u.api.data.on.init(n,E,this),u.api.data.on.reset(n,g,this),m.api.event.on.newMessage(n,f,this),u.api.error.on.send(n,M,this)]}function x(){var e=c.alive;!e&&B&&B.length>0?(console.debug("[ES] [message] Disable"),k(),u.isLogin()&&g(u.data)):!e||B&&0!==B.length||(console.debug("[ES] [message] Enable"),U(),u.isLogin()&&b(u.data))}var B,H={DEFAULT_LOAD_SIZE:10},F={commons:["issuer","recipient","title","content","time","nonce","read_signature"],notifications:["issuer","time","hash","read_signature"]},G={postSearch:c.post("/message/inbox/_search"),postSearchByType:c.post("/message/:type/_search"),getByTypeAndId:c.get("/message/:type/:id"),postReadById:c.post("/message/inbox/:id/_read")},V=new a(this,"esMessage");return V.registerEvent("data","new"),V.registerEvent("data","delete"),V.registerEvent("data","sent"),r.ready().then(function(){return c.api.node.on.start(n,x,this),c.api.node.on.stop(n,x,this),x()}),{api:V,search:G.postSearch,notifications:{load:I},load:N,get:R,send:T,remove:S,removeAll:y,markAsRead:D,markAllAsRead:L,fields:{commons:F.commons}}}]),angular.module("cesium.es.modal.services",["cesium.modal.services","cesium.es.message.services"]).factory("esModals",["$state","ModalUtils","UIUtils","csWallet",function(e,n,t,i){"ngInject";function a(e){return n.show("plugins/es/templates/message/modal_compose.html","ESMessageComposeModalCtrl",e,{
focusFirstInput:!0})}function o(){if(i.data.notifications.unreadCount=0,i.data.notifications&&i.data.notifications.history.length){var e=i.data.notifications.history[0],n=e?e.time:0;csSettings.data.wallet=csSettings.data.wallet||{},n&&csSettings.data.wallet.notificationReadTime!=n&&(csSettings.data.wallet.notificationReadTime=n,csSettings.store())}}function r(n,i){return t.popover.show(i,{templateUrl:"plugins/es/templates/common/popover_notification.html",scope:n,autoremove:!1,afterHidden:o}).then(function(n){n&&(n.onRead&&"function"==typeof n.onRead&&n.onRead(),n.state&&e.go(n.state,n.stateParams))})}function s(e){return i.auth({minData:!0}).then(function(i){return t.loading.hide(),i.isMember?n.show("plugins/es/templates/invitation/modal_new_invitation.html","ESNewInvitationModalCtrl",e):t.alert.error("ERROR.ONLY_MEMBER_CAN_EXECUTE_THIS_ACTION")})}function l(){return i.auth({minData:!0}).then(function(){return t.loading.hide(),n.show("plugins/es/templates/registry/modal_record_type.html",void 0,{title:"REGISTRY.EDIT.TITLE_NEW"}).then(function(n){n&&e.go("app.registry_add_record",{type:n})})})}return{showMessageCompose:a,showNotifications:r,showNewInvitation:s,showNewPage:l}}]),angular.module("cesium.es.blockchain.services",["cesium.services","cesium.es.http.services"]).factory("esBlockchain",["$rootScope","$q","$timeout","BMA","esHttp",function(e,n,t,i,a){"ngInject";function o(){function e(e){return new RegExp("^"+e+"$")}var n=i.constants.regexp.PUBKEY,t={DEFAULT_SEARCH_SIZE:40,ES_CORE_API_ENDPOINT:"ES_CORE_API( ([a-z_][a-z0-9-_.]*))?( ([0-9.]+))?( ([0-9a-f:]+))?( ([0-9]+))"},o={SEARCH_FILTER:{TX_PUBKEY:new RegExp("\\(transactions\\.issuers:("+n+") OR transactions\\.outputs:\\*("+n+")\\)([ ]+AND)?"),ISSUER:new RegExp("issuer:("+n+")([ ]+AND)?"),MEMBER_FLOWS:new RegExp("\\(_exists_:joiners OR _exists_:leavers OR _exists_:revoked OR _exists_:excluded\\)([ ]+AND)?"),EXISTING_TRANSACTION:new RegExp("_exists_:transactions([ ]+AND)?"),PERIOD:new RegExp("medianTime:>=?([0-9]+)[ ]+AND[ ]+medianTime:<=?([0-9]+)([ ]+AND)?")},LAST_AND:/[ ]+AND$/},r={MINIMAL:["number","hash","medianTime","issuer"],COMMONS:["number","hash","medianTime","issuer","currency","version","powMin","dividend","membersCount","identities","joiners","actives","leavers","revoked","excluded","certifications","transactions"]},s={node:{},block:{},raw:{block:{search:a.post("/:currency/block/_search"),searchText:a.get("/:currency/block/_search?q=:text"),get:a.get("/:currency/block/:number/_source")}},regex:{ES_CORE_API_ENDPOINT:e(t.ES_CORE_API_ENDPOINT)}};return s.node.parseEndPoint=function(e){var n=REGEX.ES_CORE_API_ENDPOINT.exec(e);if(n)return{dns:n[2]||"",ipv4:n[4]||"",ipv6:n[6]||"",port:n[8]||80}},s.raw.block.processSearchResult=function(e,n){n=n||{},n.excludeCurrent=!angular.isDefined(n.excludeCurrent)||n.excludeCurrent,n.fillAvatar=!angular.isDefined(n.fillAvatar)||n.fillAvatar,n.cleanData=!angular.isDefined(n.cleanData)||n.cleanData;var t=!1,i=(e&&e.hits&&e.hits.hits||[]).reduce(function(e,i){if("current"==i._id&&n.excludeCurrent)return t=!0,e;if(!i._source)return e;var a=new Block(i._source);return n.cleanData&&a.cleanData(),e.concat(a)},[]);return{hits:i,took:e.took,total:e&&e.hits&&e.hits.total?t?e.hits.total-1:e.hits.total:0}},s.block.search=function(e,n){var i=n?angular.copy(n):{};return delete i.excludeCurrent,delete i.fillAvatar,delete i.skipData,i.from=i.from||0,i.size=i.size||t.DEFAULT_SEARCH_SIZE,i._source=n._source||r.COMMONS,n._source&&"*"==n._source&&delete i._source,s.raw.block.search(i,{currency:e}).then(function(e){return s.raw.block.processSearchResult(e,n)})},s.block.searchText=function(e,n,i){i&&angular.isUndefined(i.excludeCurrent)&&(i.excludeCurrent=!0);var a=i?angular.copy(i):{};return delete a.excludeCurrent,delete a.fillAvatar,delete a.skipData,a.from=a.from||0,a.size=a.size||t.DEFAULT_SEARCH_SIZE,a._source=i._source||r.COMMONS.join(","),i._source&&"*"==i._source&&delete a._source,a.currency=e,a.text=n||"",s.raw.block.searchText(a).then(function(e){return s.raw.block.processSearchResult(e,i)})},s.block.parseSearchText=function(e,n){var t=e;return n=_.keys(o.SEARCH_FILTER).reduce(function(e,n){var i=o.SEARCH_FILTER[n].exec(t);if(i){var a=i[0];t=t.replace(a,""),a=a.replace(o.LAST_AND,"");var r={type:n,text:a,params:i};return e.concat(r)}return e},n||[]),{filters:n,text:t.trim()}},s}return o()}]),angular.module("cesium.es.group.services",["cesium.platform","cesium.es.http.services","cesium.es.profile.services","cesium.es.notification.services","cesium.es.comment.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esGroup")}]).factory("esGroup",["$q","$rootScope","csPlatform","BMA","csSettings","esHttp","CryptoUtils","csWot","csWallet","esNotification","esComment",function(e,n,t,i,a,o,r,s,l,c,u){"ngInject";function d(e){e.groups=e.groups||{},e.groups.unreadCount=null}function p(e){e.groups&&delete e.groups}function m(n,t){return t=t||e.defer(),n&&n.pubkey?(c.unreadCount(n.pubkey,{codes:{includes:["GROUP_INVITATION"],excludes:[]}}).then(function(e){n.groups=n.groups||{},n.groups.unreadCount=e,console.debug("[ES] [group] Detecting "+e+" unread notifications"),t.resolve(n)})["catch"](function(e){console.error("Error while counting group notifications: "+(e.message?e.message:e)),t.resolve(n)}),t.promise):(t.resolve(),t.promise)}function E(e,n){if(e){var t=e._source;return n&&e.highlight&&(e.highlight.title&&(t.title=e.highlight.title[0]),e.highlight.description&&(t.description=e.highlight.description[0]),e.highlight.location&&(t.location=e.highlight.location[0]),e.highlight.tags&&(data.tags=e.highlight.tags.reduce(function(e,n){return e.concat(n.replace("<em>","").replace("</em>",""))},[]))),n&&(t.description=o.util.parseAsHtml(t.description)),t.avatar=o.image.fromHit(e,"avatar"),e._source.pictures&&e._source.pictures.reduce&&(t.pictures=e._source.pictures.reduce(function(e,n){return e.concat(o.image.fromAttachment(n.file))},[])),t}}function g(e){return C._internal.search(e).then(function(e){if(!e||!e.hits||!e.hits.total)return[];var n=e.hits.hits.reduce(function(e,n){var t=E(n,!0);return t.id=n._id,t?e.concat(t):e},[]);return console.debug("[ES] [group] Loading {0} groups".format(n.length)),n})}function b(e){e=e||{};var n={sort:{time:"desc"},from:e.from||0,size:e.size||N,_source:e._source||R.list};return g(n)}function h(e){e=e||{};var n=e.text&&e.text.trim();if(!n)return b(e);var t={from:e.from||0,size:e.size||N,highlight:{fields:{title:{},tags:{}}},_source:e._source||R.list},a=[],o=[];if(i.regexp.PUBKEY.test(n))o.push({term:{issuer:n}}),o.push({term:{pubkey:n}});else{n=n.toLowerCase();var r=["title","description"];a.push({multi_match:{query:n,fields:r,type:"phrase_prefix"}}),a.push({match:{title:n}}),a.push({match:{description:n}})}return t.query={bool:{}},a.length>0&&(t.query.bool.should=a),o.length>0&&(t.query.bool.filter=o),g(t)}function f(e,n){n=n||{},n.fecthPictures=!!angular.isDefined(n.fetchPictures)&&n.fetchPictures,n.html=!angular.isDefined(n.html)||n.html;var t=n.fecthPictures?C._internal.get({id:e}):C._internal.getCommons({id:e});return t.then(function(e){var t=E(e,n.html);return s.extend({pubkey:t.issuer}).then(function(n){return{id:e._id,issuer:n,record:t}})})}function T(){_.forEach(O,function(e){e()}),O=[]}function v(){O=[l.api.data.on.login(n,m,this),l.api.data.on.init(n,d,this),l.api.data.on.reset(n,p,this)]}function I(){var e=o.alive;!e&&O&&O.length>0?(console.debug("[ES] [group] Disable"),T(),l.isLogin()&&p(l.data)):!e||O&&0!==O.length||(console.debug("[ES] [group] Enable"),v(),l.isLogin()&&m(l.data))}var O,N=50,R={list:["issuer","title","description","type","creationTime","avatar._content_type"],commons:["issuer","title","description","creationTime","time","signature"],notifications:["issuer","time","hash","read_signature"]},C={_internal:{}};return C._internal.search=o.post("/group/record/_search"),C._internal.get=o.get("/group/record/:id"),C._internal.getCommons=o.get("/group/record/:id?_source="+R.commons.join(",")),t.ready().then(function(){return o.api.node.on.start(n,I,this),o.api.node.on.stop(n,I,this),I()}),{record:{last:b,search:h,load:f,add:o.record.post("/group/record",{tagFields:["title","description"]}),update:o.record.post("/group/record/:id/_update",{tagFields:["title","description"]}),remove:o.record.remove("group","record"),fields:{commons:R.commons},picture:{all:o.get("/group/record/:id?_source=pictures")},comment:u.instance("group")}}}]),angular.module("cesium.es.invitation.services",["cesium.platform","cesium.es.http.services","cesium.es.wallet.services","cesium.es.notification.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esInvitation")}]).factory("esInvitation",["$rootScope","$q","CryptoUtils","csPlatform","Api","esHttp","csWallet","esWallet","csWot","esNotification",function(e,n,t,i,a,o,r,s,l,c){"ngInject";function u(e){e.invitations=e.invitations||{},e.invitations.unreadCount=null}function d(e){e.invitations&&delete e.invitations}function p(e,t){if(t=t||n.defer(),!e||!e.pubkey)return t.resolve(),t.promise;console.debug("[ES] [invitations] Loading count...");var i=(new Date).getTime();return g(e.pubkey).then(function(n){e.invitations=e.invitations||{},e.invitations.unreadCount=n,console.debug("[ES] [invitation] Loaded count ("+n+") in "+((new Date).getTime()-i)+"ms"),t.resolve(e)})["catch"](function(n){console.error("Error while counting invitation: "+(n.message?n.message:n)),t.resolve(e)}),t.promise}function m(e){if(r.data.invitations&&r.data.invitations.list){var t=_.where(r.data.invitations.list,{type:"certification",pubkey:e.pubkey});if(t&&t.length)return n.all(t.reduce(function(e,n){return e.concat(T(n))},[]))}}function E(n){return console.debug("[ES] [invitation] detected new invitation (from notification service)"),r.isAuth()?void h(n.reference.id,n.reference.type).then(function(e){r.data.invitations=r.data.invitations||{},r.data.invitations.unreadCount++,r.data.invitations.list&&r.data.invitations.list.splice(0,0,e),D.data.raise["new"](e)}):void e.$applyAsync(function(){r.data.invitations=r.data.invitations||{},r.data.invitations.unreadCount++})}function g(e){if(e=e||(r.isLogin()?r.data.pubkey:e),!e)throw new Error("User not connected or no pubkey");var n={query:{bool:{must:[{term:{recipient:e}}]}}};return o.post("/invitation/certification/_count")(n).then(function(e){return e.count})}function b(e,n,t){return t=t||"certification",s.box.record.pack(e,n,"recipient",["content","comment"]).then(function(e){return A.raw[t].add(e)})}function h(e,t){return t=t||"certification",n.all([s.box.getKeypair(),A.raw[t].get({id:e,fields:y.commons.join(",")})]).then(function(e){var n=e[0],t=e[1],i=t._source;return i.id=t._id,i.type=t._type,s.box.record.open([i],n,"issuer",["content","comment"])}).then(function(e){var n=e[0];if(n&&n.valid){var t=new Invitation(n);return l.extendAll(t.issuer?[t,t.issuer]:[t],"pubkey").then(function(){return t})}})}function f(e){if(!r.isLogin())return n.when([]);e=e||{},e.from=e.from||0,e.size=e.size||S.DEFAULT_LOAD_SIZE;var t={sort:{time:"desc"},query:{bool:{filter:{term:{recipient:r.data.pubkey}}}},from:e.from,size:e.size,_source:y.commons};return e.readTime&&(query.bool.must=[{range:{time:{gt:e.readTime}}}]),n.all([s.box.getKeypair(),A.raw.certification.postSearch(t)]).then(function(e){var n=e[0];if(e=e[1],!e||!e.hits||!e.hits.total)return[];var t=e.hits.hits.reduce(function(e,n){var t=n._source;return t.id=n._id,t.type=n._type,t.read=!!t.read_signature,delete t.read_signature,e.concat(t)},[]);return s.box.record.open(t,n,"issuer",["content","comment"])}).then(function(n){var t=[];return n=n.reduce(function(e,n){if(!n||!n.valid)return e;var i=new Invitation(n);return t.push(i),i.issuer&&t.push(i.issuer),e.concat(i)},[]),l.extendAll(t,"pubkey").then(function(){return r.data.invitations=r.data.invitations||{},r.data.invitations.list?(r.data.invitations.list.length&&r.data.invitations.list.splice(e.from,r.data.invitations.list.length-e.from),_.forEach(n,function(e){r.data.invitations.list.push(e)})):r.data.invitations.list=n,r.data.invitations.list})})}function T(e){if(!e||!e.id)throw"Invalid invitation (empty or without id). Could not delete.";var n=e.type||"certification";return A.raw[n].remove(e.id).then(function(){r.data.invitations.unreadCount=0,r.data.invitations&&r.data.invitations.list&&r.data.invitations.list.splice(r.data.invitations.list.indexOf(e),1)})}function v(e,t){return e&&e.length?(t=t||"certification",n.all(e.reduce(function(e,n){return e.concat(A.raw[t].remove(n))},[]))):n.when()}function I(e,n){e=e||r.data.pubkey,n=n||"certification",console.debug("[ES] [invitation] Deleting all invitations...");var t=(new Date).getTime(),i=r.data.invitations&&r.data.invitations.count||0,a=r.data.invitations&&r.data.invitations.unreadCount||0;return A.raw[n].getIds({pubkey:e}).then(function(e){if(e&&e.hits&&e.hits.total){var o=e.hits.hits.reduce(function(e,n){return e.concat(n._id)},[]);return v(o,n).then(function(){r.data.invitations=r.data.invitations||{},r.data.invitations.count>=i?r.data.invitations.count-=i||0:r.data.invitations.count=0,r.data.invitations.unreadCount>=a?r.data.invitations.unreadCount-=a||0:r.data.invitations.unreadCount=0,console.debug("[ES] [invitation] All invitations deleted in {0}ms".format((new Date).getTime()-t))})}})}function O(){_.forEach(C,function(e){e()}),C=[]}function N(){C=[r.api.data.on.login(e,p,this),r.api.data.on.init(e,u,this),r.api.data.on.reset(e,d,this),r.api.action.on.certify(e,m,this),c.api.event.on.newInvitation(e,E,this)]}function R(){var e=o.alive;!e&&C&&C.length>0?(console.debug("[ES] [invitations] Disable"),O(),r.isLogin()&&d(r.data)):!e||C&&0!==C.length||(console.debug("[ES] [invitations] Enable"),N(),r.isLogin()&&p(r.data))}var C,A=this,S={DEFAULT_LOAD_SIZE:20},y={commons:["issuer","time","hash","content","nonce","comment"]},D=new a(this,"esInvitation");return A.raw={certification:{get:o.get("/invitation/certification/:id?_source:fields"),add:o.record.post("/invitation/certification"),postSearch:o.post("/invitation/certification/_search"),remove:o.record.remove("invitation","certification"),getIds:o.get("/invitation/certification/_search?q=recipient::pubkey&_source=false&size=1000")}},D.registerEvent("data","new"),i.ready().then(function(){return o.api.node.on.start(e,R,this),o.api.node.on.stop(e,R,this),R()}),A.api=D,A.load=f,A.get=h,A.send=b,A["delete"]=T,A.deleteByIds=v,A.deleteAll=I,A.constants=S,A}]),angular.module("cesium.es.subscription.services",["cesium.platform","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esSubscription")}]).factory("esSubscription",["$rootScope","$q","$timeout","esHttp","$state","$sce","$sanitize","esSettings","CryptoUtils","UIUtils","csWallet","csWot","BMA","csPlatform","esWallet",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E){"ngInject";function g(e){e.subscriptions=null}function b(e,t){return t=t||n.defer(),e&&e.pubkey&&e.keypair?(console.debug("[ES] [subscription] Loading subscriptions count..."),S.raw.count({pubkey:e.pubkey}).then(function(n){e.subscriptions=e.subscriptions||{},e.subscriptions.count=n&&n.hits&&n.hits.total,console.debug("[ES] [subscription] Loaded count ("+e.subscriptions.count+")"),t.resolve(e)})["catch"](function(n){console.error("[ES] [subscription] Error while counting subscription: "+(n.message?n.message:n)),t.resolve(e)}),t.promise):(t.resolve(),t.promise)}function h(e,n){return S.raw.getAll({issuer:e}).then(function(e){var t=e&&e.hits&&e.hits.total&&e.hits.hits.reduce(function(e,n){var t=n._source;return t.id=n._id,e.concat(t)},[])||[];return E.box.record.open(t,n,"issuer","issuerContent").then(function(e){return _.forEach(e,function(e){e.content=JSON.parse(e.issuerContent||"{}"),delete e.issuerContent,delete e.recipientContent}),e})})}function f(e){if(!(e&&e.type&&e.content&&e.recipient))return n.reject("Missing arguments 'record' or 'record.type' or 'record.content' or 'record.recipient'");var t=u.data.pubkey,i=JSON.stringify(e.content);return l.util.random_nonce().then(function(a){return n.all([E.box.record.pack({issuer:t,issuerContent:i},u.data.keypair,"issuer","issuerContent",a),E.box.record.pack({recipient:e.recipient,recipientContent:i},u.data.keypair,"recipient","recipientContent",a)])}).then(function(n){var t=angular.merge(n[0],n[1]);return t.type=e.type,S.raw.add(t).then(function(n){return e.id=n,e})})}function T(e){if(!e||!e.content||!e.recipient)return n.reject("Missing arguments 'record' or 'record.content', or 'record.recipient'");var t=u.data.pubkey,i=JSON.stringify(e.content);return l.util.random_nonce().then(function(a){return n.all([E.box.record.pack({issuer:t,issuerContent:i},u.data.keypair,"issuer","issuerContent",a),E.box.record.pack({recipient:e.recipient,recipientContent:i},u.data.keypair,"recipient","recipientContent",a)])}).then(function(n){var t=angular.merge(n[0],n[1]);return t.type=e.type,S.raw.update(t,{id:e.id}).then(function(){return e})})}function v(){if(S.raw.categories&&S.raw.categories.length){var e=n.defer();return e.resolve(S.raw.categories),e.promise}return S.raw.category.all().then(function(e){if(0===e.hits.total)S.raw.categories=[];else{var n=e.hits.hits.reduce(function(e,n){var t=n._source;return t.id=n._id,e.concat(t)},[]);_.forEach(n,function(e){n[e.id]=e}),S.raw.categories=n}return S.raw.categories})}function I(e){return S.raw.category.get(e).then(function(e){var n=e._source;return n.id=e._id,n})}function O(){_.forEach(C,function(e){e()}),C=[]}function N(){C=[u.api.data.on.load(e,b,this),u.api.data.on.init(e,g,this),u.api.data.on.reset(e,g,this)]}function R(){var e=i.alive;if(!e&&C&&C.length>0){if(console.debug("[ES] [subscription] Disable"),O(),u.isLogin())return g(u.data)}else if(e&&(!C||0===C.length)&&(console.debug("[ES] [subscription] Enable"),N(),u.isLogin()))return b(u.data)}var C,A={},S=this;return S.raw={getAll:i.get("/subscription/record/_search?_source_excludes=recipientContent&q=issuer::issuer"),count:i.get("/subscription/record/_search?size=0&q=issuer::pubkey"),add:i.record.post("/subscription/record"),update:i.record.post("/subscription/record/:id/_update"),category:{get:i.get("/subscription/category/:id"),all:i.get("/subscription/category/_search?sort=order&from=0&size=1000&_source=name,parent,key")}},m.ready().then(function(){return i.api.node.on.start(e,R,this),i.api.node.on.stop(e,R,this),R()}),S.record={load:h,add:f,update:T,remove:i.record.remove("subscription","record")},S.category={all:v,get:I},S.constants=A,S}]),angular.module("cesium.es.wallet.services",["ngResource","cesium.platform","cesium.es.http.services","cesium.es.crypto.services"]).factory("esWallet",["$q","$rootScope","CryptoUtils","csPlatform","csWallet","esCrypto","esProfile","esHttp",function(e,n,t,i,a,o,r,s){"ngInject";function l(e){e.avatar=null,e.profile=null,e.name=null,a.events.cleanByContext("esWallet"),e.keypair&&(delete e.keypair.boxSk,delete e.keypair.boxPk)}function c(n,t){return t=t||e.defer(),o.box.getKeypair(n.keypair).then(function(e){a.data.keypair.boxSk=e.boxSk,a.data.keypair.boxPk=e.boxPk,console.debug("[ES] [wallet] Box keypair successfully computed"),t.resolve()}),t.promise}function u(e){e=e||a.data,e.keypair&&(delete e.keypair.boxSk,delete e.keypair.boxPk)}function d(n,i){if(i=i||e.defer(),!n||!n.pubkey||!n.keypair)return i.resolve(),i.promise;if(!t.isLoaded())return console.debug("[ES] [wallet] Waiting crypto lib loading..."),$timeout(function(){return d(n,i)},50);console.debug("[ES] [wallet] Loading user avatar+name...");var a=(new Date).getTime();return r.getAvatarAndName(n.pubkey).then(function(e){e?(n.name=e.name,n.avatarStyle=e.avatarStyle,n.avatar=e.avatar,console.debug("[ES] [wallet] Loaded user avatar+name in "+((new Date).getTime()-a)+"ms")):console.debug("[ES] [wallet] No user avatar+name found"),i.resolve(n)})["catch"](function(e){i.reject(e)}),i.promise}function p(n,t){t=t||e.defer(),a.events.cleanByContext("esWallet"),!n.name&&n.requirements.pendingMembership&&n.requirements.needCertificationCount>0&&a.events.add({type:"info",message:"ACCOUNT.EVENT.MEMBER_WITHOUT_PROFILE",context:"esWallet"}),console.debug("[ES] [wallet] Loading full user profile...");var i=(new Date).getTime();return r.get(n.pubkey).then(function(e){e&&(n.name=e.name,n.avatar=e.avatar,n.profile=e.source,n.profile.description=e.description,console.debug("[ES] [wallet] Loaded full user profile in "+((new Date).getTime()-i)+"ms")),t.resolve()}),t.promise}function m(){if(!a.isAuth())throw new Error("Unable to get box keypair: user not authenticated !");return a.getKeypair({silent:!0}).then(function(n){return n&&n.boxPk&&n.boxSk?e.when(a.data.keypair):o.box.getKeypair(n)}).then(function(e){return a.data.keypair.boxSk=e.boxSk,a.data.keypair.boxPk=e.boxPk,console.debug("[ES] [wallet] Box keypair successfully computed"),a.data.keypair})}function E(){h=[a.api.data.on.login(n,d,this),a.api.data.on.load(n,p,this),a.api.data.on.init(n,l,this),a.api.data.on.reset(n,l,this),a.api.data.on.unauth(n,u,this),a.api.data.on.auth(n,c,this)]}function g(){_.forEach(h,function(e){e()}),h=[]}function b(){var e=s.alive;if(!e&&h&&h.length>0){if(console.debug("[ES] [wallet] Disable"),g(),a.isLogin())return l(a.data)}else if(e&&(!h||0===h.length)&&(console.debug("[ES] [wallet] Enable"),E(),a.isLogin()))return d(a.data)}var h,f=this;return i.ready().then(function(){return s.api.node.on.start(n,b,this),s.api.node.on.stop(n,b,this),b()}),f.box={getKeypair:m,record:{pack:function(e,n,t,i,a){return m().then(function(n){return o.box.pack(e,n,t,i,a)})},open:function(e,n,t,i){return m().then(function(n){return o.box.open(e,n,t,i)})}}},f}]),angular.module("cesium.es.wot.services",["ngResource","cesium.es.http.services"]).factory("esWot",["$q","esHttp",function(e,n){"ngInject";var t={user:{event:n.post("/user/event/_search?pretty")}},i=function(e){var n={size:1e3,query:{bool:{filter:[{term:{recipient:e}},{terms:{code:["MEMBER_JOIN","MEMBER_ACTIVE","MEMBER_LEAVE","MEMBER_EXCLUDE","MEMBER_REVOKE"]}}]}},sort:[{time:{order:"asc"}}],_source:["code","time"]};return t.user.event(n).then(function(e){if(e.hits&&e.hits.total){var n,t=e.hits.hits.reduce(function(e,t){var i="MEMBER_JOIN"==t._source.code||"MEMBER_ACTIVE"==t._source.code;return i&&!n?n=t._source.time:!i&&n&&(e=e.concat({joinTime:n,leaveTime:t._source.time}),n=0),e},[]);return n&&t.push({joinTime:n,leaveTime:moment().utc().unix()}),t}})};return{memberships:i}}]),angular.module("cesium.es.tx.services",["ngResource","cesium.services","cesium.es.http.services","cesium.es.wot.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esTx")}]).factory("esTx",["$q","$rootScope","csCurrency","csTx","esHttp","esWot",function(e,n,t,i,a,o){"ngInject";function r(e,n){return n<=0?e:e*Math.pow(10,n)}function s(n,i){return i=i||e.defer(),n=n||{},n.pubkey||i.reject("Missing [pubkey] when calling [loadUDs] extension point"),e.all([t.get(),o.memberships(n.pubkey)]).then(function(t){var i=t[0]&&t[0].name,a=t[1];if(i&&a&&a.length)return n.fromTime!==-1&&(a=a.reduce(function(e,t){return t.leaveTime<n.fromTime?e:(t.joinTime=Math.max(t.joinTime,n.fromTime),e.concat(t))},[])),e.all(a.reduce(function(e,t){var a={query:{filtered:{filter:{bool:{must:[{exists:{field:"dividend"}},{range:{medianTime:{from:t.joinTime,to:t.leaveTime}}}]}}}},size:n.size||1e4,from:n.from||0,sort:{medianTime:"desc"},_source:["medianTime","number","dividend","unitbase"]};return e.concat(l.block.search(a,{currency:i}))},[]))}).then(function(e){if(e&&e.length)return e.reduce(function(e,n){return n.hits.total&&n.hits.hits.length?e.concat(n.hits.hits.reduce(function(e,n){var t=n._source;return e.concat({time:t.medianTime,amount:r(t.dividend,t.unitbase),isUD:!0,block_number:t.number})},[])):n},[])}).then(function(e){i.resolve(e)})["catch"](function(e){i.reject(e)}),i.promise}var l={block:{search:a.post("/:currency/block/_search")}};return i.api.data.on.loadUDs(n,s,this),{}}]),angular.module("cesium.es.geo.services",["cesium.services","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esGeo")}]).factory("esGeo",["$rootScope","$q","csConfig","csSettings","csHttp",function(e,n,t,i,a){"ngInject";function o(e){var n=e.trim().replace(/\n/g,",");return n=n.replace(/(?:^|[\t\n\r\s ])([AZ09-]+)(?:$|[\t\n\r\s ])/g,""),n=n.replace(/,[ ,]+/g,", ")}function r(e){return p.raw.google.search({address:e,key:p.raw.google.apiKey}).then(function(e){if(e&&e.results&&e.results.length)return e.results.reduce(function(e,n){return e.concat({display_name:n.address_components&&n.address_components.reduce(function(e,n){return n.long_name?e.concat(n.long_name):e},[]).join(", "),lat:n.geometry&&n.geometry.location&&n.geometry.location.lat,lon:n.geometry&&n.geometry.location&&n.geometry.location.lng})},[])})}function s(e,n){return console.debug("[ES] [geo] Search position failed on [OSM]. Trying [google] service"),r(n)["catch"](function(n){throw console.debug("[ES] [geo] Search position failed on [google] service"),e||n})}function l(e){"string"==typeof e&&(e={q:e}),e.q&&(e.q=o(e.q)),e.addressdetails=1;var n=new Date;return p.raw.osm.search(e).then(function(e){if(e)return e=e.reduce(function(e,n){return"waterway"!=n["class"]&&"railway"!=n["class"]&&n.address?(n.address.city=n.address.city||n.address.village||n.address.town||n.address.postcode,n.address.road=n.address.road||n.address.suburb||n.address.hamlet,n.address.postcode&&n.address.city==n.address.postcode&&delete n.address.postcode,n.address.city?e.concat({id:n.place_id,name:n.display_name,address:n.address,lat:n.lat,lon:n.lon,"class":n["class"],license:p.raw.osm.license}):e):e},[]),console.debug("[ES] [geo] Found {0} address position(s)".format(e&&e.length||0,(new Date).getTime()-n.getTime()),e),e.length?e:void 0})["catch"](function(n){var t=e.q?e.q:(e.street?e.street+", ":"")+e.city+(e.country?", "+e.country:"");return s(n,t)})}function c(){var e=n.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){return n&&n.coords?void e.resolve({lat:n.coords.latitude,lon:n.coords.longitude}):void console.error("[ES] [geo] navigator geolocation > Unknown format:",n)},function(n){e.reject(n)},{timeout:5e3}):e.reject(),e.promise}function u(e){return p.raw.freegeoip.search({ip:e}).then(function(e){return e?{lat:e.latitude,lng:e.longitude}:void 0})}function d(e,n,t,i,a){var o=Math.PI*e/180,r=Math.PI*t/180,s=n-i,l=Math.PI*s/180,c=Math.sin(o)*Math.sin(r)+Math.cos(o)*Math.cos(r)*Math.cos(l);return c=Math.acos(c),c=180*c/Math.PI,c=60*c*1.1515,"km"==a?1.609344*c:"N"==a?.8684*c:c}var p=this;p.raw={osm:{search:a.get("nominatim.openstreetmap.org",443,"/search.php?format=json"),license:{name:"OpenStreetMap",url:"https://www.openstreetmap.org/copyright"}},google:{apiKey:void 0,search:a.get("maps.google.com",443,"/maps/api/geocode/json")},freegeoip:{search:a.get("freegeoip.net",443,"/json/:ip"),license:{name:"freegeoip",url:"https://freegeoip.net"}}},p.raw.google.apiKey=t.plugins&&t.plugins.es&&t.plugins.es.googleApiKey;var m=!!p.raw.google.apiKey;return i.ready().then(function(){function n(e){m||(p.raw.google.apiKey=e.plugins.es.googleApiKey),p.raw.google.enable=p.raw.google.apiKey&&e.plugins&&e.plugins.es&&e.plugins.es.enableGoogleApi}i.api.data.on.changed(e,n,this),n(i.data)}),{point:{current:c,searchByAddress:l,distance:d,ip:{search:u,license:p.raw.freegeoip.license}},google:{isEnable:function(){return p.raw.google.enable&&p.raw.google.apiKey},searchByAddress:r}}}]),angular.module("cesium.es.document.services",["ngResource","cesium.platform","cesium.es.http.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.registerEagerLoadingService("esDocument")}]).factory("esDocument",["$q","$rootScope","$timeout","UIUtils","Api","CryptoUtils","csPlatform","csConfig","csSettings","csWot","csWallet","esHttp",function(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";function p(e,n){n.issuerField=n.issuerField||"pubkey";var t=(e&&e.hits&&e.hits.hits||[]).reduce(function(e,t){var i=t._source||{};return i.index=t._index,i.type=t._type,i.id=t._id,i.pubkey=i.issuer||n.issuerField&&i[n.issuerField],i.time=i.time||n.getTimeFunction&&n.getTimeFunction(i),e.concat(i)},[]),i=t.reduce(function(e,n){return n.recipient?(n.recipient={pubkey:n.recipient},e.concat(n.recipient)):e},[]);return c.extendAll(t.concat(i)).then(function(){return{hits:t,took:e.took,total:e&&e.hits&&e.hits.total||0}})}function m(e){e=e||{};var n,t;if("movement"==e.type?e.sort?(n=e.sort.split(":"),t=n.length>1?n[1]:"desc",e.sort=[{"stats.medianTime":{nested_path:"stats",order:t}}],e._source=f.peer,e.getTimeFunction=function(e){return e.time=e.stats&&e.stats.medianTime,e.time}):e.sort="stats.medianTime:desc":"movement"==e.type&&(e.sort?(n=e.sort.split(":"),t=n.length>1?n[1]:"desc",e.sort=[{medianTime:{order:t}}],e._source=f.movement,e.getTimeFunction=function(e){return e.time=e.medianTime,e.time}):e.sort="medianTime:desc"),!e||!e.index||!e.type)throw new Error("Missing mandatory options [index, type]");var i={from:e.from||0,size:e.size||h.DEFAULT_LOAD_SIZE,sort:e.sort||{time:"desc"},_source:e._source||f.commons};return e.query&&(i.query=e.query),_.search(i,{index:e.index,type:e.type}).then(function(n){return p(n,e)})}function E(e,n){n=n||{};var t={text:e,index:n.index||"user",type:n.type||"event",from:n.from||0,size:n.size||h.DEFAULT_LOAD_SIZE,sort:n.sort||"time:desc",_source:n._source||f.commons.join(",")};console.debug("[ES] [wallet] [document] [{0}/{1}] Loading documents...".format(n.index,n.type));var i=(new Date).getTime();return _.searchText(t).then(function(e){return p(e,n)}).then(function(e){return console.debug("[ES] [document] [{0}/{1}] Loading {2} documents in {3}ms".format(n.index,n.type,e&&e.hits&&e.hits.length||0,(new Date).getTime()-i)),e})}function g(n){return n&&n.index&&n.type&&n.id?d.record.remove(n.index,n.type)(n.id):e.reject("Could not remove document: missing mandatory fields")}function b(n){if(n&&n.length)return u.auth().then(function(t){return e.all(n.reduce(function(e,n){return e.concat(d.record.remove(n.index,n.type)(n.id,t))},[]))})}var h={DEFAULT_LOAD_SIZE:40},f={commons:["issuer","pubkey","hash","time","recipient","nonce","read_signature"],peer:["*"],movement:["*"]},_={search:d.post("/:index/:type/_search"),searchText:d.get("/:index/:type/_search?q=:text")};return{search:m,searchText:E,remove:g,removeAll:b,fields:{commons:f.commons}}}]),ESPicturesEditController.$inject=["$scope","UIUtils","$q","Device"],ESSocialsEditController.$inject=["$scope","$focus","$filter","UIUtils","SocialUtils"],ESSocialsViewController.$inject=["$scope"],ESCommentsController.$inject=["$scope","$filter","$state","$focus","UIUtils"],ESCategoryModalController.$inject=["$scope","UIUtils","$timeout","parameters"],ESAvatarModalController.$inject=["$scope"],ESPositionEditController.$inject=["$scope","csConfig","esGeo","ModalUtils"],ESLookupPositionController.$inject=["$scope","$q","csConfig","esGeo","ModalUtils"],ESSearchPositionItemController.$inject=["$scope","$q","$timeout","ModalUtils","csConfig","esGeo"],ESSearchPositionModalController.$inject=["$scope","$q","$translate","esGeo","parameters"],angular.module("cesium.es.common.controllers",["ngResource","cesium.es.services"]).controller("ESPicturesEditCtrl",ESPicturesEditController).controller("ESPicturesEditCtrl",ESPicturesEditController).controller("ESSocialsEditCtrl",ESSocialsEditController).controller("ESSocialsViewCtrl",ESSocialsViewController).controller("ESCommentsCtrl",ESCommentsController).controller("ESCategoryModalCtrl",ESCategoryModalController).controller("ESAvatarModalCtrl",ESAvatarModalController).controller("ESPositionEditCtrl",ESPositionEditController).controller("ESLookupPositionCtrl",ESLookupPositionController).controller("ESSearchPositionItemCtrl",ESSearchPositionItemController).controller("ESSearchPositionModalCtrl",ESSearchPositionModalController),
ESExtensionController.$inject=["$scope","esSettings","PluginService"],ESMenuExtendController.$inject=["$scope","$state","PluginService","esSettings","UIUtils","csWallet"],ESProfilePopoverExtendController.$inject=["$scope","$q","$state","esSettings","csWallet"],angular.module("cesium.es.app.controllers",["ngResource","cesium.es.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&(e.extendState("app",{points:{"nav-buttons-right":{templateUrl:"plugins/es/templates/menu_extend.html",controller:"ESMenuExtendCtrl"},"menu-user":{templateUrl:"plugins/es/templates/menu_extend.html",controller:"ESMenuExtendCtrl"}}}),e.extendState("app",{points:{"profile-popover-user":{templateUrl:"plugins/es/templates/common/popover_profile_extend.html",controller:"ESProfilePopoverExtendCtrl"}}}))}]).controller("ESExtensionCtrl",ESExtensionController).controller("ESMenuExtendCtrl",ESMenuExtendController).controller("ESProfilePopoverExtendCtrl",ESProfilePopoverExtendController),ESExtendSettingsController.$inject=["$scope","PluginService"],ESPluginSettingsController.$inject=["$scope","$q","$translate","$ionicPopup","UIUtils","Modals","csHttp","csSettings","esHttp","esSettings"],angular.module("cesium.es.settings.controllers",["cesium.es.services"]).config(["PluginServiceProvider","$stateProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(e.extendState("app.settings",{points:{plugins:{templateUrl:"plugins/es/templates/settings/settings_extend.html",controller:"ESExtendSettingsCtrl"}}}),n.state("app.es_settings",{url:"/settings/es",views:{menuContent:{templateUrl:"plugins/es/templates/settings/plugin_settings.html",controller:"ESPluginSettingsCtrl"}}}))}]).controller("ESExtendSettingsCtrl",ESExtendSettingsController).controller("ESPluginSettingsCtrl",ESPluginSettingsController),angular.module("cesium.es.currency.controllers",["ngResource","cesium.es.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.extendState("app.currency.tab_blocks",{points:{"nav-buttons":{templateUrl:"plugins/es/templates/currency/tab_blocks_extend.html",controller:"ESExtensionCtrl"}}})}]),ESWalletController.$inject=["$scope","$controller","esModals"],angular.module("cesium.es.wallet.controllers",["cesium.es.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.extendState("app.view_wallet",{points:{"after-general":{templateUrl:"plugins/es/templates/wallet/view_wallet_extend.html",controller:"ESWalletCtrl"}}})}]).controller("ESWalletCtrl",ESWalletController),ESWotLookupExtendController.$inject=["$scope","$controller","$state"],ESWotIdentityViewController.$inject=["$scope","$ionicPopover","$q","UIUtils","Modals","esSettings","PluginService","csWallet","esModals","esHttp","esWallet","esInvitation"],angular.module("cesium.es.wot.controllers",["cesium.es.services"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&n.extendState("app.wot_lookup",{points:{tabs:{templateUrl:"plugins/es/templates/wot/lookup_extend.html"}}}).extendState("app.wot_lookup_lg",{points:{top:{templateUrl:"plugins/es/templates/wot/lookup_lg_extend.html",controller:"ESWotLookupExtendCtrl"}}}).extendStates(["app.wot_identity","app.wot_identity_uid"],{points:{"after-general":{templateUrl:"plugins/es/templates/wot/view_identity_extend.html",controller:"ESWotIdentityViewCtrl"},buttons:{templateUrl:"plugins/es/templates/wot/view_identity_extend.html",controller:"ESWotIdentityViewCtrl"}}}).extendStates(["app.wot_cert","app.wot_cert_lg","app.wallet_cert","app.wallet_cert_lg"],{points:{"nav-buttons":{templateUrl:"plugins/es/templates/wot/view_certifications_extend.html",controller:"ESWotIdentityViewCtrl"},buttons:{templateUrl:"plugins/es/templates/wot/view_certifications_extend.html",controller:"ESWotIdentityViewCtrl"}}})}]).controller("ESWotLookupExtendCtrl",ESWotLookupExtendController).controller("ESWotIdentityViewCtrl",ESWotIdentityViewController),ESRegistryLookupController.$inject=["$scope","$focus","$timeout","$filter","$controller","$location","$translate","$ionicPopover","Device","UIUtils","ModalUtils","BMA","csSettings","csWallet","esModals","esRegistry","esHttp"],ESWalletPagesController.$inject=["$scope","$controller","$timeout","UIUtils","csWallet"],ESRegistryRecordViewController.$inject=["$scope","$rootScope","$state","$q","$timeout","$ionicPopover","$ionicHistory","$translate","$anchorScroll","csConfig","csWallet","esRegistry","UIUtils","esHttp"],ESRegistryRecordEditController.$inject=["$scope","$timeout","$state","$q","$ionicHistory","$focus","$translate","$controller","Device","UIUtils","ModalUtils","csWallet","esHttp","esRegistry"],angular.module("cesium.es.registry.controllers",["cesium.es.services","cesium.es.common.controllers"]).config(["$stateProvider",function(e){"ngInject";e.state("app.wot_lookup.tab_registry",{url:"/page?q&type&hash&category&location&issuer&reload&lat&lon&d&last",views:{tab_registry:{templateUrl:"plugins/es/templates/registry/tabs/tab_registry.html",controller:"ESRegistryLookupCtrl"}},data:{large:"app.registry_lookup_lg",silentLocationChange:!0}}).state("app.registry_lookup_lg",{url:"/wot/page/lg?q&type&hash&category&location&issuer&reload&lat&lon&d&last",views:{menuContent:{templateUrl:"plugins/es/templates/registry/lookup_lg.html",controller:"ESRegistryLookupCtrl"}},data:{silentLocationChange:!0}}).state("app.wallet_pages",{url:"/wallet/pages?refresh",views:{menuContent:{templateUrl:"plugins/es/templates/registry/view_wallet_pages.html",controller:"ESWalletPagesCtrl"}},data:{login:!0,minData:!0}}).state("app.view_page",{url:"/page/view/:id/:title?refresh",views:{menuContent:{templateUrl:"plugins/es/templates/registry/view_record.html",controller:"ESRegistryRecordViewCtrl"}}}).state("app.view_page_anchor",{url:"/page/view/:id/:title/:anchor",views:{menuContent:{templateUrl:"plugins/es/templates/registry/view_record.html",controller:"ESRegistryRecordViewCtrl"}}}).state("app.registry_add_record",{cache:!1,url:"/page/add/:type",views:{menuContent:{templateUrl:"plugins/es/templates/registry/edit_record.html",controller:"ESRegistryRecordEditCtrl"}},data:{auth:!0,minData:!0}}).state("app.registry_edit_record",{cache:!1,url:"/page/edit/:id/:title",views:{menuContent:{templateUrl:"plugins/es/templates/registry/edit_record.html",controller:"ESRegistryRecordEditCtrl"}},data:{auth:!0,minData:!0}})}]).controller("ESRegistryLookupCtrl",ESRegistryLookupController).controller("ESWalletPagesCtrl",ESWalletPagesController).controller("ESRegistryRecordViewCtrl",ESRegistryRecordViewController).controller("ESRegistryRecordEditCtrl",ESRegistryRecordEditController),ESViewEditProfileController.$inject=["$scope","$rootScope","$q","$timeout","$state","$focus","$translate","$controller","$ionicHistory","$ionicPopover","UIUtils","csWallet","esHttp","esProfile","ModalUtils","Device"],angular.module("cesium.es.profile.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){e.state("app.user_edit_profile",{url:"/wallet/profile/edit",views:{menuContent:{templateUrl:"plugins/es/templates/user/edit_profile.html",controller:"ESViewEditProfileCtrl"}},cache:!1,data:{auth:!0}})}]).controller("ESViewEditProfileCtrl",ESViewEditProfileController),ESMessageAbstractListController.$inject=["$scope","$state","$translate","$ionicHistory","$ionicPopover","$timeout","$filter","csWallet","esModals","UIUtils","esMessage"],ESMessageInboxListController.$inject=["$scope","$controller"],ESMessageOutboxListController.$inject=["$scope","$controller"],ESMessageComposeController.$inject=["$scope","$controller","UIUtils"],ESMessageComposeModalController.$inject=["$scope","Modals","UIUtils","csWallet","esHttp","esMessage","parameters"],ESMessageViewController.$inject=["$scope","$state","$timeout","$translate","$ionicHistory","$ionicPopover","UIUtils","esModals","esMessage"],PopoverMessageController.$inject=["$scope","UIUtils","$state","csWallet","esHttp","esMessage","esModals"],angular.module("cesium.es.message.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.user_message",{url:"/user/message",views:{menuContent:{templateUrl:"plugins/es/templates/message/lookup.html"}}}).state("app.user_message.tab_inbox",{url:"/inbox",views:{tab_inbox:{controller:"ESMessageInboxListCtrl",templateUrl:"plugins/es/templates/message/tabs/tab_list.html"}},data:{auth:!0,minData:!0,large:"app.user_messages_lg_inbox"}}).state("app.user_message.tab_outbox",{url:"/outbox",views:{tab_outbox:{controller:"ESMessageOutboxListCtrl",templateUrl:"plugins/es/templates/message/tabs/tab_list.html"}},data:{auth:!0,minData:!0,large:"app.user_messages_lg_outbox"}}).state("app.user_messages_lg_inbox",{url:"/user/message/lg/inbox",views:{menuContent:{templateUrl:"plugins/es/templates/message/lookup_lg.html",controller:"ESMessageInboxListCtrl"}},data:{auth:!0,minData:!0}}).state("app.user_messages_lg_outbox",{url:"/user/message/lg/outbox",views:{menuContent:{templateUrl:"plugins/es/templates/message/lookup_lg.html",controller:"ESMessageOutboxListCtrl"}},data:{auth:!0,minData:!0}}).state("app.user_new_message",{cache:!1,url:"/user/message/new?pubkey&uid&title&content",views:{menuContent:{templateUrl:"plugins/es/templates/message/compose.html",controller:"ESMessageComposeCtrl"}}}).state("app.user_view_message",{cache:!1,url:"/user/message/view/:type/:id",views:{menuContent:{templateUrl:"plugins/es/templates/message/view_message.html",controller:"ESMessageViewCtrl"}},data:{auth:!0,minData:!0}})}]).controller("ESMessageAbstractListCtrl",ESMessageAbstractListController).controller("ESMessageInboxListCtrl",ESMessageInboxListController).controller("ESMessageOutboxListCtrl",ESMessageOutboxListController).controller("ESMessageComposeCtrl",ESMessageComposeController).controller("ESMessageComposeModalCtrl",ESMessageComposeModalController).controller("ESMessageViewCtrl",ESMessageViewController).controller("PopoverMessageCtrl",PopoverMessageController),NotificationsController.$inject=["$scope","$rootScope","$ionicPopover","$state","$timeout","UIUtils","esHttp","csSettings","csWallet","esNotification"],PopoverNotificationsController.$inject=["$scope","$timeout","$controller","UIUtils","$state"],angular.module("cesium.es.notification.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.view_notifications",{url:"/notifications",views:{menuContent:{templateUrl:"plugins/es/templates/notification/view_notifications.html",controller:"NotificationsCtrl"}},data:{login:!0}})}]).controller("NotificationsCtrl",NotificationsController).controller("PopoverNotificationsCtrl",PopoverNotificationsController),ESBlockLookupController.$inject=["$scope","$controller","$ionicPopover","$location","UIUtils","esBlockchain"],angular.module("cesium.es.blockchain.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.lookup_blocks_currency",{url:"/currencies/:currency/blocks?q",views:{menuContent:{templateUrl:"plugins/es/templates/blockchain/lookup.html",controller:"ESBlockLookupCtrl"}}}).state("app.blockchain_search",{url:"/blockchain/search?q&type",views:{menuContent:{templateUrl:"plugins/es/templates/blockchain/lookup.html",controller:"ESBlockLookupCtrl"}},data:{silentLocationChange:!0}})}]).controller("ESBlockLookupCtrl",ESBlockLookupController),ESNetworkViewExtendController.$inject=["$scope","PluginService","esSettings"],angular.module("cesium.es.network.controllers",["cesium.es.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.extendState("app.network",{points:{buttons:{templateUrl:"plugins/es/templates/network/view_network_extend.html",controller:"ESNetworkViewExtendCtrl"}}})}]).controller("ESNetworkViewExtendCtrl",ESNetworkViewExtendController),ESGroupListController.$inject=["$scope","UIUtils","$state","csWallet","esGroup","ModalUtils"],ESGroupViewController.$inject=["$scope","$state","$ionicPopover","$ionicHistory","$translate","UIUtils","csConfig","esGroup","csWallet"],ESGroupEditController.$inject=["$scope","esGroup","UIUtils","$state","$q","Device","$ionicHistory","ModalUtils","$focus","esHttp"],angular.module("cesium.es.group.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.groups",{url:"/group?type&location",views:{menuContent:{templateUrl:"plugins/es/templates/group/lookup.html",controller:"ESGroupListCtrl"}}}).state("app.add_group",{url:"/group/add/:type",views:{menuContent:{templateUrl:"plugins/es/templates/group/edit_group.html",controller:"ESGroupEditCtrl"}}}).state("app.edit_group",{url:"/group/edit/:id",views:{menuContent:{templateUrl:"plugins/es/templates/group/edit_group.html",controller:"ESGroupEditCtrl"}}}).state("app.view_group",{url:"/group/view/:id",views:{menuContent:{templateUrl:"plugins/es/templates/group/view_record.html",controller:"ESGroupViewCtrl"}}})}]).controller("ESGroupListCtrl",ESGroupListController).controller("ESGroupViewCtrl",ESGroupViewController).controller("ESGroupEditCtrl",ESGroupEditController),InvitationsController.$inject=["$scope","$q","$ionicPopover","$state","$timeout","UIUtils","csSettings","csWallet","esHttp","esModals","esNotification","esInvitation"],PopoverInvitationController.$inject=["$scope","$controller"],NewInvitationModalController.$inject=["$scope","$q","Modals","UIUtils","csWallet","esHttp","esWallet","esInvitation"],angular.module("cesium.es.invitation.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.view_invitations",{url:"/invitations",views:{menuContent:{templateUrl:"plugins/es/templates/invitation/view_invitations.html",controller:"InvitationsCtrl"}},data:{auth:!0}})}]).controller("InvitationsCtrl",InvitationsController).controller("PopoverInvitationCtrl",PopoverInvitationController).controller("ESNewInvitationModalCtrl",NewInvitationModalController),ViewSubscriptionsController.$inject=["$scope","$rootScope","$q","csWot","UIUtils","ModalUtils","esSubscription"],ModalEmailSubscriptionsController.$inject=["$scope","Modals","csSettings","esHttp","csWot","parameters"],angular.module("cesium.es.subscription.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){e.state("app.edit_subscriptions",{cache:!1,url:"/wallet/subscriptions",views:{menuContent:{templateUrl:"plugins/es/templates/subscription/edit_subscriptions.html",controller:"ViewSubscriptionsCtrl"}},data:{auth:!0,minData:!0}})}]).controller("ViewSubscriptionsCtrl",ViewSubscriptionsController).controller("ModalEmailSubscriptionsCtrl",ModalEmailSubscriptionsController),ESDocumentLookupController.$inject=["$scope","$ionicPopover","$location","$timeout","csSettings","csWallet","UIUtils","esHttp","esDocument"],angular.module("cesium.es.document.controllers",["cesium.es.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.document_search",{url:"/data/search/:index/:type?q",views:{menuContent:{templateUrl:"plugins/es/templates/document/lookup.html",controller:"ESDocumentLookupCtrl"}},data:{silentLocationChange:!0}})}]).controller("ESDocumentLookupCtrl",ESDocumentLookupController),angular.module("cesium.graph.plugin",["cesium.graph.services","cesium.graph.common.controllers","cesium.graph.blockchain.controllers","cesium.graph.network.controllers","cesium.graph.currency.controllers","cesium.graph.account.controllers","cesium.graph.docstats.controllers","cesium.graph.synchro.controllers"]),angular.module("cesium.graph.services",["cesium.graph.color.services","cesium.graph.data.services"]),angular.module("cesium.graph.data.services",["cesium.wot.services","cesium.es.http.services","cesium.es.wot.services"]).factory("gpData",["$rootScope","$q","$timeout","esHttp","BMA","csWot","csCache","esWot",function(e,n,t,i,a,o,r,s){"ngInject";function l(e,n){return n<=0?e:e*Math.pow(10,n)}function c(e){return e=e||{},e.maxRangeSize=e.maxRangeSize||30,e.defaultTotalRangeCount=e.defaultTotalRangeCount||2*e.maxRangeSize,e.rangeDuration=e.rangeDuration||"day",e.endTime=e.endTime||moment().utc().add(1,e.rangeDuration).unix(),e.startTime=e.startTime||moment.unix(e.endTime).utc().subtract(e.defaultTotalRangeCount,e.rangeDuration).unix(),e.firstBlockTime&&e.startTime<e.firstBlockTime&&(e.startTime=e.firstBlockTime),e}var u=r.get("gpData-currency-",r.constants.SHORT),d={node:{},wot:{},blockchain:{},docstat:{},synchro:{execution:{}},raw:{block:{search:i.post("/:currency/block/_search")},blockstat:{search:i.post("/:currency/blockstat/_search")},movement:{search:i.post("/:currency/movement/_search")},user:{event:i.post("/user/event/_search?pretty")},docstat:{search:i.post("/docstat/record/_search")},synchro:{search:i.post("/:currency/synchro/_search")}},regex:{}};return d.blockchain.countByIssuer=function(e){var n={size:0,aggs:{blocksByIssuer:{terms:{field:"issuer",size:0}}}};return d.raw.block.search(n,{currency:e}).then(function(e){var n=e.aggregations;if(n.blocksByIssuer&&n.blocksByIssuer.buckets&&n.blocksByIssuer.buckets.length){var t={blockCount:e.hits.total};return t.data=(n.blocksByIssuer.buckets||[]).reduce(function(e,n){return e.concat(n.doc_count)},[]),t.issuers=(n.blocksByIssuer.buckets||[]).reduce(function(e,n){return e.concat({pubkey:n.key})},[]),o.extendAll(t.issuers).then(function(){return t.labels=t.issuers.reduce(function(e,n){return e.concat(n.name||n.uid||n.pubkey.substr(0,8))},[]),t})}})},d.blockchain.withDividend=function(e,t){t=t||{};var i=!angular.isDefined(t.withCache)||t.withCache,o=[e,JSON.stringify(t)].join("-");if(i){var r=u.get(o);if(r){if(!r.blocks){var s=n.defer();return r.then(function(e){return s.resolve(e),e}),s.promise}return console.debug("[graph] monetaryMass for ["+e+"] found in cache"),n.when(r)}}var c={query:{filtered:{filter:{bool:{must:[{exists:{field:"dividend"}}]}}}},size:t.size||1e4,from:t.from||0,_source:["medianTime","number","dividend","monetaryMass","membersCount","unitbase"],sort:{medianTime:"asc"}},p=n.all([t.withCurrent?a.blockchain.current()["catch"](function(e){if(!e||e.ucode!=a.errorCodes.NO_CURRENT_BLOCK)throw e}):n.when(),d.raw.block.search(c,{currency:e})]).then(function(e){var n=e[0];if(e=e[1],e.hits.total&&e.hits.hits.length){var t={};if(t.blocks=e.hits.hits.reduce(function(e,n){var t=n._source;return t.dividend=l(t.dividend,t.unitbase),delete t.unitbase,e.concat(t)},[]),n){var i=t.blocks.length&&n.medianTime-t.blocks[t.blocks.length-1].medianTime;i&&i>=3600&&(n.dividend=l(n.dividend,n.unitbase),delete n.unitbase,t.blocks.push(n))}return t.times=t.blocks.reduce(function(e,n){return e.concat(n.medianTime)},[]),u.put(o,t),t}});return u.put(o,p),p},d.blockchain.txCount=function(e,t){t=c(t);for(var i=[],a=moment.unix(t.startTime).utc().startOf(t.rangeDuration),o=moment.unix(t.endTime).utc().startOf(t.rangeDuration),r=[];a.isBefore(o);){r.push({from:a.unix(),to:a.add(1,t.rangeDuration).unix()});var s=r.length===t.maxRangeSize||!a.isBefore(o);if(s){var l={size:0,aggs:{tx:{range:{field:"medianTime",ranges:r},aggs:{txCount:{stats:{field:"txCount"}},txAmount:{stats:{field:"txAmount"}}}}}};t.issuer&&(l.query={bool:{filter:{term:{issuer:t.issuer}}}}),r=[],10==i.length?(console.error("Too many parallel jobs!"),a=moment.unix(t.endTime).utc()):i.push(d.raw.blockstat.search(l,{currency:e}).then(function(e){var n=e.aggregations;if(n.tx&&n.tx.buckets&&n.tx.buckets.length)return(n.tx.buckets||[]).reduce(function(e,n){return e.concat({from:n.from,to:n.to,count:n.txCount.sum||0,amount:n.txAmount.sum||0,avgByBlock:Math.round(100*n.txCount.avg)/100,maxByBlock:n.txCount.max})},[])}))}}return n.all(i).then(function(e){return e=e.reduce(function(e,n){return n&&n.length?e.concat(n):e},[]),e=_.sortBy(e,"from"),{count:_.pluck(e,"count"),avgByBlock:_.pluck(e,"avgByBlock"),maxByBlock:_.pluck(e,"maxByBlock"),amount:e.reduce(function(e,n){return e.concat(n.amount/100)},[]),times:_.pluck(e,"from")}})},d.node.blockCount=function(e,n){var t={size:0,query:{bool:{filter:{term:{issuer:n}}}}};return d.raw.block.search(t,{currency:e}).then(function(e){return e.hits.total})},d.raw.movement.getByRange=function(e,n,t){if(!n)throw new Error("Missing 'pubkey' argument!");var i={size:0,query:{bool:{should:[{term:{recipient:n}},{term:{issuer:n}}]}},aggs:{tx:{range:{field:"medianTime",ranges:t},aggs:{received:{filter:{term:{recipient:n}},aggs:{received_stats:{stats:{field:"amount"}}}},sent:{filter:{term:{issuer:n}},aggs:{sent_stats:{stats:{field:"amount"}}}}}}}};return d.raw.movement.search(i,{currency:e}).then(function(e){var n=e.aggregations;if(n.tx&&n.tx.buckets&&n.tx.buckets.length)return(n.tx.buckets||[]).reduce(function(e,n){var t=n.sent.sent_stats,i=n.received.received_stats;return e.concat({from:n.from,to:n.to,sent:t.sum?-t.sum/100:0,received:i.sum?i.sum/100:0})},[])})},d.raw.movement.getUds=function(e,n,t){var i={size:0,query:{bool:{should:[{exists:{field:"dividend"}}]}},aggs:{ud:{range:{field:"medianTime",ranges:n},aggs:{ud_stats:{stats:{field:"dividend"}},unitbase_stats:{stats:{field:"unitbase"}}}}}};return d.raw.block.search(i,{currency:e}).then(function(e){var n=e.aggregations;if(n.ud&&n.ud.buckets&&n.ud.buckets.length)return(n.ud.buckets||[]).reduce(function(e,n){var i=t[n.from];return e[i]=l(n.ud_stats.sum,n.unitbase_stats.min)/100,e},{})})},d.blockchain.movement=function(e,t){function i(e){l.push(e);var n=E&&E.joinTime<e.to;if(n){var t={from:Math.max(E.joinTime,e.from),to:Math.min(E.leaveTime,e.to)};for(u.push(t),p[t.from]=e.from;E&&E.leaveTime&&E.leaveTime<e.to;)E=m.pop()}}t=c(t),t.withUD=!angular.isDefined(t.withUD)||t.withUD;var a=[];if(t.withUD&&!t.memberships)return s.memberships(t.pubkey).then(function(n){return t.memberships=n||[],d.blockchain.movement(e,t)});var o=moment.unix(t.startTime).utc().startOf(t.rangeDuration),r=moment.unix(t.endTime).utc().startOf(t.rangeDuration),l=[],u=[],p={},m=angular.copy(t.memberships).reverse(),E=m.pop();for(i({from:0,to:o.unix()});o.isBefore(r);){i({from:o.unix(),to:o.add(1,t.rangeDuration).unix()});var g=!a.length&&l.length==t.maxRangeSize+1||a.length&&l.length==t.maxRangeSize||!o.isBefore(r);g&&(u.length?a.push(n.all([d.raw.movement.getUds(e,u,p),d.raw.movement.getByRange(e,t.pubkey,l)]).then(function(e){var n=e[0];return e=e[1],e.forEach(function(e){e.ud=n[e.from]||0}),e})):a.push(d.raw.movement.getByRange(e,t.pubkey,l).then(function(e){return e.forEach(function(e){e.ud=0}),e})),l=[])}return n.all(a).then(function(e){if(e=e.reduce(function(e,n){return n&&n.length?e.concat(n):e},[]),e.length){e=_.sortBy(e,"from");var n=e.splice(0,1)[0],t=n.received+n.sent+n.ud;return{times:_.pluck(e,"from"),ud:_.pluck(e,"ud"),sent:_.pluck(e,"sent"),received:_.pluck(e,"received"),balance:e.reduce(function(e,n){return t+=n.received+n.sent+n.ud,e.concat(t)},[])}}})},d.wot.certifications=function(e){return e=c(e),o.load(e.pubkey).then(function(n){if(n){var t={};_.forEach(n.given_cert||[],function(n){var i=moment.unix(n.time).utc().startOf(e.rangeDuration).unix();t[i]=t[i]||{time:i,given:0,received:0},t[i].given++}),_.forEach(n.received_cert||[],function(n){var i=moment.unix(n.time).utc().startOf(e.rangeDuration).unix();t[i]=t[i]||{time:i,given:0,received:0},t[i].received++}),t=_.sortBy(_.values(t),"time");var i={times:_.pluck(t,"time"),deltaGiven:_.pluck(t,"given"),deltaReceived:_.pluck(t,"received")},a=0;return i.given=i.deltaGiven.reduce(function(e,n){return a+=n,e.concat(a)},[]),a=0,i.received=i.deltaReceived.reduce(function(e,n){return a+=n,e.concat(a)},[]),i}})},d.wot.memberships=function(e){e=e||{};var n={size:1e3,query:{bool:{filter:[{term:{recipient:e.pubkey}},{terms:{code:["MEMBER_JOIN","MEMBER_ACTIVE","MEMBER_LEAVE","MEMBER_EXCLUDE","MEMBER_REVOKE"]}}]}},sort:[{time:{order:"asc"}}],_source:["code","time"]};return d.raw.user.event(n).then(function(e){if(e.hits&&e.hits.total){var n,t=e.hits.hits.reduce(function(e,t){var i="MEMBER_JOIN"==t._source.code||"MEMBER_ACTIVE"==t._source.code;return i&&!n?n=t._source.time:!i&&n&&(e=e.concat({joinTime:n,leaveTime:t._source.time}),n=0),e},[]);return n&&t.push({joinTime:n,leaveTime:moment().utc().unix()}),t}})},d.docstat.get=function(e){e=c(e);for(var t=[],i=moment.unix(e.startTime).utc().startOf(e.rangeDuration),a=moment.unix(e.endTime).utc().startOf(e.rangeDuration),o=[];i.isBefore(a);){o.push({from:i.unix(),to:i.add(1,e.rangeDuration).unix()});var r=o.length===e.maxRangeSize||!i.isBefore(a);if(r){var s={size:0,aggs:{range:{range:{field:"time",ranges:o},aggs:{index:{terms:{field:"index",size:0},aggs:{type:{terms:{field:"indexType",size:0},aggs:{max:{max:{field:"count"}}}}}}}}}};o=[];var l={};10==t.length?(console.error("Too many parallel jobs!"),i=moment.unix(e.endTime).utc()):t.push(d.raw.docstat.search(s).then(function(e){var n=e.aggregations;return(n.range&&n.range.buckets||[]).reduce(function(e,n){var t={from:n.from,to:n.to};return _.forEach(n.index&&n.index.buckets||[],function(e){var n=e.key;_.forEach(e.type&&e.type.buckets||[],function(e){var i=n+"_"+e.key;t[i]=e.max.value,l[i]||(l[i]=!0)})}),e.concat(t)},[])}))}}return n.all(t).then(function(e){return e=e.reduce(function(e,n){return n&&n.length?e.concat(n):e},[]),e=_.sortBy(e,"from"),_.keys(l).reduce(function(n,t){return n[t]=_.pluck(e,t),n},{times:_.pluck(e,"from")})})},d.synchro.execution.get=function(e){e=c(e);for(var t=[],i=moment.unix(e.startTime).utc().startOf(e.rangeDuration),a=moment.unix(e.endTime).utc().startOf(e.rangeDuration),o=[];i.isBefore(a);){o.push({from:i.unix(),to:i.add(1,e.rangeDuration).unix()});var r=o.length===e.maxRangeSize||!i.isBefore(a);if(r){var s={size:0,aggs:{range:{range:{field:"time",ranges:o},aggs:{api:{terms:{field:"api",size:0},aggs:{peer_count:{cardinality:{field:"peer"}}}},duration:{sum:{field:"executionTime"}},result:{nested:{path:"result"},aggs:{inserts:{sum:{field:"result.inserts"}},updates:{sum:{field:"result.updates"}},deletes:{sum:{field:"result.deletes"}}}}}}}};o=[];var l={};10==t.length?(console.error("Too many parallel jobs!"),i=moment.unix(e.endTime).utc()):t.push(d.raw.synchro.search(s,{currency:e.currency}).then(function(e){var n=e.aggregations;return(n.range&&n.range.buckets||[]).reduce(function(e,n){var t={from:n.from,to:n.to,inserts:n.result.inserts.value,updates:n.result.inserts.value,deletes:n.result.deletes.value,duration:n.duration.value};return _.forEach(n.api&&n.api.buckets||[],function(e){t[e.key]=e.peer_count&&e.peer_count.value||0,l[e.key]||(l[e.key]=!0)}),e.concat(t)},[])}))}}return n.all(t).then(function(e){e=e.reduce(function(e,n){return n&&n.length?e.concat(n):e},[]),e=_.sortBy(e,"from");var n={times:_.pluck(e,"from"),inserts:_.pluck(e,"inserts"),updates:_.pluck(e,"updates"),deletes:_.pluck(e,"deletes"),duration:_.pluck(e,"duration")};return _.keys(l).forEach(function(t){n[t]=_.pluck(e,t)}),n})},d}]),angular.module("cesium.graph.color.services",[]).factory("gpColor",function(){"ngInject";var e={css2Rgb:{white:[255,255,255],assertive:[239,71,58],calm:[17,193,243],positive:[56,126,245],balanced:[51,205,95],energized:[255,201,0],royal:[136,106,234],gray:[150,150,150],stable:[248,248,248]}},n={scale:{}};return n.scale.custom=function(e,n,t,i){function a(e){switch(e){case 0:return 0;case 1:return-1;case 2:return 0;case 3:return 1}}n=n>0&&n||.55;for(var o=Math.round(e/2.5),r=t&&3==t.length?angular.copy(t):[255,0,0],s=i&&3==i.length?angular.copy(i):[0,2,3],l=t?[Math.round(255/o),Math.round(255/o),Math.round(255/o)]:[Math.round((r[0]-50)/o),Math.round((255-r[1])/o),Math.round((255-r[2])/o)],c=[a(s[0]),a(s[1]),a(s[2])],u=[0,0,0],d=[],p=0;p<e;p++){for(var m=0;m<3;m++)r[m]+=c[m]*l[m],u[m]++,((r[m]<=0||r[m]>=255)&&0!==c[m]||0===c[m]&&u[m]==o)&&(r[m]<=0?r[m]=0:r[m]>=255&&(r[m]=255),s[m]=(s[m]+1)%4,c[m]=a(s[m]),u[m]=0);d.push("rgba("+r[0]+","+r[1]+","+r[2]+","+n+")")}return d},n.scale["default"]=function(){return n.scale.custom(25)},n.scale.fix=function(e,t){return Array.apply(null,Array(e||25)).map(String.prototype.valueOf,t||n.rgba.calm(.5))},n.rgba=_.mapObject(e.css2Rgb,function(e){var n="rgba("+e.join(",")+",";return function(t){return!t||t<0?"rgb("+e.join(",")+")":n+t+")"}}),n.rgba.translucent=function(){return"rgb(0,0,0,0)"},n.constants=e,n}),GpCurrencyAbstractController.$inject=["$scope","$filter","$ionicPopover","$ionicHistory","$state","csSettings","csCurrency","esHttp"],angular.module("cesium.graph.common.controllers",["cesium.services"]).controller("GpCurrencyAbstractCtrl",GpCurrencyAbstractController),GpBlockchainTxCountController.$inject=["$scope","$controller","$q","$state","$filter","$translate","gpData","gpColor"],GpBlockchainIssuersController.$inject=["$scope","$controller","$q","$state","$translate","gpColor","gpData"],angular.module("cesium.graph.blockchain.controllers",["chart.js","cesium.services","cesium.graph.services"]).config(["$stateProvider",function(e){"ngInject";e.state("app.blockchain_stats",{url:"/blockchain/stats?currency&stepUnit&t&hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/blockchain/view_stats.html"}}}).state("app.currency_blockchain_stats",{url:"/:currency/blockchain/stats",views:{menuContent:{templateUrl:"plugins/graph/templates/blockchain/view_stats.html"}}})}]).controller("GpBlockchainTxCountCtrl",GpBlockchainTxCountController).controller("GpBlockchainIssuersCtrl",GpBlockchainIssuersController),GpNetworkViewExtendController.$inject=["$scope","PluginService","esSettings"],GpPeerViewExtendController.$inject=["$scope","$timeout","PluginService","esSettings","csCurrency","gpData"],angular.module("cesium.graph.network.controllers",["chart.js","cesium.graph.services"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(n.extendState("app.network",{points:{buttons:{templateUrl:"plugins/graph/templates/network/view_network_extend.html",controller:"GpNetworkViewExtendCtrl"}}}).extendState("app.view_peer",{points:{general:{templateUrl:"plugins/graph/templates/network/view_peer_extend.html",controller:"GpPeerViewExtendCtrl"}}}),e.state("app.view_peer_stats",{url:"/network/peer/:pubkey/stats",views:{menuContent:{templateUrl:"plugins/graph/templates/network/view_peer_stats.html",controller:"GpBlockchainTxCountCtrl"}}}))}]).controller("GpNetworkViewExtendCtrl",GpNetworkViewExtendController).controller("GpPeerViewExtendCtrl",GpPeerViewExtendController),GpCurrencyViewExtendController.$inject=["$scope","PluginService","UIUtils","esSettings"],GpCurrencyMonetaryMassController.$inject=["$scope","$controller","$q","$state","$translate","$ionicPopover","gpColor","gpData","$filter","csSettings"],GpCurrencyDUController.$inject=["$scope","$q","$controller","$translate","gpColor","gpData","$filter"],GpCurrencyMembersCountController.$inject=["$scope","$controller","$q","$state","$translate","gpColor","gpData","$filter"],angular.module("cesium.graph.currency.controllers",["chart.js","cesium.graph.services","cesium.graph.common.controllers"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";e.state("app.currency.tab_parameters_stats",{url:"/parameters/stats",views:{"tab-parameters":{templateUrl:"plugins/graph/templates/currency/tabs/tab_parameters_stats.html",controller:"GpCurrencyMonetaryMassCtrl"}}}).state("app.currency.tab_wot_stats",{url:"/community/stats",views:{"tab-wot":{templateUrl:"plugins/graph/templates/currency/tabs/tab_wot_stats.html",controller:"GpCurrencyMembersCountCtrl"}}}).state("app.currency.tab_network_stats",{url:"/network/stats",views:{"tab-network":{templateUrl:"plugins/graph/templates/currency/tabs/tab_network_stats.html"}}}).state("app.currency.tab_blocks_stats",{url:"/blocks/stats",views:{"tab-blocks":{templateUrl:"plugins/graph/templates/currency/tabs/tab_blocks_stats.html"}}}).state("app.currency_stats_lg",{url:"/currency/stats/lg?hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/currency/view_stats_lg.html"}}});var i=t.plugins&&t.plugins.es;i&&n.extendStates(["app.currency_name","app.currency","app.currency_name_lg","app.currency_lg"],{
points:{"parameters-actual":{templateUrl:"plugins/graph/templates/currency/view_currency_extend.html",controller:"GpCurrencyViewExtendCtrl"},"wot-actual":{templateUrl:"plugins/graph/templates/currency/view_currency_extend.html",controller:"GpCurrencyViewExtendCtrl"},"network-actual":{templateUrl:"plugins/graph/templates/currency/view_currency_extend.html",controller:"GpCurrencyViewExtendCtrl"}}}).extendStates(["app.currency.tab_blocks"],{points:{buttons:{templateUrl:"plugins/graph/templates/currency/tab_blocks_extend.html",controller:"GpCurrencyViewExtendCtrl"}}})}]).controller("GpCurrencyViewExtendCtrl",GpCurrencyViewExtendController).controller("GpCurrencyMonetaryMassCtrl",GpCurrencyMonetaryMassController).controller("GpCurrencyDUCtrl",GpCurrencyDUController).controller("GpCurrencyMembersCountCtrl",GpCurrencyMembersCountController),GpExtendController.$inject=["$scope","PluginService","esSettings","$state","csWallet"],GpAccountBalanceController.$inject=["$scope","$controller","$q","$state","$filter","$translate","csWot","gpData","gpColor","csWallet"],GpAccountSumTxController.$inject=["$scope","$controller","$filter","$state","csTx","gpColor"],GpAccountCertificationController.$inject=["$scope","$controller","$q","$state","$filter","$translate","gpData","gpColor","csWallet"],angular.module("cesium.graph.account.controllers",["chart.js","cesium.graph.services"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(n.extendState("app.view_wallet_tx",{points:{buttons:{templateUrl:"plugins/graph/templates/account/view_wallet_tx_extend.html",controller:"GpExtendCtrl"}}}).extendState("app.wot_identity",{points:{buttons:{templateUrl:"plugins/graph/templates/account/view_identity_extend.html",controller:"GpExtendCtrl"}}}).extendStates(["app.wot_identity_tx_uid","app.wot_identity_tx_uid_lg"],{points:{buttons:{templateUrl:"plugins/graph/templates/account/view_identity_tx_extend.html",controller:"GpExtendCtrl"}}}),e.state("app.view_wallet_stats",{url:"/wallet/stats?t&stepUnit&hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/account/view_stats.html"}},data:{auth:!0}}).state("app.wot_identity_stats",{url:"/wot/:pubkey/stats?t&stepUnit&hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/account/view_stats.html"}}}))}]).controller("GpExtendCtrl",GpExtendController).controller("GpAccountBalanceCtrl",GpAccountBalanceController).controller("GpAccountSumTxCtrl",GpAccountSumTxController).controller("GpAccountCertificationCtrl",GpAccountCertificationController),GpDocStatsController.$inject=["$scope","$state","$controller","$q","$translate","gpColor","gpData","$filter"],angular.module("cesium.graph.docstats.controllers",["chart.js","cesium.graph.services","cesium.graph.common.controllers"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";e.state("app.doc_stats_lg",{url:"/data/stats?stepUnit&t&hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/docstats/view_stats.html",controller:"GpDocStatsCtrl"}}});t.plugins&&t.plugins.es}]).controller("GpDocStatsCtrl",GpDocStatsController),GpSynchroController.$inject=["$scope","$controller","$q","$translate","gpColor","gpData","$filter"],angular.module("cesium.graph.synchro.controllers",["chart.js","cesium.graph.services","cesium.graph.common.controllers"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";e.state("app.doc_synchro_lg",{url:"/data/synchro?stepUnit&t&hide&scale",views:{menuContent:{templateUrl:"plugins/graph/templates/synchro/view_stats.html",controller:"GpSynchroCtrl"}}});t.plugins&&t.plugins.es}]).controller("GpSynchroCtrl",GpSynchroController),angular.module("cesium.map.plugin",["ui-leaflet","cesium.map.services","cesium.map.wot.controllers","cesium.map.registry.controllers","cesium.map.network.controllers","cesium.map.user.controllers","cesium.map.settings.controllers","cesium.map.help.controllers"]).config(function(){"ngInject";L.AwesomeMarkers.Icon.prototype.options.prefix="ion"}),angular.module("cesium.map.services",["cesium.map.wot.services","cesium.map.registry.services","cesium.map.utils.services"]),angular.module("cesium.map.wot.services",["cesium.services"]).factory("mapWot",["$q","csHttp","esHttp","esSettings","csWot","BMA","esGeo",function(e,n,t,i,a,o,r){"ngInject";function s(e){e=e||{};var n={bool:{}};return e.searchAddress?n.bool.should=[{exists:{field:"geoPoint"}},{exists:{field:"city"}}]:n.bool.must=[{exists:{field:"geoPoint"}}],e.bounds&&e.bounds.northEast&&e.bounds.southWest&&(n.bool.should=n.bool.should||{},n.bool.should.geo_bounding_box={geoPoint:{top_left:{lat:Math.max(Math.min(e.bounds.northEast.lat,90),-90),lon:Math.max(Math.min(e.bounds.southWest.lng,180),-180)},bottom_right:{lat:Math.max(Math.min(e.bounds.southWest.lat,90),-90),lon:Math.max(Math.min(e.bounds.northEast.lng,180),-180)}}}),n}function l(n){n=n||{},n.from=n.from||0,n.size=n.size||d.DEFAULT_LOAD_SIZE,n.searchAddress=r.google.isEnable()&&(!angular.isDefined(n.searchAddress)||n.searchAddress),n.fields=n.fields||{},n.fields.description=!angular.isDefined(n.fields.description)||n.fields.description;var t={query:s(n),from:0,size:n.size,_source:n.fields.description?p.profile.concat("description"):p.profile},i=!1,a=i?u.raw.profile.mixedSearch:u.raw.profile.search;return e.all([a(t),o.wot.member.uids(),o.wot.member.pending().then(function(e){return e.memberships&&e.memberships.length?e.memberships:[]})]).then(function(i){var o=i[1],r=i[2],i=i[0];if(!i.hits||!i.hits.total)return[];r=r.reduce(function(e,n){if("IN"==n.membership&&!o[n.pubkey]){var t={uid:n.uid,pubkey:n.pubkey,block:n.blockNumber,blockHash:n.blockHash,pending:!0},i=e[n.pubkey];if(i&&t.block>i.block)return e;e[t.pubkey]=t}return e},{});var s=[c(n,o,r,i)];for(t.from+=t.size;t.from<i.hits.total;)s.push(a(angular.copy(t)).then(function(e){return e.hits&&e.hits.hits.length?c(n,o,r,e):[]})),t.from+=t.size;return e.all(s).then(function(e){return e.reduce(function(e,n){return e.concat(n)},[])})})}function c(n,i,a,o){var s=new RegExp("[,]"),l=[],c=o.hits.hits.reduce(function(e,o){var r=o._id,c=i[r],u=c&&{uid:c}||a[r]||{};if(u.pubkey=r,u.index=o._index,u.city=o._source.city,u.address=o._source.address,u.geoPoint=o._source.geoPoint,u.geoPoint&&u.geoPoint.lat&&u.geoPoint.lon)u.geoPoint.lat&&"string"==typeof u.geoPoint.lat&&(u.geoPoint.lat=parseFloat(u.geoPoint.lat.replace(s,"."))),u.geoPoint.lon&&"string"==typeof u.geoPoint.lon&&(u.geoPoint.lon=parseFloat(u.geoPoint.lon.replace(s,".")));else{if(!n.searchAddress||!u.city)return e;u.searchAddress=u.city&&(o._source.address?o._source.address+", ":"")+u.city,l.push(u)}return u.avatar=t.image.fromHit(o,"avatar"),u.name=o._source.title,u.name&&u.name.length>30&&(u.name=u.name.substr(0,27)+"..."),u.description=o._source.description&&t.util.parseAsHtml(o._source.description),u.geoPoint?e.concat(u):e},[]);if(l.length){var u=(new Date).getTime();console.debug("[map] [wot] Search positions of {0} addresses...".format(l.length));var d=0;return e.all(l.reduce(function(e,n){return n.city?e.concat(r.google.searchByAddress(n.searchAddress).then(function(e){e&&e.length&&(n.geoPoint=e[0],n.city==n.searchAddress&&(n.geoPoint.lon+=Math.random()/1e3,n.geoPoint.lat+=Math.random()/1e3),delete n.searchAddress,c.push(n),d++)})["catch"](function(){})):e},[])).then(function(){return console.debug("[map] [wot] Resolved {0}/{1} addresses in {2}ms".format(d,l.length,(new Date).getTime()-u)),c})}return e.when(c)}var u=this,d={DEFAULT_LOAD_SIZE:1e3},p={profile:["title","geoPoint","avatar._content_type","address","city"]};return u.raw={profile:{search:t.post("/user/profile/_search"),mixedSearch:t.post("/user,page,group/profile,record/_search")}},{load:l}}]),angular.module("cesium.map.registry.services",["cesium.services"]).factory("mapRegistry",["$q","csHttp","esHttp","esSettings","csWot","BMA","esGeo",function(e,n,t,i,a,o,r){"ngInject";function s(e){e=e||{};var n={bool:{}};return e.searchAddress?n.bool.should=[{exists:{field:"geoPoint"}},{exists:{field:"city"}}]:n.bool.must=[{exists:{field:"geoPoint"}}],e.bounds&&e.bounds.northEast&&e.bounds.southWest&&(n.bool.should=n.bool.should||{},n.bool.should.geo_bounding_box={geoPoint:{top_left:{lat:Math.max(Math.min(e.bounds.northEast.lat,90),-90),lon:Math.max(Math.min(e.bounds.southWest.lng,180),-180)},bottom_right:{lat:Math.max(Math.min(e.bounds.southWest.lat,90),-90),lon:Math.max(Math.min(e.bounds.northEast.lng,180),-180)}}}),n}function l(n){n=n||{},n.from=n.from||0,n.size=n.size||d.DEFAULT_LOAD_SIZE,n.searchAddress=r.google.isEnable()&&(!angular.isDefined(n.searchAddress)||n.searchAddress),n.fields=n.fields||{},n.fields.description=!angular.isDefined(n.fields.description)||n.fields.description;var t={query:s(n),from:0,size:n.size,_source:n.fields.description?p.record.concat("description"):p.record},i=!1,a=i?u.raw.profile.mixedSearch:u.raw.profile.search;return a(t).then(function(i){if(!i.hits||!i.hits.total)return[];var o=[c(n,i)];for(t.from+=t.size;t.from<i.hits.total;)o.push(a(angular.copy(t)).then(function(e){return e.hits&&e.hits.hits.length?c(n,e):[]})),t.from+=t.size;return e.all(o).then(function(e){return e.reduce(function(e,n){return e.concat(n)},[])})})}function c(n,i){var a=new RegExp("[,]"),o=[],s=i.hits.hits.reduce(function(e,i){var r=i._source.issuer,s={};if(s.issuer=r,s.pubkey=i._source.pubkey||s.issuer,s.id=i._id,s.index=i._index,s.type=i._source.type,s.category=i._source.category,s.category&&delete s.category.parent,s.city=i._source.city,s.address=i._source.address,s.geoPoint=i._source.geoPoint,s.geoPoint&&s.geoPoint.lat&&s.geoPoint.lon)s.geoPoint.lat&&"string"==typeof s.geoPoint.lat&&(s.geoPoint.lat=parseFloat(s.geoPoint.lat.replace(a,"."))),s.geoPoint.lon&&"string"==typeof s.geoPoint.lon&&(s.geoPoint.lon=parseFloat(s.geoPoint.lon.replace(a,".")));else{if(!n.searchAddress||!s.city)return e;s.searchAddress=s.city&&(i._source.address?i._source.address+", ":"")+s.city,o.push(s)}return s.avatar=t.image.fromHit(i,"avatar"),s.name=i._source.title,s.name&&s.name.length>30&&(s.name=s.name.substr(0,27)+"..."),s.description=i._source.description&&t.util.parseAsHtml(i._source.description),s.geoPoint?e.concat(s):e},[]);if(o.length){var l=(new Date).getTime();console.debug("[map] [registry] Search positions of {0} addresses...".format(o.length));var c=0;return e.all(o.reduce(function(e,n){return n.city?e.concat(r.google.searchByAddress(n.searchAddress).then(function(e){e&&e.length&&(n.geoPoint=e[0],n.city==n.searchAddress&&(n.geoPoint.lon+=Math.random()/1e3,n.geoPoint.lat+=Math.random()/1e3),delete n.searchAddress,s.push(n),c++)})["catch"](function(){})):e},[])).then(function(){return console.debug("[map] [registry] Resolved {0}/{1} addresses in {2}ms".format(c,o.length,(new Date).getTime()-l)),s})}return e.when(s)}var u=this,d={DEFAULT_LOAD_SIZE:1e3},p={record:["title","geoPoint","avatar._content_type","address","city","type","pubkey","issuer","category"]};return u.raw={profile:{search:t.post("/page/record/_search"),mixedSearch:t.post("/user,page,group/profile,record/_search")}},{load:l}}]),angular.module("cesium.map.utils.services",["cesium.services","ui-leaflet"]).factory("MapUtils",["$timeout","$q","$translate","$window","leafletData","csConfig","csSettings","esGeo","UIUtils","leafletHelpers",function(e,n,t,i,a,o,r,s,l,c){"ngInject";function u(e){e=angular.merge({center:angular.copy(v.DEFAULT_CENTER),cache:!1,defaults:{scrollWheelZoom:!0,tileLayerOptions:{attribution:' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}},layers:{baselayers:{osm:{name:"OpenStreetMap",type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",layerOptions:{subdomains:["a","b","c"],attribution:'&copy; <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',continuousWorld:!0}},google:{name:"Google map",type:"xyz",url:"https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&key="+T,layerOptions:{subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy; <a target="_blank"  href="https://www.google.com/intl/fr_fr/help/terms_maps.html">Google</a>',continuousWorld:!0}}}},controls:{custom:[]}},e||{}),e.cache&&I.cache[e.cache]&&(console.debug("[map] Restoring map from cache :",I.cache[e.cache]),e=angular.merge(e,I.cache[e.cache]));var n;return e.layers.overlays&&(n=_.keys(e.layers.overlays).reduce(function(n,t){return n.concat(e.layers.overlays[t].name)},[]),t(n).then(function(n){_.keys(e.layers.overlays||{}).forEach(function(t){e.layers.overlays[t].name=n[e.layers.overlays[t].name]})})),e}function d(t,i){return E(i,t)?n.when():e(function(){t.invalidateSize(),t._resetView(i,i.zoom,!0)},300)}function p(e,n,t){if(t=t||{},!n||!t.layers||!e)throw"Illegal arguments";if(t.cache){if(t.layers.overlays){var o=_.keys(t.layers.overlays);I.cache[t.cache]||(I.cache[t.cache]={center:t.center,bounds:t.bounds,layers:angular.copy(t.layers)}),a.getMap(n).then(function(){_(i.document.querySelectorAll("#{0} .leaflet-control-layers-overlays input[type=checkbox]".format(n))).forEach(function(e,n){var i=o[n],a=t.layers.overlays[i].visible;e.addEventListener("change",function(e){a=!a,I.cache[t.cache].layers.overlays[i].visible=a})})})}e.$on("$ionicView.leave",function(){I.cache[t.cache].center=t.center,I.cache[t.cache].bounds=t.bounds})}}function m(e){if(e){var n;if(e.lat&&(n={},n.lat=parseFloat(e.lat)),(e.lng||e.lon)&&(n=n||{},n.lng=parseFloat(e.lng||e.lon)),e.zoom&&(n=n||{},n.zoom=parseFloat(e.zoom)),n)return c.isValidCenter(n)||(n=angular.merge({},v.DEFAULT_CENTER,n)),n}}function E(e,n){return c.isSameCenterOnMap(e,n)}function g(e){var n=v.DEFAULT_CENTER;return!(!e.lat||!e.lng||n.lat.toFixed(4)!==e.lat.toFixed(4)||n.lng.toFixed(4)!==e.lng.toFixed(4)||n.zoom!==e.zoom)}function b(e,n){if(!e||!n)throw"Illegal arguments";if(e._container)e._container.id=n;else{var t=e.onAdd;e.onAdd=function(e){var i=t.call(this,e);return i.id=n,i}}}function h(e){e=e||{},e.initial=!!angular.isDefined(e.initial)&&e.initial,e.marker=!!angular.isDefined(e.marker)&&e.marker,e.propertyName=angular.isDefined(e.propertyName)?e.propertyName:"title",e.position=angular.isDefined(e.position)?e.position:"topleft",e.zoom=angular.isDefined(e.zoom)?e.zoom:v.LOCALIZE_ZOOM,e.markerLocation=!angular.isDefined(e.markerLocation)||e.markerLocation;var n=t(["MAP.COMMON.SEARCH_DOTS","COMMON.SEARCH_NO_RESULT"]);return{addTo:function(t){n.then(function(n){var i=L.control.search(angular.merge(e,{textPlaceholder:n["MAP.COMMON.SEARCH_DOTS"],textErr:n["COMMON.SEARCH_NO_RESULT"]}));e.id&&b(i,e.id),i.addTo(t)})}}}function f(e){return e=e||{},L.easyButton({position:"topleft",type:"replace",leafletClasses:!0,states:[{stateName:"locate-me",onClick:function(e,n){s.point.current().then(function(e){n.setView({lat:e.lat,lng:e.lon},v.LOCALIZE_ZOOM)})["catch"](function(e){console.error(e),l.alert.error("MAP.ERROR.LOCALIZE_ME_FAILED")})},title:e.title,icon:"icon ion-android-locate"}]})}var T=o.plugins&&o.plugins.es&&o.plugins.es.googleApiKey,v={locations:{FRANCE:{lat:46.5588603,lng:4.229736328124999,zoom:6}},LOCALIZE_ZOOM:15},I={cache:{}};return v.DEFAULT_CENTER=r.data&&r.data.plugins&&r.data.plugins.map&&r.data.plugins.map.center||v.locations.FRANCE,{map:u,updateCenter:d,center:{get:m,isSame:E,isDefault:g},control:{search:h,localizeMe:f,setId:b},cache:{bind:p},constants:v}}]),MapWotViewController.$inject=["$scope","$filter","$templateCache","$interpolate","$timeout","$location","$translate","$q","leafletData","UIUtils","csSettings","csWallet","MapUtils","mapWot"],angular.module("cesium.map.wot.controllers",["cesium.services","cesium.map.services","cesium.map.help.controllers"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(n.extendState("app.wot_lookup.tab_search",{points:{"nav-buttons":{template:'<button class="button button-icon button-clear" ui-sref="app.view_wot_map"><i class="icon ion-ios-location"></i></button>'}}}).extendState("app.wot_lookup_lg",{points:{"filter-buttons":{templateUrl:"plugins/map/templates/wot/lookup_lg_extend.html",controller:"ESExtensionCtrl"}}}),e.state("app.view_wot_map",{url:"/wot/map?c&center",views:{menuContent:{templateUrl:"plugins/map/templates/wot/view_map.html",controller:"MapWotViewCtrl"}},data:{silentLocationChange:!0}}))}]).controller("MapWotViewCtrl",MapWotViewController),MapRegistryViewController.$inject=["$scope","$filter","$templateCache","$interpolate","$timeout","$location","$translate","$q","leafletData","UIUtils","csSettings","csWallet","MapUtils","mapRegistry"],angular.module("cesium.map.registry.controllers",["cesium.services","cesium.map.services","cesium.map.help.controllers"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(n.extendState("app.wot_lookup.tab_registry",{points:{"nav-buttons":{template:'<button class="button button-icon button-clear" ui-sref="app.view_registry_map"><i class="icon ion-ios-location"></i></button>'}}}).extendState("app.registry_lookup_lg",{points:{"filter-buttons":{templateUrl:"plugins/map/templates/registry/lookup_lg_extend.html"}}}),e.state("app.view_registry_map",{url:"/wot/pagemap?c&center",views:{menuContent:{templateUrl:"plugins/map/templates/registry/view_map.html",controller:"MapRegistryViewCtrl"}},data:{silentLocationChange:!0}}))}]).controller("MapRegistryViewCtrl",MapRegistryViewController),angular.module("cesium.map.network.controllers",["cesium.services","cesium.map.services"]).config(["$stateProvider","PluginServiceProvider","csConfig",function(e,n,t){"ngInject";var i=t.plugins&&t.plugins.es;i&&(n.extendState("app.network",{points:{"filter-buttons":{templateUrl:"plugins/map/templates/network/lookup_extend.html",controller:"ESExtensionCtrl"}}}),e.state("app.view_network_map",{url:"/network/map?c",views:{menuContent:{templateUrl:"plugins/map/templates/network/view_map.html",controller:"MapNetworkViewCtrl"}},data:{silentLocationChange:!0}}))}]).controller("MapNetworkViewCtrl",["$scope","$controller","$q","$interpolate","$translate","$filter","$templateCache","$timeout","$location","esGeo","UIUtils","csNetwork","MapUtils","leafletData",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";angular.extend(this,n("NetworkLookupCtrl",{$scope:e}));var E,g,b=o("formatPubkey"),h={member:{type:"awesomeMarker",icon:"person",markerColor:"green",iconColor:"white"},mirror:{type:"awesomeMarker",icon:"radio-waves",markerColor:"green",iconColor:"white"},offline:{type:"awesomeMarker",icon:"ion-close-circled",markerColor:"red",iconColor:"white"}},f={},T=0;E='<div class="item item-peer item-icon-left no-border" ng-click="selectPeer(peer)">',E+=r.get("templates/network/item_content_peer.html"),E+="</div>",E=E.replace(/[:]rebind[:]|[:][:]/g,""),e.loading=!0,e.mapId="map-network-"+e.$id,e.helptipPrefix="helptip-"+e.mapId,e.map=p.map({cache:"map-network",layers:{overlays:{member:{type:"featureGroup",name:"MAP.NETWORK.VIEW.LAYER.MEMBER",visible:!0},mirror:{type:"featureGroup",name:"MAP.NETWORK.VIEW.LAYER.MIRROR",visible:!0},offline:{type:"featureGroup",name:"MAP.NETWORK.VIEW.LAYER.OFFLINE",visible:!1}}},bounds:{},loading:!0,markers:{}});var v=e.enter;e.enter=function(n,t){if(!e.loading)return e.updateLocationHref(),v(n,t);if(t.stateParams&&t.stateParams.c){var i=t.stateParams.c.split(":");e.map.center.lat=parseFloat(i[0]),e.map.center.lng=parseFloat(i[1]),e.map.center.zoom=parseInt(i[2])}e.$watch("map.center",function(){if(!e.map.loading)return s(function(){e.updateLocationHref()},300)},!0),e.loadMap().then(function(e){return e.fire("dataloading"),v(n,t)})},e.$on("$ionicView.enter",e.enter);var I=e.computeOptions;e.computeOptions=function(){var e=I();return e.filter.online="all",e},e.loadMap=function(){return m.getMap(e.mapId).then(function(n){if(!e.map.loading)return n;L.Control.loading({position:"topright",separate:!0}).addTo(n),g=L.layerGroup({visible:!1});var t=i(r.get("plugins/map/templates/network/item_search_tooltip.html"));p.control.search({layer:g,propertyName:"title",buildTip:function(e,n){return t(n.layer.options)},moveToLocation:function(e,n,t){this.options.zoom?this._map.setView(e,this.options.zoom):this._map.panTo(e);var i=e.layer&&e.layer.options&&e.layer.options.popupMarkerId;i&&s(function(){var e=_.find(t._layers,function(e){return e.options&&e.options.id===i});e&&e.openPopup()},400)},firstTipSubmit:!0,tooltipLimit:50}).addTo(n);var a=function(e){return e.options&&e.options.icon.options.markerColor},o=L.markerClusterGroup({disableClusteringAtZoom:p.constants.LOCALIZE_ZOOM,maxClusterRadius:65,showCoverageOnHover:!1,iconCreateFunction:function(e){var n=_.countBy(e.getAllChildMarkers(),a),t=n.green?"green":n.lightgreen?"lightgreen":n.lightgray?"lightgray":"red",i=e.getChildCount(),o="marker-cluster "+t+" marker-cluster-";return o+=i<10?"small":i<100?"medium":"large",L.divIcon({html:"<div><span>"+i+"</span></div>",className:o,iconSize:new L.Point(40,40)})}});return n.eachLayer(function(e){e.addLayer&&angular.extend(e,L.featureGroup.subGroup(o))}),c.point.ip.license&&(o.getAttribution=function(){return'<a target="_blank" href="{0}">{1}</a>'.format(c.point.ip.license.url,c.point.ip.license.name)}),o.addTo(n),e.map.loading=!1,n})},e.updateView=function(n){console.debug("[map] [peers] Updating UI"),e.search.loading=!e.networkStarted||d.isBusy();var t=angular.copy(f);_.forEach(n.peers||[],function(n){if(!n.isTor()){var i=f[n.id];if(i&&e.map.markers[i])return e.updateMarker(e.map.markers[i],n),void delete t[n.id];var a=n.bma,o=n.hasValid4(a)?a.ipv4:a.dns||a.ipv6;c.point.ip.search(o).then(function(t){i=""+T++;var o=e.updateMarker({position:t,getMessageScope:function(){var t=e.$new();return t.peer=n,t},draggable:!1,focus:!1,message:E,id:i},n);e.map.markers[i]=o,f[n.id]=i;var r,s=n.dns||n.server,l=s+(n.uid?" | "+(n.name||n.uid):"")+" | "+b(n.pubkey);a.ipv4&&!(n.dns||n.server).startsWith(a.ipv4)&&(r=a.ipv4,l+=" | "+a.ipv4),g.addLayer(new L.Marker({lat:t.lat,lng:t.lng},{opacity:0,icon:L.divIcon({className:"ng-hide",iconSize:L.point(0,0)}),title:l,peer:angular.extend({ipv4:r},n),popupMarkerId:i}))})["catch"](function(e){console.debug("No position found for address ["+o+"]",e)})}}),_.forEach(_.keys(t),function(e){delete f[e]}),_.forEach(_.values(t),function(n){delete e.map.markers[n]}),e.search.loading||m.getMap(e.mapId).then(function(n){e.loading=!1,n.fire("dataload")})},e.updateMarker=function(e,n){return e.layer=n.online?n.uid?"member":"mirror":"offline",e.icon=angular.copy(h[e.layer]),e.opacity=(n.online,1),e.title=n.dns||n.server,n.online&&!n.hasMainConsensusBlock&&(e.icon.markerColor=n.hasConsensusBlock?"lightgreen":"lightgray",e.opacity=n.hasConsensusBlock?.9:.8),e.lng||(e.lng=e.position.lng+Math.random()/1e3,e.lat=e.position.lat+Math.random()/1e3),e},e.updateLocationHref=function(n){var t=l.search()||{};t.c&&p.center.isDefault(e.map.center)||(n=n||"{0}:{1}:{2}".format(e.map.center.lat.toFixed(4),e.map.center.lng.toFixed(4),e.map.center.zoom),l.search({c:n}).replace())},e.$on("centerUrlHash",function(n,t){if(!e.loading)return s(function(){e.updateLocationHref(t)},300)}),e.showHelpTip=function(){}}]),angular.module("cesium.map.user.controllers",["cesium.services","cesium.map.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.extendState("app.user_edit_profile",{points:{"after-position":{templateUrl:"plugins/map/templates/user/edit_profile_extend.html",controller:"MapEditProfileViewCtrl"}}})}]).controller("MapEditProfileViewCtrl",["$scope","$timeout","$q","MapUtils","$translate",function(e,n,t,i,a){"ngInject";var o=[];e.mapId="map-user-profile-"+e.$id,e.map=i.map({markers:{},center:{zoom:13}}),e.loading=!0,e.mapId="map-profile-"+e.$id,e.enter=function(t,i){return e.formData&&(e.formData.title||e.formData.geoPoint)?(e.loading=!0,e.load()):n(e.enter,500)},e.$on("$csExtension.enter",e.enter),e.$on("$ionicParentView.enter",e.enter),e.load=function(){return e.formData.geoPoint&&e.formData.geoPoint.lat&&e.formData.geoPoint.lon?e.map.markers.geoPoint?(e.map.markers.geoPoint.lat=e.formData.geoPoint.lat,void(e.map.markers.geoPoint.lng=e.formData.geoPoint.lon)):a("MAP.PROFILE.MARKER_HELP").then(function(n){e.map.markers.geoPoint={message:n,lat:parseFloat(e.formData.geoPoint.lat),lng:parseFloat(e.formData.geoPoint.lon),draggable:!0,focus:!0},angular.extend(e.map.center,{lat:e.map.markers.geoPoint.lat,lng:e.map.markers.geoPoint.lng});var t=e.$watch("map.markers.geoPoint",function(){e.loading||e.map.markers.geoPoint&&e.map.markers.geoPoint.lat&&e.map.markers.geoPoint.lng&&(e.formData.geoPoint=e.formData.geoPoint||{},e.formData.geoPoint.lat=e.map.markers.geoPoint.lat,e.formData.geoPoint.lon=e.map.markers.geoPoint.lng)},!0);o.push(t),e.ionItemClass||(e.ionItemClass="done in"),e.loading=!1}):(_.forEach(o,function(e){e()}),o=[],delete e.map.markers.geoPoint,e.loading=!1,t.when())},e.$watch("formData.geoPoint",function(){e.loading||e.load()},!0)}]),angular.module("cesium.map.settings.controllers",["cesium.services"]).config(["PluginServiceProvider","csConfig",function(e,n){"ngInject";var t=n.plugins&&n.plugins.es;t&&e.extendState("app.es_settings",{points:{common:{templateUrl:"plugins/map/templates/settings/es_settings_extend.html"}}})}]),MapHelpTipController.$inject=["$scope","$controller"],angular.module("cesium.map.help.controllers",["cesium.services"]).controller("MapHelpTipCtrl",MapHelpTipController),angular.module("cesium",["ionic","ionic-material","ngMessages","pascalprecht.translate","ngApi","angular-cache","angular.screenmatch","angular.bind.notifier","ImageCropper","ion-digit-keyboard","cesium.plugins","cesium.filters","cesium.config","cesium.platform","cesium.controllers","cesium.templates","cesium.translations","cesium.components","cesium.directives"]).config(["$urlRouterProvider",function(e){"ngInject";e.deferIntercept()}]).run(["$rootScope","$translate","$state","$window","$urlRouter","ionicReady","Device","UIUtils","$ionicConfig","PluginService","csPlatform","csWallet",function(e,n,t,i,a,o,r,s,l,c,u,d){"ngInject";e.walletData=d.data,u.disableChangeState();var p=!1;e.$on("$stateChangeStart",function(n,i,a,o){if(!n.defaultPrevented){var r=!i.data||e.tour||n.currentScope.tour;if(!r){if(p)return void n.preventDefault();var l;return i.data.large&&!s.screen.isSmall()?(n.preventDefault(),void t.go(i.data.large,a)):i.data.auth&&!d.isAuth()?(n.preventDefault(),l=i.data.minData?{minData:!0}:void 0,p=!0,d.auth(l).then(function(){return p=!1,t.go(i.name,a)})["catch"](function(e){if(p=!1,"CANCELLED"==e&&!t.current.name)return t.go("app.home")})):i.data.login&&!d.isLogin()?(n.preventDefault(),l=i.data.minData?{minData:!0}:void 0,p=!0,d.login(l).then(function(){return p=!1,t.go(i.name,a)})["catch"](function(e){if(p=!1,"CANCELLED"==e&&!t.current.name)return t.go("app.home")})):!i.data.login&&!i.data.auth||(l=i.data.minData?{minData:!0}:void 0,d.isDataLoaded(l))?void 0:(n.preventDefault(),l&&l.minData||s.loading.show(),d.loadData(l).then(function(){return p=!1,t.go(i.name,a)}))}}}),d.api.data.on.unauth(e,function(){t.current&&t.current.data&&t.current.data.auth&&t.go("app.home")}),e.$on("$locationChangeSuccess",function(e,n,i){if(t.current.data&&t.current.data.silentLocationChange===!0){var a=i&&i.split("?")[0]===n.split("?")[0];a&&e.preventDefault()}}),a.listen(),c.start()}]),angular.module("cesium.components",[]).component("csBadgeCertification",{bindings:{requirements:"=",parameters:"<",csId:"@"},templateUrl:"templates/common/badge_certification_count.html"}).component("csBadgeGivenCertification",{bindings:{identity:"=",parameters:"<",csId:"@"},templateUrl:"templates/common/badge_given_certification_count.html"}).component("csSortIcon",{bindings:{asc:"=",sort:"=",toggle:"<"},template:'<i class="ion-chevron-up" ng-class="{gray: !$ctrl.asc || $ctrl.sort != $ctrl.toggle}" style="position: relative; left: 5px; top:-5px; font-size: 9px;"></i><i class="ion-chevron-down" ng-class="{gray : $ctrl.asc || $ctrl.sort != $ctrl.toggle}" style="position: relative; left: -2.6px; top: 3px; font-size: 9px;"></i>'}),angular.module("cesium.directives",[]).directive("compareTo",function(){return{require:"?ngModel",link:function(e,n,t,i){i&&t.compareTo&&(i.$validators.compareTo=function(n){return n==e.$eval(t.compareTo)},e.$watch(t.compareTo,function(){i.$validate()}))}}}).directive("differentTo",function(){return{require:"?ngModel",link:function(e,n,t,i){i&&t.differentTo&&(i.$validators.differentTo=function(n){return n!=e.$eval(t.differentTo)},e.$watch(t.differentTo,function(){i.$validate()}))}}}).directive("numberFloat",function(){var e=new RegExp("^[0-9]+([.,][0-9]+)?$");return{require:"?ngModel",link:function(n,t,i,a){a&&(a.$validators.numberFloat=function(n){return a.$isEmpty(n)||e.test(n)})}}}).directive("numberInt",function(){var e=new RegExp("^[0-9]+$");return{require:"ngModel",link:function(n,t,i,a){a&&(a.$validators.numberInt=function(n){return a.$isEmpty(n)||e.test(n)})}}}).directive("email",function(){var e=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$");return{require:"ngModel",link:function(n,t,i,a){a&&(a.$validators.email=function(n){return a.$isEmpty(n)||e.test(n)})}}}).directive("requiredIf",function(){return{require:"?ngModel",link:function(e,n,t,i){i&&t.requiredIf&&(i.$validators.required=function(n){return!e.$eval(t.requiredIf)||!i.$isEmpty(n)},e.$watch(t.requiredIf,function(){i.$validate()}))}}}).directive("geoPoint",function(){return{require:"?ngModel",link:function(e,n,t,i){i&&(i.$validators.geoPoint=function(e){return i.$isEmpty(e)||angular.isDefined(e.lat)&&angular.isDefined(e.lon)})}}}).directive("copyOnClick",["$window","$document","Device","UIUtils",function(e,n,t,i){"ngInject";return{restrict:"A",link:function(e,n,a){var o=function(n){var o=a.copyOnClick;if(o&&t.clipboard.enable)t.clipboard.copy(o).then(function(){i.toast.show("INFO.COPY_TO_CLIPBOARD_DONE")})["catch"](i.onError("ERROR.COPY_CLIPBOARD"));else if(o){var r=o&&o.indexOf("\n")>=0?o.split("\n").length:1;i.popover.show(n,{scope:e,templateUrl:"templates/common/popover_copy.html",bindings:{value:a.copyOnClick,rows:r},autoselect:".popover-copy "+(r<=1?"input":"textarea")})}};n.bind("click",o),n.bind("hold",o)}}}]).directive("selectOnClick",["$window",function(e){"ngInject";return{restrict:"A",link:function(n,t,i){t.bind("click",function(){e.getSelection&&!e.getSelection().toString()&&this.value&&this.setSelectionRange(0,this.value.length)})}}}]).directive("activeLink",["$location",function(e){"ngInject";return{restrict:"A",link:function(n,t,i,a){var o,r=i.activeLink;i.activeLinkPathPrefix?(o=i.activeLinkPathPrefix.substring(1),n.location=e,n.$watch("location.path()",function(e){e&&0===e.indexOf(o)?t.addClass(r):t.removeClass(r)})):i.href&&(o=i.href.substring(1),n.location=e,n.$watch("location.path()",function(e){e&&e==o?t.addClass(r):t.removeClass(r)}))}}}]).directive("input",["$timeout",function(e){return{restrict:"E",scope:{returnClose:"=",onReturn:"&",onFocus:"&",onBlur:"&"},link:function(n,t,i){t.bind("focus",function(t){n.onFocus&&e(function(){n.onFocus()})}),t.bind("blur",function(t){n.onBlur&&e(function(){n.onBlur()})}),t.bind("keydown",function(i){13==i.which&&(n.returnClose&&t[0].blur(),n.onReturn&&e(function(){n.onReturn()}))})}}}]).directive("trustAsHtml",["$sce","$compile","$parse",function(e,n,t){return{restrict:"A",compile:function(i,a){var o=t(a.trustAsHtml),r=t(a.trustAsHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,a){n.$$addBindingInfo(i,a.trustAsHtml),t.$watch(r,function(){i.html(e.getTrustedHtml(e.trustAsHtml(o(t)))||""),n(i.contents())(t)})}}}}]).directive("modalClose",["$ionicHistory","$timeout",function(e,n){return{restrict:"AC",link:function(t,i){i.bind("click",function(){t.closeModal&&(e.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),n(function(){e.nextViewOptions({historyRoot:!1,disableAnimate:!1})},300),
t.closeModal())})}}}]).directive("csExtensionPoint",["$state","$compile","$controller","$templateCache","PluginService",function(e,n,t,i,a){var o=function(e){var n=e.templateUrl?i.get(e.templateUrl):e.template;return n?(e.controller&&(n='<ng-controller ng-controller="'+e.controller+'">'+n+"</div>"),n):(console.error("[plugin] Could not found template for extension :"+(e.templateUrl?e.templateUrl:e.template)),"")},r=function(e,n){if(angular.isDefined(n.name)){var t=a.extensions.points.getActivesByName(n.name);t.length>0&&(e.html(""),_.forEach(t,function(n){e.append(o(n))}))}return{pre:function(e,n,t){a.extensions.points.current.set(t.name)},post:function(){a.extensions.points.current.set()}}};return{restrict:"E",compile:r,scope:{content:"="}}}]).directive("onReadFile",["$parse",function(e){return{restrict:"A",scope:!1,link:function(n,t,i){var a=e(i.onReadFile);t.on("change",function(e){var t=new FileReader,i={name:this.files[0].name,size:this.files[0].size,type:this.files[0].type};t.onload=function(e){n.$applyAsync(function(){a(n,{file:{fileContent:e.target.result,fileData:i}})})},t.readAsText((e.srcElement||e.target).files[0])})}}}]).directive("dropzone",["$parse",function(e){return{restrict:"A",scope:!1,link:function(n,t,i){var a=e(i.dropzone);t.bind("dragover",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("dragleave",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("drop",function(e){e.stopPropagation(),e.preventDefault();var t={name:e.dataTransfer.files[0].name,size:e.dataTransfer.files[0].size,type:e.dataTransfer.files[0].type},i=new FileReader;i.onload=function(e){n.$apply(function(){a(n,{file:{fileContent:e.target.result,fileData:t}})})},i.readAsText(e.dataTransfer.files[0])})}}}]).directive("windowExitUnauth",["$window","csWallet",function(e,n){return{restrict:"AE",link:function(t,i){var a=e.attachEvent||e.addEventListener,o=e.attachEvent?"onunload":"unload";a(o,function(e){return n.unauth()})}}}]),angular.module("cesium.filters",["cesium.config","cesium.platform","pascalprecht.translate","cesium.translations"]).factory("filterTranslations",["$rootScope","csPlatform","csSettings","$translate",function(e,n,t,i){"ngInject";function a(){return console.debug("[filter] Loading translations for locale [{0}]".format(i.use())),i(["COMMON.DATE_PATTERN","COMMON.DATE_SHORT_PATTERN","COMMON.UD","COMMON.DAYS"]).then(function(e){s.DATE_PATTERN=e["COMMON.DATE_PATTERN"],"COMMON.DATE_PATTERN"===s.DATE_PATTERN&&(s.DATE_PATTERN="YYYY-MM-DD HH:mm"),s.DATE_SHORT_PATTERN=e["COMMON.DATE_SHORT_PATTERN"],"COMMON.DATE_SHORT_PATTERN"===s.DATE_SHORT_PATTERN&&(s.DATE_SHORT_PATTERN="YYYY-MM-DD"),s.DATE_MONTH_YEAR_PATTERN=e["COMMON.DATE_MONTH_YEAR_PATTERN"],"COMMON.DATE_MONTH_YEAR_PATTERN"===s.DATE_MONTH_YEAR_PATTERN&&(s.DATE_MONTH_YEAR_PATTERN="MMM YY"),s.DAYS=e["COMMON.DAYS"],"COMMON.DAYS"===s.DAYS&&(s.DAYS="days"),s.UD=e["COMMON.UD"],"COMMON.UD"===s.UD&&(s.UD="UD")})}var o,r=!1,s=this;return s.ready=function(){return r?$q.when(data):o||s.start()},s.start=function(){return o=n.ready().then(a).then(function(){r=!0,t.api.locale.on.changed(e,a,this)})},s.start(),s}]).filter("formatInteger",function(){return function(e){return e?e<1e7?numeral(e).format("0,0"):numeral(e).format("0,0.000 a"):"0"}}).filter("formatAmount",["csConfig","csSettings","csCurrency","$filter",function(e,n,t,i){function a(e,n){var i=n&&n.currentUD?n.currentUD:t.data.currentUD;if(!i)return void console.warn("formatAmount: currentUD not defined");var a=e/i;return a=Math.abs(e)<u&&0!==e?"~ 0":numeral(a).format(c),n&&n.currency?a+" "+l(n.currency,!0):a}function o(e,n){var t=numeral(e/100).format(e<-1e9||e>1e9?s:r);return n&&n.currency?t+" "+l(n.currency,!1):t}var r="0,0.0"+Array(e.decimalCount||4).join("0"),s="0,0.000 a",l=i("currencySymbol"),c=r+"0",u=1/Math.pow(10,(e.decimalCount||4)+1);return function(e,t){if(void 0!==e)return(t&&angular.isDefined(t.useRelative)?t.useRelative:n.data.useRelative)?a(e,t):o(e,t)}}]).filter("formatAmountNoHtml",["csConfig","csSettings","csCurrency","$filter",function(e,n,t,i){function a(e,n){var i=n&&n.currentUD?n.currentUD:t.data.currentUD;if(!i)return void console.warn("formatAmount: currentUD not defined");var a=e/i;return a=Math.abs(a)<r&&0!==e?"~ 0":numeral(a).format(s),n&&n.currency?a+" "+l(n.currency,!0):a}function o(e,n){var t=numeral(e/100).format(e>-1e9&&e<1e9?"0,0.00":"0,0.000 a");return n&&n.currency?t+" "+l(n.currency,!1):t}var r=1/Math.pow(10,e.decimalCount||4),s="0,0.0"+Array(e.decimalCount||4).join("0"),l=i("currencySymbolNoHtml");return function(e,t){if(void 0!==e)return(t&&angular.isDefined(t.useRelative)?t.useRelative:n.data.useRelative)?a(e,t):o(e,t)}}]).filter("currencySymbol",["filterTranslations","$filter","csSettings",function(e,n,t){return function(i,a){return i?(angular.isDefined(a)?a:t.data.useRelative)?e.UD+"<sub>"+n("abbreviate")(i)+"</sub>":n("abbreviate")(i):""}}]).filter("currencySymbolNoHtml",["filterTranslations","$filter","csSettings",function(e,n,t){return function(i,a){return i?(angular.isDefined(a)?a:t.data.useRelative)?e.UD+" "+n("abbreviate")(i):n("abbreviate")(i):""}}]).filter("formatDecimal",["csConfig","csCurrency",function(e,n){var t=1/Math.pow(10,e.decimalCount||4),i="0,0.0"+Array(e.decimalCount||4).join("0");return function(e){return void 0===e?"0":e===1/0||e===-(1/0)?(console.warn("formatDecimal: division by zero ? (is currentUD defined ?) = "+n.data.currentUD),"error"):Math.abs(e)<t?"~ 0":numeral(e).format(i)}}]).filter("formatNumeral",function(){return function(e,n){return void 0===e?"0":Math.abs(e)<1e-4?"~ 0":numeral(e).format(n)}}).filter("formatDate",["filterTranslations",function(e){return function(n){return n?moment.unix(parseInt(n)).local().format(e.DATE_PATTERN||"YYYY-MM-DD HH:mm"):""}}]).filter("formatDateShort",["filterTranslations",function(e){return function(n){return n?moment.unix(parseInt(n)).local().format(e.DATE_SHORT_PATTERN||"YYYY-MM-DD"):""}}]).filter("formatDateMonth",["filterTranslations",function(e){return function(n){return n?moment.unix(parseInt(n)).local().format(e.DATE_MONTH_YEAR_PATTERN||"MMM YY"):""}}]).filter("formatDateForFile",["filterTranslations",function(e){return function(n){return n?moment.unix(parseInt(n)).local().format(e.DATE_FILE_PATTERN||"YYYY-MM-DD"):""}}]).filter("formatTime",function(){return function(e){return e?moment.unix(parseInt(e)).local().format("HH:mm"):""}}).filter("formatFromNow",function(){return function(e){return e?moment.unix(parseInt(e)).fromNow():""}}).filter("formatDurationTo",function(){return function(e){return e?moment.unix(moment().utc().unix()+parseInt(e)).fromNow():""}}).filter("formatDuration",function(){return function(e){return e?moment(0).from(moment.unix(parseInt(e)),!0):""}}).filter("formatDurationTime",["filterTranslations",function(e){return function(n){if(!n)return"";var t=n&&n<0?"-":"+";n=Math.abs(n);var i=Math.trunc(n/3600/24),a=Math.trunc(n/3600-24*i),o=Math.trunc(n/60-24*i*60-60*a);return i>0?t+i+" "+e.DAYS+" "+a+"h "+o+"m":a>0?t+a+"h "+o+"m":t+o+"m"}}]).filter("formatDurationMs",function(){return function(e){return e?e<1e3?e+"ms":e/1e3+"s":""}}).filter("formatPeriod",function(){return function(e){if(!e)return null;var n=moment(0).from(moment.unix(parseInt(e)),!0);return n.split(" ").slice(-1)[0]}}).filter("formatFromNowShort",function(){return function(e){return e?moment.unix(parseInt(e)).fromNow(!0):""}}).filter("capitalize",function(){return function(e){return e?(e=e.toLowerCase(),e.substring(0,1).toUpperCase()+e.substring(1)):""}}).filter("abbreviate",function(){var e={};return function(n){var t=n||"";if(e[t])return e[t];if(t.length>3){for(var i="",a=["-","_"," "],o=0;o<t.length;o++){var r=t[o];0===o?i="g"===r||"G"===r?"":r:o>0&&a.indexOf(t[o-1])!=-1&&(i+=r)}t=i.toUpperCase()}else t=t.toUpperCase(),"G"===t.charAt(0)&&(t=""+(t.length>1?t.substr(1):""));return e[n]=t,t}}).filter("upper",function(){return function(e){return e?e.toUpperCase():""}}).filter("formatPubkey",function(){return function(e){return e?e.substr(0,8):""}}).filter("formatHash",function(){return function(e){return e?e.substr(0,4)+e.substr(e.length-4):""}}).filter("formatCategory",function(){return function(e){return e&&e.length>28?e.substr(0,25)+"...":e}}).filter("formatSlug",function(){return function(e){return e?encodeURIComponent(e.toLowerCase().replace(/<[^>]+>/g,"").replace(/[^\w ]+/g,"").replace(/ +/g,"-")):""}}).filter("formatEncodeURI",function(){return function(e){return e?encodeURIComponent(e):""}}).filter("truncText",function(){return function(e,n){return n=n||500,!e||e.length<=n?e:e.substr(0,n)+"..."}}).filter("truncUrl",function(){return function(e,n){n=n||25;var t=e.startsWith("http://")?7:e.startsWith("https://")?8:0;return!e||e.length-t<=n?e.substr(t):e.substr(t,n)+"..."}}).filter("trustAsHtml",["$sce",function(e){return function(n){return e.trustAsHtml(n)}}]),angular.module("cesium.platform",["ngIdle","cesium.config","cesium.services"]).config(["$translateProvider","csConfig",function(e,n){"ngInject";e.uniformLanguageTag("bcp47").determinePreferredLanguage().useSanitizeValueStrategy(null).fallbackLanguage([n.fallbackLanguage?n.fallbackLanguage:"en"]).useLoaderCache(!0)}]).config(["$httpProvider","csConfig",function(e,n){"ngInject";e.defaults.timeout=n.timeout?n.timeout:3e5,e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]).config(["$compileProvider","csConfig",function(e,n){"ngInject";e.debugInfoEnabled(!!n.debug)}]).config(["$animateProvider",function(e){"ngInject";e.classNameFilter(/\banimate-/)}]).config(["CacheFactoryProvider","csConfig",function(e,n){"ngInject";angular.extend(e.defaults,{maxAge:n.cacheTimeMs||6e4})}]).config(["screenmatchConfigProvider",function(e){"ngInject";e.config.rules="bootstrap"}]).config(["$ionicConfigProvider",function(e){"ngInject";var n=ionic.Platform.isIOS();e.scrolling.jsScrolling(n),e.views.maxCache(5)}]).config(["IdleProvider","csConfig",function(e,n){"ngInject";e.idle(n.logoutIdle||600),e.timeout(n.logoutTimeout||15)}]).factory("$exceptionHandler",function(){"ngInject";return function(e,n){n?console.error(e,n):console.error(e)}}).factory("csPlatform",["ionicReady","$rootScope","$q","$state","$translate","$timeout","UIUtils","BMA","Device","csHttp","csConfig","csSettings","csCurrency","csWallet",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m){"ngInject";function E(){if(!y){var e=n.$on("$stateChangeStart",function(e,n,t,a){e.defaultPrevented||"app.home"===n.name||"app.settings"===n.name||(e.preventDefault(),A?A.then(function(){i.go(n.name,t)}):r.loading.hide())});y=e}}function g(){y&&y(),y=null}function b(e){if(e)return!0;C=C||d.data.node;var n=d.data.fallbackNodes&&D<d.data.fallbackNodes.length&&d.data.fallbackNodes[D++];if(!n)throw"ERROR.CHECK_NETWORK_CONNECTION";var t=n.host+(n.port||80==n.port||443==n.port?"":":"+n.port);return a("CONFIRM.USE_FALLBACK_NODE",{old:s.server,"new":t}).then(function(e){return r.alert.confirm(e)}).then(function(e){if(e)return d.data.node=n,d.data.node.temporary=!0,c.cache.clear(),s.copy(n).then(b)})}function h(){return L}function f(){var e=d.data.latestReleaseUrl&&c.uri.parse(d.data.latestReleaseUrl);return e?c.get(e.host,"https:"==e.protocol?443:e.port,"/"+e.pathname)().then(function(e){if(e&&e.name&&e.tag_name&&e.html_url)return{version:e.name,url:e.html_url,isNewer:c.version.compare(u.version,e.name)<0}})["catch"](function(e){console.error("[platform] Failed to get Cesium latest version",e)}):t.when()}function T(){S=[s.api.node.on.restart(n,O,this)]}function v(){_.forEach(S,function(e){e()}),S=[]}function I(){return L?t.when():A||N()}function O(){return console.debug("[platform] restarting csPlatform"),R().then(function(){return o(N,200)})}function N(){return E(),A=e().then(t.all([l.ready(),d.ready()])).then(function(){return s.ready().then(b)}).then(p.ready).then(m.ready).then(function(){g(),T(),A=null,L=!0})["catch"](function(e){throw A=null,L=!1,"app.home"!==i.current.name&&i.go("app.home",{error:"peer"}),e})}function R(){return L?(v(),m.stop(),p.stop(),s.stop(),o(function(){g(),L=!1,A=null},500)):t.when()}var C,A,S,y,D=0,L=!1;return{disableChangeState:E,isStarted:h,ready:I,restart:O,start:N,stop:R,version:{latest:f}}}]).run(["$rootScope","$translate","$state","$window","$urlRouter","ionicReady","Device","UIUtils","$ionicConfig","PluginService","csPlatform","csWallet","csSettings","csConfig","csCurrency",function(e,n,t,i,a,o,r,s,l,c,u,d,p,m,E){"ngInject";e.config=m,e.settings=p.data,e.currency=E.data,e.device=r;var g=i.location.href.indexOf("#");e.rootPath=g!=-1?i.location.href.substr(0,g):i.location.href,console.debug("[app] Root path is ["+e.rootPath+"]"),m.httpsMode!==!0&&"true"!=m.httpsMode&&"force"!==m.httpsMode||"https:"==i.location.protocol||e.$on("$stateChangeStart",function(n,a,o,r){var s="https"+e.rootPath.substr(4)+t.href(a,o);m.httpsModeDebug?console.debug("[app] [httpsMode] --- Should redirect to: "+s):i.location.href=s}),o().then(function(){return r.keyboard.enable&&(r.keyboard.hideKeyboardAccessoryBar(!0),ionic.Platform.isIOS()&&r.keyboard.disableScroll(!0)),"a"!=ionic.Platform.grade.toLowerCase()&&(console.info("[app] Disabling UI effects, because plateform's grade is ["+ionic.Platform.grade+"]"),s.setEffects(!1)),window.StatusBar&&StatusBar.styleDefault(),u.version.latest().then(function(n){n&&n.isNewer?(console.info("[app] New release detected [{0}]".format(n.version)),e.newRelease=n):console.info("[app] Current version [{0}] is the latest release".format(m.version))}),u.ready()})}]),"function"!=typeof String.prototype.startsWith&&(console.debug("Adding String.prototype.startsWith() -> was missing on this platform"),String.prototype.startsWith=function(e){return 0===this.indexOf(e)}),"function"!=typeof String.prototype.trim){console.debug("Adding String.prototype.trim() -> was missing on this platform");var rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(rtrim,"")}}Math&&"function"!=typeof Math.trunc&&(console.debug("Adding Math.trunc() -> was missing on this platform"),Math.trunc=function(e){return(e-.5).toFixed()}),"function"!=typeof String.prototype.format&&(console.debug("Adding String.prototype.format() -> was missing on this platform"),String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(n,t){return"undefined"!=typeof e[t]?e[t]:n})});